# 时间轴语法

你不需要按照时间顺序编写时间轴，程序会自动按照时间顺序显示。

## 显式语句（你实际上能在悬浮窗中看到的部分）

### 显式语句格式

```text
时间 "提示文本" (tts "语音文本")
```

### 显式语句参数

- 时间（数字）
  - 可以是整数，如 `34`；也可以是浮点数，如 `84.38`；还可以是时间格式，如 `01:35`；

- 提示文本（字符串）
  - 文本就是显示在悬浮窗中的文本，如 `天赐祝福` 或 `治疗MT`。
  - 你可以使用 `<技能名>` 的特殊语法，来生成一张技能图标的图片。并且可以接上一个 `~` 来快速在后面重复该技能名称的字符串，如 `<天赐祝福>~` 在悬浮窗中实际显示为 `[图片]天赐祝福`

- 语音文本（字符串）
  - 该参数用于指定该语句的语音文本，如 `tts "天赐祝福"`，则会在该语句时间判定前 1 秒，播放 `天赐祝福` 的语音

## 匹配语句（隐藏的、用于匹配时间轴的）

大部分情况下，你不需要手动编写这些匹配语句。

在没有血量轴或快慢轴的 BOSS 战斗中，不需要编写匹配语句。

在使用FFLOGS导入时，会自动生成部分匹配语句，你可以在 [timelineSpecialRules.ts](https://github.com/Souma-Sumire/ff14-overlay-vue/blob/main/src/utils/timelineSpecialRules.ts) 查看全部预置规则。

### 匹配语句格式

```text
时间 "注释文本" sync /正则表达式/ window 前匹配,后匹配 jump 时间
```

### 匹配语句参数

- sync 正则表达式
  - 一个标准的 Javascript 正则表达式。用于匹配 ACT LogLine 日志，若匹配成功，则触发同步（参考下方window、jump的说明）
  - 事件修饰符：可以在 sync 后面添加 `.once` 修饰符，来设置该条目在整场战斗中仅会被匹配一次，如 `sync.once /正则表达式/`

- window 数字,数字
  - 控制 sync 匹配的时间范围，第一个数字代表向前的时间范围，第二个数字代表向后的时间范围
  - 例如，在：`50 "同步语句" sync /正则表达式/ window 2,3`，当正则表达式匹配，且当前战斗时间处于第 48 ~ 53 秒内，时间轴会跳转至第 50 秒
  - 若不填写，默认为 `2.5,2.5`

- jump 数字
  - 改写时间轴匹配成功时跳转的时间点，当 sync 匹配成功，且符合 window 的判定条件时候，时间轴会跳转至 `jump` 指定的数字时间点
  - 只支持秒数格式，如 `120`
  - 例如，在：`120 "分支判断" sync /正则表达式/ window 20,5 jump 300`，当正则表达式匹配，且当前战斗时间处于第 100 ~ 125 秒内，时间轴会跳转至第 300 秒
  - 跳转至 0 意味着停止时间轴
