import{S as e,d as t,P as o,s,b as n,ai as a,I as u,Q as l,r as d,h as i,av as r,i as c,b8 as m,aa as v,g as f,Y as p,bM as y,V as b,cz as h,bO as M,bY as g,bN as E}from"./index-BN0rpS3H.js";import{P as w}from"./vnode-CpinGL0Z.js";import{t as x}from"./index-Bv4buVzT.js";import{a as k}from"./scroll-DYalxdY4.js";const Y=t=>{if(!t)return{onClick:e,onMousedown:e,onMouseup:e};let o=!1,s=!1;return{onClick:e=>{o&&s&&t(e),o=s=!1},onMousedown:e=>{o=e.target===e.currentTarget},onMouseup:e=>{s=e.target===e.currentTarget}}},L=o({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:l([String,Array,Object])},zIndex:{type:l([String,Number])}});const C=t({name:"ElOverlay",props:L,emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:t,emit:o}){const l=s("overlay"),{onClick:d,onMousedown:i,onMouseup:r}=Y(e.customMaskEvent?void 0:e=>{o("click",e)});return()=>e.mask?n("div",{class:[l.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:i,onMouseup:r},[u(t,"default")],w.STYLE|w.CLASS|w.PROPS,["onClick","onMouseup","onMousedown"]):a("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[u(t,"default")])}}),z=(e,t,o,s)=>{const n={offsetX:0,offsetY:0},a=d(!1),u=(t,o)=>{if(e.value){const{offsetX:a,offsetY:u}=n,l=e.value.getBoundingClientRect(),d=l.left,i=l.top,r=l.width,c=l.height,v=document.documentElement.clientWidth,f=document.documentElement.clientHeight,p=-d+a,y=-i+u,b=v-d-r+a,h=f-i-(c<f?c:0)+u;(null==s?void 0:s.value)||(t=Math.min(Math.max(t,p),b),o=Math.min(Math.max(o,y),h)),n.offsetX=t,n.offsetY=o,e.value.style.transform=`translate(${m(t)}, ${m(o)})`}},l=e=>{const t=e.clientX,o=e.clientY,{offsetX:s,offsetY:l}=n,d=e=>{a.value||(a.value=!0);const n=s+e.clientX-t,d=l+e.clientY-o;u(n,d)},i=()=>{a.value=!1,document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",i)};document.addEventListener("mousemove",d),document.addEventListener("mouseup",i)},v=()=>{t.value&&e.value&&(t.value.removeEventListener("mousedown",l),window.removeEventListener("resize",f))},f=()=>{const{offsetX:e,offsetY:t}=n;u(e,t)};return i(()=>{r(()=>{o.value?t.value&&e.value&&(t.value.addEventListener("mousedown",l),window.addEventListener("resize",f)):v()})}),c(()=>{v()}),{isDragging:a,resetPosition:()=>{n.offsetX=0,n.offsetY=0,e.value&&(e.value.style.transform="")},updatePosition:f}},X=(e,t={})=>{v(e)||x("[useLockscreen]","You need to pass a ref param to this function");const o=t.ns||s("popup"),n=f(()=>o.bm("parent","hidden"));if(!p||y(document.body,n.value))return;let a=0,u=!1,l="0";const d=()=>{setTimeout(()=>{"undefined"!=typeof document&&u&&document&&(document.body.style.width=l,E(document.body,n.value))},200)};b(e,e=>{if(!e)return void d();u=!y(document.body,n.value),u&&(l=document.body.style.width,M(document.body,n.value)),a=k(o.namespace.value);const t=document.documentElement.clientHeight<document.body.scrollHeight,s=g(document.body,"overflowY");a>0&&(t||"scroll"===s)&&u&&(document.body.style.width=`calc(100% - ${a}px)`)}),h(()=>d())};export{C as E,X as a,Y as b,z as u};
