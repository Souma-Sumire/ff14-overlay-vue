import"./index-9124d3bf.js";/* empty css                *//* empty css                      *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css               *//* empty css                  *//* empty css                 *//* empty css                  *//* empty css                        */import{t as e,av as o,V as l,r as t,c as a,v as n,x as s,F as i,O as m,u as r,M as u,E as d,A as f,J as c,L as p,a9 as h,S as g,K as V}from"./vue-vendor-80a2ed00.js";import{g as w}from"./actionChinese-e2356100.js";import{a as C}from"./overlay_plugin_api-974cdd44.js";import{u as v}from"./index-b29bea73.js";import{d as x,f as A,e as I,m as z,n as D,i as S,h as y,k as U,$ as b,q as X}from"./element-plus-22d49fc5.js";import{_ as Y}from"./_plugin-vue_export-helper-6a8c15be.js";const T={};const j={class:"container"},_={style:{width:"10rem"}},F={class:"noCSS"},P={class:"noCSS"},k={class:"actionID"},$=Y(e({__name:"castingToChinese",setup(e){o(e=>({"73cc04e7":r(q),"1e99ffbb":r(R),"1e99ffbc":r(G),"415664b7":r(H),"576b4d8d":r(B),"65ae06d5":r(J),"65ae06d6":r(W),"1a4a745b":r(O),"3501ca9a":r(Z),"3501ca98":r(Q),a0413ed6:r(M),c01d9452:r(ee),c01d9450:r(oe)}));const Y=new URLSearchParams(window.location.href.split("?")[1]);function $(e){const o=Number.parseInt(e[4],16),l=e[2],t=e[5],a=T[o];if(a)return a;const n=w(o);return n||(l.startsWith("4")&&t.includes("unknown"),t)}class N{name;startTime;castTime;overTime;actionId;constructor(e){this.name=$(e),this.startTime=Date.now(),this.castTime=1e3*Number(e[8]),this.overTime=this.startTime+this.castTime,this.actionId=Number.parseInt(e[4],16)}}const K=l({targetCast:void 0}),L=[{value:"Target",label:"当前目标"},{value:"Focus",label:"焦点目标"}],E=t({width:265,showCountdown:!1,showProgress:!1,showActionChinese:!0,showActionID:!1,offsetProgressX:0,offsetProgressY:-22,offsetCountdownX:240,offsetCountdownY:-5,offsetActionChineseX:275,offsetActionChineseY:-45,offsetActionIDX:10,offsetActionIDY:-5,ping:80,keep:100,fontSizeCountDown:17,fontSizeActionName:20,fontFamily:"SmartisanHei",targetKey:"Target"});v("castingToChineseFix",E,localStorage,{mergeDefaults:!0});const M=a(()=>`${E.value.width}px`),q=a(()=>E.value.showCountdown?1:0),H=a(()=>E.value.showProgress?1:0),B=a(()=>E.value.showActionChinese?1:0),O=a(()=>E.value.showActionID?1:0),R=a(()=>`${E.value.offsetCountdownX}px`),G=a(()=>-1*E.value.offsetCountdownY+"px"),J=a(()=>`${E.value.offsetActionChineseX}px`),W=a(()=>-1*E.value.offsetActionChineseY+"px"),Z=a(()=>`${E.value.offsetActionIDX}px`),Q=a(()=>-1*E.value.offsetActionIDY+"px"),ee=a(()=>`${E.value.offsetProgressX}px`),oe=a(()=>-1*E.value.offsetProgressY+"px"),le=new Map,te=t(0),ae=E.value.ping,ne=t(/^(?:1|true|on)$/i.test(Y.get("showSettings")||"")||"flex"===document.getElementById("unlocked")?.style?.display);function se(){localStorage.removeItem("castingToChinese"),location.reload()}return C("EnmityTargetData",e=>{K.targetCast=le.get(e[E.value.targetKey]?.ID)}),C("LogLine",e=>{"20"===e.line[0]?le.set(Number.parseInt(e.line[2],16),new N(e.line)):"23"===e.line[0]&&le.delete(Number.parseInt(e.line[2],16))}),C("ChangeZone",()=>le.clear()),requestAnimationFrame(function e(){te.value=Date.now(),requestAnimationFrame(e)}),document.addEventListener("onOverlayStateUpdate",e=>{ne.value=!1===e?.detail?.isLocked}),(e,o)=>{const l=x,t=A,a=I,w=D,C=z,v=y,Y=S,T=U,$=b,N=X;return s(),n("div",j,[i(u(T,{class:"settings"},{default:d(()=>[f("form",null,[o[20]||(o[20]=c(" 宽度: ")),u(l,{modelValue:r(E).width,"onUpdate:modelValue":o[0]||(o[0]=e=>r(E).width=e),min:20,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),f("form",null,[o[21]||(o[21]=c("显示倒计时: ")),u(t,{modelValue:r(E).showCountdown,"onUpdate:modelValue":o[1]||(o[1]=e=>r(E).showCountdown=e)},null,8,["modelValue"])]),f("form",null,[o[22]||(o[22]=c("显示进度条: ")),u(t,{modelValue:r(E).showProgress,"onUpdate:modelValue":o[2]||(o[2]=e=>r(E).showProgress=e)},null,8,["modelValue"])]),f("form",null,[o[23]||(o[23]=c("显示中文: ")),u(t,{modelValue:r(E).showActionChinese,"onUpdate:modelValue":o[3]||(o[3]=e=>r(E).showActionChinese=e)},null,8,["modelValue"])]),f("form",null,[o[24]||(o[24]=c("显示ID: ")),u(t,{modelValue:r(E).showActionID,"onUpdate:modelValue":o[4]||(o[4]=e=>r(E).showActionID=e)},null,8,["modelValue"])]),f("form",null,[o[25]||(o[25]=c(" 延迟(ms): ")),u(l,{modelValue:r(E).ping,"onUpdate:modelValue":o[5]||(o[5]=e=>r(E).ping=e),min:0,max:1e4,size:"small","controls-position":"right"},null,8,["modelValue"])]),f("form",null,[o[26]||(o[26]=c(" 保留(ms): ")),u(l,{modelValue:r(E).keep,"onUpdate:modelValue":o[6]||(o[6]=e=>r(E).keep=e),min:0,max:1e5,size:"small","controls-position":"right"},null,8,["modelValue"])]),f("form",null,[o[27]||(o[27]=c(" 进度条偏移X: ")),u(l,{modelValue:r(E).offsetProgressX,"onUpdate:modelValue":o[7]||(o[7]=e=>r(E).offsetProgressX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),f("form",null,[o[28]||(o[28]=c(" 进度条偏移Y: ")),u(l,{modelValue:r(E).offsetProgressY,"onUpdate:modelValue":o[8]||(o[8]=e=>r(E).offsetProgressY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),f("form",null,[o[29]||(o[29]=c(" 倒计时偏移X: ")),u(l,{modelValue:r(E).offsetCountdownX,"onUpdate:modelValue":o[9]||(o[9]=e=>r(E).offsetCountdownX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),f("form",null,[o[30]||(o[30]=c(" 倒计时偏移Y: ")),u(l,{modelValue:r(E).offsetCountdownY,"onUpdate:modelValue":o[10]||(o[10]=e=>r(E).offsetCountdownY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),f("form",null,[o[31]||(o[31]=c(" 中文偏移X: ")),u(l,{modelValue:r(E).offsetActionChineseX,"onUpdate:modelValue":o[11]||(o[11]=e=>r(E).offsetActionChineseX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),f("form",null,[o[32]||(o[32]=c(" 中文偏移Y: ")),u(l,{modelValue:r(E).offsetActionChineseY,"onUpdate:modelValue":o[12]||(o[12]=e=>r(E).offsetActionChineseY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),f("form",null,[o[33]||(o[33]=c(" ID偏移X: ")),u(l,{modelValue:r(E).offsetActionIDX,"onUpdate:modelValue":o[13]||(o[13]=e=>r(E).offsetActionIDX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),f("form",null,[o[34]||(o[34]=c(" ID偏移Y: ")),u(l,{modelValue:r(E).offsetActionIDY,"onUpdate:modelValue":o[14]||(o[14]=e=>r(E).offsetActionIDY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),f("form",null,[o[35]||(o[35]=c(" 倒计时字号(px): ")),u(l,{modelValue:r(E).fontSizeCountDown,"onUpdate:modelValue":o[15]||(o[15]=e=>r(E).fontSizeCountDown=e),min:1,max:100,size:"small","controls-position":"right"},null,8,["modelValue"])]),f("form",null,[o[36]||(o[36]=c(" 中文字号(px): ")),u(l,{modelValue:r(E).fontSizeActionName,"onUpdate:modelValue":o[16]||(o[16]=e=>r(E).fontSizeActionName=e),min:1,max:100,size:"small","controls-position":"right"},null,8,["modelValue"])]),f("form",_,[o[37]||(o[37]=c(" 字体: ")),u(a,{modelValue:r(E).fontFamily,"onUpdate:modelValue":o[17]||(o[17]=e=>r(E).fontFamily=e),size:"small",clearable:"",onClear:o[18]||(o[18]=e=>r(E).fontFamily="SmartisanHei")},null,8,["modelValue"])]),f("form",F,[u(C,{modelValue:r(E).targetKey,"onUpdate:modelValue":o[19]||(o[19]=e=>r(E).targetKey=e),placeholder:"Select",size:"small",teleported:!1},{default:d(()=>[(s(),n(p,null,h(L,e=>u(w,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),f("form",P,[u(Y,{teleported:!1,title:"确定要重置？",onConfirm:se},{reference:d(()=>[u(v,null,{default:d(()=>o[38]||(o[38]=[c("重置全部用户设置")])),_:1,__:[38]})]),_:1})])]),_:1},512),[[m,r(ne)]]),i(u(N,{style:g({fontFamily:r(E).fontFamily})},{default:d(()=>[f("div",{style:g({fontSize:`${r(E).fontSizeCountDown}px`}),class:"countdown"},V(Math.max(((r(K).targetCast?.overTime??1)-r(te)-r(ae))/1e3,0).toFixed(2)),5),u($,{percentage:Math.min((r(te)-(r(K).targetCast?.startTime??1)+r(ae))/(r(K).targetCast?.castTime??1)*100,100),"stroke-width":8,indeterminate:!1,"show-text":!1,color:"#fbfff9",class:"progress"},null,8,["percentage"]),f("div",k,V(r(K).targetCast?.actionId)+"("+V(r(K).targetCast?.actionId.toString(16).toUpperCase())+") ",1),f("div",{style:g({fontSize:`${r(E).fontSizeActionName}px`}),class:"actionChinese"},V(r(K).targetCast?.name),5)]),_:1},8,["style"]),[[m,r(K).targetCast&&r(te)-r(K).targetCast.overTime+r(ae)<r(E).keep]])])}}}),[["__scopeId","data-v-8fcb4200"]]);export{$ as default};
