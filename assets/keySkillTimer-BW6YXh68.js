import{_ as e}from"./ActWrapper-CkoTEZYB.js";import{d as i,h as s,i as t,bk as l,k as a,w as o,o as n,c as r,D as c,u as m,a as p,F as k,m as u,q as d,s as y,t as f,b as j,e as S}from"./index-C_vJrq5H.js";/* empty css                  */import{u as g}from"./useDemo-KSUu11yU.js";import{u as w}from"./useDev-Cul7tw2w.js";import{u as _}from"./useZone-BE3nX-Ih.js";import{u as b,c as v}from"./keySkills-DU1DpGyx.js";import{a as h,r as C}from"./overlay_plugin_api-DHbPkDtN.js";import{E as T}from"./index-BiQCIIgT.js";import{_ as x}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./el-card-Cy19VjyD.js";import"./zoneInfo-Kvs06RCG.js";import"./zone_info-C8YMEhdS.js";import"./content_type-uhloenTS.js";import"./demoParty-CbAN2XLj.js";import"./util-BSI8OlRX.js";import"./actionChinese-DM96CSZ4.js";import"./chineseToIcon-xFdmTerz.js";import"./status-DO8_dJa3.js";import"./tts-BkZGqxam.js";import"./index-qmBAyEMl.js";import"./use-form-common-props-gFrq1vXC.js";const $={class:"demo-text"},P={key:0,class:"key-skills-timer-container"},I={class:"skills-grid"},D=["onClick"],K={class:"buff-filter"},L=["src"],F={key:1,class:"test"},z=x(i({__name:"keySkillTimer",setup(i){const x=b(),{zoneType:z}=_(),E=s(()=>"Pvp"===z.value),A=w(),N=g(),W=e=>{x.party=e.party.filter(e=>e.inParty)},q=e=>{if(!E.value)if("21"===e.line[0]||"22"===e.line[0]&&"0"===e.line[45]){const i=Number.parseInt(e.line[4],16),s=v(i),t=e.line[2];x.triggerSkill([i,s],t,!0)}else"33"===e.line[0]&&["40000010","4000000F"].includes(e.line[3])&&x.wipe()};function B(e){x.speed=e,x.usedSkills.forEach(e=>{x.triggerSkill([e.id],e.owner.id,!1)})}function G(){window.open("/ff14-overlay-vue/#/keySkillTimerSettings","_blank")}return t(()=>{h("PartyChanged",W),h("LogLine",q)}),l(()=>{C("PartyChanged",W),C("LogLine",q),Object.values(x.skillStates).forEach(e=>{e.rafId&&cancelAnimationFrame(e.rafId)})}),(i,s)=>{const t=T,l=e;return n(),a(l,null,{readme:o(()=>[p("span",$,[S(f(i.$t("keySkillTimer.demo-text1")),1),s[3]||(s[3]=p("br",null,null,-1)),S(" "+f(i.$t("keySkillTimer.demo-text2")),1)])]),default:o(()=>[m(E)?c("",!0):(n(),r("div",P,[p("div",I,[(n(!0),r(k,null,u(m(x).usedSkills,e=>(n(),r("div",{key:e.instanceKey,class:y(["buff-container",`line${e.line}`]),style:d({zIndex:m(N)||m(A)?99:void 0}),onClick:()=>m(N)||m(A)?function(e,i){(A||N)&&x.triggerSkill([e.id],e.owner.id,i)}(e,!0):null},[p("div",K,[p("span",{class:y(["duration",[m(x).skillStates[e.instanceKey]?.isRecast?"cooldown":"active"]])},f(m(x).skillStates[e.instanceKey]?.text||""),3),p("img",{src:e.src},null,8,L),m(x).skillStates[e.instanceKey]?.active?(n(),r("div",{key:m(x).skillStates[e.instanceKey]?.startTime||0,class:"cooldown-layer",style:d({clipPath:`inset(${m(x).skillStates[e.instanceKey]?.clipPercent??0}% 0 0 0)`})},null,4)):c("",!0)]),e.owner.hasDuplicate.skill||e.owner.hasDuplicate.job?(n(),r("span",{key:0,class:y(`job has-duplicate ${e.owner.hasDuplicate.job?"duplicate-show-name":"duplicate-show-job-name"} ${e.owner.jobIcon.toLowerCase()}`)},f(e.owner.hasDuplicate.job?e.owner.name:e.owner.jobName),3)):c("",!0)],14,D))),128))])])),m(A)||m(N)?(n(),r("div",F,[j(t,{onClick:m(x).demoFullParty},{default:o(()=>[S(f(i.$t("keySkillTimer.test-all-jobs")),1)]),_:1},8,["onClick"]),j(t,{onClick:s[0]||(s[0]=()=>m(x).shuffle())},{default:o(()=>[S(f(i.$t("keySkillTimer.test-8-party")),1)]),_:1}),m(A)?(n(),a(t,{key:0,onClick:s[1]||(s[1]=()=>B(1))},{default:o(()=>[S(f(i.$t("keySkillTimer.test-trigger-1x")),1)]),_:1})):c("",!0),m(A)?(n(),a(t,{key:1,onClick:s[2]||(s[2]=()=>B(5))},{default:o(()=>[S(f(i.$t("keySkillTimer.test-trigger-5x")),1)]),_:1})):c("",!0),j(t,{onClick:m(x).wipe},{default:o(()=>[S(f(i.$t("keySkillTimer.test-wipe")),1)]),_:1},8,["onClick"]),j(t,{type:"primary",onClick:G},{default:o(()=>[S(f(i.$t("keySkillTimer.settings")),1)]),_:1})])):c("",!0)]),_:1})}}}),[["__scopeId","data-v-fc7b96db"]]);export{z as default};
