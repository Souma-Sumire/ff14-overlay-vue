import"./index-bf304f8e.js";/* empty css                      *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                  *//* empty css                 *//* empty css                        */import{t as l,r as e,V as a,c as o,e as t,U as u,v as s,A as n,D as r,F as m,O as i,u as p,J as d,M as f,E as c,L as V,aa as b,I as v,aB as g,x as h,S as w,G as y,K as z}from"./vue-vendor-6f37fd53.js";import{u as C}from"./useDemo-dea69d31.js";import{a as U,r as x}from"./overlay_plugin_api-974cdd44.js";import{u as j}from"./index-c9f4301b.js";import{d as _,e as A,f as $,h as D,i as S}from"./element-plus-cb4c922a.js";import{_ as I}from"./_plugin-vue_export-helper-6a8c15be.js";const B={class:"dnc-overlay"},F={class:"settings"},E=I(l({__name:"dnc",setup(l){g(l=>({"0633bb12":p(G),"1a1f098b":p(K),"68568aff":p(W),"853eddf8":p(X),"2ac2be36":p(J),"16246e39":p(Y),"6d61d5ec":p(q)}));const I=e(0),E=a({playerId:"",lastCombo:0,status:new Map([["A85",0],["A86",0],["BC9",0],["BCA",0]])}),M=j("jobs-dnc",{combo:{left:10,top:-30},tr3:{left:46,top:-22},tr4:{left:82,top:-22},fl:{left:0,top:-15},color:"rgb(255,255,255)",shadow:"rgb(0,0,0)",size:14,warncolor:"rgb(255,255,255)",warnshadow:"rgb(255,0,0)",zeroStr:"",fontFamily:"微软雅黑",fontWeight:!1,warn:5,userCss:""},localStorage,{mergeDefaults:!0}),L=C(),P=a([{id:"combo",cd:o(()=>30-Math.floor((I.value-E.lastCombo)/1e3)),style:{top:o(()=>`${M.value.combo.top}px`),left:o(()=>`${M.value.combo.left}px`)}},{id:"tr3",cd:o(()=>30-Math.floor((I.value-(E.status.get("A85")??0))/1e3)),style:{top:o(()=>`${M.value.tr3.top}px`),left:o(()=>`${M.value.tr3.left}px`)}},{id:"tr4",cd:o(()=>30-Math.floor((I.value-(E.status.get("A86")??0))/1e3)),style:{top:o(()=>`${M.value.tr4.top}px`),left:o(()=>`${M.value.tr4.left}px`)}},{id:"fl3",cd:o(()=>30-Math.floor((I.value-(E.status.get("BC9")??0))/1e3)),style:{top:o(()=>`${M.value.tr3.top+M.value.fl.top}px`),left:o(()=>`${M.value.tr3.left+M.value.fl.left}px`)}},{id:"fl4",cd:o(()=>30-Math.floor((I.value-(E.status.get("BCA")??0))/1e3)),style:{top:o(()=>`${M.value.tr4.top+M.value.fl.top}px`),left:o(()=>`${M.value.tr4.left+M.value.fl.left}px`)}}]),W=o(()=>M.value.color),X=o(()=>M.value.shadow),Y=o(()=>M.value.warncolor),q=o(()=>M.value.warnshadow),G=o(()=>M.value.fontFamily),J=o(()=>`${M.value.size}px`),K=o(()=>M.value.fontWeight?"bold":"none"),k=o(()=>M.value.userCss),H=l=>{l.line[5]!==E.playerId||"26"!==l.line[0]&&"30"!==l.line[0]||!E.status.has(l.line[2])?l.line[2]!==E.playerId||"21"!==l.line[0]&&"22"!==l.line[0]||("3E79"===l.line[4]&&"22"===l.line[0]||"3E75"===l.line[4]&&"21"===l.line[0]?E.lastCombo=Date.now():("3E76"===l.line[4]||"3E7A"===l.line[4]||"21"===l.line[0]&&"3E79"===l.line[4])&&(E.lastCombo=0)):E.status.set(l.line[2],"26"===l.line[0]?Date.now():0)};function N(){E.status.set("A85",0),E.status.set("A86",0),E.status.set("BC9",0),E.status.set("BCA",0),E.lastCombo=0}const O=l=>{E.playerId=Number(l.charID).toString(16).toUpperCase()};function Q(){localStorage.removeItem("jobs-dnc"),location.reload()}return t(()=>{U("onPlayerDied",N),U("LogLine",H),U("ChangePrimaryPlayer",O)}),u(()=>{x("onPlayerDied",N),x("LogLine",H),x("ChangePrimaryPlayer",O)}),requestAnimationFrame(function l(){I.value=Date.now(),requestAnimationFrame(l)}),(l,e)=>{const a=_,o=A,t=$,u=S,g=D;return h(),s(V,null,[n("div",B,[m(n("header",F,[n("form",null,[e[18]||(e[18]=d(" 连击X: ",-1)),f(a,{modelValue:p(M).combo.left,"onUpdate:modelValue":e[0]||(e[0]=l=>p(M).combo.left=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),n("form",null,[e[19]||(e[19]=d(" 连击Y: ",-1)),f(a,{modelValue:p(M).combo.top,"onUpdate:modelValue":e[1]||(e[1]=l=>p(M).combo.top=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),n("form",null,[e[20]||(e[20]=d(" 触发3X: ",-1)),f(a,{modelValue:p(M).tr3.left,"onUpdate:modelValue":e[2]||(e[2]=l=>p(M).tr3.left=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),n("form",null,[e[21]||(e[21]=d(" 触发3Y: ",-1)),f(a,{modelValue:p(M).tr3.top,"onUpdate:modelValue":e[3]||(e[3]=l=>p(M).tr3.top=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),n("form",null,[e[22]||(e[22]=d(" 触发4X: ",-1)),f(a,{modelValue:p(M).tr4.left,"onUpdate:modelValue":e[4]||(e[4]=l=>p(M).tr4.left=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),n("form",null,[e[23]||(e[23]=d(" 触发4Y: ",-1)),f(a,{modelValue:p(M).tr4.top,"onUpdate:modelValue":e[5]||(e[5]=l=>p(M).tr4.top=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),n("form",null,[e[24]||(e[24]=d(" 百花X: ",-1)),f(a,{modelValue:p(M).fl.left,"onUpdate:modelValue":e[6]||(e[6]=l=>p(M).fl.left=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),n("form",null,[e[25]||(e[25]=d(" 百花Y: ",-1)),f(a,{modelValue:p(M).fl.top,"onUpdate:modelValue":e[7]||(e[7]=l=>p(M).fl.top=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),n("form",null,[e[26]||(e[26]=d(" 剩余警告: ",-1)),f(a,{modelValue:p(M).warn,"onUpdate:modelValue":e[8]||(e[8]=l=>p(M).warn=l),class:"input input-number",min:-1,max:30,size:"small"},null,8,["modelValue"])]),n("form",null,[e[27]||(e[27]=d(" 常规颜色: ",-1)),f(o,{modelValue:p(M).color,"onUpdate:modelValue":e[9]||(e[9]=l=>p(M).color=l),class:"input input-string",size:"small"},null,8,["modelValue"])]),n("form",null,[e[28]||(e[28]=d(" 常规阴影: ",-1)),f(o,{modelValue:p(M).shadow,"onUpdate:modelValue":e[10]||(e[10]=l=>p(M).shadow=l),class:"input input-string",size:"small"},null,8,["modelValue"])]),n("form",null,[e[29]||(e[29]=d(" 警告颜色: ",-1)),f(o,{modelValue:p(M).warncolor,"onUpdate:modelValue":e[11]||(e[11]=l=>p(M).warncolor=l),class:"input input-string",size:"small"},null,8,["modelValue"])]),n("form",null,[e[30]||(e[30]=d(" 警告阴影: ",-1)),f(o,{modelValue:p(M).warnshadow,"onUpdate:modelValue":e[12]||(e[12]=l=>p(M).warnshadow=l),class:"input input-string",size:"small"},null,8,["modelValue"])]),n("form",null,[e[31]||(e[31]=d(" 零值文本: ",-1)),f(o,{modelValue:p(M).zeroStr,"onUpdate:modelValue":e[13]||(e[13]=l=>p(M).zeroStr=l),class:"input input-string",size:"small"},null,8,["modelValue"])]),n("form",null,[e[32]||(e[32]=d(" 字号: ",-1)),f(a,{modelValue:p(M).size,"onUpdate:modelValue":e[14]||(e[14]=l=>p(M).size=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),n("form",null,[e[33]||(e[33]=d(" 字体: ",-1)),f(o,{modelValue:p(M).fontFamily,"onUpdate:modelValue":e[15]||(e[15]=l=>p(M).fontFamily=l),class:"input input-string",size:"small"},null,8,["modelValue"])]),n("form",null,[e[34]||(e[34]=d(" 粗体：",-1)),f(t,{modelValue:p(M).fontWeight,"onUpdate:modelValue":e[16]||(e[16]=l=>p(M).fontWeight=l),size:"small"},null,8,["modelValue"])]),n("form",null,[e[35]||(e[35]=d(" 自定义CSS： ",-1)),e[36]||(e[36]=n("br",null,null,-1)),f(o,{modelValue:p(M).userCss,"onUpdate:modelValue":e[17]||(e[17]=l=>p(M).userCss=l),autosize:"",type:"textarea",placeholder:""},null,8,["modelValue"])]),e[38]||(e[38]=n("br",null,null,-1)),n("form",null,[f(g,{teleported:!1,title:"确定要重置？",onConfirm:Q},{reference:c(()=>[f(u,null,{default:c(()=>e[37]||(e[37]=[d("重置全部用户设置",-1)])),_:1,__:[37]})]),_:1})])],512),[[i,p(L)]]),n("main",null,[(h(!0),s(V,null,b(p(P),l=>(h(),s("div",{key:l.id},[n("span",{class:y(l.cd<=p(M).warn&&!p(L)?"warning":""),style:w(l.style)},z(l.cd>=0?l.cd:p(L)?"30":p(M).zeroStr),7)]))),128))])]),(h(),r(v("style"),null,{default:c(()=>[d(z(p(k)),1)]),_:1}))],64)}}}),[["__scopeId","data-v-c3aa2110"]]);export{E as default};
