import{d as ze,s as S,A as Oe,ay as je,o as ee,b as le,f as R,p as ut,i as ft,az as yt,y as pe,x as V,v as gt,Y as ht,r as q,C as De,D as Se,u as v,a as r,w as Q,G as ue,H as bt,a0 as vt,P as kt,F as _,a5 as Ft,aA as xt,au as Ct,ax as He,c as It}from"./vendor-2418a256.js";import{_ as _t}from"./index-12336e08.js";import{N as j,l as s}from"./netregexes-7057d210.js";import{U as B}from"./util-f6d3a594.js";import{c as Re,s as Et,a as wt}from"./status-2cacdfd9.js";import{g as Nt}from"./actionChinese-71b7e526.js";const $t=i=>(ut("data-v-d140243c"),i=i(),ft(),i),Tt={class:"upload select"},At=$t(()=>R("div",{class:"upload text"},[R("span",null,"+"),R("p",null,"ä¸Šä¼ æˆ–æ‹–å…¥ACTæ—¥å¿—")],-1)),Dt=ze({__name:"testLog",emits:["handleLine","beforeHandle","afterHandle"],setup(i,{emit:c}){const o=c,l=S(null),a=S(null),E=async h=>{var N,U;(N=a.value)==null||N.classList.remove("drag");const g=h.target.files;if(!(!g||g.length==0)){o("beforeHandle");for(let H=0;H<g.length;H++)(await g[H].text()).split(`
`).forEach(P=>{o("handleLine",P)});o("afterHandle"),(U=a.value)==null||U.classList.remove("drag")}},C=h=>{var g;h.preventDefault(),(g=a.value)==null||g.classList.add("drag")},te=h=>{var g;h.preventDefault(),(g=a.value)==null||g.classList.remove("drag")};return Oe(()=>{var h,g,N;(h=l.value)==null||h.addEventListener("change",E),(g=a.value)==null||g.addEventListener("dragover",C),(N=a.value)==null||N.addEventListener("dragleave",te)}),je(()=>{var h,g,N;(h=l.value)==null||h.removeEventListener("change",E),(g=a.value)==null||g.removeEventListener("dragover",C),(N=a.value)==null||N.removeEventListener("dragleave",te)}),(h,g)=>(ee(),le("div",Tt,[R("div",{class:"upload-select",ref_key:"select",ref:a},[At,R("input",{type:"file",ref_key:"input",ref:l},null,512)],512)]))}});const St=_t(Dt,[["__scopeId","data-v-d140243c"]]);function fe(i){switch(i){case"dodge":return"é—ªé¿";case"damage done":return"å‡»ä¸­";case"blocked damage":return"æ ¼æŒ¡";case"parried damage":return"æ‹›æž¶";case"instant death":return"å³æ­»";case"heal":return"æ²»ç–—";case"crit heal":return"æš´å‡»æ²»ç–—";case"damage":return"æ™®é€š";case"crit damage":return"æš´å‡»";case"direct hit damage":return"ç›´å‡»";case"crit direct hit damage":return"ç›´æš´";case"physics":return"ç‰©ç†";case"magic":return"é­”æ³•";case"darkness":return"æš—é»‘";default:throw new Error("Unknown type")}}function Ht(i){const c=Lt(i),o=Pt(i),l=Mt(i);return{effect:c,properties:o,type:l}}function Lt(i){switch(!0){case/1$/.test(i):return"dodge";case/3$/.test(i):return"damage done";case/5$/.test(i):return"blocked damage";case/6$/.test(i):return"parried damage";case/33$/.test(i):return"instant death";case/4$/.test(i):return"heal";case/2\w{4}4$/.test(i):return"crit heal";default:throw new Error("Unknown effect flag "+i)}}function Pt(i){switch(!0){case/2\w{3}$/.test(i):return"crit damage";case/4\w{3}$/.test(i):return"direct hit damage";case/6\w{3}$/.test(i):return"crit direct hit damage";default:return"damage"}}function Mt(i){switch(!0){case/7?[1234]\w{3}[35]$|[16]$/.test(i):return"physics";case/^E$/.test(i):case/5\w{4}$/.test(i):return"magic";case/^(?:\d0)?3$/.test(i):case/6\w{4}$/.test(i):return"darkness";default:return console.error("Unknown type flag "+i),"physics"}}const zt=["3E","113","213","313"],Ot=["A10","E"],jt=["04"],Rt="36",Ut=["01","03","05","06",Rt],Gt=i=>{let o=0,l=i[8]??"",a=i[8+1]??"";zt.includes(l)&&(o+=2,l=i[8+o]??l,a=i[8+o+1]??a),Ot.includes(l)&&(o+=2,l=i[8+o]??l,a=i[8+o+1]??a);const E=Vt(a),C=`00${l}`.slice(-2);return{amount:E,lowByte:C,flags:l,isHeal:jt.includes(C),isAttack:Ut.includes(C)}},Vt=i=>{if(i===void 0)return 0;const c=i.length;if(c<=4)return 0;let o=parseInt(i.slice(0,c-4),16);if(i[c-4]==="4"){const l=parseInt(i.slice(c-2,c),16);o=o-l+(l<<16)}return o},Le=[{name:"é“å£",description:"å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:1191,icon:13911,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"ç›¾é˜µ",description:"å—åˆ°æ”»å‡»æ—¶å¿…å®šå‘åŠ¨æ ¼æŒ¡",id:1856,icon:12510,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"å¹²é¢„",description:"å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:1174,icon:12511,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"é¢„è­¦",description:"å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:74,icon:10151,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"æ­¦è£…",description:"å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:1176,icon:12513,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"ç¥žåœ£é¢†åŸŸ",description:"é™¤ç‰¹å®šæ”»å‡»ä¹‹å¤–å…¶ä»–æ‰€æœ‰æ”»å‡»å‡æ— æ•ˆåŒ–",id:82,icon:12504,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"åœ£å…‰å¹•å¸˜",description:"æŠµæ¶ˆä¸€å®šä¼¤å®³",id:1362,icon:12509,type:"absorbed",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"åœ£ç›¾é˜µ",description:"å—åˆ°æ”»å‡»æ—¶å¿…å®šå‘åŠ¨æ ¼æŒ¡",id:2674,icon:12515,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"éª‘å£«çš„åšå®ˆ",description:"å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:2675,icon:12516,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"å£åž’",description:"å—åˆ°æ”»å‡»æ—¶å¿…å®šå‘åŠ¨æ ¼æŒ¡",id:77,icon:10156,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"åŽŸåˆçš„ç›´è§‰",description:"è‡ªèº«å‘åŠ¨æˆ˜æŠ€å‘½ä¸­æ—¶å¯ä»¥æ¢å¤ä½“åŠ›ï¼ŒåŒæ—¶å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:735,icon:12555,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"åŽŸåˆçš„å‹‡çŒ›",description:"è‡ªèº«å‘åŠ¨æˆ˜æŠ€å‘½ä¸­æ—¶å¯ä»¥æ¢å¤ä½“åŠ›",id:1857,icon:12558,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"åŽŸåˆçš„æ­¦çŒ›",description:`é™„åŠ æ­¤æ•ˆæžœçš„æˆ˜å£«å—åˆ°åŽŸåˆçš„å‹‡çŒ›çš„æ¢å¤ä½“åŠ›çš„æ•ˆæžœæ—¶ï¼Œä¼šèŽ·å¾—ç›¸å½“äºŽå…¶100%çš„æ¢å¤æ•ˆæžœ
å¦å¤–å—åˆ°æ”»å‡»çš„ä¼¤å®³å‡å°‘`,id:1858,icon:12559,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"æˆ˜æ —",description:`ä½“åŠ›æœ€å¤§å€¼æé«˜
ä¹ å¾—æˆ˜æ —æ•ˆæžœæé«˜åŽè¿½åŠ æ•ˆæžœï¼šè‡ªèº«æ‰€å—çš„æ²»ç–—æ•ˆæžœæé«˜`,id:87,icon:10254,type:"absorbed",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"å¤ä»‡",description:"å—åˆ°æ”»å‡»çš„ä¼¤å®³å‡å°‘å¹¶ä¸”å—åˆ°ç‰©ç†æ”»å‡»æ—¶ä¼šå‘åŠ¨åå‡»",id:89,icon:10256,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"æ‘†è„±",description:"æŠµæ¶ˆä¸€å®šä¼¤å®³",id:1457,icon:12557,type:"absorbed",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"æ­»æ–—",description:"é™¤ç‰¹å®šæ”»å‡»ä¹‹å¤–å…¶ä»–æ‰€æœ‰å¯¹è‡ªèº«å‘åŠ¨çš„æ”»å‡»å‡æ— æ³•ä»¤ä½“åŠ›å‡å°‘åˆ°1ä»¥ä¸‹",id:409,icon:10266,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"åŽŸåˆçš„è¡€æ°”",description:"è‡ªèº«å‘åŠ¨æˆ˜æŠ€å‘½ä¸­æ—¶å¯ä»¥æ¢å¤ä½“åŠ›ï¼ŒåŒæ—¶å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:2678,icon:12562,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"åŽŸåˆçš„è¡€æ½®",description:"å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:2679,icon:12563,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"åŽŸåˆçš„è¡€çƒŸ",description:"æŠµæ¶ˆä¸€å®šä¼¤å®³",id:2680,icon:12564,type:"absorbed",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"è‡³é»‘ä¹‹å¤œ",description:"æŠµæ¶ˆä¸€å®šä¼¤å®³",id:1178,icon:13118,type:"absorbed",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"å¼ƒæ˜ŽæŠ•æš—",description:"å‡è½»æ‰€å—åˆ°çš„é­”æ³•ä¼¤å®³",id:746,icon:13114,type:"multiplier",performance:{physics:0,magic:1,darkness:0},isFriendly:!0},{name:"æš—å½±å¢™",description:"å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:747,icon:13113,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"æš—é»‘å¸ƒé“",description:"å‡è½»æ‰€å—åˆ°çš„é­”æ³•ä¼¤å®³",id:1894,icon:13122,type:"multiplier",performance:{physics:0,magic:1,darkness:0},isFriendly:!0},{name:"è¡Œå°¸èµ°è‚‰",description:`å—åˆ°è‡´å‘½ä¼¤å®³æ—¶ä½“åŠ›å‡ä¸º1ï¼Œå¹¶é™„åŠ æ­»è€Œä¸åƒµçŠ¶æ€
ä½†æ˜¯å¯¹éƒ¨åˆ†æ”»å‡»æ— æ•ˆ`,id:810,icon:13115,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"æ­»è€Œä¸åƒµ",description:"é™¤ç‰¹å®šæ”»å‡»ä¹‹å¤–å…¶ä»–æ‰€æœ‰å¯¹è‡ªèº«å‘åŠ¨çš„æ”»å‡»å‡æ— æ³•ä»¤ä½“åŠ›å‡å°‘åˆ°1ä»¥ä¸‹",id:811,icon:13116,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"å‡ºæ­»å…¥ç”Ÿ",description:"é™¤ç‰¹å®šæ”»å‡»ä¹‹å¤–å…¶ä»–æ‰€æœ‰å¯¹è‡ªèº«å‘åŠ¨çš„æ”»å‡»å‡æ— æ³•ä»¤ä½“åŠ›å‡å°‘åˆ°1ä»¥ä¸‹",id:3255,icon:13124,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"çŒ®å¥‰",description:"å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:2682,icon:13123,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"çŸ³ä¹‹å¿ƒ",description:"å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:1840,icon:13610,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"æ®‹æš´å¼¹",description:"æŠµæ¶ˆä¸€å®šä¼¤å®³",id:1898,icon:13614,type:"absorbed",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"ä¼ªè£…",description:"æ‹›æž¶å‘åŠ¨çŽ‡æé«˜ï¼Œå‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:1832,icon:13602,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"æ˜Ÿäº‘",description:"å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:1834,icon:13604,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"å…‰ä¹‹å¿ƒ",description:"å‡è½»æ‰€å—åˆ°çš„é­”æ³•ä¼¤å®³",id:1839,icon:13609,type:"multiplier",performance:{physics:0,magic:1,darkness:0},isFriendly:!0},{name:"è¶…ç«æµæ˜Ÿ",description:"é™¤ç‰¹å®šæ”»å‡»ä¹‹å¤–å…¶ä»–æ‰€æœ‰æ”»å‡»å‡æ— æ•ˆåŒ–",id:1836,icon:13606,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"åˆšçŽ‰ä¹‹å¿ƒ",description:"å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:2683,icon:13615,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"åˆšçŽ‰ä¹‹æ¸…",description:"å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:2684,icon:13616,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"ç¥žç¥ç¥·",description:"æŠµæ¶ˆä¸€å®šä¼¤å®³",id:1218,icon:12632,type:"absorbed",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"èŠ‚åˆ¶",description:"å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:1873,icon:12633,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"æ°´æµå¹•",description:"å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:2708,icon:12638,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"é¼“èˆž",description:"æŠµæ¶ˆä¸€å®šä¼¤å®³",id:297,icon:12801,type:"absorbed",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"æ¿€åŠ±",description:"æŠµæ¶ˆä¸€å®šä¼¤å®³",id:1918,icon:12814,type:"absorbed",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"ç‚½å¤©çš„å¹•å¸˜",description:"æŠµæ¶ˆä¸€å®šä¼¤å®³",id:1917,icon:12848,type:"absorbed",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"é‡Žæˆ˜æ²»ç–—é˜µ",description:"å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:299,icon:12803,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"å¼‚æƒ³çš„å¹»å…‰",description:"å‘åŠ¨æ²»ç–—é­”æ³•çš„æ²»ç–—é‡æé«˜ï¼Œä¸”å—åˆ°é­”æ³•æ”»å‡»çš„ä¼¤å®³å‡å°‘",id:317,icon:12828,type:"multiplier",performance:{physics:0,magic:1,darkness:0},isFriendly:!0},{name:"ç‚½å¤©çš„å¹»å…‰",description:"å‘åŠ¨æ²»ç–—é­”æ³•çš„æ²»ç–—é‡æé«˜ï¼Œä¸”å—åˆ°é­”æ³•æ”»å‡»çš„ä¼¤å®³å‡å°‘",id:1875,icon:12847,type:"multiplier",performance:{physics:0,magic:1,darkness:0},isFriendly:!0},{name:"ç”Ÿå‘½å›žç”Ÿæ³•",description:"ä½“åŠ›æœ€å¤§å€¼æé«˜ï¼ŒåŒæ—¶è‡ªèº«æ‰€å—ä½“åŠ›æ¢å¤æ•ˆæžœæé«˜",id:2710,icon:12815,type:"absorbed",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"æ€’æ¶›ä¹‹è®¡",description:"å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:2711,icon:12816,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"å‘½è¿ä¹‹è½®",description:"å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:849,icon:13226,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"å¤©æ˜Ÿäº¤é”™",description:"æŠµæ¶ˆä¸€å®šä¼¤å®³",id:1889,icon:13250,type:"absorbed",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"æ“¢å‡",description:"å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:2717,icon:13262,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"ä¸­é—´å­¦æ´¾",description:"æŠµæ¶ˆä¸€å®šä¼¤å®³",id:1921,icon:13255,type:"absorbed",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"å‡è¡¡è¯Šæ–­",description:"æŠµæ¶ˆä¸€å®šä¼¤å®³",id:2607,icon:12954,type:"absorbed",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"é½è¡¡è¯Šæ–­",description:"æŠµæ¶ˆä¸€å®šä¼¤å®³",id:2608,icon:12955,type:"absorbed",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"å‡è¡¡é¢„åŽ",description:"æŠµæ¶ˆä¸€å®šä¼¤å®³",id:2609,icon:12954,type:"absorbed",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"åšè§’æ¸…æ±",description:"å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:2618,icon:12964,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"ç™½ç‰›æ¸…æ±",description:"å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:2619,icon:12965,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"æ•´ä½“è®º",description:"å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:3003,icon:12971,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"æ•´ä½“ç›¾",description:"æŠµæ¶ˆä¸€å®šä¼¤å®³",id:3365,icon:12972,type:"absorbed",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"è¾“è¡€",description:"æŠµæ¶ˆä¸€å®šä¼¤å®³",id:2612,icon:12958,type:"absorbed",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"æ³›è¾“è¡€",description:"æŠµæ¶ˆä¸€å®šä¼¤å®³",id:2613,icon:12959,type:"absorbed",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"å¿ƒçœ¼",description:"ä¸‹æ¬¡å—åˆ°æ”»å‡»æ—¶æ‰€å—åˆ°çš„ä¼¤å®³å‡è½»",id:1232,icon:13307,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"é‡‘åˆšæžæ„",description:"å‡è½»æ‰€å—åˆ°çš„ä¸€éƒ¨åˆ†ä¼¤å®³",id:1179,icon:12527,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"è¡ŒåŸ",description:"å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:1934,icon:12615,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"ç­–åŠ¨",description:"å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:1951,icon:13021,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"é˜²å®ˆä¹‹æ¡‘å·´",description:"å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:1826,icon:13715,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"å³å…´è¡¨æ¼”ç»“æŸ",description:"æŠµæ¶ˆä¸€å®šä¼¤å®³",id:2697,icon:13721,type:"absorbed",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"æ®‹å½±",description:"æŠµæ¶ˆä¸€å®šä¼¤å®³",id:488,icon:10605,type:"absorbed",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"é­”ç½©",description:"æŠµæ¶ˆä¸€å®šä¼¤å®³",id:168,icon:10456,type:"absorbed",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"å®ˆæŠ¤ä¹‹å…‰",description:"æŠµæ¶ˆä¸€å®šä¼¤å®³",id:2702,icon:12691,type:"absorbed",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"å®ˆæŠ¤çº¹",description:"æŠµæ¶ˆä¸€å®šä¼¤å®³",id:2597,icon:12934,type:"absorbed",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"æŠ—æ­»",description:"å‡è½»æ‰€å—åˆ°çš„é­”æ³•ä¼¤å®³ï¼ŒåŒæ—¶è‡ªèº«æ‰€å—ä½“åŠ›æ¢å¤æ•ˆæžœæé«˜",id:2707,icon:13408,type:"multiplier",performance:{physics:0,magic:1,darkness:0},isFriendly:!0},{name:"é›ªä»‡",description:"æ”»å‡»æ‰€é€ æˆçš„ä¼¤å®³é™ä½Ž",id:1193,icon:13901,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!1},{name:"ç‰µåˆ¶",description:"ç‰©ç†æ”»å‡»å’Œé­”æ³•æ”»å‡»æ‰€é€ æˆçš„ä¼¤å®³é™ä½Ž",id:1195,icon:13904,type:"multiplier",performance:{physics:1,magic:.5,darkness:0},isFriendly:!1},{name:"æ˜ä¹±",description:"ç‰©ç†æ”»å‡»å’Œé­”æ³•æ”»å‡»æ‰€é€ æˆçš„ä¼¤å®³é™ä½Ž",id:1203,icon:13917,type:"multiplier",performance:{physics:.5,magic:1,darkness:0},isFriendly:!1},{name:"æ­¦è£…è§£é™¤",description:"æ”»å‡»æ‰€é€ æˆçš„ä¼¤å®³é™ä½Ž",id:860,icon:13009,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!1},{name:"å‡é€Ÿ",description:"æˆ˜æŠ€ä¸Žé­”æ³•çš„å’å”±åŠå¤å”±æ—¶é—´å»¶é•¿",id:9,icon:15009,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!1},{name:"ä½“åŠ›å¢žåŠ ",description:"ä½“åŠ›æœ€å¤§å€¼æé«˜",id:2120,icon:13523,type:"absorbed",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"è…è‡­",description:"é€ æˆçš„ä¼¤å®³é™ä½Ž",id:1715,icon:13502,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!1},{name:"æ™ºåŠ›ç²¾ç¥žé™ä½Ž",description:"æ™ºåŠ›ä¸Žç²¾ç¥žæœ‰æ‰€é™ä½Ž",id:2115,icon:13518,type:"multiplier",performance:{physics:0,magic:1,darkness:0},isFriendly:!1},{name:"é¾™ä¹‹åŠ›",description:"å—åˆ°çš„ä¼¤å®³é™ä½Ž",id:2500,icon:13539,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"è¶…ç¡¬åŒ–",description:"æ— æ³•è‡ªç”±æ´»åŠ¨ï¼Œä½†å—åˆ°æ”»å‡»çš„ä¼¤å®³å‡å°‘",id:1722,icon:13509,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"çŽ„ç»“ç•Œ",description:"å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³ï¼Œå—åˆ°ä¸€å®šä¼¤å®³åŽå°†é™„åŠ çŽ„å¤©æ­¦æ°´å£çŠ¶æ€",id:2496,icon:13535,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"ä»™äººç›¾",description:"å—åˆ°çš„ä¼¤å®³é™ä½Ž",id:2119,icon:13522,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"å¼ºåŠ›å®ˆæŠ¤",description:"ä»¤è‡ªèº«æ‰€å—åˆ°çš„ä¼¤å®³å‡å°‘ï¼ŒåŒæ—¶ä¼šä»¥æ”»å‡»åŠ›é™ä½Žä¸ºä»£ä»·æé«˜è‡ªèº«ä»‡æ¨",id:1719,icon:13506,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"å“¥å¸ƒé˜²å¾¡",description:"æŠµæ¶ˆä¸€å®šä¼¤å®³",id:2114,icon:13517,type:"absorbed",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"é“œå¢™é“ç›¾",description:"å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:194,icon:16306,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"åšå®ˆè¦å¡ž",description:"å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:195,icon:16306,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"ç»ˆæžå ¡åž’",description:"å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:196,icon:16306,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"åŽŸåˆå¤§åœ°",description:"å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:863,icon:16306,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"æš—é»‘ä¹‹åŠ›",description:"å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:864,icon:16306,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0},{name:"çµé­‚ä¹‹é’",description:"å‡è½»æ‰€å—åˆ°çš„ä¼¤å®³",id:1931,icon:16306,type:"multiplier",performance:{physics:1,magic:1,darkness:1},isFriendly:!0}],ye=new Map;let Pe;function ge(i){if(Pe!==i){const c=i==="Chinese"?Le:Object.assign(Le,{});ye.clear();for(const o of c)o.fullIcon=Re(o.icon),ye.set(o.id.toString(16).toUpperCase(),o);Pe=i}}ge("Chinese");function Bt(i){return ye.get(i)}const Jt=i=>i===1?"useful":i===0?"unuseful":"half-useful",Zt=/(?:è€æ€§|é˜²å¾¡åŠ›)(?:å¤§å¹…)?(?:é™ä½Ž|æå‡|ä½Žä¸‹|ä¸‹é™)|å—ä¼¤(?:åŠ é‡|å‡è½»)|ä½“åŠ›(?:å¢žåŠ |è¡°å‡|å‡å°‘)|ä¼¤å®³å±éšœ/,Yt=/(?:ç²¾ç¥ž|åŠ›é‡|çµå·§|æ™ºåŠ›){1,2}(?:å¤§å¹…)?é™ä½Ž/,Ue=(i,c)=>Object.entries(Et).reduce((o,[l,[a,E]])=>(i.test(a)&&o.set(l,{name:a,icon:E,isFriendly:c}),o),new Map),Kt=Ue(Zt,!0),Wt=Ue(Yt,!1),he=(()=>typeof structuredClone=="function"?structuredClone:i=>{if(i===null||typeof i!="object")return i;if(i instanceof Date)return new Date(i.getTime());if(i instanceof RegExp)return new RegExp(i.source,i.flags);if(i instanceof Array)return i.map(o=>he(o));const c=new i.constructor;for(const o in i)i.hasOwnProperty(o)&&(c[o]=he(i[o]));return c})(),Xt={key:0,class:"testLog"},Me="souma-keigenn-record-2",ai=ze({__name:"keigennRecord2",setup(i){const c=yt("hash"),o=c.dev==="1"||!window.OverlayPluginApi&&!c.OVERLAY_WS&&!c.HOST_PORT;function l(e,t){return typeof t=="boolean"?e==="0"?!1:e==="1"?!0:t:typeof t=="number"?isNaN(+e)?t:+e:t}const a={scale:l(c.scale,1),showHeader:l(c.showHeader,!0),showIcon:l(c.showIcon,!0),showName:l(c.showName,!1),abbrId:l(c.abbrId,!0),anonymous:l(c.anonymous,!0),replaceWithYou:l(c.replaceWithYou,!1),parseAA:l(c.parseAA,!0),parseDoT:l(c.parseDoT,!1),minimize:l(c.minimize,!1),actionCN:l(c.actionCN,!0),statusCN:l(c.statusCN,!0)},E=pe(()=>a.actionCN?"actionCN":"action"),C=S(a.minimize),te=a.scale>=2||window.devicePixelRatio>=2?"_hr1":"",h={line_height:28*a.scale,time:40*a.scale,action:65*a.scale,target:((a.showIcon?24:0)+(a.showName?a.anonymous||!a.anonymous&&a.abbrId?24:36:0)+7)*a.scale,source:90*a.scale,amount:47*a.scale},g={"--vxe-font-size-mini":12*a.scale+"px","--vxe-table-row-line-height":30*a.scale+"px","--vxe-table-row-height-mini":30*a.scale+"px","--vxe-input-height-mini":20*a.scale+"px","--vxe-select-option-height-mini":24*a.scale+"px"},N={runtime:99,localStorage:3},U=S(),H=V("keigenn-record-2-pov-name",""),L=V("keigenn-record-2-pov-id",""),ie=V("keigenn-record-2-party-list",[]),P=V("keigenn-record-2-job-map",{}),ne=V("keigenn-record-2-party-event-party",[]),M=S(0),u=S([{zoneName:"",duration:"00:00",table:[],key:"init"}]),be={rsv:/^262\|(?<timestamp>[^|]*)\|[^|]*\|[^|]*\|_rsv_(?<id>\d*)[^|]*\|(?<real>[^|]*)\|/i,ability:j.ability(),statusEffectExplicit:j.statusEffectExplicit(),gainsEffect:j.gainsEffect(),losesEffect:j.losesEffect(),inCombat:/^260\|(?<timestamp>[^|]*)\|(?<inACTCombat>[^|]*)\|(?<inGameCombat>[^|]*)\|/i,changeZone:j.changeZone(),partyList:/^11\|(?<timestamp>[^|]*)\|(?<partyCount>\d*)\|(?<list>(?:\w{8}\|){0,})\w{16}/i,primaryPlayer:/^02\|(?<timestamp>[^|]*)\|(?<id>[^|]*)\|(?<name>[^|]*)/,addCombatant:j.addedCombatant(),removingCombatant:j.removingCombatant(),networkDoT:j.networkDoT()},w=S(0),ve=V("souma-keigenn-record-2-zone-name",""),ke=V("souma-keigenn-record-2-rsv-data",{}),de={},T={friendly:{},enemy:{}},Ge=e=>{e.table.length=0,e.zoneName="",e.duration="00:00",e.key="init"},Ve=()=>{w.value=0,M.value=0,u.value.length=1,Ge(u.value[0])},Be=()=>{Ee()},Fe=e=>{xe(e.rawLine)},xe=e=>{var t,p,m;for(const x in be){const F=be[x].exec(e);if(F){const n=e.split("|");switch(x){case"statusEffectExplicit":F.groups.targetId[0]==="1"&&(de[F.groups.targetId]=F.groups.currentShield);break;case"gainsEffect":{const d=n[s.GainsEffect.fields.effectId],f=n[s.GainsEffect.fields.effect],y=n[s.GainsEffect.fields.target],b=n[s.GainsEffect.fields.targetId],D=Number(n[s.GainsEffect.fields.count]);let I=Bt(d);if(!I){const $=b.startsWith("1")&&Kt.get(parseInt(d,16).toString())||b.startsWith("4")&&Wt.get(parseInt(d,16).toString());if(!$)return;const W=Re($.icon),X=D>1?wt(W,D):W;I={type:"multiplier",performance:{physics:1,magic:1,darkness:1},id:parseInt(d,16),icon:$.icon,fullIcon:X,name:$.name,isFriendly:$.isFriendly}}const Z=n[s.GainsEffect.fields.duration],A=n[s.GainsEffect.fields.source],O=n[s.GainsEffect.fields.sourceId],Y=new Date(n[s.GainsEffect.fields.timestamp]).getTime()+parseFloat(Z)*1e3,K={name:I.name,count:D,effect:f,effectId:d,source:A,sourceId:O,target:y,targetId:b,expirationTimestamp:Y,performance:I.performance,fullIcon:I.fullIcon,isPov:L.value===O};b[0]==="1"&&I.isFriendly?((t=T.friendly)[b]??(t[b]={}))[d]=K:b[0]==="4"&&!I.isFriendly&&(((p=T.enemy)[y]??(p[y]={}))[d]=K)}break;case"losesEffect":{const d=n[s.LosesEffect.fields.target],f=n[s.LosesEffect.fields.targetId],y=n[s.LosesEffect.fields.effectId];f[0]==="1"?T.friendly[f]&&Reflect.deleteProperty(T.friendly[f],y):T.enemy[d]&&Reflect.deleteProperty(T.enemy[d],y)}break;case"addCombatant":if(n[s.AddedCombatant.fields.job]!=="00"){const d=n[s.AddedCombatant.fields.job],f=new Date(n[s.AddedCombatant.fields.timestamp]).getTime();P.value[n[s.AddedCombatant.fields.id]]={job:parseInt(d,16),timestamp:f}}break;case"removingCombatant":Reflect.deleteProperty(P.value,n[s.RemovedCombatant.fields.id]);break;case"primaryPlayer":L.value=n[s.ChangedPlayer.fields.id];const re=n[s.ChangedPlayer.fields.name];if(H.value===re)return;H.value=re,we(n[s.ChangedPlayer.fields.name]);break;case"partyList":ie.value=((m=F.groups.list)==null?void 0:m.split("|"))??[];break;case"changeZone":ve.value=n[s.ChangeZone.fields.name],_e(new Date(n[s.ChangeZone.fields.timestamp]).getTime());break;case"inCombat":{const d=n[s.InCombat.fields.inACTCombat]==="1",f=n[s.InCombat.fields.inGameCombat]==="1",y=new Date(n[s.InCombat.fields.timestamp]).getTime();if(d||f){if(w.value>0)return;u.value[0].table.length!==0&&(u.value[0]=xt(u.value[0]),u.value.unshift({zoneName:"",duration:"00:00",table:[],key:n[s.InCombat.fields.timestamp]}),u.value.length>=N.runtime&&u.value.splice(u.value.length-1,1)),w.value=y,u.value[0].zoneName=ve.value,M.value=0;return}if(!d&&!f){_e(y);return}}break;case"rsv":{const d=Number(F.groups.id),f=n[s.RSVData.fields.value];ke.value[Number(d)]=f}break;case"networkDoT":if(!a.parseDoT)return;{const d=n[s.NetworkDoT.fields.which],f=n[s.NetworkDoT.fields.id];if(d!=="DoT"||f[0]==="4"||!(f===L.value||ie.value.includes(f)||ne.value.find(X=>X.id===f)))return;const y=n[s.NetworkDoT.fields.name],b=n[s.NetworkDoT.fields.damage],D=parseInt(b,16),I=new Date(n[s.Ability.fields.timestamp]??"???").getTime(),Z=Number(n[s.NetworkDoT.fields.currentHp]),A=Number(n[s.NetworkDoT.fields.maxHp]),O=w.value===0?0:I-w.value,ce=ae(O),Y=Ce(f),K=B.nameToFullName(B.jobEnumToJob(Y)).simple2,$=Y,W=B.jobEnumToIcon($).toLocaleLowerCase();Ie({timestamp:I,time:ce,id:void 0,action:d,actionCN:d,source:"",target:y,targetId:f,job:K,jobIcon:W,jobEnum:$,amount:D,keigenns:[],currentHp:Z,maxHp:A,effect:"damage done",type:"dot",shield:de[f],povId:L.value})}break;case"ability":if(w.value===0)return;{const d=Gt(n);if(d.isAttack&&d.amount>=0){const f=n[s.Ability.fields.sourceId]??"???",y=n[s.Ability.fields.targetId]??"???";if(!(f[0]==="4"&&y[0]==="1")||!(y===L.value||ie.value.includes(y)||ne.value.find(G=>G.id===y)))return;const b=new Date(n[s.Ability.fields.timestamp]??"???").getTime(),D=n[s.Ability.fields.ability],I=D.match(/^_rsv_(?<id>\d+)_/),Z=n[s.Ability.fields.id]??"???";let A=D;if(I){const G=Number(I.groups.id);A=ke.value[G]??D.match(/^_(?<id>rsv_\d+)_/).groups.id}else if(A=A.replace(/unknown_.*/,"æ”»å‡»"),a.parseAA===!1&&/^æ”»å‡»|æ”»æ’ƒ|[Aa]ttack$/.test(A))return;const O=Nt(parseInt(Z,16)),ce=O&&O!==""?O:A,Y=Number(n[s.Ability.fields.targetCurrentHp])??"???",K=Number(n[s.Ability.fields.targetMaxHp])??"???",$=n[s.Ability.fields.source]??"???",W=n[s.Ability.fields.target]??"???",{effect:X,type:ct}=Ht(d.flags),ot=w.value===0?0:b-w.value,lt=ae(ot),Te=Ce(y),dt=B.nameToFullName(B.jobEnumToJob(Te)).cn.substring(0,2),Ae=Te,mt=B.jobEnumToIcon(Ae).toLocaleLowerCase(),pt=he(Object.values(T.friendly[y]??[]).concat(Object.values(T.enemy[$]??[])).filter(G=>{const oe=Math.max(0,(G.expirationTimestamp-b)/1e3);return G.remainingDuration=oe>=999?"":oe.toFixed(oe>=.1&&oe<1?1:0),Number(G.remainingDuration)>-3}));Ie({timestamp:b,time:lt,id:Z,action:A,actionCN:ce,source:$,target:W,targetId:y,job:dt,jobIcon:mt,jobEnum:Ae,amount:d.amount,keigenns:pt,currentHp:Y,maxHp:K,effect:X,type:ct,shield:de[F.groups.targetId],povId:L.value}),u.value[0].duration=ae(new Date(n[s.Ability.fields.timestamp]).getTime()-w.value)}break}}}}},Ce=e=>{const t=P.value[e],p=ne.value.find(m=>m.id===e)??{job:0,timestamp:0};return[t,p].sort((m,x)=>x.timestamp-m.timestamp)[0].job},Ie=e=>{u.value[0].table.unshift(e)},_e=e=>{w.value!==0&&(u.value[0].duration=ae(e-w.value),w.value=0,T.friendly={},T.enemy={},Ee())},Ee=()=>{localStorage.setItem(Me,JSON.stringify(u.value.slice(0,N.localStorage)))},Je=()=>{const e=localStorage.getItem(Me);if(e)try{const t=JSON.parse(e);u.value.length=0,u.value.push(...t)}catch(t){console.error(t)}},ae=e=>{const t=Math.max(Math.floor(e/6e4),0),p=Math.max(Math.floor((e-t*6e4)/1e3),0);return`${t<10?"0":""}${t}:${p<10?"0":""}${p}`},Ze=pe(()=>{const e=new Set(u.value[M.value].table.map(t=>a.actionCN?t.actionCN:t.action));return Array.from(e).map(t=>({label:t,value:t}))}),Ye=pe(()=>{const e={},t=new Set(u.value[M.value].table.slice().sort((p,m)=>B.enumSortMethod(p.jobEnum,m.jobEnum)).map(p=>(e[p.target]=p.job,p.target)));return Array.from(t).map(p=>({label:`${e[p]}ï¼ˆ${p}ï¼‰`,value:p}))});let me=e=>e;const we=e=>{/^([A-Z])\S+ ([A-Z])\S+$/.test(e)?(a.abbrId&&(me=t=>t.replace(/^([A-Z])\S+ ([A-Z])\S+$/,"$1.$2.")),ge("Global")):(a.abbrId&&(me=t=>t.substring(0,2)),ge("Chinese"))};we(H.value);const Ne=e=>{const t=e.target;t.src.includes("cafemaker.wakingsands.com")?t.src=t.src.replace("cafemaker.wakingsands.com","xivapi.com"):t.src.includes("xivapi.com")&&(t.src="")},Ke=e=>{H.value=e.charName,L.value=e.charID.toString(16).toUpperCase()},We=e=>{ne.value=e.party.map(t=>({...t,timestamp:Date.now()}))};Oe(()=>{for(const e in P.value){const t=P.value[e];Date.now()-t.timestamp>1e3*60*60*24*1&&Reflect.deleteProperty(P.value,e)}Je(),addOverlayListener("LogLine",Fe),addOverlayListener("PartyChanged",We),addOverlayListener("ChangePrimaryPlayer",Ke),startOverlayEvents()}),je(()=>{removeOverlayListener("LogLine",Fe)});const Xe=({row:e})=>r("div",null,[r("span",{class:"target"},[a.showIcon&&r("img",{class:"jobIcon",src:`//cafemaker.wakingsands.com/cj/companion/${e.jobIcon}.png`,alt:"",onError:Ne,loading:"lazy"},null),a.showName&&r("span",{class:`job ${e.jobIcon} ${e.targetId===e.povId?"YOU":""}`,style:!a.abbrId&&a.showName?{overflow:"hidden",textOverflow:"ellipsis"}:{}},[e.targetId===e.povId&&a.replaceWithYou?"YOU":a.anonymous?e.job:me(e.target)])])]),qe=({row:e})=>r(Ct,{"append-to":".wrapper",effect:"dark",placement:"right-start",title:"",trigger:"hover",enterable:!1,"hide-after":0,"popper-class":"my-el-popover"},{default:()=>[r(Qe,{row:e},null)],...{reference:()=>r("span",{class:`damage ${e.type} ${$e(e)?"lethal":""} `},[e.amount.toLocaleString().padStart(3,"ã€€")])}}),Qe=({row:e})=>r("div",null,[r("span",null,[_("ç›¾:"),Math.round(e.maxHp*+e.shield/100),_(" ("),e.shield,_("%)")]),r("br",null,null),r("span",null,[_("HP:"),e.currentHp,_("/"),e.maxHp,_(" ("),Math.round(e.currentHp/e.maxHp*100),_("%)")]),r("br",null,null),r("span",null,[_("æ¥æº:"),e.source]),r("br",null,null),r("span",null,[_("å—åˆ°ä¼¤å®³:"),e.amount]),r("br",null,null),r("span",null,[_("å‰©ä½™HP:"),e.currentHp-e.amount,_(" ("),Math.round((e.currentHp-e.amount)/e.maxHp*100),_("%)")])]),et=[409 .toString(16).toUpperCase(),810 .toString(16).toUpperCase(),811 .toString(16).toUpperCase(),1836 .toString(16).toUpperCase()],$e=e=>e.currentHp-e.amount<0&&!e.keigenns.find(t=>et.includes(t.effectId)),tt=({row:e})=>r(ue,null,[r("span",null,[$e(e)?"ðŸ’€è‡´æ­» ":""]),e.type==="dot"?"ï¼ˆä¸æ”¯æŒï¼‰":e.keigenns.map(t=>r("span",{class:"status",title:`${t.name}(${t.source})`,"data-duration":t.remainingDuration,"data-sourcePov":t.isPov},[r("img",{class:`statusIcon ${Jt(t.performance[e.type])}`,src:`//cafemaker.wakingsands.com/i/${t.fullIcon}${te}.png`,alt:t.effect,onError:Ne,loading:"lazy"},null)])),r("span",null,[e.effect==="damage done"?"":fe(e.effect)])]),it=e=>{const{action:t,actionCN:p,amount:m,job:x,keigenns:k,source:F,target:n,time:re,type:d}=e,f=e.effect==="damage done"?"":","+fe(e.effect),y=`${re} [${x}]${n} HP:${e.currentHp}/${e.maxHp}(${Math.round(e.currentHp/e.maxHp*100)}%) + æŠ¤ç›¾:${Math.round(e.maxHp*+e.shield/100)}(${e.shield}%) å—åˆ°${F}â€œ${t}${p!==t?"("+p+")":""}â€çš„${m.toLocaleString()}ç‚¹${fe(d)}ä¼¤å®³ã€‚å‰©ä½™HP:${e.currentHp-e.amount}(${Math.round((e.currentHp-e.amount)/e.maxHp*100)}%)ã€‚å‡ä¼¤ï¼š${k.length===0&&f===""?"æ— ":k.map(b=>a.statusCN?b.name:b.effect).join(",")+f}ã€‚`;nt(y)},nt=e=>{navigator.clipboard.writeText(e).catch(()=>{const t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}),He.modal.message({content:"å·²å¤åˆ¶åˆ°å‰ªè´´æ¿",status:"success"})},z=S({target:!1,action:!1}),J=S(),se=gt({className:"my-menus",body:{options:[]}});ht(()=>{var e,t,p;se.body&&se.body.options&&U.value&&(se.body.options[0]=[{code:"copy",name:"å¤åˆ¶è¯¦æƒ…",prefixIcon:"vxe-icon-copy",className:"my-copy-item"},{code:"clearFilterAction",name:"å–æ¶ˆæŠ€èƒ½ç­›é€‰",prefixIcon:"vxe-icon-funnel-clear",className:"my-clear-filter",visible:z.value.action,disabled:!1},{code:"filterSelectAction",name:(e=J.value)!=null&&e[E.value]?`åªçœ‹ ${(t=J.value)==null?void 0:t[E.value]}`:"åªçœ‹è¯¥æŠ€èƒ½",prefixIcon:"vxe-icon-info-circle",visible:!z.value.action,disabled:!1},{code:"clearFilterTarget",name:"å–æ¶ˆçŽ©å®¶ç­›é€‰",prefixIcon:"vxe-icon-funnel-clear",visible:z.value.target,disabled:!1},{code:"filterSelectTarget",name:(p=J.value)!=null&&p.target?`åªçœ‹[${J.value.job}] ${J.value.target}`:"åªçœ‹è¯¥çŽ©å®¶",prefixIcon:"vxe-icon-user-fill",visible:!z.value.target,disabled:!1}])});const at=()=>{C.value=!C.value},st=({row:e})=>{const t=U.value;t&&(t.setCurrentRow(e),J.value=e)},rt=({menu:e,row:t,column:p})=>{const m=U.value;switch(e.code){case"copy":if(!t){He.modal.message({content:"æœªé€‰ä¸­æœ‰æ•ˆæ•°æ®è¡Œ",status:"error"});return}it(t);break;case"clearFilterTarget":m&&(m.clearFilter(m.getColumnByField("target")),z.value.target=!1);break;case"clearFilterAction":m&&(m.clearFilter(m.getColumnByField(E.value)),z.value.action=!1);break;case"filterSelectTarget":if(m){const x=m.getColumnByField("target");if(x){const k=x.filters.find(F=>F.value===t.target);if(!k)return;k.checked=!0,m.updateData().then(()=>{m.scrollToRow(t),z.value.target=!0})}}break;case"filterSelectAction":if(m){const x=m.getColumnByField(E.value);if(x){const k=x.filters.find(F=>F.value===t[E.value]);if(!k)return;k.checked=!0,m.updateData().then(()=>{m.scrollToRow(t),z.value.action=!0})}}break}};return(e,t)=>{const p=q("vxe-option"),m=q("vxe-select"),x=q("vxe-button"),k=q("vxe-column"),F=q("vxe-table");return ee(),le(ue,null,[R("div",{class:"wrapper",style:g},[R("header",null,[De(r(m,{modelValue:v(M),"onUpdate:modelValue":t[0]||(t[0]=n=>vt(M)?M.value=n:null),size:"mini",class:"select"},{default:Q(()=>[(ee(!0),le(ue,null,bt(v(u).length,n=>(ee(),It(p,{key:`${v(u)[n-1].key}-${v(u)[n-1].duration}-${v(u)[n-1].zoneName}`,value:n-1,label:`${v(u)[n-1].duration} ${v(u)[n-1].zoneName}`},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]),[[Se,!v(C)]]),r(x,{class:"minimize",icon:v(C)?"vxe-icon-fullscreen":"vxe-icon-minimize",onClick:at,style:kt({opacity:v(C)?.5:1})},null,8,["icon","style"])]),De(R("main",null,[r(F,{ref_key:"xTable",ref:U,size:"mini",class:"vxe-table","show-overflow":"",round:"",height:"100%","scroll-y":{enabled:!0},"show-header":a.showHeader,data:v(u)[v(M)].table,"row-config":{isHover:!0,height:h.line_height},"header-cell-style":{padding:"0px"},onCellMenu:st,"menu-config":v(se),onMenuClick:rt},{default:Q(()=>[_(" > "),r(k,{width:h.time,field:"time",title:"æ—¶é—´",align:"center"},null,8,["width"]),r(k,{width:h.action,field:a.actionCN?"actionCN":"action",title:"æŠ€èƒ½",filters:v(Ze),"filter-multiple":!1,resizable:!1,align:"center"},null,8,["width","field","filters"]),r(k,{width:h.target,field:"target",title:a.showName?"ç›®æ ‡":"ç›®",filters:v(Ye),"filter-multiple":!1,resizable:!a.anonymous&&!a.abbrId,align:"left","header-align":"center"},{default:Q(({row:n})=>[r(Xe,{row:n},null,8,["row"])]),_:1},8,["width","title","filters","resizable"]),r(k,{width:h.amount,title:"ä¼¤å®³",align:"right","header-align":"center"},{default:Q(({row:n})=>[r(qe,{row:n},null,8,["row"])]),_:1},8,["width"]),r(k,{title:"å‡ä¼¤",align:"left"},{default:Q(({row:n})=>[r(tt,{row:n},null,8,["row"])]),_:1})]),_:1},8,["show-header","data","row-config","menu-config"])],512),[[Se,!v(C)]])]),v(o)?(ee(),le("div",Xt,[r(St,{onBeforeHandle:Ve,onAfterHandle:Be,onHandleLine:xe})])):Ft("",!0)],64)}}});export{ai as default};
