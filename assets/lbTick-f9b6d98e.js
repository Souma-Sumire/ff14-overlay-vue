import{_ as e}from"./ActWrapper-5ec967ca.js";import{d as t,r as a,y as l,a as o,o as n,aW as s,g as i,j as r,n as u,B as m,f as d,u as p,h as T,t as c,e as f,F as b,k as g}from"./index-49c33ca9.js";import{E as v}from"./el-button-bc899dd3.js";import{u as x}from"./useDemo-e6888e39.js";import{u as A}from"./useDev-79426e96.js";import{a as C,r as h}from"./overlay_plugin_api-974cdd44.js";import{_ as E}from"./_plugin-vue_export-helper-6a8c15be.js";import"./el-card-3bc3ad82.js";import"./index-efc2968e.js";import"./use-form-common-props-24606404.js";import"./index-f300da92.js";const _={id:"show"},w={id:"extra"},j=["data-time"],D={id:"extraAll"},L=E(t({__name:"lbTick",setup(t){const E=A(),L=Math.ceil(220/3e4*1e3)/1e3,y=a(),F=x();l(F,()=>{y.value?.(),U()});const B=o({lbNow:0,lbBefore:0,lbAddUp:0,lbExtraAll:0,extraEntries:[]}),N=a([]);function U(){B.lbExtraAll=0,B.lbNow=0,B.extraEntries=[],B.lbAddUp=0,B.lbBefore=0}const k=e=>{const t=e.line;if("36"===t[0]){const e=Number.parseInt(t[2],16)/3e4,a=e-B.lbBefore;if(B.lbNow=e,a>L){B.lbAddUp+=a,B.lbExtraAll+=a;!function(e){if(function(e,t){return!!e&&(e.value===t-1||e.value===t-5)}(N.value.at(-1),e)&&N.value.length)N.value[N.value.length-1].value=e;else{const t={value:e,time:new Intl.DateTimeFormat("default",{hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date)};N.value.push(t),setTimeout(()=>{const e=N.value.indexOf(t);-1!==e&&N.value.splice(e,1)},5e3)}}(Math.round(100*B.lbAddUp))}else B.lbAddUp=0;B.lbBefore=e,a<-.1&&U()}else"33"===t[0]&&["40000010","4000000F"].includes(t[3])&&U()};function I(){y.value=function(e,t=2){const a=[];return function(l){let o=0;e({line:l[0],type:"LogLine",rawLine:""});for(let n=1;n<l.length;n++){const s=new Date(l[n][1]),i=new Date(l[n-1][1]);o+=s.getTime()-i.getTime();const r=window.setTimeout(()=>{e({line:l[n],type:"LogLine",rawLine:""})},o/t);a.push(r)}}([["36","2021-12-28T21:38:30.3580000+08:00","0000"],["36","2021-12-28T21:38:33.3580000+08:00","00DC"],["36","2021-12-28T21:38:34.8290000+08:00","0208"],["36","2021-12-28T21:38:36.3460000+08:00","02E4"],["36","2021-12-28T21:38:37.8630000+08:00","0410"],["36","2021-12-28T21:38:39.3360000+08:00","04EC"],["36","2021-12-28T21:38:42.3720000+08:00","05C8"],["36","2021-12-28T21:38:45.3620000+08:00","06A4"],["36","2021-12-28T21:38:47.8140000+08:00","07D0"],["36","2021-12-28T21:38:47.8140000+08:00","08FC"],["36","2021-12-28T21:38:47.8140000+08:00","0A28"],["36","2021-12-28T21:38:47.8140000+08:00","0B54"],["36","2021-12-28T21:38:47.8140000+08:00","0C80"],["36","2021-12-28T21:38:48.3510000+08:00","0D5C"],["36","2021-12-28T21:38:50.6220000+08:00","0E88"],["36","2021-12-28T21:38:50.8900000+08:00","0FB4"],["36","2021-12-28T21:38:51.0230000+08:00","10E0"],["36","2021-12-28T21:38:51.1570000+08:00","120C"],["36","2021-12-28T21:38:51.3360000+08:00","12E8"],["36","2021-12-28T21:38:54.3690000+08:00","13C4"],["36","2021-12-28T21:38:57.3570000+08:00","14A0"],["36","2021-12-28T21:38:58.3360000+08:00","15CC"],["36","2021-12-28T21:38:58.3360000+08:00","16F8"],["36","2021-12-28T21:38:58.3360000+08:00","1824"],["36","2021-12-28T21:38:58.3360000+08:00","1950"],["36","2021-12-28T21:38:58.3360000+08:00","1A7C"],["36","2021-12-28T21:39:00.3410000+08:00","1B58"],["36","2021-12-28T21:39:03.3690000+08:00","1C34"],["36","2021-12-28T21:39:04.2630000+08:00","1D60"],["36","2021-12-28T21:39:06.3600000+08:00","1E3C"]]),()=>{a.forEach(clearTimeout),a.length=0}}(k,4)}return n(()=>{C("ChangeZone",U),C("LogLine",k)}),s(()=>{h("ChangeZone",U),h("LogLine",k)}),(t,a)=>{const l=v,o=e;return u(),i(o,null,{default:r(()=>[p(E)||p(F)?(u(),i(l,{key:0,type:"primary",class:"test-btn",onClick:I},{default:r(()=>a[0]||(a[0]=[T(" 测试 ",-1)])),_:1,__:[0]})):m("",!0),d("main",null,[d("article",_,c((100*p(B).lbNow).toFixed(2))+"% ",1),d("article",w,[(u(!0),f(b,null,g(p(N),(e,t)=>(u(),f("p",{key:t,class:"anime","data-time":e.time}," +"+c(e.value)+"% ",9,j))),128))]),d("aside",D,c((100*p(B).lbExtraAll).toFixed(0))+"% ",1)])]),_:1})}}}),[["__scopeId","data-v-39e1f6f6"]]);export{L as default};
