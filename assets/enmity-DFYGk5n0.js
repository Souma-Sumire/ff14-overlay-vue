import{c as e,_ as a}from"./shared-common-C1I6b8qt.js";import{o as t,B as s,a5 as r,v as o,J as n,t as i,V as c,_ as u,u as d,K as f,Z as p,c as l,ac as m}from"./vendor-vue-iK2zA9mI.js";import{F as g,U as h}from"./shared-core-C0qTeCVu.js";import{N as y,a as v,r as E}from"./cactbot-DbkIe67V.js";import"./vendor-element-plus-D1xxVcVE.js";const C=a(t({__name:"enmity",setup(a){const{zoneType:t}=g(),C=["4F","5B","2E7","729"],D={gainsEffect:y.gainsEffect({effectId:C}),losesEffect:y.losesEffect({effectId:C})},I=m({party:[],povCharID:"0",status:new Set}),_=["Savage","Extreme","Chaotic","Ultimate","DeepDungeonExtras","Dungeons","Raids","Trials","VCDungeonFinder","DeepDungeons","Guildhests","TreasureHunt"],j=l(()=>{if(!_.includes(t.value))return!1;const e=I.party.filter(e=>h.isTankJob(h.jobEnumToJob(e.job))),a=e.some(e=>e.id===I.povCharID);return!(0===e.length||1===I.party.length||!a)&&!e.some(e=>I.status.has(e.id))}),L=e=>{I.party=e.party.slice(),I.status.forEach(e=>{I.party.some(a=>a.id===e)||I.status.delete(e)})},P=e=>{I.povCharID=e.charID.toString(16).toUpperCase()},b=e=>{const a=D.gainsEffect.exec(e.rawLine);if(a){const e=a.groups?.targetId;return void(e&&I.status.add(e))}const t=D.losesEffect.exec(e.rawLine);if(t){const e=t.groups?.targetId;e&&I.status.delete(e)}};return s(()=>{v("LogLine",b),v("PartyChanged",L),v("ChangePrimaryPlayer",P)}),r(()=>{E("LogLine",b),E("PartyChanged",L),E("ChangePrimaryPlayer",P)}),(a,t)=>{const s=e;return i(),o(s,null,{default:n(()=>[c(f("strong",null,p(a.$t("enmity.no_enmity_active")),513),[[u,d(j)]])]),_:1})}}}),[["__scopeId","data-v-9ad02529"]]);export{C as default};
