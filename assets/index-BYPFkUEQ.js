import{U as e,M as t,r as o,A as a,aQ as n,ah as l,u,ao as s}from"./index-CuocGfW9.js";import{j as i}from"./el-popper-CFhXqShc.js";function r(s,{disabled:r,beforeFocus:c,afterFocus:d,beforeBlur:m,afterBlur:p}={}){const v=e(),{emit:f}=v,b=t(),h=o(!1),g=e=>{const t=!!l(c)&&c(e);u(r)||h.value||t||(h.value=!0,f("focus",e),null==d||d())},C=e=>{var t;const o=!!l(m)&&m(e);u(r)||e.relatedTarget&&(null==(t=b.value)?void 0:t.contains(e.relatedTarget))||o||(h.value=!1,f("blur",e),null==p||p())};return a([b,()=>u(r)],([e,t])=>{e&&(t?e.removeAttribute("tabindex"):e.setAttribute("tabindex","-1"))}),n(b,"focus",g,!0),n(b,"blur",C,!0),n(b,"click",e=>{var t,o;u(r)||i(e.target)||(null==(t=b.value)?void 0:t.contains(document.activeElement))&&b.value!==document.activeElement||null==(o=s.value)||o.focus()},!0),{isFocused:h,wrapperRef:b,handleFocus:g,handleBlur:C}}function c({afterComposition:e,emit:t}){const a=o(!1),n=e=>{var o;null==t||t("compositionupdate",e);const n=null==(o=e.target)?void 0:o.value,l=n[n.length-1]||"";a.value=!(e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e))(l)},l=o=>{null==t||t("compositionend",o),a.value&&(a.value=!1,s(()=>e(o)))};return{isComposing:a,handleComposition:e=>{"compositionend"===e.type?l(e):n(e)},handleCompositionStart:e=>{null==t||t("compositionstart",e),a.value=!0},handleCompositionUpdate:n,handleCompositionEnd:l}}export{r as a,c as u};
