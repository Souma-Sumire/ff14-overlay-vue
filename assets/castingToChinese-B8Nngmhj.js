var e=Object.defineProperty,o=(o,l,t)=>((o,l,t)=>l in o?e(o,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[l]=t)(o,"symbol"!=typeof l?l+"":l,t);import"./index-jN6bvpvx.js";/* empty css                *//* empty css                      *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                  *//* empty css                 *//* empty css                  *//* empty css                        */import{t as l,at as t,V as a,r as n,c as s,v as i,x as m,E as u,M as r,u as d,L as f,D as c,A as p,I as h,K as g,a9 as v,S as V,J as w}from"./vue-vendor-Bz5Jh0Fv.js";import{g as C}from"./actionChinese-JglXKfBi.js";import{a as x}from"./overlay_plugin_api-DU1DlPio.js";import{u as A}from"./index-BQ4hghqY.js";import{d as I,f as D,e as b,m as y,n as z,i as S,h as U,k as X,Z as Y,q as T}from"./element-plus-ISrjp7mH.js";import{_ as j}from"./_plugin-vue_export-helper-BCo6x5W8.js";const _={};const P={class:"container"},F={style:{width:"10rem"}},k={class:"noCSS"},N={class:"noCSS"},$={class:"actionID"},L=j(l({__name:"castingToChinese",setup(e){var l,j;t((e=>({"73cc04e7":d(B),"1e99ffbb":d(W),"1e99ffbc":d(G),"415664b7":d(Z),"576b4d8d":d(J),"65ae06d5":d(Q),"65ae06d6":d(ee),"1a4a745b":d(R),"3501ca9a":d(oe),"3501ca98":d(le),a0413ed6:d(O),c01d9452:d(te),c01d9450:d(ae)})));const L=new URLSearchParams(window.location.href.split("?")[1]);function E(e){const o=Number.parseInt(e[4],16),l=e[2],t=e[5],a=_[o];if(a)return a;const n=C(o);return n||(l.startsWith("4")&&t.includes("unknown"),t)}class K{constructor(e){o(this,"name"),o(this,"startTime"),o(this,"castTime"),o(this,"overTime"),o(this,"actionId"),this.name=E(e),this.startTime=Date.now(),this.castTime=1e3*Number(e[8]),this.overTime=this.startTime+this.castTime,this.actionId=Number.parseInt(e[4],16)}}const M=a({targetCast:void 0}),q=[{value:"Target",label:"当前目标"},{value:"Focus",label:"焦点目标"}],H=n({width:265,showCountdown:!1,showProgress:!1,showActionChinese:!0,showActionID:!1,offsetProgressX:0,offsetProgressY:-22,offsetCountdownX:240,offsetCountdownY:-5,offsetActionChineseX:275,offsetActionChineseY:-45,offsetActionIDX:10,offsetActionIDY:-5,ping:80,keep:100,fontSizeCountDown:17,fontSizeActionName:20,fontFamily:"SmartisanHei",targetKey:"Target"});A("castingToChineseFix",H,localStorage,{mergeDefaults:!0});const O=s((()=>`${H.value.width}px`)),B=s((()=>H.value.showCountdown?1:0)),Z=s((()=>H.value.showProgress?1:0)),J=s((()=>H.value.showActionChinese?1:0)),R=s((()=>H.value.showActionID?1:0)),W=s((()=>`${H.value.offsetCountdownX}px`)),G=s((()=>-1*H.value.offsetCountdownY+"px")),Q=s((()=>`${H.value.offsetActionChineseX}px`)),ee=s((()=>-1*H.value.offsetActionChineseY+"px")),oe=s((()=>`${H.value.offsetActionIDX}px`)),le=s((()=>-1*H.value.offsetActionIDY+"px")),te=s((()=>`${H.value.offsetProgressX}px`)),ae=s((()=>-1*H.value.offsetProgressY+"px")),ne=new Map,se=n(0),ie=H.value.ping,me=n(/^(?:1|true|on)$/i.test(L.get("showSettings")||"")||"flex"===(null==(j=null==(l=document.getElementById("unlocked"))?void 0:l.style)?void 0:j.display));function ue(){localStorage.removeItem("castingToChinese"),location.reload()}return x("EnmityTargetData",(e=>{var o;M.targetCast=ne.get(null==(o=e[H.value.targetKey])?void 0:o.ID)})),x("LogLine",(e=>{"20"===e.line[0]?ne.set(Number.parseInt(e.line[2],16),new K(e.line)):"23"===e.line[0]&&ne.delete(Number.parseInt(e.line[2],16))})),x("ChangeZone",(()=>ne.clear())),requestAnimationFrame((function e(){se.value=Date.now(),requestAnimationFrame(e)})),document.addEventListener("onOverlayStateUpdate",(e=>{var o;me.value=!1===(null==(o=null==e?void 0:e.detail)?void 0:o.isLocked)})),(e,o)=>{const l=I,t=D,a=b,n=z,s=y,C=U,x=S,A=X,j=Y,_=T;return m(),i("div",P,[u(f(A,{class:"settings"},{default:c((()=>[p("form",null,[o[20]||(o[20]=h(" 宽度: ")),f(l,{modelValue:d(H).width,"onUpdate:modelValue":o[0]||(o[0]=e=>d(H).width=e),min:20,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),p("form",null,[o[21]||(o[21]=h("显示倒计时: ")),f(t,{modelValue:d(H).showCountdown,"onUpdate:modelValue":o[1]||(o[1]=e=>d(H).showCountdown=e)},null,8,["modelValue"])]),p("form",null,[o[22]||(o[22]=h("显示进度条: ")),f(t,{modelValue:d(H).showProgress,"onUpdate:modelValue":o[2]||(o[2]=e=>d(H).showProgress=e)},null,8,["modelValue"])]),p("form",null,[o[23]||(o[23]=h("显示中文: ")),f(t,{modelValue:d(H).showActionChinese,"onUpdate:modelValue":o[3]||(o[3]=e=>d(H).showActionChinese=e)},null,8,["modelValue"])]),p("form",null,[o[24]||(o[24]=h("显示ID: ")),f(t,{modelValue:d(H).showActionID,"onUpdate:modelValue":o[4]||(o[4]=e=>d(H).showActionID=e)},null,8,["modelValue"])]),p("form",null,[o[25]||(o[25]=h(" 延迟(ms): ")),f(l,{modelValue:d(H).ping,"onUpdate:modelValue":o[5]||(o[5]=e=>d(H).ping=e),min:0,max:1e4,size:"small","controls-position":"right"},null,8,["modelValue"])]),p("form",null,[o[26]||(o[26]=h(" 保留(ms): ")),f(l,{modelValue:d(H).keep,"onUpdate:modelValue":o[6]||(o[6]=e=>d(H).keep=e),min:0,max:1e5,size:"small","controls-position":"right"},null,8,["modelValue"])]),p("form",null,[o[27]||(o[27]=h(" 进度条偏移X: ")),f(l,{modelValue:d(H).offsetProgressX,"onUpdate:modelValue":o[7]||(o[7]=e=>d(H).offsetProgressX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),p("form",null,[o[28]||(o[28]=h(" 进度条偏移Y: ")),f(l,{modelValue:d(H).offsetProgressY,"onUpdate:modelValue":o[8]||(o[8]=e=>d(H).offsetProgressY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),p("form",null,[o[29]||(o[29]=h(" 倒计时偏移X: ")),f(l,{modelValue:d(H).offsetCountdownX,"onUpdate:modelValue":o[9]||(o[9]=e=>d(H).offsetCountdownX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),p("form",null,[o[30]||(o[30]=h(" 倒计时偏移Y: ")),f(l,{modelValue:d(H).offsetCountdownY,"onUpdate:modelValue":o[10]||(o[10]=e=>d(H).offsetCountdownY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),p("form",null,[o[31]||(o[31]=h(" 中文偏移X: ")),f(l,{modelValue:d(H).offsetActionChineseX,"onUpdate:modelValue":o[11]||(o[11]=e=>d(H).offsetActionChineseX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),p("form",null,[o[32]||(o[32]=h(" 中文偏移Y: ")),f(l,{modelValue:d(H).offsetActionChineseY,"onUpdate:modelValue":o[12]||(o[12]=e=>d(H).offsetActionChineseY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),p("form",null,[o[33]||(o[33]=h(" ID偏移X: ")),f(l,{modelValue:d(H).offsetActionIDX,"onUpdate:modelValue":o[13]||(o[13]=e=>d(H).offsetActionIDX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),p("form",null,[o[34]||(o[34]=h(" ID偏移Y: ")),f(l,{modelValue:d(H).offsetActionIDY,"onUpdate:modelValue":o[14]||(o[14]=e=>d(H).offsetActionIDY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),p("form",null,[o[35]||(o[35]=h(" 倒计时字号(px): ")),f(l,{modelValue:d(H).fontSizeCountDown,"onUpdate:modelValue":o[15]||(o[15]=e=>d(H).fontSizeCountDown=e),min:1,max:100,size:"small","controls-position":"right"},null,8,["modelValue"])]),p("form",null,[o[36]||(o[36]=h(" 中文字号(px): ")),f(l,{modelValue:d(H).fontSizeActionName,"onUpdate:modelValue":o[16]||(o[16]=e=>d(H).fontSizeActionName=e),min:1,max:100,size:"small","controls-position":"right"},null,8,["modelValue"])]),p("form",F,[o[37]||(o[37]=h(" 字体: ")),f(a,{modelValue:d(H).fontFamily,"onUpdate:modelValue":o[17]||(o[17]=e=>d(H).fontFamily=e),size:"small",clearable:"",onClear:o[18]||(o[18]=e=>d(H).fontFamily="SmartisanHei")},null,8,["modelValue"])]),p("form",k,[f(s,{modelValue:d(H).targetKey,"onUpdate:modelValue":o[19]||(o[19]=e=>d(H).targetKey=e),placeholder:"Select",size:"small",teleported:!1},{default:c((()=>[(m(),i(g,null,v(q,(e=>f(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])]),p("form",N,[f(x,{teleported:!1,title:"确定要重置？",onConfirm:ue},{reference:c((()=>[f(C,null,{default:c((()=>o[38]||(o[38]=[h("重置全部用户设置")]))),_:1,__:[38]})])),_:1})])])),_:1},512),[[r,d(me)]]),u(f(_,{style:V({fontFamily:d(H).fontFamily})},{default:c((()=>{var e,o,l,t,a,n;return[p("div",{style:V({fontSize:`${d(H).fontSizeCountDown}px`}),class:"countdown"},w(Math.max((((null==(e=d(M).targetCast)?void 0:e.overTime)??1)-d(se)-d(ie))/1e3,0).toFixed(2)),5),f(j,{percentage:Math.min((d(se)-((null==(o=d(M).targetCast)?void 0:o.startTime)??1)+d(ie))/((null==(l=d(M).targetCast)?void 0:l.castTime)??1)*100,100),"stroke-width":8,indeterminate:!1,"show-text":!1,color:"#fbfff9",class:"progress"},null,8,["percentage"]),p("div",$,w(null==(t=d(M).targetCast)?void 0:t.actionId)+"("+w(null==(a=d(M).targetCast)?void 0:a.actionId.toString(16).toUpperCase())+") ",1),p("div",{style:V({fontSize:`${d(H).fontSizeActionName}px`}),class:"actionChinese"},w(null==(n=d(M).targetCast)?void 0:n.name),5)]})),_:1},8,["style"]),[[r,d(M).targetCast&&d(se)-d(M).targetCast.overTime+d(ie)<d(H).keep]])])}}}),[["__scopeId","data-v-8fcb4200"]]);export{L as default};
