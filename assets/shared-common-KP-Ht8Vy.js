import{o as e,bC as a,A as o,B as l,t,H as s,K as r,I as n,a as c,u,J as i,R as d,am as p,v as f,bH as g,aQ as m,bD as b,bA as v,X as h,V as y,_,q as k,L as j,Z as x,r as w,Y as J,M as V,bI as D}from"./vendor-vue-iK2zA9mI.js";import{u as T,a as z,b as L,c as H,U as I}from"./shared-core-C8XTA4sN.js";import{c as C,d as O,m as U,s as $,e as K,f as M,g as B,u as E,h as S}from"./vendor-element-plus-CV7wbfUG.js";const A=(e,a)=>{const o=e.__vccOpts||e;for(const[l,t]of a)o[l]=t;return o},R={class:"language-switcher"},W={class:"select-wrapper"},q=A(e({__name:"LanguageSwitcher",props:{teleported:{type:Boolean,default:!0}},setup(e){const g=e,{locale:m,availableLocales:b}=T(),v={zhCn:"简体中文",en:"English",ja:"日本語",zhTw:"繁體中文"},h=a("user-locale",m.value);return o(h,e=>{m.value=e}),l(()=>{m.value=h.value}),(e,a)=>{const o=O,l=C;return t(),s("div",R,[r("div",W,[a[1]||(a[1]=r("svg",{class:"globe-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("circle",{cx:"12",cy:"12",r:"10"}),r("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),r("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})],-1)),n(l,{modelValue:u(h),"onUpdate:modelValue":a[0]||(a[0]=e=>c(h)?h.value=e:null),size:"small",class:"language-select",teleported:g.teleported},{default:i(()=>[(t(!0),s(d,null,p(u(b),e=>(t(),f(o,{key:e,value:e,label:v[e]},null,8,["value","label"]))),128))]),_:1},8,["modelValue","teleported"])])])}}}),[["__scopeId","data-v-36c0d625"]]),F=A(e({__name:"ThemeToggle",props:{storageKey:{}},setup(e){const a=g({storageKey:e.storageKey}),o=b(a);return(e,l)=>{const r=K;return t(),s("button",{"aria-label":"Toggle Dark Mode",class:"theme-toggle",onClick:l[0]||(l[0]=e=>u(o)()),onKeyup:l[1]||(l[1]=m(e=>u(o)(),["enter"]))},[n(r,null,{default:i(()=>[u(a)?(t(),f(u(U),{key:0,class:"el-icon moon"})):(t(),f(u($),{key:1,class:"el-icon sunny"}))]),_:1})],32)}}}),[["__scopeId","data-v-3c45c8c0"]]),G=A(e({__name:"ActWrapper",setup(e){const a=v("hash"),o=z(),l=L();return(e,n)=>{const c=M;return t(),s(d,null,[u(o)?h("",!0):(t(),f(c,{key:0,class:"act-not-ready"},{default:i(()=>[r("h1",null,x(e.$t("actWrapper.notReady")),1)]),_:1})),y(r("div",{style:j({zoom:u(a).scale?.toString(),opacity:u(a).opacity?.toString(),overflow:"hidden"})},[k(e.$slots,"default",{},void 0,!0),u(l)?k(e.$slots,"readme",{key:0},void 0,!0):h("",!0)],4),[[_,u(o)]])],64)}}}),[["__scopeId","data-v-2e855a48"]]),N={flex:"~ col",style:{position:"relative"}},Q=A(e({__name:"DragJob",props:{party:{}},emits:["update"],setup(e,{emit:a}){const o=e,l=a,r=w(!1),f=H(),g=[{role:"tank",color:"blue"},{role:"healer",color:"green"},{role:"dps",color:"red"},{role:"crafter",color:"yellow"},{role:"gatherer",color:"purple"},{role:"none",color:"gray"}];const m=function(){const e={tank:I.isTankJob,healer:I.isHealerJob,dps:I.isDpsJob,crafter:I.isCraftingJob,gatherer:I.isGatheringJob};return Object.fromEntries(g.map(({role:a})=>[a,"none"===a?[]:I.getBattleJobs3().filter(e[a]).map(I.jobToJobEnum).sort(I.enumSortMethod)]))}(),b=Object.values(m).flat().map(e=>({name:I.jobToFullName(I.jobEnumToJob(e)).simple1,job:e})),v=w((()=>{const e={};for(const a of g.map(e=>e.role))e[a]=b.filter(e=>m[a].includes(e.job)).sort((e,a)=>f.arr.indexOf(e.job)-f.arr.indexOf(a.job));return e})());function h(){f.arr=Object.values(v.value).flat().map(e=>e.job),l("update")}return(e,a)=>{const l=B;return t(),s("div",N,[n(l,{modelValue:u(r),"onUpdate:modelValue":a[0]||(a[0]=e=>c(r)?r.value=e:null),size:"small",style:{position:"absolute",top:"0.25rem",right:"0.25rem",background:"rgba(30, 30, 30, 0.33)",color:"white",padding:"0 3px",margin:"0","font-size":"12px",height:"1.5em","box-shadow":"0 0 2px black","z-index":"0"}},{default:i(()=>[J(x(e.$t("dragJob.freeMode")),1)]),_:1},8,["modelValue"]),(t(),s(d,null,p(g,(e,a)=>n(u(D),{key:a,modelValue:u(v)[e.role],"onUpdate:modelValue":a=>u(v)[e.role]=a,animation:150,"ghost-class":"ghost",class:"m-b-0.25 m-t-0.25 flex flex-row gap-0.25 rounded p-0",filter:".no-draggable","force-fallback":!0,onUpdate:h},{default:i(()=>[(t(!0),s(d,null,p(u(v)[e.role],a=>{return y((t(),s("div",{key:a.job,class:V((u(r)||(l=a.job,o.party.find(e=>e.job===l))?`draggable bg-${e.color} cursor-move`:"no-draggable bg-gray-700/50 opacity-75")+" rounded p-l-0.6 p-r-0.6 p-t-0 p-b-0.3 m-0 color-white")},x(a.name),3)),[[_,!!o.party.find(e=>36===e.job)||36!==a.job]]);var l}),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])),64))])}}}),[["__scopeId","data-v-8a657b5c"]]),X={class:"content"},Y={class:"text-group"},Z={class:"title"},P=A(e({__name:"TestLog",emits:["handleLine","beforeHandle","afterHandle"],setup(e,{emit:a}){const o=a,{t:l}=T(),c=w(null),d=w(!1);async function p(e){if(!e||0===e.length)return;o("beforeHandle");const a=S.service({fullscreen:!0,text:l("testLog.loading"),lock:!0,background:"rgba(0, 0, 0, 0.7)"});try{for(let a=0;a<e.length;a++){const l=e[a],t=(await l.text()).split("\n");for(const e of t)o("handleLine",e)}}finally{a.close(),o("afterHandle"),c.value&&(c.value.value="")}}function f(e){d.value=!1;p(e.target.files)}function g(e){e.preventDefault(),d.value=!0}function m(e){e.preventDefault(),d.value=!1}function b(e){e.preventDefault(),d.value=!1;p(e.dataTransfer?.files||null)}return(e,a)=>(t(),s("div",{class:V(["upload-container",{"is-dragover":u(d)}]),onDragover:g,onDragleave:m,onDrop:b},[r("div",X,[n(u(K),{class:"icon",size:32},{default:i(()=>[n(u(E))]),_:1}),r("div",Y,[r("p",Z,x(e.$t("testLog.upload")),1)])]),r("input",{ref_key:"input",ref:c,type:"file",multiple:"",accept:".log,.txt",class:"file-input",onChange:f},null,544)],34))}}),[["__scopeId","data-v-e3479580"]]);export{A as _,F as a,q as b,G as c,Q as d,P as e};
