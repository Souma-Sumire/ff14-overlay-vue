import"./index-Y_-jHXtB.js";/* empty css                     *//* empty css                  *//* empty css                  *//* empty css                   *//* empty css                 *//* empty css                  */import{e}from"./postNamazu-BfC2Emje.js";import{N as a}from"./netregexes-r2K2MLa5.js";import{a as t,c as n}from"./overlay_plugin_api-DU1DlPio.js";import{u as l}from"./index-CKUOrbjt.js";import{F as o,m as d,n as c,e as i,Q as s,f as r,J as m}from"./element-plus-8--zztY3.js";import{t as u,f as p,v as h,x as g,M as v,E as b,u as f,A as w}from"./vue-vendor-wZ_5aAzA.js";const D={"p-l-3":"","bg-white":""},C=u({__name:"okDncDance",setup(u){let C=-1,V="",x=0;const j={cn:["瀑泻","喷泉","逆瀑泻","坠喷泉"],en:["Cascade","Fountain","Reverse Cascade","Fountainfall"],ja:["カスケード","ファウンテン","リバースカスケー","ファウンテンフォール"]},z={cn:{standard:"标准舞步",technical:"技巧舞步"},en:{standard:"Standard Step",technical:"Technical Step"},ja:{standard:"スタンダードステップ",technical:"テクニカルステップ"}},E={inACTCombat:!1,inGameCombat:!1},y=l("okDncDanceSettings",{lang:"cn",hotbar:{standard:[2,1],technical:[2,2]},cdDancingStart:!0,cdDancingEnd:!0,autoDance:!1}),_=e=>n({call:"PostNamazu",c:"DoTextCommand",p:e});function S(e,a){"DNC"===V&&(e&&_(`/hotbar set ${z[y.value.lang].standard} ${y.value.hotbar.standard.join(" ")}`),a&&_(`/hotbar set ${z[y.value.lang].technical} ${y.value.hotbar.technical.join(" ")}`),C=-1)}const M={countdown:a.countdown(),countdownCancel:a.countdownCancel(),losesEffect:a.losesEffect(),changeZone:a.changeZone(),wipe:a.network6d({command:["40000010","4000000F"]})},T=a=>{"DNC"===V&&(y.value.cdDancingStart&&e([{c:"stop",p:"okDncDance-start"},{c:"qid",p:"okDncDance-start"},{c:"DoTextCommand",p:`/ac ${z[y.value.lang].standard}`,d:Math.max(0,1e3*(a-15))}]),y.value.cdDancingEnd&&e([{c:"stop",p:"okDncDance-end"},{c:"qid",p:"okDncDance-end"},{c:"DoTextCommand",p:`/ac ${z[y.value.lang].standard}`,d:1e3*a-300}]))},U=()=>{"DNC"===V&&e([{c:"stop",p:"okDncDance-(?:start|end|auto)"}])},$=()=>{S(!0,!0)},k=()=>{S(!0,!0)},A=()=>{S(!0,!0)},N=()=>{S(!0,!0)};return p((()=>{t("onPlayerChangedEvent",(t=>{var n,l,o;if(V=t.detail.job,x!==t.detail.id&&(x=t.detail.id,M.losesEffect=a.losesEffect({targetId:x.toString(16).toUpperCase(),effectId:"71[AB]"})),"DNC"!==t.detail.job)return;const d=null==(n=t.detail.jobDetail)?void 0:n.currentStep,c=null==(l=t.detail.jobDetail)?void 0:l.steps;if(void 0!==d&&void 0!==c&&d!==C){if(c.length&&d<c.length){const a=j[y.value.lang][["Emboite","Entrechat","Jete","Pirouette"].indexOf(c[d])];_(`/hotbar set ${a} ${y.value.hotbar[2===c.length?"standard":"technical"].join(" ")}`);const n=null==(o=t.detail.jobDetail)?void 0:o.currentStep;if(!1===E.inGameCombat&&E&&void 0!==n&&y.value.autoDance){const t=[{c:"DoTextCommand",p:`/ac ${a}`,d:0===n?1460:960},...Array.from({length:4}).map((()=>({c:"DoTextCommand",p:`/ac ${a}`,d:20})))];e(t)}}else d===c.length&&S(2===c.length,4===c.length);c.length&&(C=d)}})),t("onPlayerDied",(()=>{A()})),t("LogLine",(e=>{var a,t;const n=null==(t=null==(a=M.countdown.exec(e.rawLine))?void 0:a.groups)?void 0:t.countdownTime;void 0!==n?T(Number.parseInt(n)):M.countdownCancel.test(e.rawLine)?U():M.losesEffect.test(e.rawLine)?$():M.changeZone.test(e.rawLine)?k():M.wipe.test(e.rawLine)&&N()})),t("onInCombatChangedEvent",(e=>{E.inACTCombat=e.detail.inACTCombat,E.inGameCombat=e.detail.inGameCombat}))})),(e,a)=>{const t=c,n=d,l=o,u=i,p=s,C=r,V=m;return g(),h("div",D,[v(V,{"label-width":"9rem",style:{"max-width":"300px"}},{default:b((()=>[v(l,{label:"Action语言",style:{width:"14em"}},{default:b((()=>[v(n,{modelValue:f(y).lang,"onUpdate:modelValue":a[0]||(a[0]=e=>f(y).lang=e),size:"small"},{default:b((()=>[v(t,{value:"cn",label:"中文"}),v(t,{value:"en",label:"English"}),v(t,{value:"ja",label:"日本語"})])),_:1},8,["modelValue"])])),_:1}),v(l,{label:"标准舞步热键栏"},{default:b((()=>[v(u,{modelValue:f(y).hotbar.standard[0],"onUpdate:modelValue":a[1]||(a[1]=e=>f(y).hotbar.standard[0]=e),type:"number",style:{width:"2.5rem"},min:"1",max:"10",size:"small"},null,8,["modelValue"]),v(u,{modelValue:f(y).hotbar.standard[1],"onUpdate:modelValue":a[2]||(a[2]=e=>f(y).hotbar.standard[1]=e),type:"number",style:{width:"2.5rem"},min:"1",max:"12",size:"small"},null,8,["modelValue"]),v(p,{trigger:"hover",content:"标准舞步的热键栏位置，例如2-1，代表热键栏2的编号1位置。"},{reference:b((()=>a[8]||(a[8]=[w("svg",{t:"1717309838763",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1460",width:"16",height:"16",flex:""},[w("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z","p-id":"1461"}),w("path",{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7c0-19.7 12.4-37.7 30.9-44.8 59-22.7 97.1-74.7 97.1-132.5 0.1-39.3-17.1-76-48.3-103.3z","p-id":"1462"}),w("path",{d:"M512 732m-40 0a40 40 0 1 0 80 0 40 40 0 1 0-80 0Z","p-id":"1463"})],-1)]))),_:1})])),_:1}),v(l,{label:"技巧舞步热键栏"},{default:b((()=>[v(u,{modelValue:f(y).hotbar.technical[0],"onUpdate:modelValue":a[3]||(a[3]=e=>f(y).hotbar.technical[0]=e),type:"number",style:{width:"2.5rem"},min:"1",max:"10",size:"small"},null,8,["modelValue"]),v(u,{modelValue:f(y).hotbar.technical[1],"onUpdate:modelValue":a[4]||(a[4]=e=>f(y).hotbar.technical[1]=e),type:"number",style:{width:"2.5rem"},min:"1",max:"12",size:"small"},null,8,["modelValue"]),v(p,{trigger:"hover",content:"技巧舞步的热键栏位置，例如2-2，代表热键栏2的编号2位置。"},{reference:b((()=>a[9]||(a[9]=[w("svg",{t:"1717309838763",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1460",width:"16",height:"16",flex:""},[w("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z","p-id":"1461"}),w("path",{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7c0-19.7 12.4-37.7 30.9-44.8 59-22.7 97.1-74.7 97.1-132.5 0.1-39.3-17.1-76-48.3-103.3z","p-id":"1462"}),w("path",{d:"M512 732m-40 0a40 40 0 1 0 80 0 40 40 0 1 0-80 0Z","p-id":"1463"})],-1)]))),_:1})])),_:1}),v(l,{label:"倒计时15秒小舞"},{default:b((()=>[v(C,{modelValue:f(y).cdDancingStart,"onUpdate:modelValue":a[5]||(a[5]=e=>f(y).cdDancingStart=e),size:"small"},null,8,["modelValue"])])),_:1}),v(l,{label:"倒计时0秒小舞"},{default:b((()=>[v(C,{modelValue:f(y).cdDancingEnd,"onUpdate:modelValue":a[6]||(a[6]=e=>f(y).cdDancingEnd=e),size:"small"},null,8,["modelValue"])])),_:1}),v(l,{label:"自动舞步(仅脱战时)"},{default:b((()=>[v(C,{modelValue:f(y).autoDance,"onUpdate:modelValue":a[7]||(a[7]=e=>f(y).autoDance=e),size:"small"},null,8,["modelValue"]),v(p,{trigger:"hover",content:"仅在非战斗状态下生效，只跳颜色，不自动终结"},{reference:b((()=>a[10]||(a[10]=[w("svg",{t:"1717309838763",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1460",width:"16",height:"16",flex:""},[w("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z","p-id":"1461"}),w("path",{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7c0-19.7 12.4-37.7 30.9-44.8 59-22.7 97.1-74.7 97.1-132.5 0.1-39.3-17.1-76-48.3-103.3z","p-id":"1462"}),w("path",{d:"M512 732m-40 0a40 40 0 1 0 80 0 40 40 0 1 0-80 0Z","p-id":"1463"})],-1)]))),_:1})])),_:1})])),_:1})])}}});export{C as default};
