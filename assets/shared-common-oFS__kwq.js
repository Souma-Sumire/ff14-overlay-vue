import{u as e,a,b as l,c as o,U as t}from"./shared-core-BJk7hyv6.js";import{u as s,w as r,o as n,c,a as d,b as u,d as i,e as p,F as v,r as g,f as m,g as f,i as b,h,j as y,k as _,l as k,m as j,n as x,p as w,v as L,q as E,s as J,t as V,x as z,y as T,z as O,A as U,B as $}from"./vendor-vue-i6lpFrx4.js";import{E as D,a as H,b as I,m as C,s as K,c as M,d as S,e as B}from"./vendor-element-plus-B-u_I_lk.js";const A=(e,a)=>{const l=e.__vccOpts||e;for(const[o,t]of a)l[o]=t;return l},F={class:"language-switcher"},W={class:"select-wrapper"},q=A({__name:"LanguageSwitcher",setup(a){const{locale:l,availableLocales:o}=e(),t={zhCn:"简体中文",en:"English",ja:"日本語",zhTw:"繁體中文"},h=s("user-locale",l.value);return r(h,e=>{l.value=e}),n(()=>{l.value=h.value}),(e,a)=>{const l=D,s=H;return d(),c("div",F,[u("div",W,[a[1]||(a[1]=u("svg",{class:"globe-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[u("circle",{cx:"12",cy:"12",r:"10"}),u("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),u("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})],-1)),i(s,{modelValue:m(h),"onUpdate:modelValue":a[0]||(a[0]=e=>b(h)?h.value=e:null),size:"small",class:"language-select"},{default:p(()=>[(d(!0),c(v,null,g(m(o),(e,a)=>(d(),f(l,{key:a,value:e,label:t[e]},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])])])}}},[["__scopeId","data-v-42918adc"]]),G=A(h({__name:"ThemeToggle",props:{storageKey:{}},setup(e){const a=y({storageKey:e.storageKey}),l=k(a);return(e,o)=>{const t=I;return d(),c("button",{"aria-label":"Toggle Dark Mode",class:"theme-toggle",onClick:o[0]||(o[0]=e=>m(l)()),onKeyup:o[1]||(o[1]=_(e=>m(l)(),["enter"]))},[i(t,null,{default:p(()=>[m(a)?(d(),f(m(C),{key:0,class:"el-icon moon"})):(d(),f(m(K),{key:1,class:"el-icon sunny"}))]),_:1})],32)}}}),[["__scopeId","data-v-3c45c8c0"]]),N=A(h({__name:"ActWrapper",setup(e){const o=j("hash"),t=a(),s=l();return(e,a)=>{const l=M;return d(),c(v,null,[m(t)?x("",!0):(d(),f(l,{key:0,class:"act-not-ready"},{default:p(()=>[u("h1",null,V(e.$t("actWrapper.notReady")),1)]),_:1})),w(u("div",{style:J({zoom:m(o).scale?.toString(),opacity:m(o).opacity?.toString(),overflow:"hidden"})},[E(e.$slots,"default",{},void 0,!0),m(s)?E(e.$slots,"readme",{key:0},void 0,!0):x("",!0)],4),[[L,m(t)]])],64)}}}),[["__scopeId","data-v-2e855a48"]]),R={flex:"~ col",style:{position:"relative"}},P=A(h({__name:"DragJob",props:{party:{}},emits:["update"],setup(e,{emit:a}){const l=e,s=a,r=z(!1),n=o(),u=[{role:"tank",color:"blue"},{role:"healer",color:"green"},{role:"dps",color:"red"},{role:"crafter",color:"yellow"},{role:"gatherer",color:"purple"},{role:"none",color:"gray"}];const f=function(){const e={tank:t.isTankJob,healer:t.isHealerJob,dps:t.isDpsJob,crafter:t.isCraftingJob,gatherer:t.isGatheringJob};return Object.fromEntries(u.map(({role:a})=>[a,"none"===a?[]:t.getBattleJobs3().filter(e[a]).map(t.jobToJobEnum).sort(t.enumSortMethod)]))}(),h=Object.values(f).flat().map(e=>({name:t.jobToFullName(t.jobEnumToJob(e)).simple1,job:e})),y=z((()=>{const e={};for(const a of u.map(e=>e.role))e[a]=h.filter(e=>f[a].includes(e.job)).sort((e,a)=>n.arr.indexOf(e.job)-n.arr.indexOf(a.job));return e})());function _(){n.arr=Object.values(y.value).flat().map(e=>e.job),s("update")}return(e,a)=>{const o=S;return d(),c("div",R,[i(o,{modelValue:m(r),"onUpdate:modelValue":a[0]||(a[0]=e=>b(r)?r.value=e:null),size:"small",style:{position:"absolute",top:"0.25rem",right:"0.25rem",background:"rgba(30, 30, 30, 0.33)",color:"white",padding:"0 3px",margin:"0","font-size":"12px",height:"1.5em","box-shadow":"0 0 2px black","z-index":"0"}},{default:p(()=>[T(V(e.$t("dragJob.freeMode")),1)]),_:1},8,["modelValue"]),(d(),c(v,null,g(u,(e,a)=>i(m(U),{key:a,modelValue:m(y)[e.role],"onUpdate:modelValue":a=>m(y)[e.role]=a,animation:150,"ghost-class":"ghost",class:"m-b-0.25 m-t-0.25 flex flex-row gap-0.25 rounded p-0",filter:".no-draggable","force-fallback":!0,onUpdate:_},{default:p(()=>[(d(!0),c(v,null,g(m(y)[e.role],a=>{return w((d(),c("div",{key:a.job,class:O((m(r)||(o=a.job,l.party.find(e=>e.job===o))?`draggable bg-${e.color} cursor-move`:"no-draggable bg-gray-700/50 opacity-75")+" rounded p-l-0.6 p-r-0.6 p-t-0 p-b-0.3 m-0 color-white")},V(a.name),3)),[[L,!!l.party.find(e=>36===e.job)||36!==a.job]]);var o}),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])),64))])}}}),[["__scopeId","data-v-092bd7a1"]]),Q={class:"upload select"},X={class:"upload text"},Y=A(h({__name:"TestLog",emits:["handleLine","beforeHandle","afterHandle"],setup(a,{emit:l}){const{t:o}=e(),t=l,s=z(null),r=z(null);async function i(e){r.value?.classList.remove("drag");const a=e.target.files;if(!a||0===a.length)return;t("beforeHandle");const l=B.service({fullscreen:!0,text:o("testLog.loading"),lock:!0,spinner:'<div style="width:0;height:0"></div>'});for(let o=0;o<a.length;o++){const e=a[o],l=await e.text();for(const a of l.split("\n"))t("handleLine",a)}l.close(),t("afterHandle"),r.value?.classList.remove("drag")}function p(e){e.preventDefault(),r.value?.classList.add("drag")}function v(e){e.preventDefault(),r.value?.classList.remove("drag")}return n(()=>{s.value?.addEventListener("change",i),r.value?.addEventListener("dragover",p),r.value?.addEventListener("dragleave",v)}),$(()=>{s.value?.removeEventListener("change",i),r.value?.removeEventListener("dragover",p),r.value?.removeEventListener("dragleave",v)}),(e,a)=>(d(),c("div",Q,[u("div",{ref_key:"select",ref:r,class:"upload-select"},[u("div",X,[a[0]||(a[0]=u("span",null,"+",-1)),u("p",null,V(e.$t("testLog.upload")),1)]),u("input",{ref_key:"input",ref:s,type:"file"},null,512)],512)]))}}),[["__scopeId","data-v-36beaa21"]]);export{A as _,G as a,q as b,N as c,P as d,Y as e};
