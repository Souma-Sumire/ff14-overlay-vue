import{_ as a,c as e}from"./shared-common-BAWlJkJt.js";import{ao as t,r as s,U as o,f as n}from"./shared-core-WNOcvfDk.js";import{h as r,c as l,a as i,F as c,r as d,s as u,z as m,f as g,b as f,b6 as p,n as y,y as h,t as _,o as b,g as v,e as j,d as k}from"./vendor-vue-i6lpFrx4.js";import{a as w}from"./cactbot-C9BOJncy.js";import{p as C,u as P,o as I,n as $}from"./vendor-element-plus-vX222rPh.js";const L={"w-100vw":"",flex:"~ nowrap",class:"main","m-t-1":""},M=["data-casterId"],T=["src"],x=a(r({__name:"Main",setup(a){const e=new URLSearchParams(window.location.href.split("?")[1]),o=t(),n=Number(/^(?:1|true|yes|on|open|enabled)$/i.test(e.get("displayAA")??""));return(a,e)=>(i(),l("div",L,[(i(!0),l(c,null,d(g(o).castData.filter(a=>a.key),a=>(i(),l("div",{key:a.key,"data-casterId":a.casterId,class:m(`images ${a.class} logLine${a.logLine} displayAA${g(n)}`),style:u(`--animeDuration: ${g(o).config.duration}s;`)},[f("img",{src:a.src,class:"action-icon",height:"40",loading:"lazy",onError:e[0]||(e[0]=(...a)=>g(s)&&g(s)(...a))},null,40,T),e[1]||(e[1]=f("img",{class:"frame",loading:"lazy"},null,-1))],14,M))),128))]))}}),[["__scopeId","data-v-67c0fa3f"]]),A={key:0,"z-100":"",flex:"~ gap0 wrap",class:"header-layout"},z=["onClick"],D={flex:"~ nowrap items-end",style:{"align-items":"flex-end",gap:"0.1rem"}},E=["src","onerror"],F=a(r({__name:"Header",setup(a){const e=new URLSearchParams(window.location.href.split("?")[1]);function n(a){const e=o.jobEnumToJob(a);return`https://souma.diemoe.net/resources/img/cj2/${o.jobToFullName(e).en}.png`}const r=t();p(()=>{for(const a of r.partyData)a.src=n(a.job)});const u=/^(?:1|true|yes|on|open|enabled|undefined)$/i.test(e.get("showHeader")||"true");return(a,e)=>g(u)&&g(r).partyData.length>1?(i(),l("div",A,[(i(!0),l(c,null,d(g(r).partyDataFormatted,(a,e)=>{return i(),l("button",{key:e,class:m(["job-lists",g(r).focusTargetId===a.id?"job-lists-focus":""]),"m-0":"","p-0":"",onClick:e=>g(r).handleClickChangeTarget(a.id)},[f("div",D,[f("img",{src:a.src,style:{height:"1.25em"},loading:"lazy",onerror:g(s)},null,8,E),h(" "+_((t=a.job,o.jobToFullName(o.jobEnumToJob(t)).simple2)),1)])],10,z);var t}),128))])):y("",!0)}}),[["__scopeId","data-v-ebc78197"]]),U={class:"common-layout"},N={key:0},S=a(r({__name:"castingMonitor",setup(a){const s=t(),o=n();return b(()=>{w("ChangePrimaryPlayer",s.handleChangePrimaryPlayer),w("LogLine",s.handleLogLine),w("PartyChanged",s.handlePartyChanged),w("BroadcastMessage",a=>{"castMonitorOverlay"===a.source&&(s.focusTargetId=a.msg.targetId)})}),setInterval(()=>{s.cleanUpExpired()},1e3),(a,t)=>{const n=F,r=C,c=x,d=P,u=I,m=$,p=e;return i(),v(p,null,{default:j(()=>[f("div",U,[k(u,{"items-center":""},{default:j(()=>[k(r,{class:"header-layout"},{default:j(()=>[k(n)]),_:1}),k(d,null,{default:j(()=>[k(c)]),_:1})]),_:1}),g(o)?(i(),l("footer",N,[k(m,{onClick:t[0]||(t[0]=a=>g(s).testParty(!0))},{default:j(()=>[h(_(a.$t("castingMonitor.testParty")),1)]),_:1}),k(m,{onClick:t[1]||(t[1]=a=>g(s).testParty(!1))},{default:j(()=>[h(_(a.$t("castingMonitor.testSolo")),1)]),_:1}),k(m,{onClick:t[2]||(t[2]=a=>g(s).testAction())},{default:j(()=>[h(_(a.$t("castingMonitor.testAction")),1)]),_:1})])):y("",!0)])]),_:1})}}}),[["__scopeId","data-v-d2d6a76c"]]);export{S as default};
