import{_ as e}from"./ActWrapper-DEv5PPmG.js";import{c as a}from"./postNamazu-D5YC3eRC.js";import{N as t}from"./netregexes-DsAXea56.js";import{a as n,c as o}from"./overlay_plugin_api-DHbPkDtN.js";import{d as l,g as d,i,k as s,w as c,o as r,a as m,b as p,u}from"./index-rExSYECU.js";import{a as h,E as g}from"./index-DWrhuQoj.js";import{b as f,a as b}from"./index-DU_DVTaN.js";import{E as v}from"./validator-Ky0MT829.js";import{E as w}from"./index-DXV3pDLm.js";import{E as D}from"./index-Dym2b2d6.js";import"./useDev-A4IWb35a.js";import"./useDemo-CcVX6BuP.js";import"./index-BYnZpkxX.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";import"./contentFinderCondition-BIZz1N_J.js";import"./regexes-Blkj7yOl.js";import"./use-form-common-props-BLbb-UNH.js";import"./index-DS93V5Xv.js";import"./index-JxEOfCWG.js";import"./_baseClone-CKoZAIPK.js";import"./index-DrvlotDM.js";import"./index-Dl2vfFGe.js";import"./focus-trap-BwEOvUTS.js";import"./index-DeA2G1sq.js";import"./vnode-BM_cplcr.js";import"./index-DGWc4u_v.js";const C={"bg-white":"","p-l-3":""},x=l({__name:"okDncDance",setup(l){let x=-1,j="",V=0;const _={cn:["瀑泻","喷泉","逆瀑泻","坠喷泉"],en:["Cascade","Fountain","Reverse Cascade","Fountainfall"],ja:["カスケード","ファウンテン","リバースカスケー","ファウンテンフォール"]},z={cn:{standard:"标准舞步",technical:"技巧舞步"},en:{standard:"Standard Step",technical:"Technical Step"},ja:{standard:"スタンダードステップ",technical:"テクニカルステップ"}},E={inACTCombat:!1,inGameCombat:!1},y=d("okDncDanceSettings",{lang:"cn",hotbar:{standard:[2,1],technical:[2,2]},cdDancingStart:!0,cdDancingEnd:!0,autoDance:!1}),S=e=>o({call:"PostNamazu",c:"DoTextCommand",p:e});function M(e,a){"DNC"===j&&(e&&S(`/hotbar set ${z[y.value.lang].standard} ${y.value.hotbar.standard.join(" ")}`),a&&S(`/hotbar set ${z[y.value.lang].technical} ${y.value.hotbar.technical.join(" ")}`),x=-1)}const T={countdown:t.countdown(),countdownCancel:t.countdownCancel(),losesEffect:t.losesEffect(),changeZone:t.changeZone(),wipe:t.network6d({command:["40000010","4000000F"]})},$=e=>{"DNC"===j&&(y.value.cdDancingStart&&a([{c:"stop",p:"okDncDance-start"},{c:"qid",p:"okDncDance-start"},{c:"DoTextCommand",p:`/ac ${z[y.value.lang].standard}`,d:Math.max(0,1e3*(e-15))}]),y.value.cdDancingEnd&&a([{c:"stop",p:"okDncDance-end"},{c:"qid",p:"okDncDance-end"},{c:"DoTextCommand",p:`/ac ${z[y.value.lang].standard}`,d:1e3*e-300}]))},k=()=>{"DNC"===j&&a([{c:"stop",p:"okDncDance-(?:start|end|auto)"}])},N=()=>{M(!0,!0)},U=()=>{M(!0,!0)},L=()=>{M(!0,!0)},A=()=>{M(!0,!0)};return i(()=>{n("onPlayerChangedEvent",e=>{if(j=e.detail.job,V!==e.detail.id&&(V=e.detail.id,T.losesEffect=t.losesEffect({targetId:V.toString(16).toUpperCase(),effectId:"71[AB]"})),"DNC"!==e.detail.job)return;const n=e.detail.jobDetail?.currentStep,o=e.detail.jobDetail?.steps;if(void 0!==n&&void 0!==o&&n!==x){if(o.length&&n<o.length){const t=_[y.value.lang][["Emboite","Entrechat","Jete","Pirouette"].indexOf(o[n])];S(`/hotbar set ${t} ${y.value.hotbar[2===o.length?"standard":"technical"].join(" ")}`);const l=e.detail.jobDetail?.currentStep;if(!1===E.inGameCombat&&E&&void 0!==l&&y.value.autoDance){const e=[{c:"DoTextCommand",p:`/ac ${t}`,d:0===l?1460:960},...Array.from({length:4}).map(()=>({c:"DoTextCommand",p:`/ac ${t}`,d:20}))];a(e)}}else n===o.length&&M(2===o.length,4===o.length);o.length&&(x=n)}}),n("onPlayerDied",()=>{L()}),n("LogLine",e=>{const a=T.countdown.exec(e.rawLine)?.groups?.countdownTime;void 0!==a?$(Number.parseInt(a)):T.countdownCancel.test(e.rawLine)?k():T.losesEffect.test(e.rawLine)?N():T.changeZone.test(e.rawLine)?U():T.wipe.test(e.rawLine)&&A()}),n("onInCombatChangedEvent",e=>{E.inACTCombat=e.detail.inACTCombat,E.inGameCombat=e.detail.inGameCombat})}),(a,t)=>{const n=b,o=f,l=g,d=v,i=w,x=D,j=h,V=e;return r(),s(V,null,{default:c(()=>[m("div",C,[p(j,{"label-width":"9rem",style:{"max-width":"300px"}},{default:c(()=>[p(l,{label:"Action语言",style:{width:"14em"}},{default:c(()=>[p(o,{modelValue:u(y).lang,"onUpdate:modelValue":t[0]||(t[0]=e=>u(y).lang=e),size:"small"},{default:c(()=>[p(n,{value:"cn",label:"中文"}),p(n,{value:"en",label:"English"}),p(n,{value:"ja",label:"日本語"})]),_:1},8,["modelValue"])]),_:1}),p(l,{label:"标准舞步热键栏"},{default:c(()=>[p(d,{modelValue:u(y).hotbar.standard[0],"onUpdate:modelValue":t[1]||(t[1]=e=>u(y).hotbar.standard[0]=e),type:"number",style:{width:"2.5rem"},min:"1",max:"10",size:"small"},null,8,["modelValue"]),p(d,{modelValue:u(y).hotbar.standard[1],"onUpdate:modelValue":t[2]||(t[2]=e=>u(y).hotbar.standard[1]=e),type:"number",style:{width:"2.5rem"},min:"1",max:"12",size:"small"},null,8,["modelValue"]),p(i,{trigger:"hover",content:"标准舞步的热键栏位置，例如2-1，代表热键栏2的编号1位置。"},{reference:c(()=>[...t[8]||(t[8]=[m("svg",{t:"1717309838763",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1460",width:"16",height:"16",flex:""},[m("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z","p-id":"1461"}),m("path",{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7c0-19.7 12.4-37.7 30.9-44.8 59-22.7 97.1-74.7 97.1-132.5 0.1-39.3-17.1-76-48.3-103.3z","p-id":"1462"}),m("path",{d:"M512 732m-40 0a40 40 0 1 0 80 0 40 40 0 1 0-80 0Z","p-id":"1463"})],-1)])]),_:1})]),_:1}),p(l,{label:"技巧舞步热键栏"},{default:c(()=>[p(d,{modelValue:u(y).hotbar.technical[0],"onUpdate:modelValue":t[3]||(t[3]=e=>u(y).hotbar.technical[0]=e),type:"number",style:{width:"2.5rem"},min:"1",max:"10",size:"small"},null,8,["modelValue"]),p(d,{modelValue:u(y).hotbar.technical[1],"onUpdate:modelValue":t[4]||(t[4]=e=>u(y).hotbar.technical[1]=e),type:"number",style:{width:"2.5rem"},min:"1",max:"12",size:"small"},null,8,["modelValue"]),p(i,{trigger:"hover",content:"技巧舞步的热键栏位置，例如2-2，代表热键栏2的编号2位置。"},{reference:c(()=>[...t[9]||(t[9]=[m("svg",{t:"1717309838763",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1460",width:"16",height:"16",flex:""},[m("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z","p-id":"1461"}),m("path",{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7c0-19.7 12.4-37.7 30.9-44.8 59-22.7 97.1-74.7 97.1-132.5 0.1-39.3-17.1-76-48.3-103.3z","p-id":"1462"}),m("path",{d:"M512 732m-40 0a40 40 0 1 0 80 0 40 40 0 1 0-80 0Z","p-id":"1463"})],-1)])]),_:1})]),_:1}),p(l,{label:"倒计时15秒小舞"},{default:c(()=>[p(x,{modelValue:u(y).cdDancingStart,"onUpdate:modelValue":t[5]||(t[5]=e=>u(y).cdDancingStart=e),size:"small"},null,8,["modelValue"])]),_:1}),p(l,{label:"倒计时0秒小舞"},{default:c(()=>[p(x,{modelValue:u(y).cdDancingEnd,"onUpdate:modelValue":t[6]||(t[6]=e=>u(y).cdDancingEnd=e),size:"small"},null,8,["modelValue"])]),_:1}),p(l,{label:"自动舞步(仅脱战时)"},{default:c(()=>[p(x,{modelValue:u(y).autoDance,"onUpdate:modelValue":t[7]||(t[7]=e=>u(y).autoDance=e),size:"small"},null,8,["modelValue"]),p(i,{trigger:"hover",content:"仅在非战斗状态下生效，只跳颜色，不自动终结"},{reference:c(()=>[...t[10]||(t[10]=[m("svg",{t:"1717309838763",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1460",width:"16",height:"16",flex:""},[m("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z","p-id":"1461"}),m("path",{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7c0-19.7 12.4-37.7 30.9-44.8 59-22.7 97.1-74.7 97.1-132.5 0.1-39.3-17.1-76-48.3-103.3z","p-id":"1462"}),m("path",{d:"M512 732m-40 0a40 40 0 1 0 80 0 40 40 0 1 0-80 0Z","p-id":"1463"})],-1)])]),_:1})]),_:1})]),_:1})])]),_:1})}}});export{x as default};
