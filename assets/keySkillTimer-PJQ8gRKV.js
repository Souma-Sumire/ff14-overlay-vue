import{_ as e}from"./ActWrapper--bIwNWvF.js";import{d as s,g as i,h as a,bc as t,j as l,w as n,o,c as r,z as c,u as p,a as m,F as u,l as d,p as f,q as k,t as y,b as j,e as h}from"./index-CRzCPJle.js";/* empty css                  */import{u as g}from"./useDemo-DTVAqySm.js";import{u as _}from"./useDev-BGzuXuJo.js";import{u as v}from"./useZone-Dwokb7fK.js";import{u as w,c as b}from"./keySkills-CQgZ6HbQ.js";import{a as C,r as S}from"./overlay_plugin_api-DHbPkDtN.js";import{E as P}from"./index-AMP2kYp7.js";import{_ as x}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./el-card-B7ZF4978.js";import"./index-D5hgXDGH.js";import"./zoneInfo-DILfrNXn.js";import"./zone_info-BLx_6wEM.js";import"./content_type-lMHx3DqW.js";import"./demoParty-_wqsP-i3.js";import"./util-BOtaAWHW.js";import"./actionChinese-CezHnvf8.js";import"./chineseToIcon-xFdmTerz.js";import"./status-Cjdq15lm.js";import"./tts-BkZGqxam.js";import"./index-D6QUi_v-.js";import"./use-form-common-props-B9Xw1uiy.js";const I={key:0,class:"key-skills-timer-container"},K={class:"skills-grid"},D=["onClick"],z={class:"buff-filter"},F=["src"],L={key:1,class:"test"},T=x(s({__name:"keySkillTimer",setup(s){const x=w(),{zoneType:T}=v(),E=i(()=>"Pvp"===T.value),$=_(),A=g(),N=e=>{x.party=e.party.filter(e=>e.inParty)},X=e=>{if(!E.value)if("21"===e.line[0]||"22"===e.line[0]&&"0"===e.line[45]){const s=Number.parseInt(e.line[4],16),i=b(s),a=e.line[2];x.triggerSkill(i,a,!0)}else"33"===e.line[0]&&["40000010","4000000F"].includes(e.line[3])&&x.wipe()},O=e=>{x.language=e.charName.includes(" ")?"global":"chinese"};function Z(e){x.speed=e,x.usedSkills.forEach(e=>{x.triggerSkill(e.id,e.owner.id,!1)})}function q(){window.open("/ff14-overlay-vue/#/keySkillTimerSettings","_blank")}return a(()=>{C("PartyChanged",N),C("LogLine",X),C("ChangePrimaryPlayer",O)}),t(()=>{S("PartyChanged",N),S("LogLine",X),S("ChangePrimaryPlayer",O),Object.values(x.skillStates).forEach(e=>{e.rafId&&cancelAnimationFrame(e.rafId)})}),(s,i)=>{const a=P,t=e;return o(),l(t,null,{readme:n(()=>[...i[3]||(i[3]=[m("span",{class:"demo-text"},[h(" 当前为演示数据，锁定后将显示真实数据。"),m("br"),h(" 请尽量拉宽窗口，点击技能可模拟触发。 ")],-1)])]),default:n(()=>[p(E)?c("",!0):(o(),r("div",I,[m("div",K,[(o(!0),r(u,null,d(p(x).usedSkills,e=>(o(),r("div",{key:e.instanceKey,class:k(["buff-container",`line${e.line}`]),style:f({zIndex:p(A)||p($)?99:void 0}),onClick:()=>p(A)||p($)?function(e,s){($||A)&&x.triggerSkill(e.id,e.owner.id,s)}(e,!0):null},[m("div",z,[m("span",{class:k(["duration",[p(x).skillStates[e.instanceKey]?.isRecast?"cooldown":"active"]])},y(p(x).skillStates[e.instanceKey]?.text||""),3),m("img",{src:e.src},null,8,F),p(x).skillStates[e.instanceKey]?.active?(o(),r("div",{key:p(x).skillStates[e.instanceKey]?.startTime||0,class:"cooldown-layer",style:f({clipPath:`inset(${p(x).skillStates[e.instanceKey]?.clipPercent??0}% 0 0 0)`})},null,4)):c("",!0)]),e.owner.hasDuplicate.skill||e.owner.hasDuplicate.job?(o(),r("span",{key:0,class:k(`job has-duplicate ${e.owner.hasDuplicate.job?"duplicate-show-name":"duplicate-show-job-name"} ${e.owner.jobIcon.toLowerCase()}`)},y(e.owner.hasDuplicate.job?e.owner.name:e.owner.jobName),3)):c("",!0)],14,D))),128))])])),p($)||p(A)?(o(),r("div",L,[j(a,{onClick:p(x).demoFullParty},{default:n(()=>[...i[4]||(i[4]=[h(" 模拟全部职业 ",-1)])]),_:1},8,["onClick"]),j(a,{onClick:i[0]||(i[0]=()=>p(x).shuffle())},{default:n(()=>[...i[5]||(i[5]=[h(" 模拟8人小队 ",-1)])]),_:1}),p($)?(o(),l(a,{key:0,onClick:i[1]||(i[1]=()=>Z(1))},{default:n(()=>[...i[6]||(i[6]=[h(" 测试触发(1X) ",-1)])]),_:1})):c("",!0),p($)?(o(),l(a,{key:1,onClick:i[2]||(i[2]=()=>Z(5))},{default:n(()=>[...i[7]||(i[7]=[h(" 测试触发(5X) ",-1)])]),_:1})):c("",!0),j(a,{onClick:p(x).wipe},{default:n(()=>[...i[8]||(i[8]=[h(" 模拟团灭 ",-1)])]),_:1},8,["onClick"]),j(a,{type:"primary",onClick:q},{default:n(()=>[...i[9]||(i[9]=[h(" 设置 ",-1)])]),_:1})])):c("",!0)]),_:1})}}}),[["__scopeId","data-v-d191f6d7"]]);export{T as default};
