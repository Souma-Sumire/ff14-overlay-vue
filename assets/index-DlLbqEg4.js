import{be as e,a2 as a,ae as t,af as l,at as i,a1 as n,r as o,h as r,B as s,bM as u,ak as d,am as m,an as v,a4 as p,d as c,a0 as g,f,aL as b,c as h,o as V,b as w,w as y,a as x,s as S,u as k,t as B,q as M,bd as C,z as E,aK as L,i as P,a6 as z,ai as D,k as F,G as N,F as T,m as I,P as X,ao as Y}from"./index-yua74IOg.js";import{E as _}from"./index-mkPKz7A1.js";import{b as j,E as K}from"./index-BzR0Fzs-.js";import{C as U,I as W,U as R,u as $,t as O,d as A}from"./index-2JLJ5XMA.js";import{d as q}from"./index-Cgv43Y7I.js";import{c as G}from"./clamp-BiVSaYIA.js";import{a as H,d as J,c as Q}from"./use-form-common-props-RrDyTtSG.js";const Z=Symbol("sliderContextKey"),ee=t({modelValue:{type:l([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:i,inputSize:i,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:l(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:l(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:j,default:"top"},marks:{type:l(Object)},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...$(["ariaLabel"])}),ae=t=>e(t)||a(t)&&t.every(e),te={[R]:ae,[W]:ae,[U]:ae},le=t({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:j,default:"top"}}),ie={[R]:a=>e(a)},ne=(e,a,t)=>{const{disabled:l,min:i,max:p,step:c,showTooltip:g,persistent:f,precision:b,sliderSize:h,formatTooltip:V,emitChange:w,resetSize:y,updateDragging:x}=n(Z),{tooltip:S,tooltipVisible:k,formatValue:B,displayTooltip:M,hideTooltip:C}=((e,a,t)=>{const l=o(),i=o(!1),n=r(()=>a.value instanceof Function),s=r(()=>n.value&&a.value(e.modelValue)||e.modelValue),u=q(()=>{t.value&&(i.value=!0)},50),d=q(()=>{t.value&&(i.value=!1)},50);return{tooltip:l,tooltipVisible:i,formatValue:s,displayTooltip:u,hideTooltip:d}})(e,V,g),E=o(),L=r(()=>(e.modelValue-i.value)/(p.value-i.value)*100+"%"),P=r(()=>e.vertical?{bottom:L.value}:{left:L.value}),z=e=>{l.value||(e.preventDefault(),N(e),window.addEventListener("mousemove",T),window.addEventListener("touchmove",T),window.addEventListener("mouseup",I),window.addEventListener("touchend",I),window.addEventListener("contextmenu",I),E.value.focus())},D=e=>{l.value||(a.newPosition=Number.parseFloat(L.value)+e/(p.value-i.value)*100,X(a.newPosition),w())},F=e=>{let a,t;return e.type.startsWith("touch")?(t=e.touches[0].clientY,a=e.touches[0].clientX):(t=e.clientY,a=e.clientX),{clientX:a,clientY:t}},N=t=>{a.dragging=!0,a.isClick=!0;const{clientX:l,clientY:i}=F(t);e.vertical?a.startY=i:a.startX=l,a.startPosition=Number.parseFloat(L.value),a.newPosition=a.startPosition},T=t=>{if(a.dragging){let l;a.isClick=!1,M(),y();const{clientX:i,clientY:n}=F(t);e.vertical?(a.currentY=n,l=(a.startY-a.currentY)/h.value*100):(a.currentX=i,l=(a.currentX-a.startX)/h.value*100),a.newPosition=a.startPosition+l,X(a.newPosition)}},I=()=>{a.dragging&&(setTimeout(()=>{a.dragging=!1,a.hovering||C(),a.isClick||X(a.newPosition),w()},0),window.removeEventListener("mousemove",T),window.removeEventListener("touchmove",T),window.removeEventListener("mouseup",I),window.removeEventListener("touchend",I),window.removeEventListener("contextmenu",I))},X=async l=>{if(null===l||Number.isNaN(+l))return;l=G(l,0,100);const n=Math.floor((p.value-i.value)/c.value),o=n*c.value/(p.value-i.value)*100,r=o+(100-o)/2;let s;if(l<o){const e=o/n,a=Math.round(l/e);s=i.value+a*c.value}else s=l<r?i.value+n*c.value:p.value;s=Number.parseFloat(s.toFixed(b.value)),s!==e.modelValue&&t(R,s),a.dragging||e.modelValue===a.oldValue||(a.oldValue=e.modelValue),await d(),a.dragging&&M(),S.value.updatePopper()};return s(()=>a.dragging,e=>{x(e)}),u(E,"touchstart",z,{passive:!1}),{disabled:l,button:E,tooltip:S,tooltipVisible:k,showTooltip:g,persistent:f,wrapperStyle:P,formatValue:B,handleMouseEnter:()=>{a.hovering=!0,M()},handleMouseLeave:()=>{a.hovering=!1,a.dragging||C()},onButtonDown:z,onKeyDown:e=>{let a=!0;switch(m(e)){case v.left:case v.down:D(-c.value);break;case v.right:case v.up:D(c.value);break;case v.home:l.value||(X(0),w());break;case v.end:l.value||(X(100),w());break;case v.pageDown:D(4*-c.value);break;case v.pageUp:D(4*c.value);break;default:a=!1}a&&e.preventDefault()},setPosition:X}},oe=c({name:"ElSliderButton"});var re=p(c({...oe,props:le,emits:ie,setup(e,{expose:a,emit:t}){const l=e,i=g("slider"),n=f({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:l.modelValue}),o=r(()=>!!m.value&&v.value),{disabled:s,button:u,tooltip:d,showTooltip:m,persistent:v,tooltipVisible:p,wrapperStyle:c,formatValue:C,handleMouseEnter:E,handleMouseLeave:L,onButtonDown:P,onKeyDown:z,setPosition:D}=ne(l,n,t),{hovering:F,dragging:N}=b(n);return a({onButtonDown:P,onKeyDown:z,setPosition:D,hovering:F,dragging:N}),(e,a)=>(V(),h("div",{ref_key:"button",ref:u,class:S([k(i).e("button-wrapper"),{hover:k(F),dragging:k(N)}]),style:M(k(c)),tabindex:k(s)?-1:0,onMouseenter:k(E),onMouseleave:k(L),onMousedown:k(P),onFocus:k(E),onBlur:k(L),onKeydown:k(z)},[w(k(K),{ref_key:"tooltip",ref:d,visible:k(p),placement:e.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":e.tooltipClass,disabled:!k(m),persistent:k(o)},{content:y(()=>[x("span",null,B(k(C)),1)]),default:y(()=>[x("div",{class:S([k(i).e("button"),{hover:k(F),dragging:k(N)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled","persistent"])],46,["tabindex","onMouseenter","onMouseleave","onMousedown","onFocus","onBlur","onKeydown"]))}}),[["__file","button.vue"]]);var se=c({name:"ElSliderMarker",props:t({mark:{type:l([String,Object]),default:void 0}}),setup(e){const a=g("slider"),t=r(()=>C(e.mark)?e.mark:e.mark.label),l=r(()=>C(e.mark)?void 0:e.mark.style);return()=>E("div",{class:a.e("marks-text"),style:l.value},t.value)}});const ue=(e,a,t)=>{const{form:l,formItem:i}=H(),n=L(),s=o(),u=o(),m={firstButton:s,secondButton:u},v=r(()=>e.disabled||(null==l?void 0:l.disabled)||!1),p=r(()=>Math.min(a.firstValue,a.secondValue)),c=r(()=>Math.max(a.firstValue,a.secondValue)),g=r(()=>e.range?100*(c.value-p.value)/(e.max-e.min)+"%":100*(a.firstValue-e.min)/(e.max-e.min)+"%"),f=r(()=>e.range?100*(p.value-e.min)/(e.max-e.min)+"%":"0%"),b=r(()=>e.vertical?{height:e.height}:{}),h=r(()=>e.vertical?{height:g.value,bottom:f.value}:{width:g.value,left:f.value}),V=()=>{if(n.value){const t=n.value.getBoundingClientRect();a.sliderSize=t[e.vertical?"height":"width"]}},w=t=>{const l=(t=>{const l=e.min+t*(e.max-e.min)/100;if(!e.range)return s;let i;return i=Math.abs(p.value-l)<Math.abs(c.value-l)?a.firstValue<a.secondValue?"firstButton":"secondButton":a.firstValue>a.secondValue?"firstButton":"secondButton",m[i]})(t);return l.value.setPosition(t),l},y=e=>{t(R,e),t(W,e)},x=async()=>{await d(),t(U,e.range?[p.value,c.value]:e.modelValue)},S=t=>{var l,i,o,r,s,u;if(v.value||a.dragging)return;V();let d=0;if(e.vertical){const e=null!=(o=null==(i=null==(l=t.touches)?void 0:l.item(0))?void 0:i.clientY)?o:t.clientY;d=(n.value.getBoundingClientRect().bottom-e)/a.sliderSize*100}else{d=((null!=(u=null==(s=null==(r=t.touches)?void 0:r.item(0))?void 0:s.clientX)?u:t.clientX)-n.value.getBoundingClientRect().left)/a.sliderSize*100}return d<0||d>100?void 0:w(d)};return{elFormItem:i,slider:n,firstButton:s,secondButton:u,sliderDisabled:v,minValue:p,maxValue:c,runwayStyle:b,barStyle:h,resetSize:V,setPosition:w,emitChange:x,onSliderWrapperPrevent:e=>{var a,t;((null==(a=m.firstButton.value)?void 0:a.dragging)||(null==(t=m.secondButton.value)?void 0:t.dragging))&&e.preventDefault()},onSliderClick:e=>{S(e)&&x()},onSliderDown:async e=>{const a=S(e);a&&(await d(),a.value.onButtonDown(e))},onSliderMarkerDown:e=>{if(v.value||a.dragging)return;w(e)&&x()},setFirstValue:t=>{a.firstValue=null!=t?t:e.min,y(e.range?[p.value,c.value]:null!=t?t:e.min)},setSecondValue:t=>{a.secondValue=t,e.range&&y([p.value,c.value])}}},de=c({name:"ElSlider"});const me=Y(p(c({...de,props:ee,emits:te,setup(t,{expose:l,emit:i}){const n=t,m=g("slider"),{t:v}=z(),p=f({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:c,slider:y,firstButton:B,secondButton:C,sliderDisabled:E,minValue:L,maxValue:Y,runwayStyle:j,barStyle:K,resetSize:U,emitChange:$,onSliderWrapperPrevent:q,onSliderClick:G,onSliderDown:H,onSliderMarkerDown:ee,setFirstValue:ae,setSecondValue:te}=ue(n,p,i),{stops:le,getStopStyle:ie}=((e,a,t,l)=>({stops:r(()=>{if(!e.showStops||e.min>e.max)return[];if(0===e.step)return[];const i=Math.ceil((e.max-e.min)/e.step),n=100*e.step/(e.max-e.min),o=Array.from({length:i-1}).map((e,a)=>(a+1)*n);return e.range?o.filter(a=>a<100*(t.value-e.min)/(e.max-e.min)||a>100*(l.value-e.min)/(e.max-e.min)):o.filter(t=>t>100*(a.firstValue-e.min)/(e.max-e.min))}),getStopStyle:a=>e.vertical?{bottom:`${a}%`}:{left:`${a}%`}}))(n,p,L,Y),{inputId:ne,isLabeledByFormItem:oe}=J(n,{formItemContext:c}),de=Q(),me=r(()=>n.inputSize||de.value),ve=r(()=>n.ariaLabel||v("el.slider.defaultLabel",{min:n.min,max:n.max})),pe=r(()=>n.range?n.rangeStartLabel||v("el.slider.defaultRangeStartLabel"):ve.value),ce=r(()=>n.formatValueText?n.formatValueText(ye.value):`${ye.value}`),ge=r(()=>n.rangeEndLabel||v("el.slider.defaultRangeEndLabel")),fe=r(()=>n.formatValueText?n.formatValueText(xe.value):`${xe.value}`),be=r(()=>[m.b(),m.m(de.value),m.is("vertical",n.vertical),{[m.m("with-input")]:n.showInput}]),he=(e=>r(()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort((e,a)=>e-a).filter(a=>a<=e.max&&a>=e.min).map(a=>({point:a,position:100*(a-e.min)/(e.max-e.min),mark:e.marks[a]})):[]))(n);((t,l,i,n,o,r)=>{const u=e=>{o(R,e),o(W,e)},d=()=>t.range?![i.value,n.value].every((e,a)=>e===l.oldValue[a]):t.modelValue!==l.oldValue,m=()=>{var i,n;t.min>t.max&&O("Slider","min should not be greater than max.");const o=t.modelValue;t.range&&a(o)?o[1]<t.min?u([t.min,t.min]):o[0]>t.max?u([t.max,t.max]):o[0]<t.min?u([t.min,o[1]]):o[1]>t.max?u([o[0],t.max]):(l.firstValue=o[0],l.secondValue=o[1],d()&&(t.validateEvent&&(null==(i=null==r?void 0:r.validate)||i.call(r,"change").catch(e=>A())),l.oldValue=o.slice())):t.range||!e(o)||Number.isNaN(o)||(o<t.min?u(t.min):o>t.max?u(t.max):(l.firstValue=o,d()&&(t.validateEvent&&(null==(n=null==r?void 0:r.validate)||n.call(r,"change").catch(e=>A())),l.oldValue=o)))};m(),s(()=>l.dragging,e=>{e||m()}),s(()=>t.modelValue,(e,t)=>{l.dragging||a(e)&&a(t)&&e.every((e,a)=>e===t[a])&&l.firstValue===e[0]&&l.secondValue===e[1]||m()},{deep:!0}),s(()=>[t.min,t.max],()=>{m()})})(n,p,L,Y,i,c);const Ve=r(()=>{const e=[n.min,n.max,n.step].map(e=>{const a=`${e}`.split(".")[1];return a?a.length:0});return Math.max.apply(null,e)}),{sliderWrapper:we}=((t,l,i)=>{const n=o();return P(async()=>{t.range?(a(t.modelValue)?(l.firstValue=Math.max(t.min,t.modelValue[0]),l.secondValue=Math.min(t.max,t.modelValue[1])):(l.firstValue=t.min,l.secondValue=t.max),l.oldValue=[l.firstValue,l.secondValue]):(!e(t.modelValue)||Number.isNaN(t.modelValue)?l.firstValue=t.min:l.firstValue=Math.min(t.max,Math.max(t.min,t.modelValue)),l.oldValue=l.firstValue),u(window,"resize",i),await d(),i()}),{sliderWrapper:n}})(n,p,U),{firstValue:ye,secondValue:xe,sliderSize:Se}=b(p);return u(we,"touchstart",q,{passive:!1}),u(we,"touchmove",q,{passive:!1}),D(Z,{...b(n),sliderSize:Se,disabled:E,precision:Ve,emitChange:$,resetSize:U,updateDragging:e=>{p.dragging=e}}),l({onSliderClick:G}),(e,a)=>{var t,l;return V(),h("div",{id:e.range?k(ne):void 0,ref_key:"sliderWrapper",ref:we,class:S(k(be)),role:e.range?"group":void 0,"aria-label":e.range&&!k(oe)?k(ve):void 0,"aria-labelledby":e.range&&k(oe)?null==(t=k(c))?void 0:t.labelId:void 0},[x("div",{ref_key:"slider",ref:y,class:S([k(m).e("runway"),{"show-input":e.showInput&&!e.range},k(m).is("disabled",k(E))]),style:M(k(j)),onMousedown:k(H),onTouchstartPassive:k(H)},[x("div",{class:S(k(m).e("bar")),style:M(k(K))},null,6),w(re,{id:e.range?void 0:k(ne),ref_key:"firstButton",ref:B,"model-value":k(ye),vertical:e.vertical,"tooltip-class":e.tooltipClass,placement:e.placement,role:"slider","aria-label":e.range||!k(oe)?k(pe):void 0,"aria-labelledby":!e.range&&k(oe)?null==(l=k(c))?void 0:l.labelId:void 0,"aria-valuemin":e.min,"aria-valuemax":e.range?k(xe):e.max,"aria-valuenow":k(ye),"aria-valuetext":k(ce),"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":k(E),"onUpdate:modelValue":k(ae)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),e.range?(V(),F(re,{key:0,ref_key:"secondButton",ref:C,"model-value":k(xe),vertical:e.vertical,"tooltip-class":e.tooltipClass,placement:e.placement,role:"slider","aria-label":k(ge),"aria-valuemin":k(ye),"aria-valuemax":e.max,"aria-valuenow":k(xe),"aria-valuetext":k(fe),"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":k(E),"onUpdate:modelValue":k(te)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):N("v-if",!0),e.showStops?(V(),h("div",{key:1},[(V(!0),h(T,null,I(k(le),(e,a)=>(V(),h("div",{key:a,class:S(k(m).e("stop")),style:M(k(ie)(e))},null,6))),128))])):N("v-if",!0),k(he).length>0?(V(),h(T,{key:2},[x("div",null,[(V(!0),h(T,null,I(k(he),(e,a)=>(V(),h("div",{key:a,style:M(k(ie)(e.position)),class:S([k(m).e("stop"),k(m).e("marks-stop")])},null,6))),128))]),x("div",{class:S(k(m).e("marks"))},[(V(!0),h(T,null,I(k(he),(e,a)=>(V(),F(k(se),{key:a,mark:e.mark,style:M(k(ie)(e.position)),onMousedown:X(a=>k(ee)(e.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):N("v-if",!0)],46,["onMousedown","onTouchstartPassive"]),e.showInput&&!e.range?(V(),F(k(_),{key:0,ref:"input","model-value":k(ye),class:S(k(m).e("input")),step:e.step,disabled:k(E),controls:e.showInputControls,min:e.min,max:e.max,precision:k(Ve),size:k(me),"onUpdate:modelValue":k(ae),onChange:k($)},null,8,["model-value","class","step","disabled","controls","min","max","precision","size","onUpdate:modelValue","onChange"])):N("v-if",!0)],10,["id","role","aria-label","aria-labelledby"])}}}),[["__file","slider.vue"]]));export{me as E,ee as a,Z as b,te as s};
