import{_ as e}from"./ActWrapper-87c67aa1.js";import"./index-960031e9.js";/* empty css                  */import{u as s}from"./useDemo-dea69d31.js";import{u as a}from"./useDev-cab88d81.js";import{u as i}from"./useZone-e8d78d1f.js";import{u as l,c as t}from"./keySkills-1876df10.js";import{a as o,r as n}from"./overlay_plugin_api-974cdd44.js";import{d as r}from"./index-c9f4301b.js";import{i as c}from"./element-plus-cb4c922a.js";import{t as p,c as u,e as m,P as d,D as k,E as y,x as f,v as _,H as j,u as g,S as h,A as v,L as S,aa as C,G as w,K as b,M as P,J as I}from"./vue-vendor-6f37fd53.js";import{_ as x}from"./_plugin-vue_export-helper-6a8c15be.js";/* empty css                */import"./zoneInfo-40d5d60a.js";import"./zone_info-e69ac441.js";import"./content_type-e6dd7239.js";import"./util-3591e9ca.js";import"./actionChinese-a1a2f77a.js";import"./lz-string-343805bb.js";import"./chineseToIcon-e0fcd48d.js";import"./status-9bc9036c.js";import"./tts-5e313398.js";const L={class:"skills-grid"},T=["onClick"],z={class:"buff-filter"},D=["src"],E={key:1,class:"test"},$=x(p({__name:"keySkillTimer",setup(p){const x=r("hash"),$=l(),{zoneType:A}=i(),F=u(()=>"Pvp"===A.value),N=a(),J=s(),K=e=>{$.party=e.party},X=e=>{if(!F.value)if("21"===e.line[0]||"22"===e.line[0]&&"0"===e.line[45]){const s=Number.parseInt(e.line[4],16),a=t(s),i=e.line[2];$.triggerSkill(a,i,!0)}else"33"===e.line[0]&&["40000010","4000000F"].includes(e.line[3])&&$.wipe()},G=e=>{$.language=e.charName.includes(" ")?"global":"chinese"};function H(e){$.speed=e,$.usedSkills.forEach(e=>{$.triggerSkill(e.id,e.owner.id,!1)})}function M(){window.open("/#/keySkillTimerSettings","_blank")}return m(()=>{o("PartyChanged",K),o("LogLine",X),o("ChangePrimaryPlayer",G)}),d(()=>{n("PartyChanged",K),n("LogLine",X),n("ChangePrimaryPlayer",G),Object.values($.skillStates).forEach(e=>{e.rafId&&cancelAnimationFrame(e.rafId)})}),(s,a)=>{const i=c,l=e;return f(),k(l,null,{readme:y(()=>a[3]||(a[3]=[v("span",{class:"demo-text"},[I(" 当前为演示数据，锁定后将显示真实数据。"),v("br"),I(" 请尽量拉宽窗口，点击技能可模拟触发。 ")],-1)])),default:y(()=>[g(F)?j("",!0):(f(),_("div",{key:0,class:"key-skills-timer-container",style:h({"--scale":g(x).scale?.toString(),"--opacity":g(x).opacity?.toString()})},[v("div",L,[(f(!0),_(S,null,C(g($).usedSkills,e=>(f(),_("div",{key:e.key,class:w(["buff-container",`line${e.line}`]),style:h({zIndex:g(J)||g(N)?99:void 0}),onClick:()=>g(J)||g(N)?function(e,s){(N||J)&&$.triggerSkill(e.id,e.owner.id,s)}(e,!0):null},[v("div",z,[v("span",{class:w(["duration",[g($).skillStates[e.key]?.isRecast?"cooldown":"active"]])},b(g($).skillStates[e.key]?.text||""),3),v("img",{src:e.src},null,8,D),g($).skillStates[e.key]?.active?(f(),_("div",{key:g($).skillStates[e.key]?.startTime||0,class:"cooldown-layer",style:h({clipPath:`inset(${g($).skillStates[e.key]?.clipPercent??0}% 0 0 0)`})},null,4)):j("",!0)]),e.owner.hasDuplicate.skill?(f(),_("span",{key:0,class:w(`job has-duplicate duplicate-skill ${e.owner.jobIcon.toLowerCase()}`)},b(e.owner.name),3)):e.owner.hasDuplicate.job?(f(),_("span",{key:1,class:w(`job has-duplicate duplicate-job ${e.owner.jobIcon.toLowerCase()}`)},b(e.owner.jobName),3)):j("",!0)],14,T))),128))])],4)),g(N)||g(J)?(f(),_("div",E,[P(i,{onClick:g($).demoFullParty},{default:y(()=>a[4]||(a[4]=[I(" 模拟全部职业 ",-1)])),_:1,__:[4]},8,["onClick"]),P(i,{onClick:a[0]||(a[0]=()=>g($).shuffle())},{default:y(()=>a[5]||(a[5]=[I(" 模拟8人小队 ",-1)])),_:1,__:[5]}),g(N)?(f(),k(i,{key:0,onClick:a[1]||(a[1]=()=>H(1))},{default:y(()=>a[6]||(a[6]=[I(" 测试触发(1X) ",-1)])),_:1,__:[6]})):j("",!0),g(N)?(f(),k(i,{key:1,onClick:a[2]||(a[2]=()=>H(5))},{default:y(()=>a[7]||(a[7]=[I(" 测试触发(5X) ",-1)])),_:1,__:[7]})):j("",!0),P(i,{onClick:g($).wipe},{default:y(()=>a[8]||(a[8]=[I(" 模拟团灭 ",-1)])),_:1,__:[8]},8,["onClick"]),P(i,{type:"primary",onClick:M},{default:y(()=>a[9]||(a[9]=[I(" 设置 ",-1)])),_:1,__:[9]})])):j("",!0)]),_:1})}}}),[["__scopeId","data-v-69dd6013"]]);export{$ as default};
