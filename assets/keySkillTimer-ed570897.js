import{_ as e}from"./ActWrapper-fee789d0.js";import"./index-fdde2d6a.js";/* empty css                  */import{u as s}from"./useDemo-dea69d31.js";import{u as i}from"./useDev-cab88d81.js";import{u as a}from"./useZone-e8d78d1f.js";import{u as l,c as t}from"./keySkills-3ec1c112.js";import{a as o,r as n}from"./overlay_plugin_api-974cdd44.js";import{i as r}from"./element-plus-cb4c922a.js";import{t as c,c as p,e as u,P as m,D as k,E as d,x as f,v as y,H as _,u as j,A as g,L as v,aa as C,S,G as h,K as w,M as b,J as P}from"./vue-vendor-6f37fd53.js";import{_ as I}from"./_plugin-vue_export-helper-6a8c15be.js";/* empty css                */import"./index-c9f4301b.js";import"./zoneInfo-40d5d60a.js";import"./zone_info-e69ac441.js";import"./content_type-e6dd7239.js";import"./util-3591e9ca.js";import"./actionChinese-e2356100.js";import"./chineseToIcon-e0fcd48d.js";import"./status-9bc9036c.js";import"./tts-5e313398.js";const x={key:0,class:"key-skills-timer-container"},L={class:"skills-grid"},T=["onClick"],z={class:"buff-filter"},D=["src"],E={key:1,class:"test"},A=I(c({__name:"keySkillTimer",setup(c){const I=l(),{zoneType:A}=a(),F=p(()=>"Pvp"===A.value),N=i(),$=s(),J=e=>{I.party=e.party},K=e=>{if(!F.value)if("21"===e.line[0]||"22"===e.line[0]&&"0"===e.line[45]){const s=Number.parseInt(e.line[4],16),i=t(s),a=e.line[2];I.triggerSkill(i,a,!0)}else"33"===e.line[0]&&["40000010","4000000F"].includes(e.line[3])&&I.wipe()},X=e=>{I.language=e.charName.includes(" ")?"global":"chinese"};function q(e){I.speed=e,I.usedSkills.forEach(e=>{I.triggerSkill(e.id,e.owner.id,!1)})}function G(){window.open("/#/keySkillTimerSettings","_blank")}return u(()=>{o("PartyChanged",J),o("LogLine",K),o("ChangePrimaryPlayer",X)}),m(()=>{n("PartyChanged",J),n("LogLine",K),n("ChangePrimaryPlayer",X),Object.values(I.skillStates).forEach(e=>{e.rafId&&cancelAnimationFrame(e.rafId)})}),(s,i)=>{const a=r,l=e;return f(),k(l,null,{readme:d(()=>i[3]||(i[3]=[g("span",{class:"demo-text"},[P(" 当前为演示数据，锁定后将显示真实数据。"),g("br"),P(" 请尽量拉宽窗口，点击技能可模拟触发。 ")],-1)])),default:d(()=>[j(F)?_("",!0):(f(),y("div",x,[g("div",L,[(f(!0),y(v,null,C(j(I).usedSkills,e=>(f(),y("div",{key:e.key,class:h(["buff-container",`line${e.line}`]),style:S({zIndex:j($)||j(N)?99:void 0}),onClick:()=>j($)||j(N)?function(e,s){(N||$)&&I.triggerSkill(e.id,e.owner.id,s)}(e,!0):null},[g("div",z,[g("span",{class:h(["duration",[j(I).skillStates[e.key]?.isRecast?"cooldown":"active"]])},w(j(I).skillStates[e.key]?.text||""),3),g("img",{src:e.src},null,8,D),j(I).skillStates[e.key]?.active?(f(),y("div",{key:j(I).skillStates[e.key]?.startTime||0,class:"cooldown-layer",style:S({clipPath:`inset(${j(I).skillStates[e.key]?.clipPercent??0}% 0 0 0)`})},null,4)):_("",!0)]),e.owner.hasDuplicate?(f(),y("span",{key:0,class:h(`job ${e.owner.jobIcon.toLowerCase()}`)},w(e.owner.jobName),3)):_("",!0)],14,T))),128))])])),j(N)||j($)?(f(),y("div",E,[b(a,{onClick:j(I).demoFullParty},{default:d(()=>i[4]||(i[4]=[P(" 模拟全部职业 ",-1)])),_:1,__:[4]},8,["onClick"]),b(a,{onClick:i[0]||(i[0]=()=>j(I).shuffle())},{default:d(()=>i[5]||(i[5]=[P(" 模拟8人小队 ",-1)])),_:1,__:[5]}),j(N)?(f(),k(a,{key:0,onClick:i[1]||(i[1]=()=>q(1))},{default:d(()=>i[6]||(i[6]=[P(" 测试触发(1X) ",-1)])),_:1,__:[6]})):_("",!0),j(N)?(f(),k(a,{key:1,onClick:i[2]||(i[2]=()=>q(5))},{default:d(()=>i[7]||(i[7]=[P(" 测试触发(5X) ",-1)])),_:1,__:[7]})):_("",!0),b(a,{onClick:j(I).wipe},{default:d(()=>i[8]||(i[8]=[P(" 模拟团灭 ",-1)])),_:1,__:[8]},8,["onClick"]),b(a,{type:"primary",onClick:G},{default:d(()=>i[9]||(i[9]=[P(" 设置 ",-1)])),_:1,__:[9]})])):_("",!0)]),_:1})}}}),[["__scopeId","data-v-ae030587"]]);export{A as default};
