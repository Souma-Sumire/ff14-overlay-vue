import{a8 as e,h as t,di as l,ae as o,bS as r,af as a,bq as n,d as s,a0 as i,r as c,f as d,u,B as h,j as m,z as f,P as p,bt as w,aK as g,bf as y,ak as v,a2 as x,bv as b,bZ as S,aa as R,C as T,a1 as C,aO as H,b as I,bN as E,i as M,al as O,n as L,be as D,bh as W,F as K,c9 as z,ab as A,cE as N,ai as j,a7 as F,a5 as G,Q as V,cc as k,dj as P,dk as $,ax as B,ao as q}from"./index-BlHK43-k.js";import{B as U,d as Y,c as X}from"./index-DEi3mICi.js";import{V as Q,F as Z,B as _,R as J,a as ee,b as te,c as le,L as oe,H as re,S as ae,d as ne,I as se,e as ie,A as ce,D as de,C as ue,E as he,f as me,g as fe}from"./defaults-CGwgk0Vt.js";import{d as pe,r as we,g as ge}from"./vnode-bhxBfJdp.js";import{E as ye}from"./index-Cl0fB7dz.js";var ve=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function xe(e,t){return e===t||!(!ve(e)||!ve(t))}function be(e,t){if(e.length!==t.length)return!1;for(var l=0;l<e.length;l++)if(!xe(e[l],t[l]))return!1;return!0}const Se=()=>{const o=e().proxy.$props;return t(()=>{const e=(e,t,l)=>({});return o.perfMode?l(e):function(e,t){void 0===t&&(t=be);var l=null;function o(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];if(l&&l.lastThis===this&&t(o,l.lastArgs))return l.lastResult;var a=e.apply(this,o);return l={lastResult:a,lastArgs:o,lastThis:this},a}return o.clear=function(){l=null},o}(e)})},Re=r({type:a([Number,Function]),required:!0}),Te=r({type:Number}),Ce=r({type:Number,default:2}),He=r({type:String,values:["ltr","rtl"],default:"ltr"}),Ie=r({type:Number,default:0}),Ee=r({type:Number,required:!0}),Me=r({type:String,values:["horizontal","vertical"],default:Q}),Oe=o({className:{type:String,default:""},containerElement:{type:a([String,Object]),default:"div"},data:{type:a(Array),default:()=>n([])},direction:He,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},innerProps:{type:a(Object),default:()=>({})},style:{type:a([Object,String,Array])},useIsScrolling:Boolean,width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:Boolean}),Le=o({cache:Ce,estimatedItemSize:Te,layout:Me,initScrollOffset:Ie,total:Ee,itemSize:Re,...Oe}),De={type:Number,default:6},We={type:Number,default:0},Ke={type:Number,default:2},ze=o({columnCache:Ce,columnWidth:Re,estimatedColumnWidth:Te,estimatedRowHeight:Te,initScrollLeft:Ie,initScrollTop:Ie,itemKey:{type:a(Function),default:({columnIndex:e,rowIndex:t})=>`${t}:${e}`},rowCache:Ce,rowHeight:Re,totalColumn:Ee,totalRow:Ee,hScrollbarSize:De,vScrollbarSize:De,scrollbarStartGap:We,scrollbarEndGap:Ke,role:String,...Oe}),Ae=o({alwaysOn:Boolean,class:String,layout:Me,total:Ee,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:De,startGap:We,endGap:Ke,visible:Boolean}),Ne=(e,t)=>e<t?Z:_,je=e=>e===oe||e===J||e===re,Fe=e=>e===J;let Ge=null;function Ve(e=!1){if(null===Ge||e){const e=document.createElement("div"),t=e.style;t.width="50px",t.height="50px",t.overflow="scroll",t.direction="rtl";const l=document.createElement("div"),o=l.style;return o.width="100px",o.height="100px",e.appendChild(l),document.body.appendChild(e),e.scrollLeft>0?Ge=ee:(e.scrollLeft=1,Ge=0===e.scrollLeft?te:le),document.body.removeChild(e),Ge}return Ge}const ke=s({name:"ElVirtualScrollBar",props:Ae,emits:["scroll","start-move","stop-move"],setup(e,{emit:l}){const o=t(()=>e.startGap+e.endGap),r=i("virtual-scrollbar"),a=i("scrollbar"),n=c(),s=c();let w=null,g=null;const y=d({isDragging:!1,traveled:0}),v=t(()=>U[e.layout]),x=t(()=>e.clientSize-u(o)),b=t(()=>({position:"absolute",width:`${re===e.layout?x.value:e.scrollbarSize}px`,height:`${re===e.layout?e.scrollbarSize:x.value}px`,[ae[e.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),S=t(()=>{const t=e.ratio;if(t>=100)return Number.POSITIVE_INFINITY;if(t>=50)return t*x.value/100;const l=x.value/3;return Math.floor(Math.min(Math.max(t*x.value/100,ne),l))}),R=t(()=>{if(!Number.isFinite(S.value))return{display:"none"};const t=`${S.value}px`,l=function({move:e,size:t,bar:l},o){const r={},a=`translate${l.axis}(${e}px)`;return r[l.size]=t,r.transform=a,"horizontal"===o?r.height="100%":r.width="100%",r}({bar:v.value,size:t,move:y.traveled},e.layout);return l}),T=t(()=>Math.ceil(e.clientSize-S.value-u(o))),C=()=>{window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",I),document.onselectstart=g,g=null;const e=u(s);e&&(e.removeEventListener("touchmove",E),e.removeEventListener("touchend",I))},H=e=>{e.stopImmediatePropagation(),e.ctrlKey||[1,2].includes(e.button)||(y.isDragging=!0,y[v.value.axis]=e.currentTarget[v.value.offset]-(e[v.value.client]-e.currentTarget.getBoundingClientRect()[v.value.direction]),l("start-move"),(()=>{window.addEventListener("mousemove",E),window.addEventListener("mouseup",I);const e=u(s);e&&(g=document.onselectstart,document.onselectstart=()=>!1,e.addEventListener("touchmove",E,{passive:!0}),e.addEventListener("touchend",I))})())},I=()=>{y.isDragging=!1,y[v.value.axis]=0,l("stop-move"),C()},E=e=>{const{isDragging:t}=y;if(!t)return;if(!s.value||!n.value)return;const o=y[v.value.axis];if(!o)return;pe(w);const r=-1*(n.value.getBoundingClientRect()[v.value.direction]-e[v.value.client])-(s.value[v.value.offset]-o);w=we(()=>{y.traveled=Math.max(0,Math.min(r,T.value)),l("scroll",r,T.value)})},M=e=>{const t=Math.abs(e.target.getBoundingClientRect()[v.value.direction]-e[v.value.client])-s.value[v.value.offset]/2;y.traveled=Math.max(0,Math.min(t,T.value)),l("scroll",t,T.value)};return h(()=>e.scrollFrom,e=>{y.isDragging||(y.traveled=Math.ceil(e*T.value))}),m(()=>{C()}),()=>f("div",{role:"presentation",ref:n,class:[r.b(),e.class,(e.alwaysOn||y.isDragging)&&"always-on"],style:b.value,onMousedown:p(M,["stop","prevent"]),onTouchstartPrevent:H},f("div",{ref:s,class:a.e("thumb"),style:R.value,onMousedown:H},[]))}});var Pe=(e=>(e.ASC="asc",e.DESC="desc",e))(Pe||{}),$e=(e=>(e.LEFT="left",e.CENTER="center",e.RIGHT="right",e))($e||{}),Be=(e=>(e.LEFT="left",e.RIGHT="right",e))(Be||{});const qe={asc:"desc",desc:"asc"},Ue=Symbol("placeholder");const Ye=(l,{mainTableRef:o,leftTableRef:r,rightTableRef:a,tableInstance:n,ns:s,isScrolling:i})=>{const d=e(),{emit:h}=d,m=g(!1),f=c(l.defaultExpandedRowKeys||[]),p=c(-1),w=g(null),x=c({}),b=c({}),S=g({}),R=g({}),T=g({}),C=t(()=>y(l.estimatedRowHeight));function H({hovered:e,rowKey:t}){if(i.value)return;n.vnode.el.querySelectorAll(`[rowkey="${String(t)}"]`).forEach(t=>{e?t.classList.add(s.is("hovered")):t.classList.remove(s.is("hovered"))})}const I=Y(()=>{var e,t,l,n;m.value=!0,x.value={...u(x),...u(b)},E(u(w),!1),b.value={},w.value=null,null==(e=o.value)||e.forceUpdate(),null==(t=r.value)||t.forceUpdate(),null==(l=a.value)||l.forceUpdate(),null==(n=d.proxy)||n.$forceUpdate(),m.value=!1},0);function E(e,t=!1){u(C)&&[o,r,a].forEach(l=>{const o=u(l);o&&o.resetAfterRowIndex(e,t)})}return{expandedRowKeys:f,lastRenderedRowIndex:p,isDynamic:C,isResetting:m,rowHeights:x,resetAfterIndex:E,onRowExpanded:function({expanded:e,rowData:t,rowIndex:o,rowKey:r}){var a,i;const c=[...u(f)],d=c.indexOf(r);e?-1===d&&c.push(r):d>-1&&c.splice(d,1),f.value=c,h("update:expandedRowKeys",c),null==(a=l.onRowExpand)||a.call(l,{expanded:e,rowData:t,rowIndex:o,rowKey:r}),null==(i=l.onExpandedRowsChange)||i.call(l,c),n.vnode.el.querySelector(`.${s.is("hovered")}[rowkey="${String(r)}"]`)&&v(()=>H({hovered:!0,rowKey:r}))},onRowHovered:H,onRowsRendered:function(e){var t;null==(t=l.onRowsRendered)||t.call(l,e),e.rowCacheEnd>u(p)&&(p.value=e.rowCacheEnd)},onRowHeightChange:function({rowKey:e,height:t,rowIndex:l},o){o?o===Be.RIGHT?T.value[e]=t:S.value[e]=t:R.value[e]=t;const r=Math.max(...[S,T,R].map(t=>t.value[e]||0));u(x)[e]!==r&&(!function(e,t,l){const o=u(w);(null===o||o>l)&&(w.value=l),b.value[e]=t}(e,r,l),I())}}},Xe=(e,t)=>e+t,Qe=e=>x(e)?e.reduce(Xe,0):e,Ze=(e,t,l={})=>R(e)?e(t):null!=e?e:l,_e=e=>(["width","maxWidth","minWidth","height"].forEach(t=>{e[t]=b(e[t])}),e),Je=e=>S(e)?t=>f(e,t):e;function et(l){const o=c(),r=c(),a=c(),{columns:n,columnsStyles:s,columnsTotalWidth:d,fixedColumnsOnLeft:m,fixedColumnsOnRight:f,hasFixedColumns:p,mainColumns:v,onColumnSorted:S}=function(e,l,o){const r=t(()=>u(l).map((e,t)=>{var l,o;return{...e,key:null!=(o=null!=(l=e.key)?l:e.dataKey)?o:t}})),a=t(()=>u(r).filter(e=>!e.hidden)),n=t(()=>u(a).filter(e=>"left"===e.fixed||!0===e.fixed)),s=t(()=>u(a).filter(e=>"right"===e.fixed)),i=t(()=>u(a).filter(e=>!e.fixed)),c=t(()=>{const e=[];return u(n).forEach(t=>{e.push({...t,placeholderSign:Ue})}),u(i).forEach(t=>{e.push(t)}),u(s).forEach(t=>{e.push({...t,placeholderSign:Ue})}),e}),d=t(()=>u(n).length||u(s).length),h=t(()=>u(r).reduce((t,l)=>(t[l.key]=((e,t,l)=>{var o;const r={flexGrow:0,flexShrink:0,...l?{}:{flexGrow:e.flexGrow||0,flexShrink:e.flexShrink||1}};l||(r.flexShrink=1);const a={...null!=(o=e.style)?o:{},...r,flexBasis:"auto",width:e.width};return t||(e.maxWidth&&(a.maxWidth=e.maxWidth),e.minWidth&&(a.minWidth=e.minWidth)),a})(l,u(o),e.fixed),t),{})),m=t(()=>u(a).reduce((e,t)=>e+t.width,0)),f=e=>u(r).find(t=>t.key===e);return{columns:r,columnsStyles:h,columnsTotalWidth:m,fixedColumnsOnLeft:n,fixedColumnsOnRight:s,hasFixedColumns:d,mainColumns:c,normalColumns:i,visibleColumns:a,getColumn:f,getColumnStyle:e=>u(h)[e],updateColumnWidth:(e,t)=>{e.width=t},onColumnSorted:function(t){var l;const{key:o}=t.currentTarget.dataset;if(!o)return;const{sortState:r,sortBy:a}=e;let n=Pe.ASC;n=w(r)?qe[r[o]]:qe[a.order],null==(l=e.onColumnSort)||l.call(e,{column:f(o),key:o,order:n})}}}(l,T(l,"columns"),T(l,"fixed")),{scrollTo:R,scrollToLeft:C,scrollToTop:H,scrollToRow:I,onScroll:E,onVerticalScroll:M,scrollPos:O}=((e,{mainTableRef:t,leftTableRef:l,rightTableRef:o,onMaybeEndReached:r})=>{const a=c({scrollLeft:0,scrollTop:0});function n(e){var r,a,n;const{scrollTop:s}=e;null==(r=t.value)||r.scrollTo(e),null==(a=l.value)||a.scrollToTop(s),null==(n=o.value)||n.scrollToTop(s)}function s(e){a.value=e,n(e)}function i(e){a.value.scrollTop=e,n(u(a))}return h(()=>u(a).scrollTop,(e,t)=>{e>t&&r()}),{scrollPos:a,scrollTo:s,scrollToLeft:function(e){var l,o;a.value.scrollLeft=e,null==(o=null==(l=t.value)?void 0:l.scrollTo)||o.call(l,u(a))},scrollToTop:i,scrollToRow:function(e,l="auto"){var o;null==(o=t.value)||o.scrollToRow(e,l)},onScroll:function(t){var l;s(t),null==(l=e.onScroll)||l.call(e,t)},onVerticalScroll:function({scrollTop:e}){const{scrollTop:t}=u(a);e!==t&&i(e)}}})(l,{mainTableRef:o,leftTableRef:r,rightTableRef:a,onMaybeEndReached:function(){const{onEndReached:e}=l;if(!e)return;const{scrollTop:t}=u(O),o=u(q),r=u(_),a=o-(t+r)+l.hScrollbarSize;!ae.value&&u(z)>=0&&o<=t+u(X)-u(le)?(ae.value=!0,e(a)):ae.value=!1}}),L=i("table-v2"),D=e(),W=g(!1),{expandedRowKeys:K,lastRenderedRowIndex:z,isDynamic:A,isResetting:N,rowHeights:j,resetAfterIndex:F,onRowExpanded:G,onRowHeightChange:V,onRowHovered:k,onRowsRendered:P}=Ye(l,{mainTableRef:o,leftTableRef:r,rightTableRef:a,tableInstance:D,ns:L,isScrolling:W}),{data:$,depthMap:B}=((e,{expandedRowKeys:l,lastRenderedRowIndex:o,resetAfterIndex:r})=>{const a=c({}),n=t(()=>{const t={},{data:o,rowKey:r}=e,n=u(l);if(!n||!n.length)return o;const s=[],i=new Set;n.forEach(e=>i.add(e));let c=o.slice();for(c.forEach(e=>t[e[r]]=0);c.length>0;){const e=c.shift();s.push(e),i.has(e[r])&&x(e.children)&&e.children.length>0&&(c=[...e.children,...c],e.children.forEach(l=>t[l[r]]=t[e[r]]+1))}return a.value=t,s}),s=t(()=>{const{data:t,expandColumnKey:l}=e;return l?u(n):t});return h(s,(e,t)=>{e!==t&&(o.value=-1,r(0,!0))}),{data:s,depthMap:a}})(l,{expandedRowKeys:K,lastRenderedRowIndex:z,resetAfterIndex:F}),q=t(()=>{const{estimatedRowHeight:e,rowHeight:t}=l,o=u($);return y(e)?Object.values(u(j)).reduce((e,t)=>e+t,0):o.length*t}),{bodyWidth:U,fixedTableHeight:Y,mainTableHeight:X,leftTableWidth:Q,rightTableWidth:Z,windowHeight:_,footerHeight:J,emptyStyle:ee,rootStyle:te,headerHeight:le}=((e,{columnsTotalWidth:l,rowsHeight:o,fixedColumnsOnLeft:r,fixedColumnsOnRight:a})=>{const n=t(()=>{const{fixed:t,width:o,vScrollbarSize:r}=e,a=o-r;return t?Math.max(Math.round(u(l)),a):a}),s=t(()=>{const{height:t=0,maxHeight:l=0,footerHeight:r,hScrollbarSize:a}=e;if(l>0){const e=u(f),t=u(o),n=u(m)+e+t+a;return Math.min(n,l-r)}return t-r}),i=t(()=>{const{maxHeight:t}=e,l=u(s);if(y(t)&&t>0)return l;const r=u(o)+u(m)+u(f);return Math.min(l,r)}),c=e=>e.width,d=t(()=>Qe(u(r).map(c))),h=t(()=>Qe(u(a).map(c))),m=t(()=>Qe(e.headerHeight)),f=t(()=>{var t;return((null==(t=e.fixedData)?void 0:t.length)||0)*e.rowHeight}),p=t(()=>u(s)-u(m)-u(f)),w=t(()=>{const{style:t={},height:l,width:o}=e;return _e({...t,height:l,width:o})}),g=t(()=>_e({height:e.footerHeight})),v=t(()=>({top:b(u(m)),bottom:b(e.footerHeight),width:b(e.width)}));return{bodyWidth:n,fixedTableHeight:i,mainTableHeight:s,leftTableWidth:d,rightTableWidth:h,windowHeight:p,footerHeight:g,emptyStyle:v,rootStyle:w,headerHeight:m}})(l,{columnsTotalWidth:d,fixedColumnsOnLeft:m,fixedColumnsOnRight:f,rowsHeight:q}),oe=c(),re=t(()=>{const e=0===u($).length;return x(l.fixedData)?0===l.fixedData.length&&e:e});const ae=c(!1);return h(()=>u(q),()=>ae.value=!1),h(()=>l.expandedRowKeys,e=>K.value=e,{deep:!0}),{columns:n,containerRef:oe,mainTableRef:o,leftTableRef:r,rightTableRef:a,isDynamic:A,isResetting:N,isScrolling:W,hasFixedColumns:p,columnsStyles:s,columnsTotalWidth:d,data:$,expandedRowKeys:K,depthMap:B,fixedColumnsOnLeft:m,fixedColumnsOnRight:f,mainColumns:v,bodyWidth:U,emptyStyle:ee,rootStyle:te,footerHeight:J,mainTableHeight:X,fixedTableHeight:Y,leftTableWidth:Q,rightTableWidth:Z,showEmpty:re,getRowHeight:function(e){const{estimatedRowHeight:t,rowHeight:o,rowKey:r}=l;return t?u(j)[u($)[e][r]]||t:o},onColumnSorted:S,onRowHovered:k,onRowExpanded:G,onRowsRendered:P,onRowHeightChange:V,scrollTo:R,scrollToLeft:C,scrollToTop:H,scrollToRow:I,onScroll:E,onVerticalScroll:M}}const tt=Symbol("tableV2"),lt="tableV2GridScrollLeft",ot=String,rt={type:a(Array),required:!0},at={type:a(Array)},nt={...at,required:!0},st=String,it={type:a(Array),default:()=>n([])},ct={type:Number,required:!0},dt={type:a([String,Number,Symbol]),default:"id"},ut={type:a(Object)},ht=o({class:String,columns:rt,columnsStyles:{type:a(Object),required:!0},depth:Number,expandColumnKey:st,estimatedRowHeight:{...ze.estimatedRowHeight,default:void 0},isScrolling:Boolean,onRowExpand:{type:a(Function)},onRowHover:{type:a(Function)},onRowHeightChange:{type:a(Function)},rowData:{type:a(Object),required:!0},rowEventHandlers:{type:a(Object)},rowIndex:{type:Number,required:!0},rowKey:dt,style:{type:a(Object)}}),mt={type:Number,required:!0},ft=o({class:String,columns:rt,fixedHeaderData:{type:a(Array)},headerData:{type:a(Array),required:!0},headerHeight:{type:a([Number,Array]),default:50},rowWidth:mt,rowHeight:{type:Number,default:50},height:mt,width:mt}),pt=o({columns:rt,data:nt,fixedData:at,estimatedRowHeight:ht.estimatedRowHeight,width:ct,height:ct,headerWidth:ct,headerHeight:ft.headerHeight,bodyWidth:ct,rowHeight:ct,cache:Le.cache,useIsScrolling:Boolean,scrollbarAlwaysOn:ze.scrollbarAlwaysOn,scrollbarStartGap:ze.scrollbarStartGap,scrollbarEndGap:ze.scrollbarEndGap,class:ot,style:ut,containerStyle:ut,getRowHeight:{type:a(Function),required:!0},rowKey:ht.rowKey,onRowsRendered:{type:a(Function)},onScroll:{type:a(Function)}}),wt=o({cache:pt.cache,estimatedRowHeight:ht.estimatedRowHeight,rowKey:dt,headerClass:{type:a([String,Function])},headerProps:{type:a([Object,Function])},headerCellProps:{type:a([Object,Function])},headerHeight:ft.headerHeight,footerHeight:{type:Number,default:0},rowClass:{type:a([String,Function])},rowProps:{type:a([Object,Function])},rowHeight:{type:Number,default:50},cellProps:{type:a([Object,Function])},columns:rt,data:nt,dataGetter:{type:a(Function)},fixedData:at,expandColumnKey:ht.expandColumnKey,expandedRowKeys:it,defaultExpandedRowKeys:it,class:ot,fixed:Boolean,style:{type:a(Object)},width:ct,height:ct,maxHeight:Number,useIsScrolling:Boolean,indentSize:{type:Number,default:12},iconSize:{type:Number,default:12},hScrollbarSize:ze.hScrollbarSize,vScrollbarSize:ze.vScrollbarSize,scrollbarAlwaysOn:Ae.alwaysOn,sortBy:{type:a(Object),default:()=>({})},sortState:{type:a(Object),default:void 0},onColumnSort:{type:a(Function)},onExpandedRowsChange:{type:a(Function)},onEndReached:{type:a(Function)},onRowExpand:ht.onRowExpand,onScroll:pt.onScroll,onRowsRendered:pt.onRowsRendered,rowEventHandlers:ht.rowEventHandlers});var gt=s({name:"ElTableV2Header",props:ft,setup(e,{slots:l,expose:o}){const r=i("table-v2"),a=C(lt),n=c(),s=t(()=>_e({width:e.width,height:e.height})),d=t(()=>_e({width:e.rowWidth,height:e.height})),h=t(()=>X(u(e.headerHeight))),m=e=>{const t=u(n);v(()=>{(null==t?void 0:t.scroll)&&t.scroll({left:e})})},f=()=>{const t=r.e("fixed-header-row"),{columns:o,fixedHeaderData:a,rowHeight:n}=e;return null==a?void 0:a.map((e,r)=>{var a;const s=_e({height:n,width:"100%"});return null==(a=l.fixed)?void 0:a.call(l,{class:t,columns:o,rowData:e,rowIndex:-(r+1),style:s})})},p=()=>{const t=r.e("dynamic-header-row"),{columns:o}=e;return u(h).map((e,r)=>{var a;const n=_e({width:"100%",height:e});return null==(a=l.dynamic)?void 0:a.call(l,{class:t,columns:o,headerIndex:r,style:n})})};return H(()=>{(null==a?void 0:a.value)&&m(a.value)}),o({scrollToLeft:m}),()=>{if(!(e.height<=0))return I("div",{ref:n,class:e.class,style:u(s),role:"rowgroup"},[I("div",{style:u(d),class:r.e("header")},[p(),f()])])}}});const yt=({name:l,clearCache:o,getColumnPosition:r,getColumnStartIndexForOffset:a,getColumnStopIndexForStartIndex:n,getEstimatedTotalHeight:d,getEstimatedTotalWidth:h,getColumnOffset:m,getRowOffset:p,getRowPosition:w,getRowStartIndexForOffset:g,getRowStopIndexForStartIndex:x,initCache:b,injectToInstance:S,validateProps:R})=>s({name:null!=l?l:"ElVirtualList",props:ze,emits:[se,ie],setup(l,{emit:s,expose:T,slots:C}){const H=i("vl");R(l);const I=e(),A=c(b(l,I));null==S||S(I,A);const N=c(),j=c(),F=c(),G=c(null),V=c({isScrolling:!1,scrollLeft:y(l.initScrollLeft)?l.initScrollLeft:0,scrollTop:y(l.initScrollTop)?l.initScrollTop:0,updateRequested:!1,xAxisScrollDir:Z,yAxisScrollDir:Z}),k=Se(),P=t(()=>Number.parseInt(`${l.height}`,10)),$=t(()=>Number.parseInt(`${l.width}`,10)),B=t(()=>{const{totalColumn:e,totalRow:t,columnCache:o}=l,{isScrolling:r,xAxisScrollDir:s,scrollLeft:i}=u(V);if(0===e||0===t)return[0,0,0,0];const c=a(l,i,u(A)),d=n(l,c,i,u(A)),h=r&&s!==_?1:Math.max(1,o),m=r&&s!==Z?1:Math.max(1,o);return[Math.max(0,c-h),Math.max(0,Math.min(e-1,d+m)),c,d]}),q=t(()=>{const{totalColumn:e,totalRow:t,rowCache:o}=l,{isScrolling:r,yAxisScrollDir:a,scrollTop:n}=u(V);if(0===e||0===t)return[0,0,0,0];const s=g(l,n,u(A)),i=x(l,s,n,u(A)),c=r&&a!==_?1:Math.max(1,o),d=r&&a!==Z?1:Math.max(1,o);return[Math.max(0,s-c),Math.max(0,Math.min(t-1,i+d)),s,i]}),U=t(()=>d(l,u(A))),Y=t(()=>h(l,u(A))),X=t(()=>{var e;return[{position:"relative",overflow:"hidden",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:l.direction,height:y(l.height)?`${l.height}px`:l.height,width:y(l.width)?`${l.width}px`:l.width},null!=(e=l.style)?e:{}]}),Q=t(()=>{const e=`${u(Y)}px`;return{height:`${u(U)}px`,pointerEvents:u(V).isScrolling?"none":void 0,width:e}}),oe=()=>{const{totalColumn:e,totalRow:t}=l;if(e>0&&t>0){const[e,t,l,o]=u(B),[r,a,n,i]=u(q);s(se,{columnCacheStart:e,columnCacheEnd:t,rowCacheStart:r,rowCacheEnd:a,columnVisibleStart:l,columnVisibleEnd:o,rowVisibleStart:n,rowVisibleEnd:i})}const{scrollLeft:o,scrollTop:r,updateRequested:a,xAxisScrollDir:n,yAxisScrollDir:i}=u(V);s(ie,{xAxisScrollDir:n,scrollLeft:o,yAxisScrollDir:i,scrollTop:r,updateRequested:a})},re=e=>{const{clientHeight:t,clientWidth:o,scrollHeight:r,scrollLeft:a,scrollTop:n,scrollWidth:s}=e.currentTarget,i=u(V);if(i.scrollTop===n&&i.scrollLeft===a)return;let c=a;if(Fe(l.direction))switch(Ve()){case te:c=-a;break;case ee:c=s-o-a}V.value={...i,isScrolling:!0,scrollLeft:c,scrollTop:Math.max(0,Math.min(n,r-t)),updateRequested:!0,xAxisScrollDir:Ne(i.scrollLeft,c),yAxisScrollDir:Ne(i.scrollTop,n)},v(()=>me()),fe(),oe()},ae=(e,t)=>{const l=u(P),o=(U.value-l)/t*e;ue({scrollTop:Math.min(U.value-l,o)})},ne=(e,t)=>{const l=u($),o=(Y.value-l)/t*e;ue({scrollLeft:Math.min(Y.value-l,o)})},{onWheel:de}=(({atXEndEdge:e,atXStartEdge:t,atYEndEdge:l,atYStartEdge:o},r)=>{let a=null,n=0,s=0;const i=(r,a)=>{const n=r<=0&&t.value||r>=0&&e.value,s=a<=0&&o.value||a>=0&&l.value;return n&&s};return{hasReachedEdge:i,onWheel:e=>{pe(a);let t=e.deltaX,l=e.deltaY;Math.abs(t)>Math.abs(l)?l=0:t=0,e.shiftKey&&0!==l&&(t=l,l=0),i(n,s)&&i(n+t,s+l)||(n+=t,s+=l,e.preventDefault(),a=we(()=>{r(n,s),n=0,s=0}))}}})({atXStartEdge:t(()=>V.value.scrollLeft<=0),atXEndEdge:t(()=>V.value.scrollLeft>=Y.value-u($)),atYStartEdge:t(()=>V.value.scrollTop<=0),atYEndEdge:t(()=>V.value.scrollTop>=U.value-u(P))},(e,t)=>{var l,o,r,a;null==(o=null==(l=j.value)?void 0:l.onMouseUp)||o.call(l),null==(a=null==(r=F.value)?void 0:r.onMouseUp)||a.call(r);const n=u($),s=u(P);ue({scrollLeft:Math.min(V.value.scrollLeft+e,Y.value-n),scrollTop:Math.min(V.value.scrollTop+t,U.value-s)})});E(N,"wheel",de,{passive:!1});const ue=({scrollLeft:e=V.value.scrollLeft,scrollTop:t=V.value.scrollTop})=>{e=Math.max(e,0),t=Math.max(t,0);const l=u(V);t===l.scrollTop&&e===l.scrollLeft||(V.value={...l,xAxisScrollDir:Ne(l.scrollLeft,e),yAxisScrollDir:Ne(l.scrollTop,t),scrollLeft:e,scrollTop:t,updateRequested:!0},v(()=>me()),fe(),oe())},he=(e,t)=>{const{columnWidth:a,direction:n,rowHeight:s}=l,i=k.value(o&&a,o&&s,o&&n),c=`${e},${t}`;if(z(i,c))return i[c];{const[,o]=r(l,t,u(A)),a=u(A),s=Fe(n),[d,h]=w(l,e,a),[m]=r(l,t,a);return i[c]={position:"absolute",left:s?void 0:`${o}px`,right:s?`${o}px`:void 0,top:`${h}px`,height:`${d}px`,width:`${m}px`},i[c]}},me=()=>{V.value.isScrolling=!1,v(()=>{k.value(-1,null,null)})};M(()=>{if(!O)return;const{initScrollLeft:e,initScrollTop:t}=l,o=u(N);o&&(y(e)&&(o.scrollLeft=e),y(t)&&(o.scrollTop=t)),oe()});const fe=()=>{const{direction:e}=l,{scrollLeft:t,scrollTop:o,updateRequested:r}=u(V),a=u(N);if(r&&a){if(e===J)switch(Ve()){case te:a.scrollLeft=-t;break;case le:a.scrollLeft=t;break;default:{const{clientWidth:e,scrollWidth:l}=a;a.scrollLeft=l-e-t;break}}else a.scrollLeft=Math.max(0,t);a.scrollTop=Math.max(0,o)}},{resetAfterColumnIndex:ye,resetAfterRowIndex:ve,resetAfter:xe}=I.proxy;T({windowRef:N,innerRef:G,getItemStyleCache:k,scrollTo:ue,scrollToItem:(e=0,t=0,o=ce)=>{const r=u(V);t=Math.max(0,Math.min(t,l.totalColumn-1)),e=Math.max(0,Math.min(e,l.totalRow-1));const a=ge(H.namespace.value),n=u(A),s=d(l,n),i=h(l,n);ue({scrollLeft:m(l,t,o,r.scrollLeft,n,i>l.width?a:0),scrollTop:p(l,e,o,r.scrollTop,n,s>l.height?a:0)})},states:V,resetAfterColumnIndex:ye,resetAfterRowIndex:ve,resetAfter:xe});const be=()=>{const e=L(l.innerElement),t=(()=>{var e;const[t,o]=u(B),[r,a]=u(q),{data:n,totalColumn:s,totalRow:i,useIsScrolling:c,itemKey:d}=l,h=[];if(i>0&&s>0)for(let l=r;l<=a;l++)for(let r=t;r<=o;r++){const t=d({columnIndex:r,data:n,rowIndex:l});h.push(f(K,{key:t},null==(e=C.default)?void 0:e.call(C,{columnIndex:r,data:n,isScrolling:c?u(V).isScrolling:void 0,style:he(l,r),rowIndex:l})))}return h})();return[f(e,W(l.innerProps,{style:u(Q),ref:G}),D(e)?t:{default:()=>t})]};return()=>{const e=L(l.containerElement),{horizontalScrollbar:t,verticalScrollbar:o}=(()=>{const{scrollbarAlwaysOn:e,scrollbarStartGap:t,scrollbarEndGap:o,totalColumn:r,totalRow:a}=l,n=u($),s=u(P),i=u(Y),c=u(U),{scrollLeft:d,scrollTop:h}=u(V);return{horizontalScrollbar:f(ke,{ref:j,alwaysOn:e,startGap:t,endGap:o,class:H.e("horizontal"),clientSize:n,layout:"horizontal",onScroll:ne,ratio:100*n/i,scrollFrom:d/(i-n),total:a,visible:!0}),verticalScrollbar:f(ke,{ref:F,alwaysOn:e,startGap:t,endGap:o,class:H.e("vertical"),clientSize:s,layout:"vertical",onScroll:ae,ratio:100*s/c,scrollFrom:h/(c-s),total:r,visible:!0})}})(),r=be();return f("div",{key:0,class:H.e("wrapper"),role:l.role},[f(e,{class:l.className,style:u(X),onScroll:re,ref:N},D(e)?r:{default:()=>r}),t,o])}}}),{max:vt,min:xt,floor:bt}=Math,St={column:"columnWidth",row:"rowHeight"},Rt={column:"lastVisitedColumnIndex",row:"lastVisitedRowIndex"},Tt=(e,t,l,o)=>{const[r,a,n]=[l[o],e[St[o]],l[Rt[o]]];if(t>n){let e=0;if(n>=0){const t=r[n];e=t.offset+t.size}for(let l=n+1;l<=t;l++){const t=a(l);r[l]={offset:e,size:t},e+=t}l[Rt[o]]=t}return r[t]},Ct=(e,t,l,o,r,a)=>{for(;l<=o;){const n=l+bt((o-l)/2),s=Tt(e,n,t,a).offset;if(s===r)return n;s<r?l=n+1:o=n-1}return vt(0,l-1)},Ht=(e,t,l,o)=>{const[r,a]=[t[o],t[Rt[o]]];return(a>0?r[a].offset:0)>=l?Ct(e,t,0,a,l,o):((e,t,l,o,r)=>{const a="column"===r?e.totalColumn:e.totalRow;let n=1;for(;l<a&&Tt(e,l,t,r).offset<o;)l+=n,n*=2;return Ct(e,t,bt(l/2),xt(l,a-1),o,r)})(e,t,vt(0,a),l,o)},It=({totalRow:e},{estimatedRowHeight:t,lastVisitedRowIndex:l,row:o})=>{let r=0;if(l>=e&&(l=e-1),l>=0){const e=o[l];r=e.offset+e.size}return r+(e-l-1)*t},Et=({totalColumn:e},{column:t,estimatedColumnWidth:l,lastVisitedColumnIndex:o})=>{let r=0;if(o>e&&(o=e-1),o>=0){const e=t[o];r=e.offset+e.size}return r+(e-o-1)*l},Mt={column:Et,row:It},Ot=(e,t,l,o,r,a,n)=>{const[s,i]=["row"===a?e.height:e.width,Mt[a]],c=Tt(e,t,r,a),d=i(e,r),u=vt(0,xt(d-s,c.offset)),h=vt(0,c.offset-s+n+c.size);switch(l===fe&&(l=o>=h-s&&o<=u+s?ce:ue),l){case me:return u;case he:return h;case ue:return Math.round(h+(u-h)/2);default:return o>=h&&o<=u?o:h>u||o<h?h:u}},Lt=yt({name:"ElDynamicSizeGrid",getColumnPosition:(e,t,l)=>{const o=Tt(e,t,l,"column");return[o.size,o.offset]},getRowPosition:(e,t,l)=>{const o=Tt(e,t,l,"row");return[o.size,o.offset]},getColumnOffset:(e,t,l,o,r,a)=>Ot(e,t,l,o,r,"column",a),getRowOffset:(e,t,l,o,r,a)=>Ot(e,t,l,o,r,"row",a),getColumnStartIndexForOffset:(e,t,l)=>Ht(e,l,t,"column"),getColumnStopIndexForStartIndex:(e,t,l,o)=>{const r=Tt(e,t,o,"column"),a=l+e.width;let n=r.offset+r.size,s=t;for(;s<e.totalColumn-1&&n<a;)s++,n+=Tt(e,t,o,"column").size;return s},getEstimatedTotalHeight:It,getEstimatedTotalWidth:Et,getRowStartIndexForOffset:(e,t,l)=>Ht(e,l,t,"row"),getRowStopIndexForStartIndex:(e,t,l,o)=>{const{totalRow:r,height:a}=e,n=Tt(e,t,o,"row"),s=l+a;let i=n.size+n.offset,c=t;for(;c<r-1&&i<s;)c++,i+=Tt(e,c,o,"row").size;return c},injectToInstance:(e,t)=>{const l=({columnIndex:l,rowIndex:o},r)=>{var a,n;r=!!A(r)||r,y(l)&&(t.value.lastVisitedColumnIndex=Math.min(t.value.lastVisitedColumnIndex,l-1)),y(o)&&(t.value.lastVisitedRowIndex=Math.min(t.value.lastVisitedRowIndex,o-1)),null==(a=e.exposed)||a.getItemStyleCache.value(-1,null,null),r&&(null==(n=e.proxy)||n.$forceUpdate())};Object.assign(e.proxy,{resetAfterColumnIndex:(e,t)=>{l({columnIndex:e},t)},resetAfterRowIndex:(e,t)=>{l({rowIndex:e},t)},resetAfter:l})},initCache:({estimatedColumnWidth:e=de,estimatedRowHeight:t=de})=>({column:{},estimatedColumnWidth:e,estimatedRowHeight:t,lastVisitedColumnIndex:-1,lastVisitedRowIndex:-1,row:{}}),clearCache:!1,validateProps:({columnWidth:e,rowHeight:t})=>{}}),Dt=yt({name:"ElFixedSizeGrid",getColumnPosition:({columnWidth:e},t)=>[e,t*e],getRowPosition:({rowHeight:e},t)=>[e,t*e],getEstimatedTotalHeight:({totalRow:e,rowHeight:t})=>t*e,getEstimatedTotalWidth:({totalColumn:e,columnWidth:t})=>t*e,getColumnOffset:({totalColumn:e,columnWidth:t,width:l},o,r,a,n,s)=>{l=Number(l);const i=Math.max(0,e*t-l),c=Math.min(i,o*t),d=Math.max(0,o*t-l+s+t);switch("smart"===r&&(r=a>=d-l&&a<=c+l?ce:ue),r){case me:return c;case he:return d;case ue:{const e=Math.round(d+(c-d)/2);return e<Math.ceil(l/2)?0:e>i+Math.floor(l/2)?i:e}default:return a>=d&&a<=c?a:d>c||a<d?d:c}},getRowOffset:({rowHeight:e,height:t,totalRow:l},o,r,a,n,s)=>{t=Number(t);const i=Math.max(0,l*e-t),c=Math.min(i,o*e),d=Math.max(0,o*e-t+s+e);switch(r===fe&&(r=a>=d-t&&a<=c+t?ce:ue),r){case me:return c;case he:return d;case ue:{const e=Math.round(d+(c-d)/2);return e<Math.ceil(t/2)?0:e>i+Math.floor(t/2)?i:e}default:return a>=d&&a<=c?a:d>c||a<d?d:c}},getColumnStartIndexForOffset:({columnWidth:e,totalColumn:t},l)=>Math.max(0,Math.min(t-1,Math.floor(l/e))),getColumnStopIndexForStartIndex:({columnWidth:e,totalColumn:t,width:l},o,r)=>{const a=o*e,n=Math.ceil((l+r-a)/e);return Math.max(0,Math.min(t-1,o+n-1))},getRowStartIndexForOffset:({rowHeight:e,totalRow:t},l)=>Math.max(0,Math.min(t-1,Math.floor(l/e))),getRowStopIndexForStartIndex:({rowHeight:e,totalRow:t,height:l},o,r)=>{const a=o*e,n=Math.ceil((l+r-a)/e);return Math.max(0,Math.min(t-1,o+n-1))},initCache:()=>{},clearCache:!0,validateProps:({columnWidth:e,rowHeight:t})=>{}});var Wt=s({name:"ElTableV2Grid",props:pt,setup(e,{slots:l,expose:o}){const{ns:r}=C(tt),{bodyRef:a,fixedRowHeight:n,gridHeight:s,hasHeader:i,headerRef:d,headerHeight:m,totalHeight:f,forceUpdate:p,itemKey:g,onItemRendered:x,resetAfterRowIndex:b,scrollTo:S,scrollToTop:R,scrollToRow:T,scrollLeft:H}=(e=>{const l=c(),o=c(),r=c(0),a=t(()=>{const{data:t,rowHeight:l,estimatedRowHeight:o}=e;if(!o)return t.length*l}),n=t(()=>{const{fixedData:t,rowHeight:l}=e;return((null==t?void 0:t.length)||0)*l}),s=t(()=>Qe(e.headerHeight)),i=t(()=>{const{height:t}=e;return Math.max(0,t-u(s)-u(n))}),d=t(()=>u(s)+u(n)>0);return h(()=>e.bodyWidth,()=>{var t;y(e.estimatedRowHeight)&&(null==(t=o.value)||t.resetAfter({columnIndex:0},!1))}),{bodyRef:o,forceUpdate:function(){var e,t;null==(e=u(o))||e.$forceUpdate(),null==(t=u(l))||t.$forceUpdate()},fixedRowHeight:n,gridHeight:i,hasHeader:d,headerHeight:s,headerRef:l,totalHeight:a,itemKey:({data:t,rowIndex:l})=>t[l][e.rowKey],onItemRendered:function({rowCacheStart:t,rowCacheEnd:l,rowVisibleStart:o,rowVisibleEnd:r}){var a;null==(a=e.onRowsRendered)||a.call(e,{rowCacheStart:t,rowCacheEnd:l,rowVisibleStart:o,rowVisibleEnd:r})},resetAfterRowIndex:function(e,t){var l;null==(l=o.value)||l.resetAfterRowIndex(e,t)},scrollTo:function(e,t){const a=u(l),n=u(o);w(e)?(null==a||a.scrollToLeft(e.scrollLeft),r.value=e.scrollLeft,null==n||n.scrollTo(e)):(null==a||a.scrollToLeft(e),r.value=e,null==n||n.scrollTo({scrollLeft:e,scrollTop:t}))},scrollToTop:function(e){var t;null==(t=u(o))||t.scrollTo({scrollTop:e})},scrollToRow:function(e,t){var l;null==(l=u(o))||l.scrollToItem(e,1,t)},scrollLeft:r}})(e);j(lt,H),N(async()=>{var e;await v();const t=null==(e=a.value)?void 0:e.states.scrollTop;t&&R(Math.round(t)+1)}),o({forceUpdate:p,totalHeight:f,scrollTo:S,scrollToTop:R,scrollToRow:T,resetAfterRowIndex:b});const E=()=>e.bodyWidth;return()=>{const{cache:t,columns:o,data:c,fixedData:h,useIsScrolling:f,scrollbarAlwaysOn:p,scrollbarEndGap:w,scrollbarStartGap:v,style:b,rowHeight:S,bodyWidth:R,estimatedRowHeight:T,headerWidth:C,height:H,width:M,getRowHeight:O,onScroll:L}=e,D=y(T),W=D?Lt:Dt,K=u(m);return I("div",{role:"table",class:[r.e("table"),e.class],style:b},[I(W,{ref:a,data:c,useIsScrolling:f,itemKey:g,columnCache:0,columnWidth:D?E:R,totalColumn:1,totalRow:c.length,rowCache:t,rowHeight:D?O:S,width:M,height:u(s),class:r.e("body"),role:"rowgroup",scrollbarStartGap:v,scrollbarEndGap:w,scrollbarAlwaysOn:p,onScroll:L,onItemRendered:x,perfMode:!1},{default:e=>{var t;const r=c[e.rowIndex];return null==(t=l.row)?void 0:t.call(l,{...e,columns:o,rowData:r})}}),u(i)&&I(gt,{ref:d,class:r.e("header-wrapper"),columns:o,headerData:c,headerHeight:e.headerHeight,fixedHeaderData:h,rowWidth:C,rowHeight:S,width:M,height:Math.min(K+u(n),H)},{dynamic:l.header,fixed:l.row})])}}});var Kt=(e,{slots:t})=>{const{mainTableRef:l,...o}=e;return I(Wt,W({ref:l},o),"function"==typeof(r=t)||"[object Object]"===Object.prototype.toString.call(r)&&!S(r)?t:{default:()=>[t]});var r};var zt=(e,{slots:t})=>{if(!e.columns.length)return;const{leftTableRef:l,...o}=e;return I(Wt,W({ref:l},o),"function"==typeof(r=t)||"[object Object]"===Object.prototype.toString.call(r)&&!S(r)?t:{default:()=>[t]});var r};var At=(e,{slots:t})=>{if(!e.columns.length)return;const{rightTableRef:l,...o}=e;return I(Wt,W({ref:l},o),"function"==typeof(r=t)||"[object Object]"===Object.prototype.toString.call(r)&&!S(r)?t:{default:()=>[t]});var r};const Nt=e=>{const{isScrolling:l}=C(tt),o=c(!1),r=c(),a=t(()=>y(e.estimatedRowHeight)&&e.rowIndex>=0),n=t(()=>{const{rowData:t,rowIndex:l,rowKey:o,onRowHover:r}=e,a=e.rowEventHandlers||{},n={};return Object.entries(a).forEach(([e,r])=>{R(r)&&(n[e]=e=>{r({event:e,rowData:t,rowIndex:l,rowKey:o})})}),r&&[{name:"onMouseleave",hovered:!1},{name:"onMouseenter",hovered:!0}].forEach(({name:e,hovered:a})=>{const s=n[e];n[e]=e=>{r({event:e,hovered:a,rowData:t,rowIndex:l,rowKey:o}),null==s||s(e)}}),n});return M(()=>{u(a)&&((t=!1)=>{const l=u(r);if(!l)return;const{columns:a,onRowHeightChange:n,rowKey:s,rowIndex:i,style:c}=e,{height:d}=l.getBoundingClientRect();o.value=!0,v(()=>{if(t||d!==Number.parseInt(c.height)){const e=a[0],t=(null==e?void 0:e.placeholderSign)===Ue;null==n||n({rowKey:s,height:d,rowIndex:i},e&&!t&&e.fixed)}})})(!0)}),{isScrolling:l,measurable:a,measured:o,rowRef:r,eventHandlers:n,onExpand:t=>{const{onRowExpand:l,rowData:o,rowIndex:r,rowKey:a}=e;null==l||l({expanded:t,rowData:o,rowIndex:r,rowKey:a})}}};var jt=s({name:"ElTableV2TableRow",props:ht,setup(e,{expose:t,slots:l,attrs:o}){const{eventHandlers:r,isScrolling:a,measurable:n,measured:s,rowRef:i,onExpand:c}=Nt(e);return t({onExpand:c}),()=>{const{columns:t,columnsStyles:d,expandColumnKey:h,depth:m,rowData:f,rowIndex:p,style:w}=e;let g=t.map((e,o)=>{const r=x(f.children)&&f.children.length>0&&e.key===h;return l.cell({column:e,columns:t,columnIndex:o,depth:m,style:d[e.key],rowData:f,rowIndex:p,isScrolling:u(a),expandIconProps:r?{rowData:f,rowIndex:p,onExpand:c}:void 0})});if(l.row&&(g=l.row({cells:g.map(e=>x(e)&&1===e.length?e[0]:e),style:w,columns:t,depth:m,rowData:f,rowIndex:p,isScrolling:u(a)})),u(n)){const{height:t,...l}=w||{},a=u(s);return I("div",W({ref:i,class:e.class,style:a?w:l,role:"row"},o,u(r)),[g])}return I("div",W(o,{ref:i,class:e.class,style:w,role:"row"},u(r)),[g])}}});var Ft=(e,{slots:t})=>{const{columns:l,columnsStyles:o,depthMap:r,expandColumnKey:a,expandedRowKeys:n,estimatedRowHeight:s,hasFixedColumns:i,rowData:c,rowIndex:d,style:u,isScrolling:h,rowProps:m,rowClass:f,rowKey:p,rowEventHandlers:w,ns:g,onRowHovered:y,onRowExpanded:v}=e,x=Ze(f,{columns:l,rowData:c,rowIndex:d},""),b=Ze(m,{columns:l,rowData:c,rowIndex:d}),R=c[p],T=r[R]||0,C=Boolean(a),H=d<0,E=[g.e("row"),x,{[g.e(`row-depth-${T}`)]:C&&d>=0,[g.is("expanded")]:C&&n.includes(R),[g.is("fixed")]:!T&&H,[g.is("customized")]:Boolean(t.row)}],M=i?y:void 0,O={...b,columns:l,columnsStyles:o,class:E,depth:T,expandColumnKey:a,estimatedRowHeight:H?void 0:s,isScrolling:h,rowIndex:d,rowData:c,rowKey:R,rowEventHandlers:w,style:u};return I(jt,W(O,{onRowExpand:v,onMouseenter:e=>{null==M||M({hovered:!0,rowKey:R,event:e,rowData:c,rowIndex:d})},onMouseleave:e=>{null==M||M({hovered:!1,rowKey:R,event:e,rowData:c,rowIndex:d})},rowkey:R}),"function"==typeof(L=t)||"[object Object]"===Object.prototype.toString.call(L)&&!S(L)?t:{default:()=>[t]});var L};const Gt=(e,{slots:t})=>{var l;const{cellData:o,style:r}=e,a=(null==(l=null==o?void 0:o.toString)?void 0:l.call(o))||"",n=F(t,"default",e,()=>[a]);return I("div",{class:e.class,title:a,style:r},[n])};Gt.displayName="ElTableV2Cell",Gt.inheritAttrs=!1;var Vt=Gt;var kt=e=>{const{expanded:t,expandable:l,onExpand:o,style:r,size:a}=e,n={onClick:l?()=>o(!t):void 0,class:e.class};return I(V,W(n,{size:a,style:r}),{default:()=>[I(G,null,null)]})};const Pt=({columns:e,column:t,columnIndex:l,depth:o,expandIconProps:r,isScrolling:a,rowData:n,rowIndex:s,style:i,expandedRowKeys:c,ns:d,cellProps:u,expandColumnKey:h,indentSize:m,iconSize:f,rowKey:p},{slots:g})=>{const y=_e(i);if(t.placeholderSign===Ue)return I("div",{class:d.em("row-cell","placeholder"),style:y},null);const{cellRenderer:v,dataKey:x,dataGetter:b}=t,S=R(b)?b({columns:e,column:t,columnIndex:l,rowData:n,rowIndex:s}):k(n,null!=x?x:""),T=Ze(u,{cellData:S,columns:e,column:t,columnIndex:l,rowIndex:s,rowData:n}),C={class:d.e("cell-text"),columns:e,column:t,columnIndex:l,cellData:S,isScrolling:a,rowData:n,rowIndex:s},H=Je(v),E=H?H(C):F(g,"default",C,()=>[I(Vt,C,null)]),M=[d.e("row-cell"),t.class,t.align===$e.CENTER&&d.is("align-center"),t.align===$e.RIGHT&&d.is("align-right")],O=s>=0&&h&&t.key===h,L=s>=0&&c.includes(n[p]);let D;const K=`margin-inline-start: ${o*m}px;`;return O&&(D=w(r)?I(kt,W(r,{class:[d.e("expand-icon"),d.is("expanded",L)],size:f,expanded:L,style:K,expandable:!0}),null):I("div",{style:[K,`width: ${f}px; height: ${f}px;`].join(" ")},null)),I("div",W({class:M,style:y},T,{role:"cell"}),[D,E])};Pt.inheritAttrs=!1;var $t=Pt;const Bt=o({class:String,columns:rt,columnsStyles:{type:a(Object),required:!0},headerIndex:Number,style:{type:a(Object)}});var qt=s({name:"ElTableV2HeaderRow",props:Bt,setup:(e,{slots:t})=>()=>{const{columns:l,columnsStyles:o,headerIndex:r,style:a}=e;let n=l.map((e,a)=>t.cell({columns:l,column:e,columnIndex:a,headerIndex:r,style:o[e.key]}));return t.header&&(n=t.header({cells:n.map(e=>x(e)&&1===e.length?e[0]:e),columns:l,headerIndex:r})),I("div",{class:e.class,style:a,role:"row"},[n])}});var Ut=({columns:e,columnsStyles:t,headerIndex:l,style:o,headerClass:r,headerProps:a,ns:n},{slots:s})=>{const i={columns:e,headerIndex:l},c=[n.e("header-row"),Ze(r,i,""),{[n.is("customized")]:Boolean(s.header)}],d={...Ze(a,i),columnsStyles:t,class:c,columns:e,headerIndex:l,style:o};return I(qt,d,"function"==typeof(u=s)||"[object Object]"===Object.prototype.toString.call(u)&&!S(u)?s:{default:()=>[s]});var u};const Yt=(e,{slots:t})=>F(t,"default",e,()=>{var t,l;return[I("div",{class:e.class,title:null==(t=e.column)?void 0:t.title},[null==(l=e.column)?void 0:l.title])]});Yt.displayName="ElTableV2HeaderCell",Yt.inheritAttrs=!1;var Xt=Yt;var Qt=e=>{const{sortOrder:t}=e;return I(V,{size:14,class:e.class},{default:()=>[t===Pe.ASC?I(P,null,null):I($,null,null)]})};var Zt=(e,{slots:t})=>{const{column:l,ns:o,style:r,onColumnSorted:a}=e,n=_e(r);if(l.placeholderSign===Ue)return I("div",{class:o.em("header-row-cell","placeholder"),style:n},null);const{headerCellRenderer:s,headerClass:i,sortable:c}=l,d={...e,class:o.e("header-cell-text")},u=Je(s),h=u?u(d):F(t,"default",d,()=>[I(Xt,d,null)]),{sortBy:m,sortState:f,headerCellProps:p}=e;let w,g;if(f){const e=f[l.key];w=Boolean(qe[e]),g=w?e:Pe.ASC}else w=l.key===m.key,g=w?m.order:Pe.ASC;const y=[o.e("header-cell"),Ze(i,e,""),l.align===$e.CENTER&&o.is("align-center"),l.align===$e.RIGHT&&o.is("align-right"),c&&o.is("sortable")],v={...Ze(p,e),onClick:l.sortable?a:void 0,class:y,style:n,"data-key":l.key};return I("div",W(v,{role:"columnheader"}),[h,c&&I(Qt,{class:[o.e("sort-icon"),w&&o.is("sorting")],sortOrder:g},null)])};const _t=(e,{slots:t})=>{var l;return I("div",{class:e.class,style:e.style},[null==(l=t.default)?void 0:l.call(t)])};_t.displayName="ElTableV2Footer";var Jt=_t;const el=(e,{slots:t})=>{const l=F(t,"default",{},()=>[I(ye,null,null)]);return I("div",{class:e.class,style:e.style},[l])};el.displayName="ElTableV2Empty";var tl=el;const ll=(e,{slots:t})=>{var l;return I("div",{class:e.class,style:e.style},[null==(l=t.default)?void 0:l.call(t)])};ll.displayName="ElTableV2Overlay";var ol=ll;function rl(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!S(e)}var al=s({name:"ElTableV2",props:wt,setup(e,{slots:t,expose:l}){const o=i("table-v2"),{columnsStyles:r,fixedColumnsOnLeft:a,fixedColumnsOnRight:n,mainColumns:s,mainTableHeight:c,fixedTableHeight:d,leftTableWidth:h,rightTableWidth:m,data:f,depthMap:p,expandedRowKeys:w,hasFixedColumns:g,mainTableRef:y,leftTableRef:v,rightTableRef:x,isDynamic:b,isResetting:S,isScrolling:R,bodyWidth:T,emptyStyle:C,rootStyle:H,footerHeight:E,showEmpty:M,scrollTo:O,scrollToLeft:L,scrollToTop:D,scrollToRow:K,getRowHeight:z,onColumnSorted:A,onRowHeightChange:N,onRowHovered:F,onRowExpanded:G,onRowsRendered:V,onScroll:k,onVerticalScroll:P}=et(e);return l({scrollTo:O,scrollToLeft:L,scrollToTop:D,scrollToRow:K}),j(tt,{ns:o,isResetting:S,isScrolling:R}),()=>{const{cache:l,cellProps:i,estimatedRowHeight:S,expandColumnKey:R,fixedData:O,headerHeight:L,headerClass:D,headerProps:K,headerCellProps:j,sortBy:$,sortState:B,rowHeight:q,rowClass:U,rowEventHandlers:Y,rowKey:X,rowProps:Q,scrollbarAlwaysOn:Z,indentSize:_,iconSize:J,useIsScrolling:ee,vScrollbarSize:te,width:le}=e,oe=u(f),re={cache:l,class:o.e("main"),columns:u(s),data:oe,fixedData:O,estimatedRowHeight:S,bodyWidth:u(T),headerHeight:L,headerWidth:u(T),height:u(c),mainTableRef:y,rowKey:X,rowHeight:q,scrollbarAlwaysOn:Z,scrollbarStartGap:2,scrollbarEndGap:te,useIsScrolling:ee,width:le,getRowHeight:z,onRowsRendered:V,onScroll:k},ae=u(h),ne=u(d),se={cache:l,class:o.e("left"),columns:u(a),data:oe,fixedData:O,estimatedRowHeight:S,leftTableRef:v,rowHeight:q,bodyWidth:ae,headerWidth:ae,headerHeight:L,height:ne,rowKey:X,scrollbarAlwaysOn:Z,scrollbarStartGap:2,scrollbarEndGap:te,useIsScrolling:ee,width:ae,getRowHeight:z,onScroll:P},ie=u(m),ce={cache:l,class:o.e("right"),columns:u(n),data:oe,fixedData:O,estimatedRowHeight:S,rightTableRef:x,rowHeight:q,bodyWidth:ie,headerWidth:ie,headerHeight:L,height:ne,rowKey:X,scrollbarAlwaysOn:Z,scrollbarStartGap:2,scrollbarEndGap:te,width:ie,style:`${o.cssVarName("table-scrollbar-size")}: ${te}px`,useIsScrolling:ee,getRowHeight:z,onScroll:P},de=u(r),ue={ns:o,depthMap:u(p),columnsStyles:de,expandColumnKey:R,expandedRowKeys:u(w),estimatedRowHeight:S,hasFixedColumns:u(g),rowProps:Q,rowClass:U,rowKey:X,rowEventHandlers:Y,onRowHovered:F,onRowExpanded:G,onRowHeightChange:N},he={cellProps:i,expandColumnKey:R,indentSize:_,iconSize:J,rowKey:X,expandedRowKeys:u(w),ns:o},me={ns:o,headerClass:D,headerProps:K,columnsStyles:de},fe={ns:o,sortBy:$,sortState:B,headerCellProps:j,onColumnSorted:A},pe={row:e=>I(Ft,W(e,ue),{row:t.row,cell:e=>{let l;return t.cell?I($t,W(e,he,{style:de[e.column.key]}),rl(l=t.cell(e))?l:{default:()=>[l]}):I($t,W(e,he,{style:de[e.column.key]}),null)}}),header:e=>I(Ut,W(e,me),{header:t.header,cell:e=>{let l;return t["header-cell"]?I(Zt,W(e,fe,{style:de[e.column.key]}),rl(l=t["header-cell"](e))?l:{default:()=>[l]}):I(Zt,W(e,fe,{style:de[e.column.key]}),null)}})},we=[e.class,o.b(),o.e("root"),{[o.is("dynamic")]:u(b)}],ge={class:o.e("footer"),style:u(E)};return I("div",{class:we,style:u(H)},[I(Kt,re,rl(pe)?pe:{default:()=>[pe]}),I(zt,se,rl(pe)?pe:{default:()=>[pe]}),I(At,ce,rl(pe)?pe:{default:()=>[pe]}),t.footer&&I(Jt,ge,{default:t.footer}),u(M)&&I(tl,{class:o.e("empty"),style:u(C)},{default:t.empty}),t.overlay&&I(ol,{class:o.e("overlay")},{default:t.overlay})])}}});const nl=o({disableWidth:Boolean,disableHeight:Boolean,onResize:{type:a(Function)}});var sl=s({name:"ElAutoResizer",props:nl,setup(e,{slots:t}){const l=i("auto-resizer"),{height:o,width:r,sizer:a}=(e=>{const t=c(),l=c(0),o=c(0);let r;return M(()=>{r=B(t,([e])=>{const{width:t,height:r}=e.contentRect,{paddingLeft:a,paddingRight:n,paddingTop:s,paddingBottom:i}=getComputedStyle(e.target),c=Number.parseInt(a)||0,d=Number.parseInt(n)||0,u=Number.parseInt(s)||0,h=Number.parseInt(i)||0;l.value=t-c-d,o.value=r-u-h}).stop}),m(()=>{null==r||r()}),h([l,o],([t,l])=>{var o;null==(o=e.onResize)||o.call(e,{width:t,height:l})}),{sizer:t,width:l,height:o}})(e),n={width:"100%",height:"100%"};return()=>{var e;return I("div",{ref:a,class:l.b(),style:n},[null==(e=t.default)?void 0:e.call(t,{height:o.value,width:r.value})])}}});const il=q(al),cl=q(sl);export{$e as A,Lt as D,cl as E,Be as F,ke as S,al as T,il as a,Ve as b,Pe as c,nl as d,ht as e,Dt as f,Ne as g,ze as h,je as i,Oe as j,Ae as k,Ue as p,wt as t,Se as u,Le as v};
