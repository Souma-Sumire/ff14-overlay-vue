import{c as e,_ as l}from"./shared-common-oFS__kwq.js";import{a7 as s,E as a,b as i,f as t,ac as n}from"./shared-core-BJk7hyv6.js";import{a as r,r as o}from"./cactbot-C9BOJncy.js";import{n as c}from"./vendor-element-plus-B-u_I_lk.js";import{h as k,G as d,o as u,B as m,g as y,e as f,a as p,c as S,n as b,f as g,b as v,F as w,r as h,s as j,z as C,t as _,d as T,y as $}from"./vendor-vue-i6lpFrx4.js";const x={class:"demo-text"},P={key:0,class:"key-skills-timer-container"},I={class:"skills-grid"},K=["onClick"],L={class:"buff-filter"},D=["src"],F={key:1,class:"test"},z=l(k({__name:"keySkillTimer",setup(l){const k=s(),{zoneType:z}=a(),E=d(()=>"Pvp"===z.value),N=t(),A=i(),B=e=>{k.party=e.party.filter(e=>e.inParty)},G=e=>{if(!E.value)if("21"===e.line[0]||"22"===e.line[0]&&"0"===e.line[45]){const l=Number.parseInt(e.line[4],16),s=n(l),a=e.line[2];k.triggerSkill([l,s],a,!0)}else"33"===e.line[0]&&["40000010","4000000F"].includes(e.line[3])&&k.wipe()};function O(e){k.speed=e,k.usedSkills.forEach(e=>{k.triggerSkill([e.id],e.owner.id,!1)})}function R(){window.open("/ff14-overlay-vue/#/keySkillTimerSettings","_blank")}return u(()=>{r("PartyChanged",B),r("LogLine",G)}),m(()=>{o("PartyChanged",B),o("LogLine",G),Object.values(k.skillStates).forEach(e=>{e.rafId&&cancelAnimationFrame(e.rafId)})}),(l,s)=>{const a=c,i=e;return p(),y(i,null,{readme:f(()=>[v("span",x,[$(_(l.$t("keySkillTimer.demo-text1")),1),s[3]||(s[3]=v("br",null,null,-1)),$(" "+_(l.$t("keySkillTimer.demo-text2")),1)])]),default:f(()=>[g(E)?b("",!0):(p(),S("div",P,[v("div",I,[(p(!0),S(w,null,h(g(k).usedSkills,e=>(p(),S("div",{key:e.instanceKey,class:C(["buff-container",`line${e.line}`]),style:j({zIndex:g(A)||g(N)?99:void 0}),onClick:()=>g(A)||g(N)?function(e,l){(N||A)&&k.triggerSkill([e.id],e.owner.id,l)}(e,!0):null},[v("div",L,[v("span",{class:C(["duration",[g(k).skillStates[e.instanceKey]?.isRecast?"cooldown":"active"]])},_(g(k).skillStates[e.instanceKey]?.text||""),3),v("img",{src:e.src},null,8,D),g(k).skillStates[e.instanceKey]?.active?(p(),S("div",{key:g(k).skillStates[e.instanceKey]?.startTime||0,class:"cooldown-layer",style:j({clipPath:`inset(${g(k).skillStates[e.instanceKey]?.clipPercent??0}% 0 0 0)`})},null,4)):b("",!0)]),e.owner.hasDuplicate.skill||e.owner.hasDuplicate.job?(p(),S("span",{key:0,class:C(`job has-duplicate ${e.owner.hasDuplicate.job?"duplicate-show-name":"duplicate-show-job-name"} ${e.owner.jobIcon.toLowerCase()}`)},_(e.owner.hasDuplicate.job?e.owner.name:e.owner.jobName),3)):b("",!0)],14,K))),128))])])),g(N)||g(A)?(p(),S("div",F,[T(a,{onClick:g(k).demoFullParty},{default:f(()=>[$(_(l.$t("keySkillTimer.test-all-jobs")),1)]),_:1},8,["onClick"]),T(a,{onClick:s[0]||(s[0]=()=>g(k).shuffle())},{default:f(()=>[$(_(l.$t("keySkillTimer.test-8-party")),1)]),_:1}),g(N)?(p(),y(a,{key:0,onClick:s[1]||(s[1]=()=>O(1))},{default:f(()=>[$(_(l.$t("keySkillTimer.test-trigger-1x")),1)]),_:1})):b("",!0),g(N)?(p(),y(a,{key:1,onClick:s[2]||(s[2]=()=>O(5))},{default:f(()=>[$(_(l.$t("keySkillTimer.test-trigger-5x")),1)]),_:1})):b("",!0),T(a,{onClick:g(k).wipe},{default:f(()=>[$(_(l.$t("keySkillTimer.test-wipe")),1)]),_:1},8,["onClick"]),T(a,{type:"primary",onClick:R},{default:f(()=>[$(_(l.$t("keySkillTimer.settings")),1)]),_:1})])):b("",!0)]),_:1})}}}),[["__scopeId","data-v-fc7b96db"]]);export{z as default};
