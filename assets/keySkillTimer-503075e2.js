import{_ as e}from"./ActWrapper-8351533a.js";import"./index-643fb42a.js";/* empty css                  */import{u as s}from"./useDemo-dea69d31.js";import{u as i}from"./useDev-cab88d81.js";import{u as a}from"./useZone-e8d78d1f.js";import{u as l,c as t}from"./keySkills-3a83b234.js";import{a as o,r}from"./overlay_plugin_api-974cdd44.js";import{d as n}from"./index-c9f4301b.js";import{i as c}from"./element-plus-cb4c922a.js";import{t as p,c as m,e as u,P as d,D as k,E as f,x as y,v as _,H as j,u as g,S as v,A as S,L as h,aa as C,G as b,K as w,M as P,J as I}from"./vue-vendor-6f37fd53.js";import{_ as x}from"./_plugin-vue_export-helper-6a8c15be.js";/* empty css                */import"./zoneInfo-40d5d60a.js";import"./zone_info-e69ac441.js";import"./content_type-e6dd7239.js";import"./util-3591e9ca.js";import"./actionChinese-97ae9bd1.js";import"./lz-string-343805bb.js";import"./chineseToIcon-e0fcd48d.js";import"./status-9bc9036c.js";import"./tts-5e313398.js";const L={class:"skills-grid"},T=["onClick"],z={class:"buff-filter"},D=["src"],E={key:1,class:"test"},A=x(p({__name:"keySkillTimer",setup(p){const x=n("hash"),A=l(),{zoneType:F}=a(),N=m(()=>"Pvp"===F.value),$=i(),J=s(),K=e=>{A.party=e.party},X=e=>{if(!N.value)if("21"===e.line[0]||"22"===e.line[0]&&"0"===e.line[45]){const s=Number.parseInt(e.line[4],16),i=t(s),a=e.line[2];A.triggerSkill(i,a,!0)}else"33"===e.line[0]&&["40000010","4000000F"].includes(e.line[3])&&A.wipe()},G=e=>{A.language=e.charName.includes(" ")?"global":"chinese"};function H(e){A.speed=e,A.usedSkills.forEach(e=>{A.triggerSkill(e.id,e.owner.id,!1)})}function M(){window.open("/#/keySkillTimerSettings","_blank")}return u(()=>{o("PartyChanged",K),o("LogLine",X),o("ChangePrimaryPlayer",G)}),d(()=>{r("PartyChanged",K),r("LogLine",X),r("ChangePrimaryPlayer",G),Object.values(A.skillStates).forEach(e=>{e.rafId&&cancelAnimationFrame(e.rafId)})}),(s,i)=>{const a=c,l=e;return y(),k(l,null,{readme:f(()=>i[3]||(i[3]=[S("span",{class:"demo-text"},[I(" 当前为演示数据，锁定后将显示真实数据。"),S("br"),I(" 请尽量拉宽窗口，点击技能可模拟触发。 ")],-1)])),default:f(()=>[g(N)?j("",!0):(y(),_("div",{key:0,class:"key-skills-timer-container",style:v({"--scale":g(x).scale?.toString(),"--opacity":g(x).opacity?.toString()})},[S("div",L,[(y(!0),_(h,null,C(g(A).usedSkills,e=>(y(),_("div",{key:e.key,class:b(["buff-container",`line${e.line}`]),style:v({zIndex:g(J)||g($)?99:void 0}),onClick:()=>g(J)||g($)?function(e,s){($||J)&&A.triggerSkill(e.id,e.owner.id,s)}(e,!0):null},[S("div",z,[S("span",{class:b(["duration",[g(A).skillStates[e.key]?.isRecast?"cooldown":"active"]])},w(g(A).skillStates[e.key]?.text||""),3),S("img",{src:e.src},null,8,D),g(A).skillStates[e.key]?.active?(y(),_("div",{key:g(A).skillStates[e.key]?.startTime||0,class:"cooldown-layer",style:v({clipPath:`inset(${g(A).skillStates[e.key]?.clipPercent??0}% 0 0 0)`})},null,4)):j("",!0)]),e.owner.hasDuplicate?(y(),_("span",{key:0,class:b(`job ${e.owner.jobIcon.toLowerCase()}`)},w(e.owner.jobName),3)):j("",!0)],14,T))),128))])],4)),g($)||g(J)?(y(),_("div",E,[P(a,{onClick:g(A).demoFullParty},{default:f(()=>i[4]||(i[4]=[I(" 模拟全部职业 ",-1)])),_:1,__:[4]},8,["onClick"]),P(a,{onClick:i[0]||(i[0]=()=>g(A).shuffle())},{default:f(()=>i[5]||(i[5]=[I(" 模拟8人小队 ",-1)])),_:1,__:[5]}),g($)?(y(),k(a,{key:0,onClick:i[1]||(i[1]=()=>H(1))},{default:f(()=>i[6]||(i[6]=[I(" 测试触发(1X) ",-1)])),_:1,__:[6]})):j("",!0),g($)?(y(),k(a,{key:1,onClick:i[2]||(i[2]=()=>H(5))},{default:f(()=>i[7]||(i[7]=[I(" 测试触发(5X) ",-1)])),_:1,__:[7]})):j("",!0),P(a,{onClick:g(A).wipe},{default:f(()=>i[8]||(i[8]=[I(" 模拟团灭 ",-1)])),_:1,__:[8]},8,["onClick"]),P(a,{type:"primary",onClick:M},{default:f(()=>i[9]||(i[9]=[I(" 设置 ",-1)])),_:1,__:[9]})])):j("",!0)]),_:1})}}}),[["__scopeId","data-v-50968b5a"]]);export{A as default};
