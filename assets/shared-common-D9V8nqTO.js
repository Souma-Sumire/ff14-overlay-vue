import{o as e,bC as a,A as l,B as o,t,H as s,K as r,I as n,a as d,u as c,J as u,R as i,am as p,v,bH as g,aQ as m,bD as f,bA as b,X as h,V as y,_,q as k,L as j,Z as x,r as w,Y as L,M as J,bI as V,a5 as E}from"./vendor-vue-GqahCgpc.js";import{u as T,a as z,b as H,c as I,U as D}from"./shared-core-BgKcFmJF.js";import{c as O,d as U,m as $,s as C,e as K,f as M,g as B,h as S}from"./vendor-element-plus-DIlhOlLn.js";const A=(e,a)=>{const l=e.__vccOpts||e;for(const[o,t]of a)l[o]=t;return l},R={class:"language-switcher"},W={class:"select-wrapper"},q=A(e({__name:"LanguageSwitcher",props:{teleported:{type:Boolean,default:!0}},setup(e){const g=e,{locale:m,availableLocales:f}=T(),b={zhCn:"简体中文",en:"English",ja:"日本語",zhTw:"繁體中文"},h=a("user-locale",m.value);return l(h,e=>{m.value=e}),o(()=>{m.value=h.value}),(e,a)=>{const l=U,o=O;return t(),s("div",R,[r("div",W,[a[1]||(a[1]=r("svg",{class:"globe-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("circle",{cx:"12",cy:"12",r:"10"}),r("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),r("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})],-1)),n(o,{modelValue:c(h),"onUpdate:modelValue":a[0]||(a[0]=e=>d(h)?h.value=e:null),size:"small",class:"language-select",teleported:g.teleported},{default:u(()=>[(t(!0),s(i,null,p(c(f),e=>(t(),v(l,{key:e,value:e,label:b[e]},null,8,["value","label"]))),128))]),_:1},8,["modelValue","teleported"])])])}}}),[["__scopeId","data-v-36c0d625"]]),F=A(e({__name:"ThemeToggle",props:{storageKey:{}},setup(e){const a=g({storageKey:e.storageKey}),l=f(a);return(e,o)=>{const r=K;return t(),s("button",{"aria-label":"Toggle Dark Mode",class:"theme-toggle",onClick:o[0]||(o[0]=e=>c(l)()),onKeyup:o[1]||(o[1]=m(e=>c(l)(),["enter"]))},[n(r,null,{default:u(()=>[c(a)?(t(),v(c($),{key:0,class:"el-icon moon"})):(t(),v(c(C),{key:1,class:"el-icon sunny"}))]),_:1})],32)}}}),[["__scopeId","data-v-3c45c8c0"]]),G=A(e({__name:"ActWrapper",setup(e){const a=b("hash"),l=z(),o=H();return(e,n)=>{const d=M;return t(),s(i,null,[c(l)?h("",!0):(t(),v(d,{key:0,class:"act-not-ready"},{default:u(()=>[r("h1",null,x(e.$t("actWrapper.notReady")),1)]),_:1})),y(r("div",{style:j({zoom:c(a).scale?.toString(),opacity:c(a).opacity?.toString(),overflow:"hidden"})},[k(e.$slots,"default",{},void 0,!0),c(o)?k(e.$slots,"readme",{key:0},void 0,!0):h("",!0)],4),[[_,c(l)]])],64)}}}),[["__scopeId","data-v-2e855a48"]]),N={flex:"~ col",style:{position:"relative"}},Q=A(e({__name:"DragJob",props:{party:{}},emits:["update"],setup(e,{emit:a}){const l=e,o=a,r=w(!1),v=I(),g=[{role:"tank",color:"blue"},{role:"healer",color:"green"},{role:"dps",color:"red"},{role:"crafter",color:"yellow"},{role:"gatherer",color:"purple"},{role:"none",color:"gray"}];const m=function(){const e={tank:D.isTankJob,healer:D.isHealerJob,dps:D.isDpsJob,crafter:D.isCraftingJob,gatherer:D.isGatheringJob};return Object.fromEntries(g.map(({role:a})=>[a,"none"===a?[]:D.getBattleJobs3().filter(e[a]).map(D.jobToJobEnum).sort(D.enumSortMethod)]))}(),f=Object.values(m).flat().map(e=>({name:D.jobToFullName(D.jobEnumToJob(e)).simple1,job:e})),b=w((()=>{const e={};for(const a of g.map(e=>e.role))e[a]=f.filter(e=>m[a].includes(e.job)).sort((e,a)=>v.arr.indexOf(e.job)-v.arr.indexOf(a.job));return e})());function h(){v.arr=Object.values(b.value).flat().map(e=>e.job),o("update")}return(e,a)=>{const o=B;return t(),s("div",N,[n(o,{modelValue:c(r),"onUpdate:modelValue":a[0]||(a[0]=e=>d(r)?r.value=e:null),size:"small",style:{position:"absolute",top:"0.25rem",right:"0.25rem",background:"rgba(30, 30, 30, 0.33)",color:"white",padding:"0 3px",margin:"0","font-size":"12px",height:"1.5em","box-shadow":"0 0 2px black","z-index":"0"}},{default:u(()=>[L(x(e.$t("dragJob.freeMode")),1)]),_:1},8,["modelValue"]),(t(),s(i,null,p(g,(e,a)=>n(c(V),{key:a,modelValue:c(b)[e.role],"onUpdate:modelValue":a=>c(b)[e.role]=a,animation:150,"ghost-class":"ghost",class:"m-b-0.25 m-t-0.25 flex flex-row gap-0.25 rounded p-0",filter:".no-draggable","force-fallback":!0,onUpdate:h},{default:u(()=>[(t(!0),s(i,null,p(c(b)[e.role],a=>{return y((t(),s("div",{key:a.job,class:J((c(r)||(o=a.job,l.party.find(e=>e.job===o))?`draggable bg-${e.color} cursor-move`:"no-draggable bg-gray-700/50 opacity-75")+" rounded p-l-0.6 p-r-0.6 p-t-0 p-b-0.3 m-0 color-white")},x(a.name),3)),[[_,!!l.party.find(e=>36===e.job)||36!==a.job]]);var o}),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])),64))])}}}),[["__scopeId","data-v-8a657b5c"]]),X={class:"upload select"},Y={class:"upload text"},Z=A(e({__name:"TestLog",emits:["handleLine","beforeHandle","afterHandle"],setup(e,{emit:a}){const l=a,{t:n}=T(),d=w(null),c=w(null);async function u(e){c.value?.classList.remove("drag");const a=e.target.files;if(!a||0===a.length)return;l("beforeHandle");const o=S.service({fullscreen:!0,text:n("testLog.loading"),lock:!0,spinner:'<div style="width:0;height:0"></div>'});for(let t=0;t<a.length;t++){const e=a[t],o=await e.text();for(const a of o.split("\n"))l("handleLine",a)}o.close(),l("afterHandle"),c.value?.classList.remove("drag")}function i(e){e.preventDefault(),c.value?.classList.add("drag")}function p(e){e.preventDefault(),c.value?.classList.remove("drag")}return o(()=>{d.value?.addEventListener("change",u),c.value?.addEventListener("dragover",i),c.value?.addEventListener("dragleave",p)}),E(()=>{d.value?.removeEventListener("change",u),c.value?.removeEventListener("dragover",i),c.value?.removeEventListener("dragleave",p)}),(e,a)=>(t(),s("div",X,[r("div",{ref_key:"select",ref:c,class:"upload-select"},[r("div",Y,[a[0]||(a[0]=r("span",null,"+",-1)),r("p",null,x(e.$t("testLog.upload")),1)]),r("input",{ref_key:"input",ref:d,type:"file"},null,512)],512)]))}}),[["__scopeId","data-v-1e083c5e"]]);export{A as _,F as a,q as b,G as c,Q as d,Z as e};
