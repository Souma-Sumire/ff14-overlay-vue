import{_ as a,c as e}from"./shared-common-eIHF55i7.js";import{aq as t,s,U as o,h as n}from"./shared-core-D7Br238i.js";import{o as r,t as l,H as i,R as c,am as d,L as u,u as m,M as g,K as p,G as f,Y as y,Z as h,X as _,B as b,v,J as j,I as k}from"./vendor-vue-iK2zA9mI.js";import{a as w}from"./cactbot-DRs0Yy4Y.js";import{p as C,u as I,o as P,n as $}from"./vendor-element-plus-Bf6xu0r4.js";const L={flex:"~ nowrap",class:"main","m-t-1":"","w-100vw":""},M=["data-casterId"],T=["src"],x=a(r({__name:"Main",setup(a){const e=new URLSearchParams(window.location.href.split("?")[1]),o=t(),n=Number(/^(?:1|true|yes|on|open|enabled)$/i.test(e.get("displayAA")??""));return(a,e)=>(l(),i("div",L,[(l(!0),i(c,null,d(m(o).castData.filter(a=>a.key),a=>(l(),i("div",{key:a.key,"data-casterId":a.casterId,class:g(`images ${a.class} logLine${a.logLine} displayAA${m(n)}`),style:u(`--animeDuration: ${m(o).config.duration}s;`)},[p("img",{src:a.src,class:"action-icon",height:"40",loading:"lazy",onError:e[0]||(e[0]=(...a)=>m(s)&&m(s)(...a))},null,40,T),e[1]||(e[1]=p("img",{class:"frame",loading:"lazy"},null,-1))],14,M))),128))]))}}),[["__scopeId","data-v-9a96c919"]]),A={key:0,"z-100":"",flex:"~ gap0 wrap",class:"header-layout"},D=["onClick"],z={flex:"~ nowrap items-end",style:{"align-items":"flex-end",gap:"0.1rem"}},E=["src","onerror"],U=a(r({__name:"Header",setup(a){const e=new URLSearchParams(window.location.href.split("?")[1]);function n(a){const e=o.jobEnumToJob(a);return`https://souma.diemoe.net/resources/img/cj2/${o.jobToFullName(e).en}.png`}const r=t();f(()=>{for(const a of r.partyData)a.src=n(a.job)});const u=/^(?:1|true|yes|on|open|enabled|undefined)$/i.test(e.get("showHeader")||"true");return(a,e)=>m(u)&&m(r).partyData.length>1?(l(),i("div",A,[(l(!0),i(c,null,d(m(r).partyDataFormatted,(a,e)=>{return l(),i("button",{key:e,class:g(["job-lists",m(r).focusTargetId===a.id?"job-lists-focus":""]),"m-0":"","p-0":"",onClick:e=>m(r).handleClickChangeTarget(a.id)},[p("div",z,[p("img",{src:a.src,style:{height:"1.25em"},loading:"lazy",onerror:m(s)},null,8,E),y(" "+h((t=a.job,o.jobToFullName(o.jobEnumToJob(t)).simple2)),1)])],10,D);var t}),128))])):_("",!0)}}),[["__scopeId","data-v-e3fbf395"]]),F={class:"common-layout"},H={key:0},J=a(r({__name:"castingMonitor",setup(a){const s=t(),o=n();return b(()=>{w("ChangePrimaryPlayer",s.handleChangePrimaryPlayer),w("LogLine",s.handleLogLine),w("PartyChanged",s.handlePartyChanged),w("BroadcastMessage",a=>{"castMonitorOverlay"===a.source&&(s.focusTargetId=a.msg.targetId)})}),setInterval(()=>{s.cleanUpExpired()},1e3),(a,t)=>{const n=U,r=C,c=x,d=I,u=P,g=$,f=e;return l(),v(f,null,{default:j(()=>[p("div",F,[k(u,{"items-center":""},{default:j(()=>[k(r,{class:"header-layout"},{default:j(()=>[k(n)]),_:1}),k(d,null,{default:j(()=>[k(c)]),_:1})]),_:1}),m(o)?(l(),i("footer",H,[k(g,{onClick:t[0]||(t[0]=a=>m(s).testParty(!0))},{default:j(()=>[y(h(a.$t("castingMonitor.testParty")),1)]),_:1}),k(g,{onClick:t[1]||(t[1]=a=>m(s).testParty(!1))},{default:j(()=>[y(h(a.$t("castingMonitor.testSolo")),1)]),_:1}),k(g,{onClick:t[2]||(t[2]=a=>m(s).testAction())},{default:j(()=>[y(h(a.$t("castingMonitor.testAction")),1)]),_:1})])):_("",!0)])]),_:1})}}}),[["__scopeId","data-v-62526358"]]);export{J as default};
