var e=Object.defineProperty,o=(o,l,t)=>((o,l,t)=>l in o?e(o,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[l]=t)(o,"symbol"!=typeof l?l+"":l,t);import"./index-B_sHtIAT.js";/* empty css                *//* empty css                  *//* empty css                      *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                  *//* empty css                 *//* empty css                  *//* empty css                        */import{t as l,at as t,V as a,r as n,c as s,v as i,x as m,E as u,M as r,u as d,L as f,D as c,S as p,A as h,I as g,K as v,a9 as V,J as w}from"./vue-vendor-Bbuz3Kwb.js";import{g as C}from"./actionChinese-DqgyQpFG.js";import{a as x}from"./overlay_plugin_api-C1Kk3pZW.js";import{u as A}from"./index-bbahPALZ.js";import{d as I,B as D,e as y,h as z,f as b,t as S,u as U,j as Y,i as X,Y as j}from"./element-plus-QcyfhpSy.js";import{_ as T}from"./_plugin-vue_export-helper-BCo6x5W8.js";const P={};const _={class:"container"},F={style:{width:"10rem"}},k={class:"noCSS"},N={class:"noCSS"},$={class:"actionID"},K=T(l({__name:"castingToChinese",setup(e){var l,T;t((e=>({"78001eb8":d(O),"22ce198c":d(W),"22ce198d":d(Z),"5a3f4cc6":d(R),e527d244:d(G),c8a25fb4:d(Q),c8a25fb2:d(ee),"33335c6a":d(J),"032ffa7c":d(oe),"032ffa7a":d(le),"3a36afb8":d(B),"8e4bc434":d(te),"8e4bc432":d(ae)})));const K=new URLSearchParams(window.location.href.split("?")[1]);function L(e){const o=Number.parseInt(e[4],16),l=e[2],t=e[5];return P[o]||C(o)||void(l.startsWith("4")&&t.includes("unknown"))||t}class E{constructor(e){o(this,"name"),o(this,"startTime"),o(this,"castTime"),o(this,"overTime"),o(this,"actionId"),this.name=L(e),this.startTime=Date.now(),this.castTime=1e3*Number(e[8]),this.overTime=this.startTime+this.castTime,this.actionId=Number.parseInt(e[4],16)}}const M=a({targetCast:void 0}),H=[{value:"Target",label:"当前目标"},{value:"Focus",label:"焦点目标"}],q=n({width:265,showCountdown:!1,showProgress:!1,showActionChinese:!0,showActionID:!1,offsetProgressX:0,offsetProgressY:-22,offsetCountdownX:240,offsetCountdownY:-5,offsetActionChineseX:275,offsetActionChineseY:-45,offsetActionIDX:10,offsetActionIDY:-5,ping:80,keep:100,fontSizeCountDown:17,fontSizeActionName:20,fontFamily:"SmartisanHei",targetKey:"Target"});A("castingToChineseFix",q,localStorage,{mergeDefaults:!0});const B=s((()=>`${q.value.width}px`)),O=s((()=>q.value.showCountdown?1:0)),R=s((()=>q.value.showProgress?1:0)),G=s((()=>q.value.showActionChinese?1:0)),J=s((()=>q.value.showActionID?1:0)),W=s((()=>`${q.value.offsetCountdownX}px`)),Z=s((()=>-1*q.value.offsetCountdownY+"px")),Q=s((()=>`${q.value.offsetActionChineseX}px`)),ee=s((()=>-1*q.value.offsetActionChineseY+"px")),oe=s((()=>`${q.value.offsetActionIDX}px`)),le=s((()=>-1*q.value.offsetActionIDY+"px")),te=s((()=>`${q.value.offsetProgressX}px`)),ae=s((()=>-1*q.value.offsetProgressY+"px")),ne=new Map,se=n(0),ie=q.value.ping,me=n(/^(?:1|true|on)$/i.test(K.get("showSettings")||"")||"flex"===(null==(T=null==(l=document.getElementById("unlocked"))?void 0:l.style)?void 0:T.display));function ue(){localStorage.removeItem("castingToChinese"),location.reload()}return x("EnmityTargetData",(e=>{var o;M.targetCast=ne.get(null==(o=e[q.value.targetKey])?void 0:o.ID)})),x("LogLine",(e=>{"20"===e.line[0]?ne.set(Number.parseInt(e.line[2],16),new E(e.line)):"23"===e.line[0]&&ne.delete(Number.parseInt(e.line[2],16))})),x("ChangeZone",(()=>ne.clear())),requestAnimationFrame((function e(){se.value=Date.now(),requestAnimationFrame(e)})),document.addEventListener("onOverlayStateUpdate",(e=>{var o;me.value=!1===(null==(o=null==e?void 0:e.detail)?void 0:o.isLocked)})),(e,o)=>{const l=y,t=z,a=b,n=S,s=U,C=Y,x=X,A=I,T=j,P=D;return i(),m("div",_,[u(f(A,{class:"settings"},{default:c((()=>[h("form",null,[o[20]||(o[20]=g(" 宽度: ")),f(l,{modelValue:d(q).width,"onUpdate:modelValue":o[0]||(o[0]=e=>d(q).width=e),min:20,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),h("form",null,[o[21]||(o[21]=g("显示倒计时: ")),f(t,{modelValue:d(q).showCountdown,"onUpdate:modelValue":o[1]||(o[1]=e=>d(q).showCountdown=e)},null,8,["modelValue"])]),h("form",null,[o[22]||(o[22]=g("显示进度条: ")),f(t,{modelValue:d(q).showProgress,"onUpdate:modelValue":o[2]||(o[2]=e=>d(q).showProgress=e)},null,8,["modelValue"])]),h("form",null,[o[23]||(o[23]=g("显示中文: ")),f(t,{modelValue:d(q).showActionChinese,"onUpdate:modelValue":o[3]||(o[3]=e=>d(q).showActionChinese=e)},null,8,["modelValue"])]),h("form",null,[o[24]||(o[24]=g("显示ID: ")),f(t,{modelValue:d(q).showActionID,"onUpdate:modelValue":o[4]||(o[4]=e=>d(q).showActionID=e)},null,8,["modelValue"])]),h("form",null,[o[25]||(o[25]=g(" 延迟(ms): ")),f(l,{modelValue:d(q).ping,"onUpdate:modelValue":o[5]||(o[5]=e=>d(q).ping=e),min:0,max:1e4,size:"small","controls-position":"right"},null,8,["modelValue"])]),h("form",null,[o[26]||(o[26]=g(" 保留(ms): ")),f(l,{modelValue:d(q).keep,"onUpdate:modelValue":o[6]||(o[6]=e=>d(q).keep=e),min:0,max:1e5,size:"small","controls-position":"right"},null,8,["modelValue"])]),h("form",null,[o[27]||(o[27]=g(" 进度条偏移X: ")),f(l,{modelValue:d(q).offsetProgressX,"onUpdate:modelValue":o[7]||(o[7]=e=>d(q).offsetProgressX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),h("form",null,[o[28]||(o[28]=g(" 进度条偏移Y: ")),f(l,{modelValue:d(q).offsetProgressY,"onUpdate:modelValue":o[8]||(o[8]=e=>d(q).offsetProgressY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),h("form",null,[o[29]||(o[29]=g(" 倒计时偏移X: ")),f(l,{modelValue:d(q).offsetCountdownX,"onUpdate:modelValue":o[9]||(o[9]=e=>d(q).offsetCountdownX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),h("form",null,[o[30]||(o[30]=g(" 倒计时偏移Y: ")),f(l,{modelValue:d(q).offsetCountdownY,"onUpdate:modelValue":o[10]||(o[10]=e=>d(q).offsetCountdownY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),h("form",null,[o[31]||(o[31]=g(" 中文偏移X: ")),f(l,{modelValue:d(q).offsetActionChineseX,"onUpdate:modelValue":o[11]||(o[11]=e=>d(q).offsetActionChineseX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),h("form",null,[o[32]||(o[32]=g(" 中文偏移Y: ")),f(l,{modelValue:d(q).offsetActionChineseY,"onUpdate:modelValue":o[12]||(o[12]=e=>d(q).offsetActionChineseY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),h("form",null,[o[33]||(o[33]=g(" ID偏移X: ")),f(l,{modelValue:d(q).offsetActionIDX,"onUpdate:modelValue":o[13]||(o[13]=e=>d(q).offsetActionIDX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),h("form",null,[o[34]||(o[34]=g(" ID偏移Y: ")),f(l,{modelValue:d(q).offsetActionIDY,"onUpdate:modelValue":o[14]||(o[14]=e=>d(q).offsetActionIDY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),h("form",null,[o[35]||(o[35]=g(" 倒计时字号(px): ")),f(l,{modelValue:d(q).fontSizeCountDown,"onUpdate:modelValue":o[15]||(o[15]=e=>d(q).fontSizeCountDown=e),min:1,max:100,size:"small","controls-position":"right"},null,8,["modelValue"])]),h("form",null,[o[36]||(o[36]=g(" 中文字号(px): ")),f(l,{modelValue:d(q).fontSizeActionName,"onUpdate:modelValue":o[16]||(o[16]=e=>d(q).fontSizeActionName=e),min:1,max:100,size:"small","controls-position":"right"},null,8,["modelValue"])]),h("form",F,[o[37]||(o[37]=g(" 字体: ")),f(a,{modelValue:d(q).fontFamily,"onUpdate:modelValue":o[17]||(o[17]=e=>d(q).fontFamily=e),size:"small",clearable:"",onClear:o[18]||(o[18]=e=>d(q).fontFamily="SmartisanHei")},null,8,["modelValue"])]),h("form",k,[f(s,{modelValue:d(q).targetKey,"onUpdate:modelValue":o[19]||(o[19]=e=>d(q).targetKey=e),placeholder:"Select",size:"small",teleported:!1},{default:c((()=>[(i(),m(v,null,V(H,(e=>f(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])]),h("form",N,[f(x,{teleported:!1,title:"确定要重置？",onConfirm:ue},{reference:c((()=>[f(C,null,{default:c((()=>o[38]||(o[38]=[g("重置全部用户设置")]))),_:1})])),_:1})])])),_:1},512),[[r,d(me)]]),u(f(P,{style:p({fontFamily:d(q).fontFamily})},{default:c((()=>{var e,o,l,t,a,n;return[h("div",{style:p({fontSize:`${d(q).fontSizeCountDown}px`}),class:"countdown"},w(Math.max((((null==(e=d(M).targetCast)?void 0:e.overTime)??1)-d(se)-d(ie))/1e3,0).toFixed(2)),5),f(T,{percentage:Math.min((d(se)-((null==(o=d(M).targetCast)?void 0:o.startTime)??1)+d(ie))/((null==(l=d(M).targetCast)?void 0:l.castTime)??1)*100,100),"stroke-width":8,indeterminate:!1,"show-text":!1,color:"#fbfff9",class:"progress"},null,8,["percentage"]),h("div",$,w(null==(t=d(M).targetCast)?void 0:t.actionId)+"("+w(null==(a=d(M).targetCast)?void 0:a.actionId.toString(16).toUpperCase())+") ",1),h("div",{style:p({fontSize:`${d(q).fontSizeActionName}px`}),class:"actionChinese"},w(null==(n=d(M).targetCast)?void 0:n.name),5)]})),_:1},8,["style"]),[[r,d(M).targetCast&&d(se)-d(M).targetCast.overTime+d(ie)<d(q).keep]])])}}}),[["__scopeId","data-v-d58207f0"]]);export{K as default};
