import"./index-D8UOL4JU.js";/* empty css                      *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                  *//* empty css                 *//* empty css                        */import{t as l,at as e,r as a,V as t,c as o,f as u,U as n,v as s,x as r,A as m,E as i,M as d,u as p,I as f,L as c,D as V,K as v,a9 as b,C as g,G as y,F as z,S as h,J as w}from"./vue-vendor-Bbuz3Kwb.js";import{a as C,r as U}from"./overlay_plugin_api-C1Kk3pZW.js";import{u as x}from"./index-bbahPALZ.js";import{e as j,f as A,h as _,i as S,j as $}from"./element-plus-QcyfhpSy.js";import{_ as I}from"./_plugin-vue_export-helper-BCo6x5W8.js";const D={class:"dnc-overlay"},E={class:"settings"},F=I(l({__name:"dnc",setup(l){var I,F;e((l=>({"5739ceee":p(G),"7472b602":p(J),f2ee9fb0:p(X),"657310fb":p(Y),"466eb29c":p(H),"5204523c":p(k),"23a2c181":p(q)})));const B=a(0),L=t({playerId:"",lastCombo:0,status:new Map([["A85",0],["A86",0],["BC9",0],["BCA",0]])}),M=x("jobs-dnc",{combo:{left:10,top:-30},tr3:{left:46,top:-22},tr4:{left:82,top:-22},fl:{left:0,top:-15},color:"rgb(255,255,255)",shadow:"rgb(0,0,0)",size:14,warncolor:"rgb(255,255,255)",warnshadow:"rgb(255,0,0)",zeroStr:"",fontFamily:"微软雅黑",fontWeight:!1,warn:5,userCss:""},localStorage,{mergeDefaults:!0}),P=a("flex"===(null==(F=null==(I=document.getElementById("unlocked"))?void 0:I.style)?void 0:F.display)),W=t([{id:"combo",cd:o((()=>30-Math.floor((B.value-L.lastCombo)/1e3))),style:{top:o((()=>`${M.value.combo.top}px`)),left:o((()=>`${M.value.combo.left}px`))}},{id:"tr3",cd:o((()=>30-Math.floor((B.value-(L.status.get("A85")??0))/1e3))),style:{top:o((()=>`${M.value.tr3.top}px`)),left:o((()=>`${M.value.tr3.left}px`))}},{id:"tr4",cd:o((()=>30-Math.floor((B.value-(L.status.get("A86")??0))/1e3))),style:{top:o((()=>`${M.value.tr4.top}px`)),left:o((()=>`${M.value.tr4.left}px`))}},{id:"fl3",cd:o((()=>30-Math.floor((B.value-(L.status.get("BC9")??0))/1e3))),style:{top:o((()=>`${M.value.tr3.top+M.value.fl.top}px`)),left:o((()=>`${M.value.tr3.left+M.value.fl.left}px`))}},{id:"fl4",cd:o((()=>30-Math.floor((B.value-(L.status.get("BCA")??0))/1e3))),style:{top:o((()=>`${M.value.tr4.top+M.value.fl.top}px`)),left:o((()=>`${M.value.tr4.left+M.value.fl.left}px`))}}]),X=o((()=>M.value.color)),Y=o((()=>M.value.shadow)),k=o((()=>M.value.warncolor)),q=o((()=>M.value.warnshadow)),G=o((()=>M.value.fontFamily)),H=o((()=>`${M.value.size}px`)),J=o((()=>M.value.fontWeight?"bold":"none")),K=o((()=>M.value.userCss)),N=l=>{l.line[5]!==L.playerId||"26"!==l.line[0]&&"30"!==l.line[0]||!L.status.has(l.line[2])?l.line[2]!==L.playerId||"21"!==l.line[0]&&"22"!==l.line[0]||("3E79"===l.line[4]&&"22"===l.line[0]||"3E75"===l.line[4]&&"21"===l.line[0]?L.lastCombo=Date.now():("3E76"===l.line[4]||"3E7A"===l.line[4]||"21"===l.line[0]&&"3E79"===l.line[4])&&(L.lastCombo=0)):L.status.set(l.line[2],"26"===l.line[0]?Date.now():0)};function O(){L.status.set("A85",0),L.status.set("A86",0),L.status.set("BC9",0),L.status.set("BCA",0),L.lastCombo=0}const Q=l=>{L.playerId=Number(l.charID).toString(16).toUpperCase()};function R(){localStorage.removeItem("jobs-dnc"),location.reload()}return u((()=>{C("onPlayerDied",O),C("LogLine",N),C("ChangePrimaryPlayer",Q),document.addEventListener("onOverlayStateUpdate",(l=>{var e;P.value=!1===(null==(e=null==l?void 0:l.detail)?void 0:e.isLocked)}))})),n((()=>{U("onPlayerDied",O),U("LogLine",N),U("ChangePrimaryPlayer",Q)})),requestAnimationFrame((function l(){B.value=Date.now(),requestAnimationFrame(l)})),(l,e)=>{const a=j,t=A,o=_,u=$,n=S;return s(),r(v,null,[m("div",D,[i(m("header",E,[m("form",null,[e[18]||(e[18]=f(" 连击X: ")),c(a,{modelValue:p(M).combo.left,"onUpdate:modelValue":e[0]||(e[0]=l=>p(M).combo.left=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),m("form",null,[e[19]||(e[19]=f(" 连击Y: ")),c(a,{modelValue:p(M).combo.top,"onUpdate:modelValue":e[1]||(e[1]=l=>p(M).combo.top=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),m("form",null,[e[20]||(e[20]=f(" 触发3X: ")),c(a,{modelValue:p(M).tr3.left,"onUpdate:modelValue":e[2]||(e[2]=l=>p(M).tr3.left=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),m("form",null,[e[21]||(e[21]=f(" 触发3Y: ")),c(a,{modelValue:p(M).tr3.top,"onUpdate:modelValue":e[3]||(e[3]=l=>p(M).tr3.top=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),m("form",null,[e[22]||(e[22]=f(" 触发4X: ")),c(a,{modelValue:p(M).tr4.left,"onUpdate:modelValue":e[4]||(e[4]=l=>p(M).tr4.left=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),m("form",null,[e[23]||(e[23]=f(" 触发4Y: ")),c(a,{modelValue:p(M).tr4.top,"onUpdate:modelValue":e[5]||(e[5]=l=>p(M).tr4.top=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),m("form",null,[e[24]||(e[24]=f(" 百花X: ")),c(a,{modelValue:p(M).fl.left,"onUpdate:modelValue":e[6]||(e[6]=l=>p(M).fl.left=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),m("form",null,[e[25]||(e[25]=f(" 百花Y: ")),c(a,{modelValue:p(M).fl.top,"onUpdate:modelValue":e[7]||(e[7]=l=>p(M).fl.top=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),m("form",null,[e[26]||(e[26]=f(" 剩余警告: ")),c(a,{modelValue:p(M).warn,"onUpdate:modelValue":e[8]||(e[8]=l=>p(M).warn=l),class:"input input-number",min:-1,max:30,size:"small"},null,8,["modelValue"])]),m("form",null,[e[27]||(e[27]=f(" 常规颜色: ")),c(t,{modelValue:p(M).color,"onUpdate:modelValue":e[9]||(e[9]=l=>p(M).color=l),class:"input input-string",size:"small"},null,8,["modelValue"])]),m("form",null,[e[28]||(e[28]=f(" 常规阴影: ")),c(t,{modelValue:p(M).shadow,"onUpdate:modelValue":e[10]||(e[10]=l=>p(M).shadow=l),class:"input input-string",size:"small"},null,8,["modelValue"])]),m("form",null,[e[29]||(e[29]=f(" 警告颜色: ")),c(t,{modelValue:p(M).warncolor,"onUpdate:modelValue":e[11]||(e[11]=l=>p(M).warncolor=l),class:"input input-string",size:"small"},null,8,["modelValue"])]),m("form",null,[e[30]||(e[30]=f(" 警告阴影: ")),c(t,{modelValue:p(M).warnshadow,"onUpdate:modelValue":e[12]||(e[12]=l=>p(M).warnshadow=l),class:"input input-string",size:"small"},null,8,["modelValue"])]),m("form",null,[e[31]||(e[31]=f(" 零值文本: ")),c(t,{modelValue:p(M).zeroStr,"onUpdate:modelValue":e[13]||(e[13]=l=>p(M).zeroStr=l),class:"input input-string",size:"small"},null,8,["modelValue"])]),m("form",null,[e[32]||(e[32]=f(" 字号: ")),c(a,{modelValue:p(M).size,"onUpdate:modelValue":e[14]||(e[14]=l=>p(M).size=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),m("form",null,[e[33]||(e[33]=f(" 字体: ")),c(t,{modelValue:p(M).fontFamily,"onUpdate:modelValue":e[15]||(e[15]=l=>p(M).fontFamily=l),class:"input input-string",size:"small"},null,8,["modelValue"])]),m("form",null,[e[34]||(e[34]=f(" 粗体：")),c(o,{modelValue:p(M).fontWeight,"onUpdate:modelValue":e[16]||(e[16]=l=>p(M).fontWeight=l),size:"small"},null,8,["modelValue"])]),m("form",null,[e[35]||(e[35]=f(" 自定义CSS： ")),e[36]||(e[36]=m("br",null,null,-1)),c(t,{modelValue:p(M).userCss,"onUpdate:modelValue":e[17]||(e[17]=l=>p(M).userCss=l),autosize:"",type:"textarea",placeholder:""},null,8,["modelValue"])]),e[38]||(e[38]=m("br",null,null,-1)),m("form",null,[c(n,{teleported:!1,title:"确定要重置？",onConfirm:R},{reference:V((()=>[c(u,null,{default:V((()=>e[37]||(e[37]=[f("重置全部用户设置")]))),_:1})])),_:1})])],512),[[d,p(P)]]),m("main",null,[(s(!0),r(v,null,b(p(W),(l=>(s(),r("div",{key:l.id},[m("span",{class:z(l.cd<=p(M).warn&&!p(P)?"warning":""),style:h(l.style)},w(l.cd>=0?l.cd:p(P)?"30":p(M).zeroStr),7)])))),128))])]),(s(),g(y("style"),null,{default:V((()=>[f(w(p(K)),1)])),_:1}))],64)}}}),[["__scopeId","data-v-8be95815"]]);export{F as default};
