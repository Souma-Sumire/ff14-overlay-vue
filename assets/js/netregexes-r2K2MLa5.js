var e=Object.defineProperty,t=(t,a,i)=>((t,a,i)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[a]=i)(t,"symbol"!=typeof a?a+"":a,i);const a={GameLog:{type:"00",name:"GameLog",source:"FFXIV_ACT_Plugin",messageType:"ChatLog",fields:{type:0,timestamp:1,code:2,name:3,line:4},subFields:{code:{"0039":{name:"message",canAnonymize:!0},"0038":{name:"echo",canAnonymize:!0},"0044":{name:"dialog",canAnonymize:!0},"0839":{name:"message",canAnonymize:!0}}},firstOptionalField:void 0,analysisOptions:{include:"filter",filters:{code:["0044","0839"]}}},ChangeZone:{type:"01",name:"ChangeZone",source:"FFXIV_ACT_Plugin",messageType:"Territory",fields:{type:0,timestamp:1,id:2,name:3},lastInclude:!0,canAnonymize:!0,firstOptionalField:void 0,analysisOptions:{include:"all"}},ChangedPlayer:{type:"02",name:"ChangedPlayer",source:"FFXIV_ACT_Plugin",messageType:"ChangePrimaryPlayer",fields:{type:0,timestamp:1,id:2,name:3},playerIds:{2:3},lastInclude:!0,canAnonymize:!0,firstOptionalField:void 0},AddedCombatant:{type:"03",name:"AddedCombatant",source:"FFXIV_ACT_Plugin",messageType:"AddCombatant",fields:{type:0,timestamp:1,id:2,name:3,job:4,level:5,ownerId:6,worldId:7,world:8,npcNameId:9,npcBaseId:10,currentHp:11,hp:12,currentMp:13,mp:14,x:17,y:18,z:19,heading:20},playerIds:{2:3,6:null},canAnonymize:!0,firstOptionalField:void 0,analysisOptions:{include:"filter",filters:{id:"4.{7}"},combatantIdFields:2}},RemovedCombatant:{type:"04",name:"RemovedCombatant",source:"FFXIV_ACT_Plugin",messageType:"RemoveCombatant",fields:{type:0,timestamp:1,id:2,name:3,job:4,level:5,owner:6,world:8,npcNameId:9,npcBaseId:10,currentHp:11,hp:12,currentMp:13,mp:14,x:17,y:18,z:19,heading:20},playerIds:{2:3,6:null},canAnonymize:!0,firstOptionalField:void 0,analysisOptions:{include:"filter",filters:{id:"4.{7}"},combatantIdFields:2}},PartyList:{type:"11",name:"PartyList",source:"FFXIV_ACT_Plugin",messageType:"PartyList",fields:{type:0,timestamp:1,partyCount:2,id0:3,id1:4,id2:5,id3:6,id4:7,id5:8,id6:9,id7:10,id8:11,id9:12,id10:13,id11:14,id12:15,id13:16,id14:17,id15:18,id16:19,id17:20,id18:21,id19:22,id20:23,id21:24,id22:25,id23:26},playerIds:{3:null,4:null,5:null,6:null,7:null,8:null,9:null,10:null,11:null,12:null,13:null,14:null,15:null,16:null,17:null,18:null,19:null,20:null,21:null,22:null,23:null,24:null,25:null,26:null},firstOptionalField:3,canAnonymize:!0,lastInclude:!0},PlayerStats:{type:"12",name:"PlayerStats",source:"FFXIV_ACT_Plugin",messageType:"PlayerStats",fields:{type:0,timestamp:1,job:2,strength:3,dexterity:4,vitality:5,intelligence:6,mind:7,piety:8,attackPower:9,directHit:10,criticalHit:11,attackMagicPotency:12,healMagicPotency:13,determination:14,skillSpeed:15,spellSpeed:16,tenacity:18,localContentId:19},canAnonymize:!0,lastInclude:!0,firstOptionalField:void 0},StartsUsing:{type:"20",name:"StartsUsing",source:"FFXIV_ACT_Plugin",messageType:"StartsCasting",fields:{type:0,timestamp:1,sourceId:2,source:3,id:4,ability:5,targetId:6,target:7,castTime:8,x:9,y:10,z:11,heading:12},possibleRsvFields:5,blankFields:[6],playerIds:{2:3,6:7},canAnonymize:!0,firstOptionalField:void 0,analysisOptions:{include:"filter",filters:{sourceId:"4.{7}"},combatantIdFields:[2,6]}},Ability:{type:"21",name:"Ability",source:"FFXIV_ACT_Plugin",messageType:"ActionEffect",fields:{type:0,timestamp:1,sourceId:2,source:3,id:4,ability:5,targetId:6,target:7,flags:8,damage:9,targetCurrentHp:24,targetMaxHp:25,targetCurrentMp:26,targetMaxMp:27,targetX:30,targetY:31,targetZ:32,targetHeading:33,currentHp:34,maxHp:35,currentMp:36,maxMp:37,x:40,y:41,z:42,heading:43,sequence:44,targetIndex:45,targetCount:46,ownerId:47,ownerName:48,effectDisplayType:49,actionId:50,actionAnimationId:51,animationLockTime:52,rotationHex:53},possibleRsvFields:5,playerIds:{2:3,6:7,47:48},blankFields:[6,47,48],canAnonymize:!0,firstOptionalField:void 0,analysisOptions:{include:"filter",filters:{sourceId:"4.{7}"},combatantIdFields:[2,6]}},NetworkAOEAbility:{type:"22",name:"NetworkAOEAbility",source:"FFXIV_ACT_Plugin",messageType:"AOEActionEffect",fields:{type:0,timestamp:1,sourceId:2,source:3,id:4,ability:5,targetId:6,target:7,flags:8,damage:9,targetCurrentHp:24,targetMaxHp:25,targetCurrentMp:26,targetMaxMp:27,targetX:30,targetY:31,targetZ:32,targetHeading:33,currentHp:34,maxHp:35,currentMp:36,maxMp:37,x:40,y:41,z:42,heading:43,sequence:44,targetIndex:45,targetCount:46,ownerId:47,ownerName:48,effectDisplayType:49,actionId:50,actionAnimationId:51,animationLockTime:52,rotationHex:53},possibleRsvFields:5,playerIds:{2:3,6:7,47:48},blankFields:[6,47,48],canAnonymize:!0,firstOptionalField:void 0,analysisOptions:{include:"filter",filters:{sourceId:"4.{7}"},combatantIdFields:[2,6]}},NetworkCancelAbility:{type:"23",name:"NetworkCancelAbility",source:"FFXIV_ACT_Plugin",messageType:"CancelAction",fields:{type:0,timestamp:1,sourceId:2,source:3,id:4,name:5,reason:6},possibleRsvFields:5,playerIds:{2:3},canAnonymize:!0,firstOptionalField:void 0,analysisOptions:{include:"filter",filters:{sourceId:"4.{7}"},combatantIdFields:2}},NetworkDoT:{type:"24",name:"NetworkDoT",source:"FFXIV_ACT_Plugin",messageType:"DoTHoT",fields:{type:0,timestamp:1,id:2,name:3,which:4,effectId:5,damage:6,currentHp:7,maxHp:8,currentMp:9,maxMp:10,x:13,y:14,z:15,heading:16,sourceId:17,source:18,damageType:19,sourceCurrentHp:20,sourceMaxHp:21,sourceCurrentMp:22,sourceMaxMp:23,sourceX:26,sourceY:27,sourceZ:28,sourceHeading:29},playerIds:{2:3,17:18},canAnonymize:!0,firstOptionalField:void 0,analysisOptions:{include:"filter",filters:{id:"1.{7}",which:"DoT",effectId:"0*?[1-9A-F][0-9A-F]*"},combatantIdFields:[2,17]}},WasDefeated:{type:"25",name:"WasDefeated",source:"FFXIV_ACT_Plugin",messageType:"Death",fields:{type:0,timestamp:1,targetId:2,target:3,sourceId:4,source:5},playerIds:{2:3,4:5},canAnonymize:!0,firstOptionalField:void 0,analysisOptions:{include:"filter",filters:{targetId:"4.{7}"},combatantIdFields:2}},GainsEffect:{type:"26",name:"GainsEffect",source:"FFXIV_ACT_Plugin",messageType:"StatusAdd",fields:{type:0,timestamp:1,effectId:2,effect:3,duration:4,sourceId:5,source:6,targetId:7,target:8,count:9,targetMaxHp:10,sourceMaxHp:11},possibleRsvFields:3,playerIds:{5:6,7:8},canAnonymize:!0,firstOptionalField:void 0,analysisOptions:{include:"filter",filters:[{sourceId:"[E4].{7}",targetId:"1.{7}"},{sourceId:"[E4].{7}",targetId:"4.{7}"},{effectId:["B9A","808"]}],combatantIdFields:[5,7]}},HeadMarker:{type:"27",name:"HeadMarker",source:"FFXIV_ACT_Plugin",messageType:"TargetIcon",fields:{type:0,timestamp:1,targetId:2,target:3,id:6,data0:7},playerIds:{2:3},possiblePlayerIds:[7],canAnonymize:!0,firstOptionalField:7,analysisOptions:{include:"all",combatantIdFields:2}},NetworkRaidMarker:{type:"28",name:"NetworkRaidMarker",source:"FFXIV_ACT_Plugin",messageType:"WaymarkMarker",fields:{type:0,timestamp:1,operation:2,waymark:3,id:4,name:5,x:6,y:7,z:8},playerIds:{4:5},canAnonymize:!0,firstOptionalField:void 0},NetworkTargetMarker:{type:"29",name:"NetworkTargetMarker",source:"FFXIV_ACT_Plugin",messageType:"SignMarker",fields:{type:0,timestamp:1,operation:2,waymark:3,id:4,name:5,targetId:6,targetName:7},playerIds:{4:5,6:7},firstOptionalField:void 0},LosesEffect:{type:"30",name:"LosesEffect",source:"FFXIV_ACT_Plugin",messageType:"StatusRemove",fields:{type:0,timestamp:1,effectId:2,effect:3,sourceId:5,source:6,targetId:7,target:8,count:9},possibleRsvFields:3,playerIds:{5:6,7:8},canAnonymize:!0,firstOptionalField:void 0,analysisOptions:{include:"filter",filters:[{sourceId:"[E4].{7}",targetId:"1.{7}"},{sourceId:"[E4].{7}",targetId:"4.{7}"},{effectId:["B9A","808"]}],combatantIdFields:[5,7]}},NetworkGauge:{type:"31",name:"NetworkGauge",source:"FFXIV_ACT_Plugin",messageType:"Gauge",fields:{type:0,timestamp:1,id:2,data0:3,data1:4,data2:5,data3:6},playerIds:{2:null},firstUnknownField:3,canAnonymize:!0,firstOptionalField:void 0},NetworkWorld:{type:"32",name:"NetworkWorld",source:"FFXIV_ACT_Plugin",messageType:"World",fields:{type:0,timestamp:1},isUnknown:!0,firstOptionalField:void 0},ActorControl:{type:"33",name:"ActorControl",source:"FFXIV_ACT_Plugin",messageType:"Director",fields:{type:0,timestamp:1,instance:2,command:3,data0:4,data1:5,data2:6,data3:7},possiblePlayerIds:[4,5,6,7],canAnonymize:!0,firstOptionalField:void 0,analysisOptions:{include:"never"}},NameToggle:{type:"34",name:"NameToggle",source:"FFXIV_ACT_Plugin",messageType:"NameToggle",fields:{type:0,timestamp:1,id:2,name:3,targetId:4,targetName:5,toggle:6},playerIds:{2:3,4:5},canAnonymize:!0,firstOptionalField:void 0,analysisOptions:{include:"never"}},Tether:{type:"35",name:"Tether",source:"FFXIV_ACT_Plugin",messageType:"Tether",fields:{type:0,timestamp:1,sourceId:2,source:3,targetId:4,target:5,id:8},playerIds:{2:3,4:5},canAnonymize:!0,firstUnknownField:9,firstOptionalField:void 0,analysisOptions:{include:"all",combatantIdFields:[2,4]}},LimitBreak:{type:"36",name:"LimitBreak",source:"FFXIV_ACT_Plugin",messageType:"LimitBreak",fields:{type:0,timestamp:1,valueHex:2,bars:3},canAnonymize:!0,firstOptionalField:void 0},NetworkEffectResult:{type:"37",name:"NetworkEffectResult",source:"FFXIV_ACT_Plugin",messageType:"EffectResult",fields:{type:0,timestamp:1,id:2,name:3,sequenceId:4,currentHp:5,maxHp:6,currentMp:7,maxMp:8,currentShield:9,x:11,y:12,z:13,heading:14},playerIds:{2:3},firstUnknownField:22,canAnonymize:!0,firstOptionalField:void 0,analysisOptions:{include:"never"}},StatusEffect:{type:"38",name:"StatusEffect",source:"FFXIV_ACT_Plugin",messageType:"StatusList",fields:{type:0,timestamp:1,targetId:2,target:3,jobLevelData:4,hp:5,maxHp:6,mp:7,maxMp:8,currentShield:9,x:11,y:12,z:13,heading:14,data0:15,data1:16,data2:17,data3:18,data4:19,data5:20},playerIds:{2:3},firstUnknownField:18,canAnonymize:!0,firstOptionalField:18},NetworkUpdateHP:{type:"39",name:"NetworkUpdateHP",source:"FFXIV_ACT_Plugin",messageType:"UpdateHp",fields:{type:0,timestamp:1,id:2,name:3,currentHp:4,maxHp:5,currentMp:6,maxMp:7,x:10,y:11,z:12,heading:13},playerIds:{2:3},canAnonymize:!0,firstOptionalField:void 0},Map:{type:"40",name:"Map",source:"FFXIV_ACT_Plugin",messageType:"ChangeMap",fields:{type:0,timestamp:1,id:2,regionName:3,placeName:4,placeNameSub:5},canAnonymize:!0,firstOptionalField:void 0,lastInclude:!0,analysisOptions:{include:"all"}},SystemLogMessage:{type:"41",name:"SystemLogMessage",source:"FFXIV_ACT_Plugin",messageType:"SystemLogMessage",fields:{type:0,timestamp:1,instance:2,id:3,param0:4,param1:5,param2:6},canAnonymize:!0,firstOptionalField:void 0,analysisOptions:{include:"all"}},StatusList3:{type:"42",name:"StatusList3",source:"FFXIV_ACT_Plugin",messageType:"StatusList3",fields:{type:0,timestamp:1,id:2,name:3},playerIds:{2:3},canAnonymize:!0,firstOptionalField:4,firstUnknownField:4},ParserInfo:{type:"249",name:"ParserInfo",source:"FFXIV_ACT_Plugin",messageType:"Settings",fields:{type:0,timestamp:1},globalInclude:!0,canAnonymize:!0,firstOptionalField:void 0},ProcessInfo:{type:"250",name:"ProcessInfo",source:"FFXIV_ACT_Plugin",messageType:"Process",fields:{type:0,timestamp:1},globalInclude:!0,canAnonymize:!0,firstOptionalField:void 0},Debug:{type:"251",name:"Debug",source:"FFXIV_ACT_Plugin",messageType:"Debug",fields:{type:0,timestamp:1},globalInclude:!0,canAnonymize:!1,firstOptionalField:void 0},PacketDump:{type:"252",name:"PacketDump",source:"FFXIV_ACT_Plugin",messageType:"PacketDump",fields:{type:0,timestamp:1},canAnonymize:!1,firstOptionalField:void 0},Version:{type:"253",name:"Version",source:"FFXIV_ACT_Plugin",messageType:"Version",fields:{type:0,timestamp:1},globalInclude:!0,canAnonymize:!0,firstOptionalField:void 0},Error:{type:"254",name:"Error",source:"FFXIV_ACT_Plugin",messageType:"Error",fields:{type:0,timestamp:1},canAnonymize:!1,firstOptionalField:void 0},None:{type:"[0-9]+",name:"None",source:"FFXIV_ACT_Plugin",messageType:"None",fields:{type:0,timestamp:1},isUnknown:!0,firstOptionalField:void 0,analysisOptions:{include:"never"}},LineRegistration:{type:"256",name:"LineRegistration",source:"OverlayPlugin",messageType:"256",fields:{type:0,timestamp:1,id:2,source:3,name:4,version:5},globalInclude:!0,canAnonymize:!0,firstOptionalField:void 0},MapEffect:{type:"257",name:"MapEffect",source:"OverlayPlugin",messageType:"257",fields:{type:0,timestamp:1,instance:2,flags:3,location:4,data0:5,data1:6},canAnonymize:!0,firstOptionalField:void 0,analysisOptions:{include:"all"}},FateDirector:{type:"258",name:"FateDirector",source:"OverlayPlugin",messageType:"258",fields:{type:0,timestamp:1,category:2,fateId:4,progress:5},canAnonymize:!0,firstOptionalField:void 0},CEDirector:{type:"259",name:"CEDirector",source:"OverlayPlugin",messageType:"259",fields:{type:0,timestamp:1,popTime:2,timeRemaining:3,ceKey:5,numPlayers:6,status:7,progress:9},canAnonymize:!0,firstOptionalField:void 0},InCombat:{type:"260",name:"InCombat",source:"OverlayPlugin",messageType:"260",fields:{type:0,timestamp:1,inACTCombat:2,inGameCombat:3,isACTChanged:4,isGameChanged:5},canAnonymize:!0,firstOptionalField:void 0,analysisOptions:{include:"all"}},CombatantMemory:{type:"261",name:"CombatantMemory",source:"OverlayPlugin",messageType:"261",fields:{type:0,timestamp:1,change:2,id:3},canAnonymize:!0,firstOptionalField:5,repeatingFields:{startingIndex:4,label:"pair",names:["key","value"],sortKeys:!0,primaryKey:"key",possibleKeys:["CurrentWorldID","WorldID","WorldName","BNpcID","BNpcNameID","PartyType","ID","OwnerID","WeaponId","Type","Job","Level","Name","CurrentHP","MaxHP","CurrentMP","MaxMP","PosX","PosY","PosZ","Heading","MonsterType","Status","ModelStatus","AggressionStatus","TargetID","IsTargetable","Radius","Distance","EffectiveDistance","NPCTargetID","CurrentGP","MaxGP","CurrentCP","MaxCP","PCTargetID","IsCasting1","IsCasting2","CastBuffID","CastTargetID","CastGroundTargetX","CastGroundTargetY","CastGroundTargetZ","CastDurationCurrent","CastDurationMax","TransformationId"],keysToAnonymize:{3:"Name",OwnerID:null,TargetID:null,PCTargetID:null,NPCTargetID:null,CastTargetID:null}},analysisOptions:{include:"filter",filters:[{id:"4.{7}",change:"Change",pair:[{key:"ModelStatus",value:".*"}]},{id:"4.{7}",change:"Change",pair:[{key:"WeaponId",value:".*"}]},{id:"4.{7}",change:"Change",pair:[{key:"TransformationId",value:".*"}]}],combatantIdFields:3}},RSVData:{type:"262",name:"RSVData",source:"OverlayPlugin",messageType:"262",fields:{type:0,timestamp:1,locale:2,key:4,value:5},canAnonymize:!0,firstOptionalField:void 0,analysisOptions:{include:"never"}},StartsUsingExtra:{type:"263",name:"StartsUsingExtra",source:"OverlayPlugin",messageType:"263",fields:{type:0,timestamp:1,sourceId:2,id:3,x:4,y:5,z:6,heading:7},playerIds:{2:null},canAnonymize:!0,firstOptionalField:void 0,analysisOptions:{include:"filter",filters:{sourceId:"4.{7}"},combatantIdFields:2}},AbilityExtra:{type:"264",name:"AbilityExtra",source:"OverlayPlugin",messageType:"264",fields:{type:0,timestamp:1,sourceId:2,id:3,globalEffectCounter:4,dataFlag:5,x:6,y:7,z:8,heading:9,animationTargetId:10},blankFields:[6,7,8],playerIds:{2:null},canAnonymize:!0,firstOptionalField:void 0},ContentFinderSettings:{type:"265",name:"ContentFinderSettings",source:"OverlayPlugin",messageType:"265",fields:{type:0,timestamp:1,zoneId:2,zoneName:3,inContentFinderContent:4,unrestrictedParty:5,minimalItemLevel:6,silenceEcho:7,explorerMode:8,levelSync:9},canAnonymize:!0,firstOptionalField:void 0},NpcYell:{type:"266",name:"NpcYell",source:"OverlayPlugin",messageType:"266",fields:{type:0,timestamp:1,npcId:2,npcNameId:3,npcYellId:4},canAnonymize:!0,firstOptionalField:void 0,analysisOptions:{include:"all",combatantIdFields:2}},BattleTalk2:{type:"267",name:"BattleTalk2",source:"OverlayPlugin",messageType:"267",fields:{type:0,timestamp:1,npcId:2,instance:3,npcNameId:4,instanceContentTextId:5,displayMs:6},canAnonymize:!0,firstOptionalField:void 0,analysisOptions:{include:"all",combatantIdFields:2}},Countdown:{type:"268",name:"Countdown",source:"OverlayPlugin",messageType:"268",fields:{type:0,timestamp:1,id:2,worldId:3,countdownTime:4,result:5,name:6},playerIds:{2:6},canAnonymize:!0,firstOptionalField:void 0,analysisOptions:{include:"never"}},CountdownCancel:{type:"269",name:"CountdownCancel",source:"OverlayPlugin",messageType:"269",fields:{type:0,timestamp:1,id:2,worldId:3,name:4},playerIds:{2:4},canAnonymize:!0,firstOptionalField:void 0,analysisOptions:{include:"never"}},ActorMove:{type:"270",name:"ActorMove",source:"OverlayPlugin",messageType:"270",fields:{type:0,timestamp:1,id:2,heading:3,x:6,y:7,z:8},playerIds:{2:null},canAnonymize:!0,firstOptionalField:void 0,analysisOptions:{include:"never"}},ActorSetPos:{type:"271",name:"ActorSetPos",source:"OverlayPlugin",messageType:"271",fields:{type:0,timestamp:1,id:2,heading:3,x:6,y:7,z:8},playerIds:{2:null},canAnonymize:!0,firstOptionalField:void 0,analysisOptions:{include:"filter",filters:{id:"4.{7}"},combatantIdFields:2}},SpawnNpcExtra:{type:"272",name:"SpawnNpcExtra",source:"OverlayPlugin",messageType:"272",fields:{type:0,timestamp:1,id:2,parentId:3,tetherId:4,animationState:5},playerIds:{3:null},canAnonymize:!0,firstOptionalField:void 0,analysisOptions:{include:"all",combatantIdFields:[2,3]}},ActorControlExtra:{type:"273",name:"ActorControlExtra",source:"OverlayPlugin",messageType:"273",fields:{type:0,timestamp:1,id:2,category:3,param1:4,param2:5,param3:6,param4:7},playerIds:{2:null},possiblePlayerIds:[4,5,6,7],canAnonymize:!0,firstOptionalField:void 0,analysisOptions:{include:"all",combatantIdFields:2}},ActorControlSelfExtra:{type:"274",name:"ActorControlSelfExtra",source:"OverlayPlugin",messageType:"274",fields:{type:0,timestamp:1,id:2,category:3,param1:4,param2:5,param3:6,param4:7,param5:8,param6:9},playerIds:{2:null},possiblePlayerIds:[4,5,6,7,8,9],canAnonymize:!0,firstOptionalField:void 0,analysisOptions:{include:"all",combatantIdFields:2}}},i={latest:a},n=i.latest;class s extends Error{constructor(){super("This code shouldn't be reached")}}const r="[^:]*",o=["effect","ability"],l=(e,t)=>{if(!0!==e)return!1;if(void 0===t)return!0;if(!Array.isArray(t))return!1;for(const a of t)if("object"!=typeof a)return!1;return!0},d=(e,t)=>((e,t,a)=>{var i,d,c,m,u,y,g,f,I;e=e??{};const F=[];for(const n in a){const e=a[n];e&&F.push(e.field)}p.validateParams(e,t,["capture",...F]);const v=p.trueIfUndefined(e.capture),C=Object.keys(a).sort(((e,t)=>parseInt(e)-parseInt(t)));let b;if(v){const t=[];for(const e in a)t.push(e);let n=t.pop();if(void 0===n)b=C[C.length-1]??"0";else{for(;(null==(i=a[n])?void 0:i.optional)&&!(((null==(d=a[n])?void 0:d.field)??"")in e);)n=t.pop();b=n??"0"}}else{b="0";for(const t in a){if("object"!=typeof(a[t]??{}))continue;const i=null==(c=a[t])?void 0:c.field;void 0!==i&&i in e&&(b=t)}}const A=parseInt(b),T=`(?:${n.Ability.messageType}|${n.NetworkAOEAbility.messageType})`,O="Ability"!==t?n[t].messageType:T,P=parseInt(n[t].type).toString(16).toUpperCase(),h=P.length<2?`00${P}`.slice(-2):P,E="Ability"!==t?h:"(?:15|16)";let x="";x+=v?`(?<timestamp>\\y{Timestamp}) ${O} (?<type>${E})`:`\\y{Timestamp} ${O} ${E}`;let w=1;for(const n in a){const i=a[n];if(void 0===i)continue;const d=i.field;if("timestamp"===d||"type"===d)continue;const c=parseInt(n),F=c-w-1;if(1===F?x+=`:${r}`:F>1&&(x+=`(?::${r}){${F}}`),w=c,x+=":","object"!=typeof i)throw new Error(`${t}: invalid value: ${JSON.stringify(i)}`);const C=void 0!==d&&o.includes(d)?"(?:[^:]|: )*?":r,b=(null==(m=i.value)?void 0:m.toString())??C,T=e[d];if(l(null==(u=a[n])?void 0:u.repeating,T)){const e="(?:$|:)";let t=T;const i=null==(y=a[n])?void 0:y.sortKeys,o=null==(g=a[n])?void 0:g.primaryKey,l=null==(f=a[n])?void 0:f.possibleKeys;if(void 0===o||void 0===l)throw new s;i&&(l.sort(((e,t)=>e.toLowerCase().localeCompare(t.toLowerCase()))),void 0!==t&&(t=[...t].sort(((e,t)=>{if("object"!=typeof e||void 0===e[o])return 0;const a=e[o];if("string"!=typeof a||!(null==l?void 0:l.includes(a)))return 0;if("object"!=typeof t||void 0===t[o])return 0;const i=t[o];return"string"==typeof i&&(null==l?void 0:l.includes(i))?a.toLowerCase().localeCompare(i.toLowerCase()):0}))));const c=t;l.forEach((t=>{var i,s;const l=null==c?void 0:c.find((e=>o in e&&e[o]===t));let m="";null==(s=null==(i=a[n])?void 0:i.repeatingKeys)||s.forEach((a=>{let i=null==l?void 0:l[a];void 0!==l&&a in l||(i=a===o?t:r),"string"!=typeof i&&(Array.isArray(i)?(i.length<1||i.some((e=>"string"!=typeof e)))&&(i=r):i=r),m+=p.maybeCapture(a!==o&&v,d+t,i,b)+e})),m.length>0&&(x+=`(?:${m})${void 0!==l?"":"?"}`)}))}else(null==(I=a[n])?void 0:I.repeating)||(x+=void 0!==d?p.maybeCapture(v,d,T,b):T);if(c>=A)break}return x+="(?:$|:)",p.parse(x)})(t,e,((e,t,a)=>{const n=i[t][e];void 0===a&&(a=Object.keys(n.fields),"repeatingFields"in n&&a.push(n.repeatingFields.label));const s={},r=n.firstOptionalField;for(const[i,o]of Object.entries(n.fields)){if(!a.includes(i))continue;const e={field:i,optional:void 0!==r&&o>=r};"type"===i&&(e.value=n.type),s[o]=e}return"repeatingFields"in n&&a.includes(n.repeatingFields.label)&&(s[n.repeatingFields.startingIndex]={field:n.repeatingFields.label,optional:void 0!==r&&n.repeatingFields.startingIndex>=r,repeating:!0,repeatingKeys:[...n.repeatingFields.names],sortKeys:n.repeatingFields.sortKeys,primaryKey:n.repeatingFields.primaryKey,possibleKeys:[...n.repeatingFields.possibleKeys]}),s})(e,p.logVersion)),c=class e{static startsUsing(e){return d("StartsUsing",e)}static ability(e){return d("Ability",e)}static abilityFull(e){return this.ability(e)}static headMarker(e){return d("HeadMarker",e)}static addedCombatant(e){return d("AddedCombatant",e)}static addedCombatantFull(e){return this.addedCombatant(e)}static removingCombatant(e){return d("RemovedCombatant",e)}static gainsEffect(e){return d("GainsEffect",e)}static statusEffectExplicit(e){return d("StatusEffect",e)}static losesEffect(e){return d("LosesEffect",e)}static tether(e){return d("Tether",e)}static wasDefeated(e){return d("WasDefeated",e)}static networkDoT(e){return d("NetworkDoT",e)}static echo(t){return void 0===t&&(t={}),e.validateParams(t,"echo",["type","timestamp","code","name","line","capture"]),t.code="0038",e.gameLog(t)}static dialog(t){return void 0===t&&(t={}),e.validateParams(t,"dialog",["type","timestamp","code","name","line","capture"]),t.code="0044",e.gameLog(t)}static message(t){return void 0===t&&(t={}),e.validateParams(t,"message",["type","timestamp","code","name","line","capture"]),t.code="0839",e.gameLog(t)}static gameLog(e){return d("GameLog",e)}static gameNameLog(t){return e.gameLog(t)}static statChange(e){return d("PlayerStats",e)}static changeZone(e){return d("ChangeZone",e)}static network6d(e){return d("ActorControl",e)}static nameToggle(e){return d("NameToggle",e)}static map(e){return d("Map",e)}static systemLogMessage(e){return d("SystemLogMessage",e)}static mapEffect(e){return d("MapEffect",e)}static fateDirector(e){return d("FateDirector",e)}static ceDirector(e){return d("CEDirector",e)}static inCombat(e){return d("InCombat",e)}static combatantMemory(e){return d("CombatantMemory",e)}static startsUsingExtra(e){return d("StartsUsingExtra",e)}static abilityExtra(e){return d("AbilityExtra",e)}static contentFinderSettings(e){return d("ContentFinderSettings",e)}static npcYell(e){return d("NpcYell",e)}static battleTalk2(e){return d("BattleTalk2",e)}static countdown(e){return d("Countdown",e)}static countdownCancel(e){return d("CountdownCancel",e)}static actorMove(e){return d("ActorMove",e)}static actorSetPos(e){return d("ActorSetPos",e)}static spawnNpcExtra(e){return d("SpawnNpcExtra",e)}static actorControlExtra(e){return d("ActorControlExtra",e)}static actorControlSelfExtra(e){return d("ActorControlSelfExtra",e)}static maybeCapture(t,a,i,n){return void 0===i&&(i=n??r),i=e.anyOf(i),t?e.namedCapture(a,i):i}static optional(e){return`(?:${e})?`}static namedCapture(e,t){return e.includes(">"),e.includes("<"),`(?<${e}>${t})`}static anyOf(...e){let t=[];const[a]=e;return t=1===e.length?"string"==typeof a||a instanceof RegExp?[a]:Array.isArray(a)?a:[]:e,(e=>{const[t]=e;return void 0!==t&&1===e.length?`${t instanceof RegExp?t.source:t}`:`(?:${e.map((e=>e instanceof RegExp?e.source:e)).join("|")})`})(t)}static parse(e){const t={Timestamp:"^.{14}",NetTimestamp:".{33}",NetField:"(?:[^|]*\\|)",LogType:"[0-9A-Fa-f]{2}",AbilityCode:"[0-9A-Fa-f]{1,8}",ObjectId:"[0-9A-F]{8}",Name:"(?:[^\\s:|]+(?: [^\\s:|]+)?|)",Float:"-?[0-9]+(?:[.,][0-9]+)?(?:E-?[0-9]+)?"};let a="i";return e instanceof RegExp&&(a+=(e.global?"g":"")+(e.multiline?"m":""),e=e.source),e=e.replace(/\\y\{(.*?)\}/g,((e,a)=>t[a]||e)),new RegExp(e,a)}static parseGlobal(t){const a=e.parse(t);let i="gi";return t instanceof RegExp&&(i+=t.multiline?"m":""),new RegExp(a.source,i)}static trueIfUndefined(e){return void 0===e||!!e}static validateParams(e,t,a){if(null===e)return;if("object"!=typeof e)return;const i=Object.keys(e);for(const n of i)if(!a.includes(n))throw new Error(`${t}: invalid parameter '${n}'.  Valid params: ${JSON.stringify(a)}`)}};t(c,"logVersion","latest");let p=c;const m="\\|",u="[^|]*",y=/^\^\^/,g=["ability","name","source","target","line"],f={echo:"0038",dialog:"0044",message:"0839"},I={setAnimState:"003E",publicContentText:"0834",logMsg:"020F",logMsgParams:"0210"},F=(e,t,a)=>{const n=i[t][e];void 0===a&&(a=Object.keys(n.fields),"repeatingFields"in n&&a.push(n.repeatingFields.label));const s={},r=n.firstOptionalField;for(const[i,o]of Object.entries(n.fields)){if(!a.includes(i))continue;const e={field:i,optional:void 0!==r&&o>=r};"type"===i&&(e.value=n.type),s[o]=e}return"repeatingFields"in n&&a.includes(n.repeatingFields.label)&&(s[n.repeatingFields.startingIndex]={field:n.repeatingFields.label,optional:void 0!==r&&n.repeatingFields.startingIndex>=r,repeating:!0,repeatingKeys:[...n.repeatingFields.names],sortKeys:n.repeatingFields.sortKeys,primaryKey:n.repeatingFields.primaryKey,possibleKeys:[...n.repeatingFields.possibleKeys]}),s},v=(e,t)=>{if(!0!==e)return!1;if(void 0===t)return!0;if(!Array.isArray(t))return!1;for(const a of t)if("object"!=typeof a)return!1;return!0},C=(e,t,a)=>{var i,n,r,o,l,d,c,y,f;e=e??{};const I=[];for(const s in a){const e=a[s];e&&I.push(e.field)}p.validateParams(e,t,["capture",...I]);const F=p.trueIfUndefined(e.capture),C=Object.keys(a).sort(((e,t)=>parseInt(e)-parseInt(t)));let b;if(F){const t=[];for(const e in a)t.push(e);let s=t.pop();if(void 0===s)b=C[C.length-1]??"0";else{for(;(null==(i=a[s])?void 0:i.optional)&&!(((null==(n=a[s])?void 0:n.field)??"")in e);)s=t.pop();b=s??"0"}}else{b="0";for(const t in a){if("object"!=typeof(a[t]??{}))continue;const i=null==(r=a[t])?void 0:r.field;void 0!==i&&i in e&&(b=t)}}const A=parseInt(b),O=Object.keys(e).filter((e=>g.includes(e)));let P=T.flagTranslationsNeeded&&O.length>0?"^^":"^",h=-1;for(const g in a){const i=parseInt(g),n=i-h-1;1===n?P+="\\y{NetField}":n>1&&(P+=`\\y{NetField}{${n}}`),h=i;const r=a[g];if("object"!=typeof r)throw new Error(`${t}: invalid value: ${JSON.stringify(r)}`);const I=r.field,C=(null==(o=r.value)?void 0:o.toString())??u,b=e[I];if(v(null==(l=a[g])?void 0:l.repeating,b)){let e=b;const t=null==(d=a[g])?void 0:d.sortKeys,i=null==(c=a[g])?void 0:c.primaryKey,n=null==(y=a[g])?void 0:y.possibleKeys;if(void 0===i||void 0===n)throw new s;t&&(n.sort(((e,t)=>e.toLowerCase().localeCompare(t.toLowerCase()))),void 0!==e&&(e=[...e].sort(((e,t)=>{if("object"!=typeof e||void 0===e[i])return 0;const a=e[i];if("string"!=typeof a||!(null==n?void 0:n.includes(a)))return 0;if("object"!=typeof t||void 0===t[i])return 0;const s=t[i];return"string"==typeof s&&(null==n?void 0:n.includes(s))?a.toLowerCase().localeCompare(s.toLowerCase()):0}))));const r=e;n.forEach((e=>{var t,n;const s=null==r?void 0:r.find((t=>i in t&&t[i]===e));let o="";null==(n=null==(t=a[g])?void 0:t.repeatingKeys)||n.forEach((t=>{let a=null==s?void 0:s[t];void 0!==s&&t in s||(a=t===i?e:u),"string"!=typeof a&&(Array.isArray(a)?(a.length<1||a.some((e=>"string"!=typeof e)))&&(a=u):a=u),o+=p.maybeCapture(t!==i&&F,I+e,a,C)+m})),o.length>0&&(P+=`(?:${o})${void 0!==s?"":"?"}`)}))}else(null==(f=a[g])?void 0:f.repeating)||(P+=void 0!==I?p.maybeCapture(F,I,b,C)+m:C+m);if(i>=A)break}return p.parse(P)},b=(e,t)=>C(t,e,F(e,T.logVersion)),A=class e{static setFlagTranslationsNeeded(t){e.flagTranslationsNeeded=t}static doesNetRegexNeedTranslation(e){const t="string"==typeof e?e:e.source;return!!y.exec(t)}static startsUsing(e){return b("StartsUsing",e)}static ability(t){return C(t,"Ability",{...F("Ability",e.logVersion),0:{field:"type",value:"2[12]",optional:!1}})}static abilityFull(e){return this.ability(e)}static headMarker(e){return b("HeadMarker",e)}static addedCombatant(t){return C(t,"AddedCombatant",F("AddedCombatant",e.logVersion))}static addedCombatantFull(t){return e.addedCombatant(t)}static removingCombatant(e){return b("RemovedCombatant",e)}static gainsEffect(e){return b("GainsEffect",e)}static statusEffectExplicit(e){return b("StatusEffect",e)}static losesEffect(e){return b("LosesEffect",e)}static tether(e){return b("Tether",e)}static wasDefeated(e){return b("WasDefeated",e)}static networkDoT(e){return b("NetworkDoT",e)}static echo(t){return void 0===t&&(t={}),p.validateParams(t,"Echo",["type","timestamp","code","name","line","capture"]),e.gameLog({...t,code:f.echo})}static dialog(t){return void 0===t&&(t={}),p.validateParams(t,"Dialog",["type","timestamp","code","name","line","capture"]),e.gameLog({...t,code:f.dialog})}static message(t){return void 0===t&&(t={}),p.validateParams(t,"Message",["type","timestamp","code","name","line","capture"]),e.gameLog({...t,code:f.message})}static gameLog(e){return b("GameLog",e)}static gameNameLog(t){return e.gameLog(t)}static statChange(e){return b("PlayerStats",e)}static changeZone(e){return b("ChangeZone",e)}static network6d(e){return b("ActorControl",e)}static nameToggle(e){return b("NameToggle",e)}static map(e){return b("Map",e)}static systemLogMessage(e){return b("SystemLogMessage",e)}static mapEffect(e){return b("MapEffect",e)}static fateDirector(e){return b("FateDirector",e)}static ceDirector(e){return b("CEDirector",e)}static inCombat(e){return b("InCombat",e)}static combatantMemory(e){return b("CombatantMemory",e)}static rsvData(e){return b("RSVData",e)}static startsUsingExtra(e){return b("StartsUsingExtra",e)}static abilityExtra(e){return b("AbilityExtra",e)}static contentFinderSettings(e){return b("ContentFinderSettings",e)}static npcYell(e){return b("NpcYell",e)}static battleTalk2(e){return b("BattleTalk2",e)}static countdown(e){return b("Countdown",e)}static countdownCancel(e){return b("CountdownCancel",e)}static actorMove(e){return b("ActorMove",e)}static actorSetPos(e){return b("ActorSetPos",e)}static spawnNpcExtra(e){return b("SpawnNpcExtra",e)}static actorControlExtra(e){return b("ActorControlExtra",e)}static actorControlSelfExtra(e){return b("ActorControlSelfExtra",e)}};t(A,"logVersion","latest"),t(A,"flagTranslationsNeeded",!1);let T=A;const O={wipe:T.network6d({command:["40000010","4000000F"]}),cactbotWipeEcho:T.echo({line:"cactbot wipe.*?"}),userWipeEcho:T.echo({line:"end"})};export{T as N,p as R,s as U,I as a,O as c,f as g,n as l};
