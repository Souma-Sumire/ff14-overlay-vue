import{c as e,_ as t}from"./shared-common-CJncmXli.js";import{d as a,K as s,G as r,o,B as n,h as i,g as u,a as c,p as d,v as f,f as p,b as l,t as m}from"./vendor-vue-MSvGQJWD.js";import{F as g,U as h}from"./shared-core-Djp3a06e.js";import{N as y,a as v,r as E}from"./cactbot-DtpbXwrG.js";import"./vendor-element-plus-CsMNiL2J.js";const C=t(a({__name:"enmity",setup(t){const{zoneType:a}=g(),C=["4F","5B","2E7","729"],D={gainsEffect:y.gainsEffect({effectId:C}),losesEffect:y.losesEffect({effectId:C})},I=s({party:[],povCharID:"0",status:new Set}),_=["Savage","Extreme","Chaotic","Ultimate","DeepDungeonExtras","Dungeons","Raids","Trials","VCDungeonFinder","DeepDungeons","Guildhests","TreasureHunt"],b=r(()=>{if(!_.includes(a.value))return!1;const e=I.party.filter(e=>h.isTankJob(h.jobEnumToJob(e.job))),t=e.some(e=>e.id===I.povCharID);return!(0===e.length||1===I.party.length||!t)&&!e.some(e=>I.status.has(e.id))}),j=e=>{I.party=e.party.slice(),I.status.forEach(e=>{I.party.some(t=>t.id===e)||I.status.delete(e)})},L=e=>{I.povCharID=e.charID.toString(16).toUpperCase()},P=e=>{const t=D.gainsEffect.exec(e.rawLine);if(t){const e=t.groups?.targetId;return void(e&&I.status.add(e))}const a=D.losesEffect.exec(e.rawLine);if(a){const e=a.groups?.targetId;return void(e&&I.status.delete(e))}};return o(()=>{v("LogLine",P),v("PartyChanged",j),v("ChangePrimaryPlayer",L)}),n(()=>{E("LogLine",P),E("PartyChanged",j),E("ChangePrimaryPlayer",L)}),(t,a)=>{const s=e;return c(),i(s,null,{default:u(()=>[d(l("strong",null,m(t.$t("enmity.no_enmity_active")),513),[[f,p(b)]])]),_:1})}}}),[["__scopeId","data-v-d65949be"]]);export{C as default};
