import{_ as e}from"./ActWrapper-CU39kyQO.js";import{d as s,g as i,h as a,b7 as t,j as l,w as n,o,c as r,z as c,u as p,a as m,F as u,l as d,p as f,q as k,t as y,b as _,e as j}from"./index-B-PvB7wX.js";/* empty css                  */import{u as g}from"./useDemo-CF_HCpop.js";import{u as h}from"./useDev-DC0pAqC_.js";import{u as v}from"./useZone-5MsgnEQJ.js";import{u as w,c as b}from"./keySkills-BL79oFCY.js";import{a as C,r as S}from"./overlay_plugin_api-DHbPkDtN.js";import{E as P}from"./index-Co7Z1Qoi.js";import{_ as x}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./el-card-BKZe2gGw.js";import"./index-CKtcngkk.js";import"./zoneInfo-DILfrNXn.js";import"./zone_info-BLx_6wEM.js";import"./content_type-lMHx3DqW.js";import"./demoParty-i_tFMDFe.js";import"./util-BOtaAWHW.js";import"./actionChinese-CezHnvf8.js";import"./chineseToIcon-xFdmTerz.js";import"./status-Cjdq15lm.js";import"./tts-BkZGqxam.js";import"./index-BhgpAT7F.js";import"./use-form-common-props-CD3HJO6U.js";const I={key:0,class:"key-skills-timer-container"},K={class:"skills-grid"},D=["onClick"],z={class:"buff-filter"},F=["src"],L={key:1,class:"test"},T=x(s({__name:"keySkillTimer",setup(s){const x=w(),{zoneType:T}=v(),E=i(()=>"Pvp"===T.value),N=h(),$=g(),A=e=>{x.party=e.party.filter(e=>e.inParty)},X=e=>{if(!E.value)if("21"===e.line[0]||"22"===e.line[0]&&"0"===e.line[45]){const s=Number.parseInt(e.line[4],16),i=b(s),a=e.line[2];x.triggerSkill(i,a,!0)}else"33"===e.line[0]&&["40000010","4000000F"].includes(e.line[3])&&x.wipe()},Z=e=>{x.language=e.charName.includes(" ")?"global":"chinese"};function q(e){x.speed=e,x.usedSkills.forEach(e=>{x.triggerSkill(e.id,e.owner.id,!1)})}function G(){window.open("/ff14-overlay-vue/#/keySkillTimerSettings","_blank")}return a(()=>{C("PartyChanged",A),C("LogLine",X),C("ChangePrimaryPlayer",Z)}),t(()=>{S("PartyChanged",A),S("LogLine",X),S("ChangePrimaryPlayer",Z),Object.values(x.skillStates).forEach(e=>{e.rafId&&cancelAnimationFrame(e.rafId)})}),(s,i)=>{const a=P,t=e;return o(),l(t,null,{readme:n(()=>i[3]||(i[3]=[m("span",{class:"demo-text"},[j(" 当前为演示数据，锁定后将显示真实数据。"),m("br"),j(" 请尽量拉宽窗口，点击技能可模拟触发。 ")],-1)])),default:n(()=>[p(E)?c("",!0):(o(),r("div",I,[m("div",K,[(o(!0),r(u,null,d(p(x).usedSkills,e=>(o(),r("div",{key:e.instanceKey,class:k(["buff-container",`line${e.line}`]),style:f({zIndex:p($)||p(N)?99:void 0}),onClick:()=>p($)||p(N)?function(e,s){(N||$)&&x.triggerSkill(e.id,e.owner.id,s)}(e,!0):null},[m("div",z,[m("span",{class:k(["duration",[p(x).skillStates[e.instanceKey]?.isRecast?"cooldown":"active"]])},y(p(x).skillStates[e.instanceKey]?.text||""),3),m("img",{src:e.src},null,8,F),p(x).skillStates[e.instanceKey]?.active?(o(),r("div",{key:p(x).skillStates[e.instanceKey]?.startTime||0,class:"cooldown-layer",style:f({clipPath:`inset(${p(x).skillStates[e.instanceKey]?.clipPercent??0}% 0 0 0)`})},null,4)):c("",!0)]),e.owner.hasDuplicate.skill||e.owner.hasDuplicate.job?(o(),r("span",{key:0,class:k(`job has-duplicate ${e.owner.hasDuplicate.job?"duplicate-show-name":"duplicate-show-job-name"} ${e.owner.jobIcon.toLowerCase()}`)},y(e.owner.hasDuplicate.job?e.owner.name:e.owner.jobName),3)):c("",!0)],14,D))),128))])])),p(N)||p($)?(o(),r("div",L,[_(a,{onClick:p(x).demoFullParty},{default:n(()=>i[4]||(i[4]=[j(" 模拟全部职业 ",-1)])),_:1,__:[4]},8,["onClick"]),_(a,{onClick:i[0]||(i[0]=()=>p(x).shuffle())},{default:n(()=>i[5]||(i[5]=[j(" 模拟8人小队 ",-1)])),_:1,__:[5]}),p(N)?(o(),l(a,{key:0,onClick:i[1]||(i[1]=()=>q(1))},{default:n(()=>i[6]||(i[6]=[j(" 测试触发(1X) ",-1)])),_:1,__:[6]})):c("",!0),p(N)?(o(),l(a,{key:1,onClick:i[2]||(i[2]=()=>q(5))},{default:n(()=>i[7]||(i[7]=[j(" 测试触发(5X) ",-1)])),_:1,__:[7]})):c("",!0),_(a,{onClick:p(x).wipe},{default:n(()=>i[8]||(i[8]=[j(" 模拟团灭 ",-1)])),_:1,__:[8]},8,["onClick"]),_(a,{type:"primary",onClick:G},{default:n(()=>i[9]||(i[9]=[j(" 设置 ",-1)])),_:1,__:[9]})])):c("",!0)]),_:1})}}}),[["__scopeId","data-v-d191f6d7"]]);export{T as default};
