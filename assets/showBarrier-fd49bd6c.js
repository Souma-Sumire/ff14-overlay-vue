import{_ as e}from"./ActWrapper-becdb444.js";import{u as r,_ as a}from"./DragJob-56eacf4d.js";import{t,r as s,c as i,e as o,f as n,D as l,E as u,az as p,u as c,x as m,A as d,F as v,v as f,L as b,aa as g,K as j,O as x,S as h,M as y}from"./vue-vendor-37eb8ba2.js";import{N as w}from"./netregexes-ed180b06.js";import{a as _}from"./overlay_plugin_api-974cdd44.js";import{_ as P}from"./_plugin-vue_export-helper-6a8c15be.js";import"./index-347bec65.js";import"./element-plus-3b00acc6.js";/* empty css                */import"./useDevMode-efb02b03.js";import"./index-78df6055.js";/* empty css                    */import"./util-fa8c2ae1.js";import"./regexes-da03e94d.js";const E=P(t({__name:"showBarrier",setup(t){p(e=>({"207d1822":c(C),"0047a097":c(D)}));const P=r(),E={statusEffectExplicit:w.statusEffectExplicit()};let I=0;const L=s([]),A=s(""),N=s(window.location.href),S=i(()=>new URLSearchParams(N.value.split("?")[1])),$=i(()=>"1"===S.value.get("showSettings")),C=i(()=>40*Number(S.value.get("lineHeight")||1)+"px"),D=i(()=>`${Number(S.value.get("fontSize")||26)}px`),M=i(()=>S.value.get("type")||"1");function z(){L.value.sort((e,r)=>e.id===A.value?-1:r.id===A.value?1:e.job===r.job?r.id.localeCompare(e.id):P.arr.indexOf(e.job)-P.arr.indexOf(r.job))}function H(e){return"1"===M.value?`${e.barrierPercent}`:"2"===M.value?`${e.barrierAmount}`:`${e.barrierPercent}%(${e.barrierAmount})`}return o(()=>{_("LogLine",e=>{!function(e){const r=E.statusEffectExplicit.exec(e);if(r?.groups?.targetId.startsWith("1")){const e=L.value.find(e=>e.id===r.groups?.targetId);e&&(e.barrierPercent=Number(r.groups?.currentShield),e.barrierAmount=Math.round(Number(r.groups?.maxHp)*e.barrierPercent/100))}}(e.rawLine)}),_("PartyChanged",e=>{L.value=e.party.filter(e=>e.inParty).map(e=>({...e,barrierPercent:0,barrierAmount:0}))}),_("ChangePrimaryPlayer",e=>{A.value=Number(e.charID).toString(16).toUpperCase()}),n([L,A,P.arr],()=>{clearInterval(I),A.value?z():I=window.setInterval(()=>{A.value&&(z(),clearInterval(I))},100)},{immediate:!0}),window.addEventListener("hashchange",e=>N.value=e.newURL)}),(r,t)=>{const s=a,i=e;return m(),l(i,null,{default:u(()=>[d("div",null,[d("ul",null,[(m(!0),f(b,null,g(c(L),e=>(m(),f("li",{key:e.id},[v(d("span",{"m-r-2":""},j(e.name),513),[[x,c($)]]),d("span",{style:h(0===e.barrierPercent?{opacity:.25,color:"white"}:{opacity:1,color:"#f5da3c"})},j(H(e)),5)]))),128))]),v(y(s,{style:{"z-index":"10000"},party:c(L),"p-1":"","m-b-1":""},null,8,["party"]),[[x,c($)]])])]),_:1})}}}),[["__scopeId","data-v-456bd84d"]]);export{E as default};
