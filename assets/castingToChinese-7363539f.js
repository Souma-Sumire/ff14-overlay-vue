import{_ as e}from"./ActWrapper-c3c7f85e.js";import"./index-aa6812f5.js";/* empty css                *//* empty css                    *//* empty css                      *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                  *//* empty css                        */import{t as o,av as l,V as t,r as a,c as s,D as n,x as i,E as m,A as r,F as u,M as d,J as f,u as c,v as p,L as h,a9 as g,O as V,S as w,K as C}from"./vue-vendor-3ae2ccec.js";import{g as v}from"./actionChinese-e2356100.js";import{a as x}from"./overlay_plugin_api-974cdd44.js";import{u as A}from"./index-c6b82793.js";import{k as D,d as I,f as b,e as z,m as S,n as y,i as j,h as U,q as X,a0 as Y}from"./element-plus-1c4f27f5.js";import{_ as T}from"./_plugin-vue_export-helper-6a8c15be.js";/* empty css                */import"./useDevMode-8c677e90.js";const _={};const F={class:"container"},P={style:{width:"10rem"}},k={class:"noCSS"},N={class:"noCSS"},$={class:"actionID"},K=T(o({__name:"castingToChinese",setup(o){l(e=>({"4c73237c":c(B),f6d72dd4:c(W),f6d72dd2:c(G),"1be83808":c(J),"05e8dd30":c(O),"0b4e4ab0":c(Q),"0b4e4ab1":c(Z),"6a0018c0":c(R),d396cc10:c(ee),d396cc0e:c(oe),b24d6b4c:c(H),"50a6b51c":c(le),"50a6b51d":c(te)}));const T=new URLSearchParams(window.location.href.split("?")[1]);function K(e){const o=Number.parseInt(e[4],16),l=e[2],t=e[5],a=_[o];if(a)return a;const s=v(o);return s||(l.startsWith("4")&&t.includes("unknown"),t)}class L{name;startTime;castTime;overTime;actionId;constructor(e){this.name=K(e),this.startTime=Date.now(),this.castTime=1e3*Number(e[8]),this.overTime=this.startTime+this.castTime,this.actionId=Number.parseInt(e[4],16)}}const E=t({targetCast:void 0}),M=[{value:"Target",label:"当前目标"},{value:"Focus",label:"焦点目标"}],q=a({width:265,showCountdown:!1,showProgress:!1,showActionChinese:!0,showActionID:!1,offsetProgressX:0,offsetProgressY:-22,offsetCountdownX:240,offsetCountdownY:-5,offsetActionChineseX:275,offsetActionChineseY:-45,offsetActionIDX:10,offsetActionIDY:-5,ping:80,keep:100,fontSizeCountDown:17,fontSizeActionName:20,fontFamily:"SmartisanHei",targetKey:"Target"});A("castingToChineseFix",q,localStorage,{mergeDefaults:!0});const H=s(()=>`${q.value.width}px`),B=s(()=>q.value.showCountdown?1:0),J=s(()=>q.value.showProgress?1:0),O=s(()=>q.value.showActionChinese?1:0),R=s(()=>q.value.showActionID?1:0),W=s(()=>`${q.value.offsetCountdownX}px`),G=s(()=>-1*q.value.offsetCountdownY+"px"),Q=s(()=>`${q.value.offsetActionChineseX}px`),Z=s(()=>-1*q.value.offsetActionChineseY+"px"),ee=s(()=>`${q.value.offsetActionIDX}px`),oe=s(()=>-1*q.value.offsetActionIDY+"px"),le=s(()=>`${q.value.offsetProgressX}px`),te=s(()=>-1*q.value.offsetProgressY+"px"),ae=new Map,se=a(0),ne=q.value.ping,ie=a(/^(?:1|true|on)$/i.test(T.get("showSettings")||"")||"flex"===document.getElementById("unlocked")?.style?.display);function me(){localStorage.removeItem("castingToChinese"),location.reload()}return x("EnmityTargetData",e=>{E.targetCast=ae.get(e[q.value.targetKey]?.ID)}),x("LogLine",e=>{"20"===e.line[0]?ae.set(Number.parseInt(e.line[2],16),new L(e.line)):"23"===e.line[0]&&ae.delete(Number.parseInt(e.line[2],16))}),x("ChangeZone",()=>ae.clear()),requestAnimationFrame(function e(){se.value=Date.now(),requestAnimationFrame(e)}),document.addEventListener("onOverlayStateUpdate",e=>{ie.value=!1===e?.detail?.isLocked}),(o,l)=>{const t=I,a=b,s=z,v=y,x=S,A=U,T=j,_=D,K=Y,L=X,H=e;return i(),n(H,null,{default:m(()=>[r("div",F,[u(d(_,{class:"settings"},{default:m(()=>[r("form",null,[l[20]||(l[20]=f(" 宽度: ")),d(t,{modelValue:c(q).width,"onUpdate:modelValue":l[0]||(l[0]=e=>c(q).width=e),min:20,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",null,[l[21]||(l[21]=f("显示倒计时: ")),d(a,{modelValue:c(q).showCountdown,"onUpdate:modelValue":l[1]||(l[1]=e=>c(q).showCountdown=e)},null,8,["modelValue"])]),r("form",null,[l[22]||(l[22]=f("显示进度条: ")),d(a,{modelValue:c(q).showProgress,"onUpdate:modelValue":l[2]||(l[2]=e=>c(q).showProgress=e)},null,8,["modelValue"])]),r("form",null,[l[23]||(l[23]=f("显示中文: ")),d(a,{modelValue:c(q).showActionChinese,"onUpdate:modelValue":l[3]||(l[3]=e=>c(q).showActionChinese=e)},null,8,["modelValue"])]),r("form",null,[l[24]||(l[24]=f("显示ID: ")),d(a,{modelValue:c(q).showActionID,"onUpdate:modelValue":l[4]||(l[4]=e=>c(q).showActionID=e)},null,8,["modelValue"])]),r("form",null,[l[25]||(l[25]=f(" 延迟(ms): ")),d(t,{modelValue:c(q).ping,"onUpdate:modelValue":l[5]||(l[5]=e=>c(q).ping=e),min:0,max:1e4,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",null,[l[26]||(l[26]=f(" 保留(ms): ")),d(t,{modelValue:c(q).keep,"onUpdate:modelValue":l[6]||(l[6]=e=>c(q).keep=e),min:0,max:1e5,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",null,[l[27]||(l[27]=f(" 进度条偏移X: ")),d(t,{modelValue:c(q).offsetProgressX,"onUpdate:modelValue":l[7]||(l[7]=e=>c(q).offsetProgressX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),r("form",null,[l[28]||(l[28]=f(" 进度条偏移Y: ")),d(t,{modelValue:c(q).offsetProgressY,"onUpdate:modelValue":l[8]||(l[8]=e=>c(q).offsetProgressY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",null,[l[29]||(l[29]=f(" 倒计时偏移X: ")),d(t,{modelValue:c(q).offsetCountdownX,"onUpdate:modelValue":l[9]||(l[9]=e=>c(q).offsetCountdownX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),r("form",null,[l[30]||(l[30]=f(" 倒计时偏移Y: ")),d(t,{modelValue:c(q).offsetCountdownY,"onUpdate:modelValue":l[10]||(l[10]=e=>c(q).offsetCountdownY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",null,[l[31]||(l[31]=f(" 中文偏移X: ")),d(t,{modelValue:c(q).offsetActionChineseX,"onUpdate:modelValue":l[11]||(l[11]=e=>c(q).offsetActionChineseX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),r("form",null,[l[32]||(l[32]=f(" 中文偏移Y: ")),d(t,{modelValue:c(q).offsetActionChineseY,"onUpdate:modelValue":l[12]||(l[12]=e=>c(q).offsetActionChineseY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",null,[l[33]||(l[33]=f(" ID偏移X: ")),d(t,{modelValue:c(q).offsetActionIDX,"onUpdate:modelValue":l[13]||(l[13]=e=>c(q).offsetActionIDX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),r("form",null,[l[34]||(l[34]=f(" ID偏移Y: ")),d(t,{modelValue:c(q).offsetActionIDY,"onUpdate:modelValue":l[14]||(l[14]=e=>c(q).offsetActionIDY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",null,[l[35]||(l[35]=f(" 倒计时字号(px): ")),d(t,{modelValue:c(q).fontSizeCountDown,"onUpdate:modelValue":l[15]||(l[15]=e=>c(q).fontSizeCountDown=e),min:1,max:100,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",null,[l[36]||(l[36]=f(" 中文字号(px): ")),d(t,{modelValue:c(q).fontSizeActionName,"onUpdate:modelValue":l[16]||(l[16]=e=>c(q).fontSizeActionName=e),min:1,max:100,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",P,[l[37]||(l[37]=f(" 字体: ")),d(s,{modelValue:c(q).fontFamily,"onUpdate:modelValue":l[17]||(l[17]=e=>c(q).fontFamily=e),size:"small",clearable:"",onClear:l[18]||(l[18]=e=>c(q).fontFamily="SmartisanHei")},null,8,["modelValue"])]),r("form",k,[d(x,{modelValue:c(q).targetKey,"onUpdate:modelValue":l[19]||(l[19]=e=>c(q).targetKey=e),placeholder:"Select",size:"small",teleported:!1},{default:m(()=>[(i(),p(h,null,g(M,e=>d(v,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),r("form",N,[d(T,{teleported:!1,title:"确定要重置？",onConfirm:me},{reference:m(()=>[d(A,null,{default:m(()=>l[38]||(l[38]=[f("重置全部用户设置")])),_:1,__:[38]})]),_:1})])]),_:1},512),[[V,c(ie)]]),u(d(L,{style:w({fontFamily:c(q).fontFamily})},{default:m(()=>[r("div",{style:w({fontSize:`${c(q).fontSizeCountDown}px`}),class:"countdown"},C(Math.max(((c(E).targetCast?.overTime??1)-c(se)-c(ne))/1e3,0).toFixed(2)),5),d(K,{percentage:Math.min((c(se)-(c(E).targetCast?.startTime??1)+c(ne))/(c(E).targetCast?.castTime??1)*100,100),"stroke-width":8,indeterminate:!1,"show-text":!1,color:"#fbfff9",class:"progress"},null,8,["percentage"]),r("div",$,C(c(E).targetCast?.actionId)+"("+C(c(E).targetCast?.actionId.toString(16).toUpperCase())+") ",1),r("div",{style:w({fontSize:`${c(q).fontSizeActionName}px`}),class:"actionChinese"},C(c(E).targetCast?.name),5)]),_:1},8,["style"]),[[V,c(E).targetCast&&c(se)-c(E).targetCast.overTime+c(ne)<c(q).keep]])])]),_:1})}}}),[["__scopeId","data-v-9f9edf7b"]]);export{K as default};
