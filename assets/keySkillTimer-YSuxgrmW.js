import{_ as e}from"./ActWrapper-Dt3dZwpw.js";import{d as s,g as i,h as a,bc as t,j as l,w as n,o,c as r,z as c,u as p,a as m,F as u,l as d,p as f,q as k,t as y,b as j,e as g}from"./index-C3wQpL7_.js";/* empty css                  */import{u as h}from"./useDemo-BKtWYUNO.js";import{u as _}from"./useDev-NebgDY1P.js";import{u as v}from"./useZone-fQjYfrbI.js";import{u as w,c as b}from"./keySkills-DWVc0aXd.js";import{a as C,r as S}from"./overlay_plugin_api-DHbPkDtN.js";import{E as P}from"./index-BtYti7v6.js";import{_ as x}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./el-card-D-38OXOl.js";import"./index-p2QZR3eL.js";import"./zoneInfo-7Z04Y0Eq.js";import"./zone_info-BK1oa_54.js";import"./content_type-uhloenTS.js";import"./demoParty-D3GPD5AB.js";import"./util-BOtaAWHW.js";import"./actionChinese-DgBhjTbn.js";import"./chineseToIcon-xFdmTerz.js";import"./status-VujwLG_3.js";import"./tts-BkZGqxam.js";import"./index-CfezZKDL.js";import"./use-form-common-props-Ut5wmnXx.js";const I={key:0,class:"key-skills-timer-container"},D={class:"skills-grid"},z=["onClick"],K={class:"buff-filter"},L=["src"],T={key:1,class:"test"},F=x(s({__name:"keySkillTimer",setup(s){const x=w(),{zoneType:F}=v(),$=i(()=>"Pvp"===F.value),N=_(),E=h(),A=e=>{x.party=e.party.filter(e=>e.inParty)},R=e=>{if(!$.value)if("21"===e.line[0]||"22"===e.line[0]&&"0"===e.line[45]){const s=Number.parseInt(e.line[4],16),i=b(s),a=e.line[2];x.triggerSkill(i,a,!0)}else"33"===e.line[0]&&["40000010","4000000F"].includes(e.line[3])&&x.wipe()},X=e=>{x.language=e.charName.includes(" ")?"global":"chinese"};function q(e){x.speed=e,x.usedSkills.forEach(e=>{x.triggerSkill(e.id,e.owner.id,!1)})}function B(){window.open("/ff14-overlay-vue/#/keySkillTimerSettings","_blank")}return a(()=>{C("PartyChanged",A),C("LogLine",R),C("ChangePrimaryPlayer",X)}),t(()=>{S("PartyChanged",A),S("LogLine",R),S("ChangePrimaryPlayer",X),Object.values(x.skillStates).forEach(e=>{e.rafId&&cancelAnimationFrame(e.rafId)})}),(s,i)=>{const a=P,t=e;return o(),l(t,null,{readme:n(()=>[...i[3]||(i[3]=[m("span",{class:"demo-text"},[g(" 当前为演示数据，锁定后将显示真实数据。"),m("br"),g(" 请尽量拉宽窗口，点击技能可模拟触发。 ")],-1)])]),default:n(()=>[p($)?c("",!0):(o(),r("div",I,[m("div",D,[(o(!0),r(u,null,d(p(x).usedSkills,e=>(o(),r("div",{key:e.instanceKey,class:k(["buff-container",`line${e.line}`]),style:f({zIndex:p(E)||p(N)?99:void 0}),onClick:()=>p(E)||p(N)?function(e,s){(N||E)&&x.triggerSkill(e.id,e.owner.id,s)}(e,!0):null},[m("div",K,[m("span",{class:k(["duration",[p(x).skillStates[e.instanceKey]?.isRecast?"cooldown":"active"]])},y(p(x).skillStates[e.instanceKey]?.text||""),3),m("img",{src:e.src},null,8,L),p(x).skillStates[e.instanceKey]?.active?(o(),r("div",{key:p(x).skillStates[e.instanceKey]?.startTime||0,class:"cooldown-layer",style:f({clipPath:`inset(${p(x).skillStates[e.instanceKey]?.clipPercent??0}% 0 0 0)`})},null,4)):c("",!0)]),e.owner.hasDuplicate.skill||e.owner.hasDuplicate.job?(o(),r("span",{key:0,class:k(`job has-duplicate ${e.owner.hasDuplicate.job?"duplicate-show-name":"duplicate-show-job-name"} ${e.owner.jobIcon.toLowerCase()}`)},y(e.owner.hasDuplicate.job?e.owner.name:e.owner.jobName),3)):c("",!0)],14,z))),128))])])),p(N)||p(E)?(o(),r("div",T,[j(a,{onClick:p(x).demoFullParty},{default:n(()=>[...i[4]||(i[4]=[g(" 模拟全部职业 ",-1)])]),_:1},8,["onClick"]),j(a,{onClick:i[0]||(i[0]=()=>p(x).shuffle())},{default:n(()=>[...i[5]||(i[5]=[g(" 模拟8人小队 ",-1)])]),_:1}),p(N)?(o(),l(a,{key:0,onClick:i[1]||(i[1]=()=>q(1))},{default:n(()=>[...i[6]||(i[6]=[g(" 测试触发(1X) ",-1)])]),_:1})):c("",!0),p(N)?(o(),l(a,{key:1,onClick:i[2]||(i[2]=()=>q(5))},{default:n(()=>[...i[7]||(i[7]=[g(" 测试触发(5X) ",-1)])]),_:1})):c("",!0),j(a,{onClick:p(x).wipe},{default:n(()=>[...i[8]||(i[8]=[g(" 模拟团灭 ",-1)])]),_:1},8,["onClick"]),j(a,{type:"primary",onClick:B},{default:n(()=>[...i[9]||(i[9]=[g(" 设置 ",-1)])]),_:1})])):c("",!0)]),_:1})}}}),[["__scopeId","data-v-d191f6d7"]]);export{F as default};
