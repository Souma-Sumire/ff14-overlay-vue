import"./index-5bc95ff7.js";/* empty css                  */import{_ as e}from"./ThemeToggle-fb4e56f7.js";/* empty css                        *//* empty css                  */import{l}from"./lz-string-343805bb.js";/* empty css                        *//* empty css                    */import"./el-tooltip-1f970b29.js";/* empty css                  *//* empty css                     *//* empty css                 *//* empty css                        *//* empty css               *//* empty css                  *//* empty css                      *//* empty css                   */import{i as a,u as t,s as o,a as s}from"./keySkills-3ec1c112.js";import{U as i}from"./util-3591e9ca.js";import{B as n,i as r,h as d,e as m,n as u,q as p,d as c,A as f,l as b,a0 as _,r as k,a1 as h,j as y,b as j}from"./element-plus-cb4c922a.js";import{t as g,ad as v,D as V,x as w,E as S,M as U,A as D,J as x,u as z,v as T,L as C,aa as B,r as I}from"./vue-vendor-6f37fd53.js";import{_ as J}from"./_plugin-vue_export-helper-6a8c15be.js";import{c as L}from"./clipboard-e5e2548c.js";import"./index-c9f4301b.js";import"./useDemo-dea69d31.js";import"./useDev-cab88d81.js";import"./actionChinese-e2356100.js";import"./chineseToIcon-e0fcd48d.js";import"./status-9bc9036c.js";import"./tts-5e313398.js";import"./overlay_plugin_api-974cdd44.js";const N={style:{display:"flex","justify-content":"center",gap:"0px"},class:"actions"},E=["src"],O=J(g({__name:"KeySkillTable",props:{data:{}},emits:["delete","move"],setup(e,{emit:l}){const t=e,o=l,s=Object.freeze(i.getBattleJobs()),b=v(s.map(e=>({value:i.jobToJobEnum(e),label:i.jobToFullName(e)?.cn??e})));return(e,l)=>{const s=r,i=d,_=n,k=m,h=p,y=u,j=c,g=f;return w(),V(g,{data:t.data,border:"",size:"small","row-key":e=>e.key,height:620},{default:S(()=>[U(_,{label:"操作",width:"80",align:"center"},{default:S(({row:e,$index:a})=>[D("div",N,[U(s,{link:"",size:"small",type:"primary",disabled:0===a,class:"arrow",onClick:e=>o("move",a,a-1)},{default:S(()=>l[0]||(l[0]=[x(" ↑ ",-1)])),_:2,__:[0]},1032,["disabled","onClick"]),U(s,{link:"",size:"small",type:"primary",disabled:a===t.data.length-1,class:"arrow",onClick:e=>o("move",a,a+1)},{default:S(()=>l[1]||(l[1]=[x(" ↓ ",-1)])),_:2,__:[1]},1032,["disabled","onClick"]),U(i,{title:"确定删除吗？此操作无法撤销",placement:"top-start",onConfirm:l=>o("delete",e.key)},{reference:S(()=>[U(s,{link:"",type:"danger",size:"small"},{default:S(()=>l[2]||(l[2]=[x(" 删除 ",-1)])),_:1,__:[2]})]),_:2},1032,["onConfirm"])])]),_:1}),U(_,{label:"预览",width:"50",align:"center"},{default:S(({row:e})=>[D("img",{src:z(a)(e.id),class:"icon"},null,8,E)]),_:1}),U(_,{label:"ID(十进制)",width:"200"},{default:S(({row:e})=>[U(k,{modelValue:e.id,"onUpdate:modelValue":l=>e.id=l,size:"small"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),U(_,{label:"TTS",width:"100"},{default:S(({row:e})=>[U(k,{modelValue:e.tts,"onUpdate:modelValue":l=>e.tts=l,size:"small"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),U(_,{label:"持续时间(秒)",width:"180"},{default:S(({row:e})=>[U(k,{modelValue:e.duration,"onUpdate:modelValue":l=>e.duration=l,size:"small"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),U(_,{label:"冷却时间 (秒)",width:"140"},{default:S(({row:e})=>[U(k,{modelValue:e.recast1000ms,"onUpdate:modelValue":l=>e.recast1000ms=l,size:"small"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),U(_,{label:"适用职业","min-width":"100"},{default:S(({row:e})=>[U(y,{modelValue:e.job,"onUpdate:modelValue":l=>e.job=l,size:"small",multiple:""},{default:S(()=>[(w(!0),T(C,null,B(z(b),e=>(w(),V(h,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),U(_,{label:"最小习得等级",width:"90",align:"center"},{default:S(({row:e})=>[U(j,{modelValue:e.minLevel,"onUpdate:modelValue":l=>e.minLevel=l,min:1,max:100,size:"small","controls-position":"right",style:{width:"70px"}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),U(_,{label:"显示到第n行",width:"100",align:"center"},{default:S(({row:e})=>[U(j,{modelValue:e.line,"onUpdate:modelValue":l=>e.line=l,min:1,size:"small","controls-position":"right",style:{width:"60px"}},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data","row-key"])}}}),[["__scopeId","data-v-6e29af05"]]),$={class:"page-container"},F=J(g({__name:"keySkillTimerSettings",setup(a){const i=t(),n=I("chinese"),d={chinese:"国服技能数据",global:"国际服技能数据"};function m(){y.confirm(`是否重置「${d[n.value]}」为默认技能数据？这将覆盖当前编辑的内容。`,"确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{"chinese"===n.value?i.keySkillsData.chinese=[...o]:i.keySkillsData.global=[...s],j.success(`已重置${d[n.value]}`)}).catch(()=>{})}function u(e,l){const a=i.keySkillsData[e],t=a.findIndex(e=>e.key===l);-1!==t&&a.splice(t,1)}function p(e,l,a){const t=i.keySkillsData[e];if(a<0||a>=t.length||l===a)return;const o=t[l];o&&(t.splice(l,1),t.splice(a,0,o))}function c(){const e=JSON.stringify(i.keySkillsData),a=l.compressToBase64(e);L(a).then(()=>j.success("已复制到剪贴板")).catch(()=>j.error("复制失败"))}function f(){y.prompt("请输入导入的技能数据，导入的数据将覆盖当前内容。","导入",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"textarea",inputValidator:e=>{try{const a=l.decompressFromBase64(e),t=JSON.parse(a);return"object"==typeof t&&null!==t||"数据格式错误"}catch(a){return`数据格式错误: ${a instanceof Error?a.message:String(a)}`}}}).then(({value:e})=>{if(e){const a=l.decompressFromBase64(e),t=JSON.parse(a);"object"==typeof t&&null!==t?(i.keySkillsData.chinese=t.chinese,i.keySkillsData.global=t.global,j.success("已导入数据")):j.error("导入数据格式错误")}}).catch(()=>{})}return(l,a)=>{const t=r,o=k,s=e,y=b,j=h,g=_;return w(),T("div",$,[U(y,{class:"header"},{default:S(()=>[U(t,{size:"small",type:"success",onClick:a[0]||(a[0]=e=>{return l=n.value,void i.keySkillsData[l].unshift({key:crypto.randomUUID(),id:0,tts:"",duration:0,recast1000ms:0,job:[],line:1,minLevel:1});var l})},{default:S(()=>a[8]||(a[8]=[x(" 新增技能 ",-1)])),_:1,__:[8]}),U(o,null,{default:S(()=>[U(t,{size:"small",onClick:c},{default:S(()=>a[9]||(a[9]=[x(" 导出 ",-1)])),_:1,__:[9]}),U(t,{size:"small",onClick:f},{default:S(()=>a[10]||(a[10]=[x(" 导入 ",-1)])),_:1,__:[10]})]),_:1}),U(t,{size:"small",type:"danger",onClick:m},{default:S(()=>a[11]||(a[11]=[x(" 恢复默认 ",-1)])),_:1,__:[11]}),U(s,{"storage-key":"key-skill-timer-2"})]),_:1}),U(g,{modelValue:n.value,"onUpdate:modelValue":a[7]||(a[7]=e=>n.value=e),"tab-position":"top",type:"border-card",class:"tabs"},{default:S(()=>[U(j,{label:d.chinese,name:"chinese"},{default:S(()=>[U(O,{data:z(i).keySkillsData.chinese,"onUpdate:data":a[1]||(a[1]=e=>z(i).keySkillsData.chinese=e),onDelete:a[2]||(a[2]=e=>u("chinese",e)),onMove:a[3]||(a[3]=(e,l)=>p("chinese",e,l))},null,8,["data"])]),_:1},8,["label"]),U(j,{label:d.global,name:"global"},{default:S(()=>[U(O,{data:z(i).keySkillsData.global,"onUpdate:data":a[4]||(a[4]=e=>z(i).keySkillsData.global=e),onDelete:a[5]||(a[5]=e=>u("global",e)),onMove:a[6]||(a[6]=(e,l)=>p("global",e,l))},null,8,["data"])]),_:1},8,["label"])]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-dbdb86ca"]]);export{F as default};
