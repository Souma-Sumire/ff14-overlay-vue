import{b as l,c as e,d as a,e as o,f as t}from"./element-plus-901ad096.js";import{k as u,r as s,W as n,aP as r,c as m,J as d,V as i,l as p,q as f,x as c,z as V,H as b,u as v,D as g,G as z,y,F as w,ae as h,C,aQ as U,o as x,U as A,A as _,E as $}from"./vue-49c48d91.js";import{u as D}from"./useDemo-86956ef5.js";import{a as S,r as j}from"./cactbot-49e370f3.js";import{_ as F}from"./_plugin-vue_export-helper-6a8c15be.js";import"./vendor-979eac9e.js";const I={class:"dnc-overlay"},P={class:"settings"},B=F(u({__name:"dnc",setup(u){U(l=>({"0633bb12":v(k),"1a1f098b":v(H),"68568aff":v(L),"853eddf8":v(X),"2ac2be36":v(G),"16246e39":v(Y),"6d61d5ec":v(q)}));const F=s(0),B=n({playerId:"",lastCombo:0,status:new Map([["A85",0],["A86",0],["BC9",0],["BCA",0]])}),E=r("jobs-dnc",{combo:{left:10,top:-30},tr3:{left:46,top:-22},tr4:{left:82,top:-22},fl:{left:0,top:-15},color:"rgb(255,255,255)",shadow:"rgb(0,0,0)",size:14,warncolor:"rgb(255,255,255)",warnshadow:"rgb(255,0,0)",zeroStr:"",fontFamily:"微软雅黑",fontWeight:!1,warn:5,userCss:""},localStorage,{mergeDefaults:!0}),M=D(),W=n([{id:"combo",cd:m(()=>30-Math.floor((F.value-B.lastCombo)/1e3)),style:{top:m(()=>`${E.value.combo.top}px`),left:m(()=>`${E.value.combo.left}px`)}},{id:"tr3",cd:m(()=>30-Math.floor((F.value-(B.status.get("A85")??0))/1e3)),style:{top:m(()=>`${E.value.tr3.top}px`),left:m(()=>`${E.value.tr3.left}px`)}},{id:"tr4",cd:m(()=>30-Math.floor((F.value-(B.status.get("A86")??0))/1e3)),style:{top:m(()=>`${E.value.tr4.top}px`),left:m(()=>`${E.value.tr4.left}px`)}},{id:"fl3",cd:m(()=>30-Math.floor((F.value-(B.status.get("BC9")??0))/1e3)),style:{top:m(()=>`${E.value.tr3.top+E.value.fl.top}px`),left:m(()=>`${E.value.tr3.left+E.value.fl.left}px`)}},{id:"fl4",cd:m(()=>30-Math.floor((F.value-(B.status.get("BCA")??0))/1e3)),style:{top:m(()=>`${E.value.tr4.top+E.value.fl.top}px`),left:m(()=>`${E.value.tr4.left+E.value.fl.left}px`)}}]),L=m(()=>E.value.color),X=m(()=>E.value.shadow),Y=m(()=>E.value.warncolor),q=m(()=>E.value.warnshadow),k=m(()=>E.value.fontFamily),G=m(()=>`${E.value.size}px`),H=m(()=>E.value.fontWeight?"bold":"none"),J=m(()=>E.value.userCss),N=l=>{l.line[5]!==B.playerId||"26"!==l.line[0]&&"30"!==l.line[0]||!B.status.has(l.line[2])?l.line[2]!==B.playerId||"21"!==l.line[0]&&"22"!==l.line[0]||("3E79"===l.line[4]&&"22"===l.line[0]||"3E75"===l.line[4]&&"21"===l.line[0]?B.lastCombo=Date.now():("3E76"===l.line[4]||"3E7A"===l.line[4]||"21"===l.line[0]&&"3E79"===l.line[4])&&(B.lastCombo=0)):B.status.set(l.line[2],"26"===l.line[0]?Date.now():0)};function Q(){B.status.set("A85",0),B.status.set("A86",0),B.status.set("BC9",0),B.status.set("BCA",0),B.lastCombo=0}const K=l=>{B.playerId=Number(l.charID).toString(16).toUpperCase()};function O(){localStorage.removeItem("jobs-dnc"),location.reload()}return d(()=>{S("onPlayerDied",Q),S("LogLine",N),S("ChangePrimaryPlayer",K)}),i(()=>{j("onPlayerDied",Q),j("LogLine",N),j("ChangePrimaryPlayer",K)}),requestAnimationFrame(function l(){F.value=Date.now(),requestAnimationFrame(l)}),(u,s)=>{const n=l,r=e,m=a,d=t,i=o;return x(),p(w,null,[f("div",I,[V(f("header",P,[f("form",null,[s[18]||(s[18]=g(" 连击X: ",-1)),z(n,{modelValue:v(E).combo.left,"onUpdate:modelValue":s[0]||(s[0]=l=>v(E).combo.left=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),f("form",null,[s[19]||(s[19]=g(" 连击Y: ",-1)),z(n,{modelValue:v(E).combo.top,"onUpdate:modelValue":s[1]||(s[1]=l=>v(E).combo.top=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),f("form",null,[s[20]||(s[20]=g(" 触发3X: ",-1)),z(n,{modelValue:v(E).tr3.left,"onUpdate:modelValue":s[2]||(s[2]=l=>v(E).tr3.left=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),f("form",null,[s[21]||(s[21]=g(" 触发3Y: ",-1)),z(n,{modelValue:v(E).tr3.top,"onUpdate:modelValue":s[3]||(s[3]=l=>v(E).tr3.top=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),f("form",null,[s[22]||(s[22]=g(" 触发4X: ",-1)),z(n,{modelValue:v(E).tr4.left,"onUpdate:modelValue":s[4]||(s[4]=l=>v(E).tr4.left=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),f("form",null,[s[23]||(s[23]=g(" 触发4Y: ",-1)),z(n,{modelValue:v(E).tr4.top,"onUpdate:modelValue":s[5]||(s[5]=l=>v(E).tr4.top=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),f("form",null,[s[24]||(s[24]=g(" 百花X: ",-1)),z(n,{modelValue:v(E).fl.left,"onUpdate:modelValue":s[6]||(s[6]=l=>v(E).fl.left=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),f("form",null,[s[25]||(s[25]=g(" 百花Y: ",-1)),z(n,{modelValue:v(E).fl.top,"onUpdate:modelValue":s[7]||(s[7]=l=>v(E).fl.top=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),f("form",null,[s[26]||(s[26]=g(" 剩余警告: ",-1)),z(n,{modelValue:v(E).warn,"onUpdate:modelValue":s[8]||(s[8]=l=>v(E).warn=l),class:"input input-number",min:-1,max:30,size:"small"},null,8,["modelValue"])]),f("form",null,[s[27]||(s[27]=g(" 常规颜色: ",-1)),z(r,{modelValue:v(E).color,"onUpdate:modelValue":s[9]||(s[9]=l=>v(E).color=l),class:"input input-string",size:"small"},null,8,["modelValue"])]),f("form",null,[s[28]||(s[28]=g(" 常规阴影: ",-1)),z(r,{modelValue:v(E).shadow,"onUpdate:modelValue":s[10]||(s[10]=l=>v(E).shadow=l),class:"input input-string",size:"small"},null,8,["modelValue"])]),f("form",null,[s[29]||(s[29]=g(" 警告颜色: ",-1)),z(r,{modelValue:v(E).warncolor,"onUpdate:modelValue":s[11]||(s[11]=l=>v(E).warncolor=l),class:"input input-string",size:"small"},null,8,["modelValue"])]),f("form",null,[s[30]||(s[30]=g(" 警告阴影: ",-1)),z(r,{modelValue:v(E).warnshadow,"onUpdate:modelValue":s[12]||(s[12]=l=>v(E).warnshadow=l),class:"input input-string",size:"small"},null,8,["modelValue"])]),f("form",null,[s[31]||(s[31]=g(" 零值文本: ",-1)),z(r,{modelValue:v(E).zeroStr,"onUpdate:modelValue":s[13]||(s[13]=l=>v(E).zeroStr=l),class:"input input-string",size:"small"},null,8,["modelValue"])]),f("form",null,[s[32]||(s[32]=g(" 字号: ",-1)),z(n,{modelValue:v(E).size,"onUpdate:modelValue":s[14]||(s[14]=l=>v(E).size=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),f("form",null,[s[33]||(s[33]=g(" 字体: ",-1)),z(r,{modelValue:v(E).fontFamily,"onUpdate:modelValue":s[15]||(s[15]=l=>v(E).fontFamily=l),class:"input input-string",size:"small"},null,8,["modelValue"])]),f("form",null,[s[34]||(s[34]=g(" 粗体：",-1)),z(m,{modelValue:v(E).fontWeight,"onUpdate:modelValue":s[16]||(s[16]=l=>v(E).fontWeight=l),size:"small"},null,8,["modelValue"])]),f("form",null,[s[35]||(s[35]=g(" 自定义CSS： ",-1)),s[36]||(s[36]=f("br",null,null,-1)),z(r,{modelValue:v(E).userCss,"onUpdate:modelValue":s[17]||(s[17]=l=>v(E).userCss=l),autosize:"",type:"textarea",placeholder:""},null,8,["modelValue"])]),s[38]||(s[38]=f("br",null,null,-1)),f("form",null,[z(i,{teleported:!1,title:"确定要重置？",onConfirm:O},{reference:y(()=>[z(d,null,{default:y(()=>s[37]||(s[37]=[g("重置全部用户设置",-1)])),_:1,__:[37]})]),_:1})])],512),[[b,v(M)]]),f("main",null,[(x(!0),p(w,null,h(v(W),l=>(x(),p("div",{key:l.id},[f("span",{class:_(l.cd<=v(E).warn&&!v(M)?"warning":""),style:A(l.style)},$(l.cd>=0?l.cd:v(M)?"30":v(E).zeroStr),7)]))),128))])]),(x(),c(C("style"),null,{default:y(()=>[g($(v(J)),1)]),_:1}))],64)}}}),[["__scopeId","data-v-c3aa2110"]]);export{B as default};
