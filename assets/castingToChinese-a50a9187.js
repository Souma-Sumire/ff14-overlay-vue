import{_ as e}from"./ActWrapper-5069e8c1.js";import{a8 as o,o as l,b as t,d as a,c as s,k as n,m as i,e as m,f as u,i as r}from"./element-plus-901ad096.js";import{k as f,W as d,r as c,aP as p,c as h,x as g,y as V,o as C,q as w,z as v,H as x,u as A,G as D,U as I,E as z,D as U,l as S,ae as X,F as Y,aQ as b}from"./vue-49c48d91.js";import{c as y,g as T}from"./res-action-f84fe53b.js";import{a as _}from"./cactbot-49e370f3.js";import{_ as P}from"./_plugin-vue_export-helper-6a8c15be.js";import"./useDev-861d544b.js";import"./useDemo-86956ef5.js";import"./vendor-979eac9e.js";const F={style:{width:"10rem"}},j={class:"noCSS"},k={class:"noCSS"},N={class:"container"},$={class:"actionID"},K=P(f({__name:"castingToChinese",setup(f){b(e=>({"419001ee":A(W),ebf40c46:A(Q),ebf40c44:A(Z),"55519e55":A(E),"4bad32a2":A(G),"2f27c012":A(B),"2f27c010":A(J),"2e45adf9":A(L),"0d0b575e":A(O),"0d0b575c":A(R),"6c441933":A(M),98272116:A(ee),98272114:A(oe)}));class P{name;startTime;castTime;overTime;actionId;constructor(e){this.name=function(e){const o=Number.parseInt(e[4],16),l=e[2],t=e[5],a=y(o);if(a)return a;return T(o)||(l.startsWith("4")&&t.includes("unknown"),t)}(e),this.startTime=Date.now(),this.castTime=1e3*Number(e[8]),this.overTime=this.startTime+this.castTime,this.actionId=Number.parseInt(e[4],16)}}const K=d({targetCast:void 0}),q=[{value:"Target",label:"当前目标"},{value:"Focus",label:"焦点目标"}],H=c({width:265,showCountdown:!1,showProgress:!1,showActionChinese:!0,showActionID:!1,offsetProgressX:0,offsetProgressY:-22,offsetCountdownX:240,offsetCountdownY:-5,offsetActionChineseX:275,offsetActionChineseY:-45,offsetActionIDX:10,offsetActionIDY:-5,ping:80,keep:100,fontSizeCountDown:17,fontSizeActionName:20,fontFamily:"SmartisanHei",targetKey:"Target"});p("castingToChineseFix",H,localStorage,{mergeDefaults:!0});const M=h(()=>`${H.value.width}px`),W=h(()=>H.value.showCountdown?1:0),E=h(()=>H.value.showProgress?1:0),G=h(()=>H.value.showActionChinese?1:0),L=h(()=>H.value.showActionID?1:0),Q=h(()=>`${H.value.offsetCountdownX}px`),Z=h(()=>-1*H.value.offsetCountdownY+"px"),B=h(()=>`${H.value.offsetActionChineseX}px`),J=h(()=>-1*H.value.offsetActionChineseY+"px"),O=h(()=>`${H.value.offsetActionIDX}px`),R=h(()=>-1*H.value.offsetActionIDY+"px"),ee=h(()=>`${H.value.offsetProgressX}px`),oe=h(()=>-1*H.value.offsetProgressY+"px"),le=new Map,te=c(0),ae=H.value.ping;function se(){localStorage.removeItem("castingToChinese"),location.reload()}return _("EnmityTargetData",e=>{K.targetCast=le.get(e[H.value.targetKey]?.ID)}),_("LogLine",e=>{"20"===e.line[0]?le.set(Number.parseInt(e.line[2],16),new P(e.line)):"23"===e.line[0]&&le.delete(Number.parseInt(e.line[2],16))}),_("ChangeZone",()=>le.clear()),requestAnimationFrame(function e(){te.value=Date.now(),requestAnimationFrame(e)}),(f,d)=>{const c=t,p=a,h=s,b=i,y=n,T=u,_=m,P=r,M=o,W=l,E=e;return C(),g(E,null,{readme:V(()=>[D(P,{class:"settings"},{default:V(()=>[w("form",null,[d[20]||(d[20]=U(" 宽度: ",-1)),D(c,{modelValue:A(H).width,"onUpdate:modelValue":d[0]||(d[0]=e=>A(H).width=e),min:20,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),w("form",null,[d[21]||(d[21]=U("显示倒计时: ",-1)),D(p,{modelValue:A(H).showCountdown,"onUpdate:modelValue":d[1]||(d[1]=e=>A(H).showCountdown=e)},null,8,["modelValue"])]),w("form",null,[d[22]||(d[22]=U("显示进度条: ",-1)),D(p,{modelValue:A(H).showProgress,"onUpdate:modelValue":d[2]||(d[2]=e=>A(H).showProgress=e)},null,8,["modelValue"])]),w("form",null,[d[23]||(d[23]=U("显示中文: ",-1)),D(p,{modelValue:A(H).showActionChinese,"onUpdate:modelValue":d[3]||(d[3]=e=>A(H).showActionChinese=e)},null,8,["modelValue"])]),w("form",null,[d[24]||(d[24]=U("显示ID: ",-1)),D(p,{modelValue:A(H).showActionID,"onUpdate:modelValue":d[4]||(d[4]=e=>A(H).showActionID=e)},null,8,["modelValue"])]),w("form",null,[d[25]||(d[25]=U(" 延迟(ms): ",-1)),D(c,{modelValue:A(H).ping,"onUpdate:modelValue":d[5]||(d[5]=e=>A(H).ping=e),min:0,max:1e4,size:"small","controls-position":"right"},null,8,["modelValue"])]),w("form",null,[d[26]||(d[26]=U(" 保留(ms): ",-1)),D(c,{modelValue:A(H).keep,"onUpdate:modelValue":d[6]||(d[6]=e=>A(H).keep=e),min:0,max:1e5,size:"small","controls-position":"right"},null,8,["modelValue"])]),w("form",null,[d[27]||(d[27]=U(" 进度条偏移X: ",-1)),D(c,{modelValue:A(H).offsetProgressX,"onUpdate:modelValue":d[7]||(d[7]=e=>A(H).offsetProgressX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),w("form",null,[d[28]||(d[28]=U(" 进度条偏移Y: ",-1)),D(c,{modelValue:A(H).offsetProgressY,"onUpdate:modelValue":d[8]||(d[8]=e=>A(H).offsetProgressY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),w("form",null,[d[29]||(d[29]=U(" 倒计时偏移X: ",-1)),D(c,{modelValue:A(H).offsetCountdownX,"onUpdate:modelValue":d[9]||(d[9]=e=>A(H).offsetCountdownX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),w("form",null,[d[30]||(d[30]=U(" 倒计时偏移Y: ",-1)),D(c,{modelValue:A(H).offsetCountdownY,"onUpdate:modelValue":d[10]||(d[10]=e=>A(H).offsetCountdownY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),w("form",null,[d[31]||(d[31]=U(" 中文偏移X: ",-1)),D(c,{modelValue:A(H).offsetActionChineseX,"onUpdate:modelValue":d[11]||(d[11]=e=>A(H).offsetActionChineseX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),w("form",null,[d[32]||(d[32]=U(" 中文偏移Y: ",-1)),D(c,{modelValue:A(H).offsetActionChineseY,"onUpdate:modelValue":d[12]||(d[12]=e=>A(H).offsetActionChineseY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),w("form",null,[d[33]||(d[33]=U(" ID偏移X: ",-1)),D(c,{modelValue:A(H).offsetActionIDX,"onUpdate:modelValue":d[13]||(d[13]=e=>A(H).offsetActionIDX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),w("form",null,[d[34]||(d[34]=U(" ID偏移Y: ",-1)),D(c,{modelValue:A(H).offsetActionIDY,"onUpdate:modelValue":d[14]||(d[14]=e=>A(H).offsetActionIDY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),w("form",null,[d[35]||(d[35]=U(" 倒计时字号(px): ",-1)),D(c,{modelValue:A(H).fontSizeCountDown,"onUpdate:modelValue":d[15]||(d[15]=e=>A(H).fontSizeCountDown=e),min:1,max:100,size:"small","controls-position":"right"},null,8,["modelValue"])]),w("form",null,[d[36]||(d[36]=U(" 中文字号(px): ",-1)),D(c,{modelValue:A(H).fontSizeActionName,"onUpdate:modelValue":d[16]||(d[16]=e=>A(H).fontSizeActionName=e),min:1,max:100,size:"small","controls-position":"right"},null,8,["modelValue"])]),w("form",F,[d[37]||(d[37]=U(" 字体: ",-1)),D(h,{modelValue:A(H).fontFamily,"onUpdate:modelValue":d[17]||(d[17]=e=>A(H).fontFamily=e),size:"small",clearable:"",onClear:d[18]||(d[18]=e=>A(H).fontFamily="SmartisanHei")},null,8,["modelValue"])]),w("form",j,[D(y,{modelValue:A(H).targetKey,"onUpdate:modelValue":d[19]||(d[19]=e=>A(H).targetKey=e),placeholder:"Select",size:"small",teleported:!1},{default:V(()=>[(C(),S(Y,null,X(q,e=>D(b,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),w("form",k,[D(_,{teleported:!1,title:"确定要重置？",onConfirm:se},{reference:V(()=>[D(T,null,{default:V(()=>d[38]||(d[38]=[U("重置全部用户设置",-1)])),_:1,__:[38]})]),_:1})])]),_:1})]),default:V(()=>[w("div",N,[v(D(W,{style:I({fontFamily:A(H).fontFamily})},{default:V(()=>[w("div",{style:I({fontSize:`${A(H).fontSizeCountDown}px`}),class:"countdown"},z(Math.max(((A(K).targetCast?.overTime??1)-A(te)-A(ae))/1e3,0).toFixed(2)),5),D(M,{percentage:Math.min((A(te)-(A(K).targetCast?.startTime??1)+A(ae))/(A(K).targetCast?.castTime??1)*100,100),"stroke-width":8,indeterminate:!1,"show-text":!1,color:"#fbfff9",class:"progress"},null,8,["percentage"]),w("div",$,z(A(K).targetCast?.actionId)+"("+z(A(K).targetCast?.actionId.toString(16).toUpperCase())+") ",1),w("div",{style:I({fontSize:`${A(H).fontSizeActionName}px`}),class:"actionChinese"},z(A(K).targetCast?.name),5)]),_:1},8,["style"]),[[x,A(K).targetCast&&A(te)-A(K).targetCast.overTime+A(ae)<A(H).keep]])])]),_:1})}}}),[["__scopeId","data-v-50233e43"]]);export{K as default};
