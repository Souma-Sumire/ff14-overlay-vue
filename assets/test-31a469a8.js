import{f as e,r as t,K as a,q as n,R as i}from"./element-plus-901ad096.js";import{_ as s}from"./ThemeToggle-fb2e4d42.js";import{u as o}from"./useWebSocket-e966ffb8.js";import{U as r,N as l,a as c,c as u}from"./cactbot-49e370f3.js";import{k as g,r as d,l as v,u as m,q as f,D as y,G as x,E as p,y as C,o as b,F as L,ae as E,A as h,x as D}from"./vue-49c48d91.js";import{_ as k}from"./_plugin-vue_export-helper-6a8c15be.js";import"./vendor-979eac9e.js";const P={id:"app"},w={key:0,class:"container"},S={class:"header"},_={style:{"text-align":"right"},flex:"~ gap-2"},A={class:"section"},T={class:"info-table"},I={class:"info-key"},M={class:"section"},U={class:"card-title"},N={class:"event-content"},O={class:"section"},V={class:"card-title"},j={class:"event-content"},G={class:"section"},Z={class:"card-title"},R={class:"event-content"},z={key:1},B=k(g({__name:"test",setup(g){const{wsConnected:k}=o({addWsParam:!0,allowClose:!1}),B=r.getDefaultBaseOptions(),W=d({ParserLanguage:"",ShortLocale:"",DisplayLanguage:"",TextAlertsEnabled:!1,SoundAlertsEnabled:!1,SpokenAlertsEnabled:!1,GroupSpokenAlertsEnabled:!1,SystemInfo:{cactbotVersion:"",overlayPluginVersion:"",ffxivPluginVersion:"",actVersion:"",gameRegion:""},Debug:!1,Language:"",SystemLocale:"",CactbotUserDirectory:"",DefaultAlertOutput:""}),q=d(""),F=()=>q.value=(new Date).toLocaleString();F(),setInterval(F,1e3);const H=d({ChangePrimaryPlayer:{title:"当前角色",instruction:"切换角色以触发事件"},ChangeZone:{title:"当前区域",instruction:"移动一次区域以触发事件"},CombatData:{title:"战斗信息",instruction:"进入战斗以触发事件"},EnmityTargetData:{title:"目标信息",instruction:"选中一个目标以触发事件"},PartyChanged:{title:"队伍列表",instruction:"切换职业/组成小队以触发事件"},onGameExistsEvent:{title:"游戏存在",instruction:"打开游戏以触发事件"},onGameActiveChangedEvent:{title:"游戏活动状态",instruction:"操作游戏以触发事件"},onInCombatChangedEvent:{title:"战斗状态",instruction:"进入战斗以触发事件"},onZoneChangedEvent:{title:"区域变化",instruction:"移动一次区域以触发事件"},onPlayerDied:{title:"玩家死亡",instruction:"死一次以触发事件"},onPlayerChangedEvent:{title:"玩家变化",instruction:"移动角色以触发事件"}});r.getUserConfigLocation("soumatest",B,()=>{W.value.ParserLanguage=B.ParserLanguage,W.value.DisplayLanguage=B.DisplayLanguage,W.value.SystemInfo=B.SystemInfo,W.value.CactbotUserDirectory=r.savedConfig.general.CactbotUserDirectory,W.value.DefaultAlertOutput=r.savedConfig.raidboss.DefaultAlertOutput});const K=d({});function $(e){if("EnmityTargetData"===e.type&&!e.Target)return;const{type:t,...a}={...e};K.value[e.type]=a}const J=d({changeZone:{title:"Line 01 (0x01): ChangeZone",instruction:"切换地图",regex:l.changeZone()},addedCombatant:{title:"Line 03 (0x03): AddCombatant",instruction:"切换地图",regex:l.addedCombatant()},removingCombatant:{title:"Line 04 (0x04): RemoveCombatant",instruction:"切换地图",regex:l.removingCombatant()},startsUsing:{title:"Line 20 (0x14): NetworkStartsCasting",instruction:"读条技能",regex:l.startsUsing()},ability:{title:"Line 21 (0x15): NetworkAbility",instruction:"使用技能",regex:l.ability()},networkDoT:{title:"Line 24 (0x18): NetworkDoT",instruction:"获得 DoT/Hot 效果",regex:l.networkDoT()},wasDefeated:{title:"Line 25 (0x19): NetworkDeath",instruction:"被击倒",regex:l.wasDefeated()},gainsEffect:{title:"Line 26 (0x1A): NetworkBuff",instruction:"获得buff",regex:l.gainsEffect()},headMarker:{title:"Line 27 (0x1B): NetworkTargetIcon",instruction:"获得头顶点名（分摊/分散/死刑/麻将）",regex:l.headMarker()},losesEffect:{title:"Line 30 (0x1E): NetworkBuffRemove",instruction:"失去buff",regex:l.losesEffect()},network6d:{title:"Line 33 (0x21): Network6D",instruction:"打本触发（本越新越好）",regex:l.network6d()},tether:{title:"Line 35 (0x23): NetworkTether",instruction:"获得连线效果",regex:l.tether()},map:{title:"Line 40 (0x28): Map",instruction:"切换地图",regex:l.map()},systemLogMessage:{title:"Line 41 (0x29): SystemLogMessage",instruction:"系统日志信息",regex:l.systemLogMessage()}}),Q=d({mapEffect:{title:"Line 257 (0x101): MapEffect",instruction:"打本触发（本越新越好）",regex:l.mapEffect()},inCombat:{title:"Line 260 (0x104): InCombat",instruction:"进入战斗",regex:l.inCombat()},combatantMemory:{title:"Line 261 (0x105): CombatantMemory",instruction:"打本触发（本越新越好）",regex:l.combatantMemory()},startsUsingExtra:{title:"Line 263 (0x107): StartsUsingExtra",instruction:"读条技能",regex:l.startsUsingExtra()},abilityExtra:{title:"Line 264 (0x108): AbilityExtra",instruction:"使用技能",regex:l.abilityExtra()},countdown:{title:"Line 268 (0x10C): Countdown",instruction:"开启倒计时",regex:l.countdown()},actorMove:{title:"Line 270 (0x10E): ActorMove",instruction:"打本触发（本越新越好）",regex:l.actorMove()},actorSetPos:{title:"Line 271 (0x10F): ActorSetPos",instruction:"打本触发（本越新越好）",regex:l.actorSetPos()},actorControlExtra:{title:"Line 273 (0x111): ActorControlExtra",instruction:"打本触发（本越新越好）",regex:l.actorControlExtra()}});return c("ChangePrimaryPlayer",$),c("ChangeZone",$),c("CombatData",$),c("EnmityTargetData",$),c("PartyChanged",$),c("onGameExistsEvent",$),c("onGameActiveChangedEvent",$),c("onInCombatChangedEvent",$),c("onZoneChangedEvent",$),c("onPlayerDied",$),c("onPlayerChangedEvent",$),c("LogLine",e=>{for(const t in J.value){J.value[t].regex.test(e.rawLine)&&(K.value[t]=!0)}for(const t in Q.value){Q.value[t].regex.test(e.rawLine)&&(K.value[t]=!0)}}),(o,r)=>{const l=e,c=s,g=n,d=a,B=t,F=i;return b(),v("div",P,[m(k)?(b(),v("div",w,[f("div",S,[r[3]||(r[3]=f("div",null,[f("h1",{style:{color:"#409eff",margin:"0"}}," 自助测试页 ")],-1)),f("div",_,[r[2]||(r[2]=f("i",{class:"el-icon-time"},null,-1)),y(" 系统时间: "+p(m(q)||"无数据")+" ",1),x(l,{type:"primary",size:"small",onClick:r[0]||(r[0]=e=>{return t=`测试TTS${(new Date).getTime().toString().slice(-4)}`,void u({call:"cactbotSay",text:t});var t})},{default:C(()=>r[1]||(r[1]=[y(" 测试TTS ",-1)])),_:1,__:[1]}),x(c,{"storage-key":"test-theme"})])]),f("div",A,[r[4]||(r[4]=f("div",{class:"section-title"},[f("i",{class:"el-icon-setting"}),y(" 用户配置信息 ")],-1)),x(B,{gutter:12},{default:C(()=>[x(d,{span:24},{default:C(()=>[x(g,{shadow:"hover"},{default:C(()=>[f("div",T,[(b(!0),v(L,null,E({"ACT版本":m(W).SystemInfo.actVersion,"解析插件版本":m(W).SystemInfo.ffxivPluginVersion,"OverlayPlugin版本":m(W).SystemInfo.overlayPluginVersion,"Cactbot版本":m(W).SystemInfo.cactbotVersion,"解析语言":m(W).ParserLanguage,"Cactbot 显示语言":m(W).DisplayLanguage,"游戏区域":m(W).SystemInfo.gameRegion,"Raidboss 默认输出":m(W).DefaultAlertOutput,"用户文件夹":m(W).CactbotUserDirectory},(e,t)=>(b(),v("div",{key:t,class:"info-row"},[f("div",I,p(t),1),f("div",{class:h(["info-val",{"no-data":!e}])},p(e||"无数据"),3)]))),128))])]),_:1})]),_:1})]),_:1})]),f("div",M,[r[5]||(r[5]=f("div",{class:"section-title"},[f("i",{class:"el-icon-document"}),y(" ACT 网络日志测试（常用部分） ")],-1)),r[6]||(r[6]=f("div",{class:"header-tip"}," 如果无法触发这部分事件，说明你需要更新解析插件。 ",-1)),x(B,{gutter:12},{default:C(()=>[(b(!0),v(L,null,E(m(J),(e,t)=>(b(),D(d,{key:t,xs:24,sm:12,md:8,lg:6},{default:C(()=>[x(g,{class:h(["event-card",m(K)[t]?"success":"danger"])},{default:C(()=>[f("div",U,[y(p(m(J)[t].title)+" ",1),x(F,{type:m(K)[t]?"success":"danger",size:"small"},{default:C(()=>[y(p(m(K)[t]?"成功":"未触发"),1)]),_:2},1032,["type"])]),f("div",N,p(m(K)[t]?"":"请尝试：")+p(e.instruction),1)]),_:2},1032,["class"])]),_:2},1024))),128))]),_:1})]),f("div",O,[r[7]||(r[7]=f("div",{class:"section-title"},[f("i",{class:"el-icon-s-data"}),y(" OverlayPlugin 事件测试（常用部分） ")],-1)),r[8]||(r[8]=f("div",{class:"header-tip"}," 如果无法触发这部分事件，说明你需要更新 OverlayPlugin 插件。 ",-1)),x(B,{gutter:12},{default:C(()=>[(b(!0),v(L,null,E(m(H),(e,t)=>(b(),D(d,{key:t,xs:24,sm:12,md:8,lg:6},{default:C(()=>[x(g,{class:h(["event-card",m(K)[t]?"success":"danger"])},{default:C(()=>[f("div",V,[y(p(e.title)+"（"+p(t)+"） ",1),x(F,{type:m(K)[t]?"success":"danger",size:"small"},{default:C(()=>[y(p(m(K)[t]?"成功":"未触发"),1)]),_:2},1032,["type"])]),f("div",j,p(m(K)[t]?"":"请尝试：")+p(e.instruction),1)]),_:2},1032,["class"])]),_:2},1024))),128))]),_:1})]),f("div",G,[r[9]||(r[9]=f("div",{class:"section-title"},[f("i",{class:"el-icon-cpu"}),y(" OverlayPlugin 日志测试（常用部分） ")],-1)),r[10]||(r[10]=f("div",{class:"header-tip"}," 如果无法触发这部分事件，说明你需要更新 OverlayPlugin 插件。 ",-1)),x(B,{gutter:12},{default:C(()=>[(b(!0),v(L,null,E(m(Q),(e,t)=>(b(),D(d,{key:t,xs:24,sm:12,md:8,lg:6},{default:C(()=>[x(g,{class:h(["event-card",m(K)[t]?"success":"danger"])},{default:C(()=>[f("div",Z,[y(p(m(Q)[t].title)+" ",1),x(F,{type:m(K)[t]?"success":"danger",size:"small"},{default:C(()=>[y(p(m(K)[t]?"成功":"未触发"),1)]),_:2},1032,["type"])]),f("div",R,p(m(K)[t]?"":"请尝试：")+p(e.instruction),1)]),_:2},1032,["class"])]),_:2},1024))),128))]),_:1})])])):(b(),v("div",z,r[11]||(r[11]=[f("p",null,"等待 WebSocket 连接...",-1)])))])}}}),[["__scopeId","data-v-7c082001"]]);export{B as default};
