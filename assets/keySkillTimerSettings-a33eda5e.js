import"./index-fdde2d6a.js";/* empty css                  *//* empty css                  */import{_ as e}from"./ThemeToggle-13a9eb97.js";import{l}from"./lz-string-343805bb.js";/* empty css                        *//* empty css                    */import"./el-tooltip-1f970b29.js";/* empty css                  *//* empty css                     *//* empty css                 *//* empty css                        *//* empty css               *//* empty css                  *//* empty css                      *//* empty css                   */import{u as a}from"./useDev-cab88d81.js";import{i as t,u as o,s,a as i}from"./keySkills-3ec1c112.js";import{U as n}from"./util-3591e9ca.js";import{i as r,A as d,B as m,h as u,e as p,n as c,q as f,d as b,l as k,a0 as y,a1 as _,j as h,b as g}from"./element-plus-cb4c922a.js";import{t as j,ad as v,v as V,x as w,L as S,A as U,M as D,D as x,H as z,E as T,J as C,u as B,aa as I,r as J,K as L}from"./vue-vendor-6f37fd53.js";import{_ as N}from"./_plugin-vue_export-helper-6a8c15be.js";import{c as $}from"./clipboard-e5e2548c.js";import"./index-c9f4301b.js";import"./useDemo-dea69d31.js";import"./actionChinese-e2356100.js";import"./chineseToIcon-e0fcd48d.js";import"./status-9bc9036c.js";import"./tts-5e313398.js";import"./overlay_plugin_api-974cdd44.js";const A={style:{"margin-bottom":"10px"}},E={style:{display:"flex","justify-content":"center",gap:"0px"},class:"actions"},O=["src"],F=N(j({__name:"KeySkillTable",props:{data:{}},emits:["add","delete","move"],setup(e,{emit:l}){const o=e,s=l,i=a(),k=Object.freeze(n.getBattleJobs()),y=v(k.map(e=>({value:n.jobToJobEnum(e),label:n.jobToFullName(e)?.cn??e})));return(e,l)=>{const a=r,n=u,k=m,_=p,h=f,g=c,j=b,v=d;return w(),V(S,null,[U("div",A,[D(a,{type:"primary",size:"small",onClick:l[0]||(l[0]=e=>s("add"))},{default:T(()=>l[2]||(l[2]=[C(" 新增技能 ",-1)])),_:1,__:[2]}),B(i)?(w(),x(a,{key:0,type:"danger",size:"small",onClick:l[1]||(l[1]=e=>function(e){const l=o.data.map(e=>e.key);l.length=e;for(const a of l)s("delete",a)}(10))},{default:T(()=>l[3]||(l[3]=[C(" 删除10个 ",-1)])),_:1,__:[3]})):z("",!0)]),D(v,{data:o.data,border:"",size:"small","row-key":e=>e.key,height:620},{default:T(()=>[D(k,{label:"操作",width:"80",align:"center"},{default:T(({row:e,$index:t})=>[U("div",E,[D(a,{link:"",size:"small",type:"primary",disabled:0===t,class:"arrow",onClick:e=>s("move",t,t-1)},{default:T(()=>l[4]||(l[4]=[C(" ↑ ",-1)])),_:2,__:[4]},1032,["disabled","onClick"]),D(a,{link:"",size:"small",type:"primary",disabled:t===o.data.length-1,class:"arrow",onClick:e=>s("move",t,t+1)},{default:T(()=>l[5]||(l[5]=[C(" ↓ ",-1)])),_:2,__:[5]},1032,["disabled","onClick"]),D(n,{title:"确定删除吗？此操作无法撤销",placement:"top-start",onConfirm:l=>s("delete",e.key)},{reference:T(()=>[D(a,{link:"",type:"danger",size:"small"},{default:T(()=>l[6]||(l[6]=[C(" 删除 ",-1)])),_:1,__:[6]})]),_:2},1032,["onConfirm"])])]),_:1}),D(k,{label:"预览",width:"50",align:"center"},{default:T(({row:e})=>[U("img",{src:B(t)(e.id),class:"icon"},null,8,O)]),_:1}),D(k,{label:"ID(十进制)",width:"200"},{default:T(({row:e})=>[D(_,{modelValue:e.id,"onUpdate:modelValue":l=>e.id=l,size:"small"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),D(k,{label:"TTS",width:"100"},{default:T(({row:e})=>[D(_,{modelValue:e.tts,"onUpdate:modelValue":l=>e.tts=l,size:"small"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),D(k,{label:"持续时间(秒)",width:"180"},{default:T(({row:e})=>[D(_,{modelValue:e.duration,"onUpdate:modelValue":l=>e.duration=l,size:"small"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),D(k,{label:"冷却时间 (秒)",width:"140"},{default:T(({row:e})=>[D(_,{modelValue:e.recast1000ms,"onUpdate:modelValue":l=>e.recast1000ms=l,size:"small"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),D(k,{label:"适用职业","min-width":"100"},{default:T(({row:e})=>[D(g,{modelValue:e.job,"onUpdate:modelValue":l=>e.job=l,size:"small",multiple:""},{default:T(()=>[(w(!0),V(S,null,I(B(y),e=>(w(),x(h,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),D(k,{label:"最小习得等级",width:"90",align:"center"},{default:T(({row:e})=>[D(j,{modelValue:e.minLevel,"onUpdate:modelValue":l=>e.minLevel=l,min:1,max:100,size:"small","controls-position":"right",style:{width:"70px"}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),D(k,{label:"显示到第n行",width:"100",align:"center"},{default:T(({row:e})=>[D(j,{modelValue:e.line,"onUpdate:modelValue":l=>e.line=l,min:1,size:"small","controls-position":"right",style:{width:"60px"}},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data","row-key"])],64)}}}),[["__scopeId","data-v-4444e521"]]),K={class:"page-container"},M={class:"left"},H={class:"right"},q=N(j({__name:"keySkillTimerSettings",setup(a){const t=o(),n=J("chinese"),d={chinese:"国服技能数据",global:"国际服技能数据"};function m(){h.confirm(`是否重置「${d[n.value]}」为默认技能数据？这将覆盖当前编辑的内容。`,"确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{"chinese"===n.value?t.keySkillsData.chinese=[...s]:t.keySkillsData.global=[...i],g.success(`已重置${d[n.value]}`)}).catch(()=>{})}function u(e){t.keySkillsData[e].unshift({key:crypto.randomUUID(),id:0,tts:"",duration:0,recast1000ms:0,job:[],line:1,minLevel:1})}function p(e,l){const a=t.keySkillsData[e],o=a.findIndex(e=>e.key===l);-1!==o&&a.splice(o,1)}function c(e,l,a){const o=t.keySkillsData[e];if(a<0||a>=o.length||l===a)return;const s=o[l];s&&(o.splice(l,1),o.splice(a,0,s))}function f(){const e=JSON.stringify(t.keySkillsData),a=l.compressToBase64(e);$(a).then(()=>g.success("已复制到剪贴板")).catch(()=>g.error("复制失败"))}function b(){h.prompt("请输入导入的技能数据，导入的数据将覆盖当前内容。","导入",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"textarea",inputValidator:e=>{try{const a=l.decompressFromBase64(e),t=JSON.parse(a);return"object"==typeof t&&null!==t||"数据格式错误"}catch(a){return`数据格式错误: ${a instanceof Error?a.message:String(a)}`}}}).then(({value:e})=>{if(e){const a=l.decompressFromBase64(e),o=JSON.parse(a);"object"==typeof o&&null!==o?(t.keySkillsData.chinese=o.chinese,t.keySkillsData.global=o.global,g.success("已导入数据")):g.error("导入数据格式错误")}}).catch(()=>{})}return(l,a)=>{const o=e,s=r,i=k,h=_,g=y;return w(),V("div",K,[D(i,{class:"header"},{default:T(()=>[U("div",M,[D(o,{"storage-key":"key-skill-timer-2"})]),U("div",H,[D(s,{type:"primary",size:"small",onClick:f},{default:T(()=>a[9]||(a[9]=[C(" 导出（国服+国际服） ",-1)])),_:1,__:[9]}),D(s,{type:"primary",size:"small",onClick:b},{default:T(()=>a[10]||(a[10]=[C(" 导入 ",-1)])),_:1,__:[10]}),D(s,{type:"danger",size:"small",onClick:m},{default:T(()=>[C(" 重置"+L(d[n.value])+"为默认 ",1)]),_:1})])]),_:1}),D(g,{modelValue:n.value,"onUpdate:modelValue":a[8]||(a[8]=e=>n.value=e),"tab-position":"top",type:"border-card",class:"tabs"},{default:T(()=>[D(h,{label:d.chinese,name:"chinese"},{default:T(()=>[D(F,{data:B(t).keySkillsData.chinese,"onUpdate:data":a[0]||(a[0]=e=>B(t).keySkillsData.chinese=e),onAdd:a[1]||(a[1]=e=>u("chinese")),onDelete:a[2]||(a[2]=e=>p("chinese",e)),onMove:a[3]||(a[3]=(e,l)=>c("chinese",e,l))},null,8,["data"])]),_:1},8,["label"]),D(h,{label:d.global,name:"global"},{default:T(()=>[D(F,{data:B(t).keySkillsData.global,"onUpdate:data":a[4]||(a[4]=e=>B(t).keySkillsData.global=e),onAdd:a[5]||(a[5]=e=>u("global")),onDelete:a[6]||(a[6]=e=>p("global",e)),onMove:a[7]||(a[7]=(e,l)=>c("global",e,l))},null,8,["data"])]),_:1},8,["label"])]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-e983b4f8"]]);export{q as default};
