import{N as e}from"./element-plus-901ad096.js";import{aR as o,aP as a,k as r,r as l,l as t,o as s,G as n,y as p,D as i,u,d as m,F as d,ae as b,z as c,H as f,A as g,E as j,a$ as h}from"./vue-49c48d91.js";import{U as y}from"./util-3591e9ca.js";import{_ as v}from"./_plugin-vue_export-helper-6a8c15be.js";const _=o("partySort",{state:()=>({arr:a("cactbotRuntime-sortArr",[21,32,37,19,24,33,40,28,34,30,39,22,20,41,23,31,38,25,27,35,42,36])})}),x={flex:"~ col",style:{position:"relative"}},k=v(r({__name:"DragJob",props:{party:{}},emits:["update"],setup(o,{emit:a}){const r=o,v=a,k=l(!1),J=_(),V=[{role:"tank",color:"blue"},{role:"healer",color:"green"},{role:"dps",color:"red"},{role:"crafter",color:"yellow"},{role:"gatherer",color:"purple"},{role:"none",color:"gray"}];const w=function(){const e={tank:y.isTankJob,healer:y.isHealerJob,dps:y.isDpsJob,crafter:y.isCraftingJob,gatherer:y.isGatheringJob};return Object.fromEntries(V.map(({role:o})=>[o,"none"===o?[]:y.getBattleJobs3().filter(e[o]).map(y.jobToJobEnum).sort(y.enumSortMethod)]))}(),O=Object.values(w).flat().map(e=>({name:y.jobToFullName(y.jobEnumToJob(e)).simple1,job:e})),U=l((()=>{const e={};for(const o of V.map(e=>e.role))e[o]=O.filter(e=>w[o].includes(e.job)).sort((e,o)=>J.arr.indexOf(e.job)-J.arr.indexOf(o.job));return e})());function E(){J.arr=Object.values(U.value).flat().map(e=>e.job),v("update")}return(o,a)=>{const l=e;return s(),t("div",x,[n(l,{modelValue:u(k),"onUpdate:modelValue":a[0]||(a[0]=e=>m(k)?k.value=e:null),size:"small",style:{position:"absolute",top:"0.25rem",right:"0.25rem",background:"rgba(30, 30, 30, 0.33)",color:"white",padding:"0 3px",margin:"0","font-size":"12px",height:"1.5em","box-shadow":"0 0 2px black"}},{default:p(()=>a[1]||(a[1]=[i(" 解除限制 ",-1)])),_:1,__:[1]},8,["modelValue"]),(s(),t(d,null,b(V,(e,o)=>n(u(h),{key:o,modelValue:u(U)[e.role],"onUpdate:modelValue":o=>u(U)[e.role]=o,animation:150,"ghost-class":"ghost",class:"m-b-0.25 m-t-0.25 flex flex-row gap-0.25 rounded p-0",filter:".no-draggable","force-fallback":!0,onUpdate:E},{default:p(()=>[(s(!0),t(d,null,b(u(U)[e.role],o=>{return c((s(),t("div",{key:o.job,class:g((u(k)||(a=o.job,r.party.find(e=>e.job===a))?`draggable bg-${e.color} cursor-move`:"no-draggable bg-gray-700/50 opacity-75")+" rounded p-l-0.6 p-r-0.6 p-t-0 p-b-0.3 m-0 color-white")},j(o.name),3)),[[f,!!r.party.find(e=>36===e.job)||36!==o.job]]);var a}),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])),64))])}}}),[["__scopeId","data-v-7751ed99"]]);export{k as _,_ as u};
