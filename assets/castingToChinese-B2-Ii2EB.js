import{c as e,_ as o}from"./shared-common-BKuSzJeA.js";import{h as l,J as t,x as a,u as n,G as s,g as i,e as m,a as u,b as r,p as d,v as f,f as c,d as p,s as h,t as g,y as V,c as v,r as C,F as w,dr as x}from"./vendor-vue-i6lpFrx4.js";import{t as A}from"./shared-core-wtLCg29f.js";import{a as I}from"./cactbot-DtpbXwrG.js";import{aJ as z,u as D,h as S,k as U,j as X,a as Y,E as b,l as y,n as T,p as F}from"./vendor-element-plus-DxZgBX3C.js";const P={style:{width:"10rem"}},_={class:"noCSS"},N={class:"noCSS"},k={class:"container"},$={class:"actionID"},j=o(l({__name:"castingToChinese",setup(o){x(e=>({d8578c00:c(E),v3ea234d4:c(G),v3ea234d5:c(W),v2156a87e:c(H),v1fb14e26:c(J),v2df4076e:c(Z),v2df4076f:c(B),v0b6a8fbc:c(L),v7501430c:c(O),v7501430a:c(Q),d8a2c048:c(q),v7ff1799e:c(R),v7ff1799f:c(ee)}));class l{name;startTime;castTime;overTime;actionId;constructor(e){this.name=function(e){const o=Number.parseInt(e[4],16),l=e[2],t=e[5];return A(o)||(l.startsWith("4")&&t.includes("unknown"),t)}(e),this.startTime=Date.now(),this.castTime=1e3*Number(e[8]),this.overTime=this.startTime+this.castTime,this.actionId=Number.parseInt(e[4],16)}}const j=t({targetCast:void 0}),K=[{value:"Target",label:"当前目标"},{value:"Focus",label:"焦点目标"}],M=a({width:265,showCountdown:!1,showProgress:!1,showActionChinese:!0,showActionID:!1,offsetProgressX:0,offsetProgressY:-22,offsetCountdownX:240,offsetCountdownY:-5,offsetActionChineseX:275,offsetActionChineseY:-45,offsetActionIDX:10,offsetActionIDY:-5,ping:80,keep:100,fontSizeCountDown:17,fontSizeActionName:20,fontFamily:"SmartisanHei",targetKey:"Target"});n("castingToChineseFix",M,localStorage,{mergeDefaults:!0});const q=s(()=>`${M.value.width}px`),E=s(()=>M.value.showCountdown?1:0),H=s(()=>M.value.showProgress?1:0),J=s(()=>M.value.showActionChinese?1:0),L=s(()=>M.value.showActionID?1:0),G=s(()=>`${M.value.offsetCountdownX}px`),W=s(()=>-1*M.value.offsetCountdownY+"px"),Z=s(()=>`${M.value.offsetActionChineseX}px`),B=s(()=>-1*M.value.offsetActionChineseY+"px"),O=s(()=>`${M.value.offsetActionIDX}px`),Q=s(()=>-1*M.value.offsetActionIDY+"px"),R=s(()=>`${M.value.offsetProgressX}px`),ee=s(()=>-1*M.value.offsetProgressY+"px"),oe=new Map,le=a(0),te=M.value.ping;function ae(){localStorage.removeItem("castingToChinese"),location.reload()}return I("EnmityTargetData",e=>{j.targetCast=oe.get(e[M.value.targetKey]?.ID)}),I("LogLine",e=>{"20"===e.line[0]?oe.set(Number.parseInt(e.line[2],16),new l(e.line)):"23"===e.line[0]&&oe.delete(Number.parseInt(e.line[2],16))}),I("ChangeZone",()=>oe.clear()),requestAnimationFrame(function e(){le.value=Date.now(),requestAnimationFrame(e)}),(o,l)=>{const t=S,a=U,n=X,s=b,x=Y,A=T,I=y,q=F,E=z,H=D,J=e;return u(),i(J,null,{readme:m(()=>[p(q,{class:"settings"},{default:m(()=>[r("form",null,[l[20]||(l[20]=V(" 宽度: ",-1)),p(t,{modelValue:c(M).width,"onUpdate:modelValue":l[0]||(l[0]=e=>c(M).width=e),min:20,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",null,[l[21]||(l[21]=V("显示倒计时: ",-1)),p(a,{modelValue:c(M).showCountdown,"onUpdate:modelValue":l[1]||(l[1]=e=>c(M).showCountdown=e)},null,8,["modelValue"])]),r("form",null,[l[22]||(l[22]=V("显示进度条: ",-1)),p(a,{modelValue:c(M).showProgress,"onUpdate:modelValue":l[2]||(l[2]=e=>c(M).showProgress=e)},null,8,["modelValue"])]),r("form",null,[l[23]||(l[23]=V(" 显示中文: ",-1)),p(a,{modelValue:c(M).showActionChinese,"onUpdate:modelValue":l[3]||(l[3]=e=>c(M).showActionChinese=e)},null,8,["modelValue"])]),r("form",null,[l[24]||(l[24]=V("显示ID: ",-1)),p(a,{modelValue:c(M).showActionID,"onUpdate:modelValue":l[4]||(l[4]=e=>c(M).showActionID=e)},null,8,["modelValue"])]),r("form",null,[l[25]||(l[25]=V(" 延迟(ms): ",-1)),p(t,{modelValue:c(M).ping,"onUpdate:modelValue":l[5]||(l[5]=e=>c(M).ping=e),min:0,max:1e4,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",null,[l[26]||(l[26]=V(" 保留(ms): ",-1)),p(t,{modelValue:c(M).keep,"onUpdate:modelValue":l[6]||(l[6]=e=>c(M).keep=e),min:0,max:1e5,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",null,[l[27]||(l[27]=V(" 进度条偏移X: ",-1)),p(t,{modelValue:c(M).offsetProgressX,"onUpdate:modelValue":l[7]||(l[7]=e=>c(M).offsetProgressX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),r("form",null,[l[28]||(l[28]=V(" 进度条偏移Y: ",-1)),p(t,{modelValue:c(M).offsetProgressY,"onUpdate:modelValue":l[8]||(l[8]=e=>c(M).offsetProgressY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",null,[l[29]||(l[29]=V(" 倒计时偏移X: ",-1)),p(t,{modelValue:c(M).offsetCountdownX,"onUpdate:modelValue":l[9]||(l[9]=e=>c(M).offsetCountdownX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),r("form",null,[l[30]||(l[30]=V(" 倒计时偏移Y: ",-1)),p(t,{modelValue:c(M).offsetCountdownY,"onUpdate:modelValue":l[10]||(l[10]=e=>c(M).offsetCountdownY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",null,[l[31]||(l[31]=V(" 中文偏移X: ",-1)),p(t,{modelValue:c(M).offsetActionChineseX,"onUpdate:modelValue":l[11]||(l[11]=e=>c(M).offsetActionChineseX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),r("form",null,[l[32]||(l[32]=V(" 中文偏移Y: ",-1)),p(t,{modelValue:c(M).offsetActionChineseY,"onUpdate:modelValue":l[12]||(l[12]=e=>c(M).offsetActionChineseY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",null,[l[33]||(l[33]=V(" ID偏移X: ",-1)),p(t,{modelValue:c(M).offsetActionIDX,"onUpdate:modelValue":l[13]||(l[13]=e=>c(M).offsetActionIDX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),r("form",null,[l[34]||(l[34]=V(" ID偏移Y: ",-1)),p(t,{modelValue:c(M).offsetActionIDY,"onUpdate:modelValue":l[14]||(l[14]=e=>c(M).offsetActionIDY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",null,[l[35]||(l[35]=V(" 倒计时字号(px): ",-1)),p(t,{modelValue:c(M).fontSizeCountDown,"onUpdate:modelValue":l[15]||(l[15]=e=>c(M).fontSizeCountDown=e),min:1,max:100,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",null,[l[36]||(l[36]=V(" 中文字号(px): ",-1)),p(t,{modelValue:c(M).fontSizeActionName,"onUpdate:modelValue":l[16]||(l[16]=e=>c(M).fontSizeActionName=e),min:1,max:100,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",P,[l[37]||(l[37]=V(" 字体: ",-1)),p(n,{modelValue:c(M).fontFamily,"onUpdate:modelValue":l[17]||(l[17]=e=>c(M).fontFamily=e),size:"small",clearable:"",onClear:l[18]||(l[18]=e=>c(M).fontFamily="SmartisanHei")},null,8,["modelValue"])]),r("form",_,[p(x,{modelValue:c(M).targetKey,"onUpdate:modelValue":l[19]||(l[19]=e=>c(M).targetKey=e),placeholder:"Select",size:"small",teleported:!1},{default:m(()=>[(u(),v(w,null,C(K,e=>p(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),r("form",N,[p(I,{teleported:!1,title:"确定要重置？",onConfirm:ae},{reference:m(()=>[p(A,null,{default:m(()=>[...l[38]||(l[38]=[V("重置全部用户设置",-1)])]),_:1})]),_:1})])]),_:1})]),default:m(()=>[r("div",k,[d(p(H,{style:h({fontFamily:c(M).fontFamily})},{default:m(()=>[r("div",{style:h({fontSize:`${c(M).fontSizeCountDown}px`}),class:"countdown"},g(Math.max(((c(j).targetCast?.overTime??1)-c(le)-c(te))/1e3,0).toFixed(2)),5),p(E,{percentage:Math.min((c(le)-(c(j).targetCast?.startTime??1)+c(te))/(c(j).targetCast?.castTime??1)*100,100),"stroke-width":8,indeterminate:!1,"show-text":!1,color:"#fbfff9",class:"progress"},null,8,["percentage"]),r("div",$,g(c(j).targetCast?.actionId)+"("+g(c(j).targetCast?.actionId.toString(16).toUpperCase())+") ",1),r("div",{style:h({fontSize:`${c(M).fontSizeActionName}px`}),class:"actionChinese"},g(c(j).targetCast?.name),5)]),_:1},8,["style"]),[[f,c(j).targetCast&&c(le)-c(j).targetCast.overTime+c(te)<c(M).keep]])])]),_:1})}}}),[["__scopeId","data-v-bd14ab31"]]);export{j as default};
