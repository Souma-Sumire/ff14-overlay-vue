import{_ as e}from"./ActWrapper-9IDiLVAi.js";import{d as s,g as i,h as a,bd as l,j as t,w as n,o,c as r,B as c,u as p,a as m,F as u,l as d,p as f,q as k,t as y,b as j,e as g}from"./index-Dv6uazMJ.js";/* empty css                  */import{u as h}from"./useDemo-BR9rtmHI.js";import{u as _}from"./useDev-ROusmI0_.js";import{u as v}from"./useZone-BKrL_gdO.js";import{u as w,c as b}from"./keySkills-BPKWSnxE.js";import{a as C,r as S}from"./overlay_plugin_api-DHbPkDtN.js";import{E as P}from"./index-DivljuLu.js";import{_ as x}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./el-card-CAWIQgvX.js";import"./index-B8ZiaNRg.js";import"./zoneInfo-oVHkj6su.js";import"./zone_info-DWUSq5kq.js";import"./content_type-uhloenTS.js";import"./demoParty-VqsYt8ja.js";import"./util-BOtaAWHW.js";import"./actionChinese-DgBhjTbn.js";import"./chineseToIcon-xFdmTerz.js";import"./status-VujwLG_3.js";import"./tts-BkZGqxam.js";import"./index-DIQGxWKX.js";import"./use-form-common-props-BZ_bSvEJ.js";const I={key:0,class:"key-skills-timer-container"},D={class:"skills-grid"},K=["onClick"],L={class:"buff-filter"},T=["src"],z={key:1,class:"test"},E=x(s({__name:"keySkillTimer",setup(s){const x=w(),{zoneType:E}=v(),F=i(()=>"Pvp"===E.value),$=_(),N=h(),A=e=>{x.party=e.party.filter(e=>e.inParty)},H=e=>{if(!F.value)if("21"===e.line[0]||"22"===e.line[0]&&"0"===e.line[45]){const s=Number.parseInt(e.line[4],16),i=b(s),a=e.line[2];x.triggerSkill([s,i],a,!0)}else"33"===e.line[0]&&["40000010","4000000F"].includes(e.line[3])&&x.wipe()},O=e=>{x.language=e.charName.includes(" ")?"global":"chinese"};function Q(e){x.speed=e,x.usedSkills.forEach(e=>{x.triggerSkill([e.id],e.owner.id,!1)})}function X(){window.open("/ff14-overlay-vue/#/keySkillTimerSettings","_blank")}return a(()=>{C("PartyChanged",A),C("LogLine",H),C("ChangePrimaryPlayer",O)}),l(()=>{S("PartyChanged",A),S("LogLine",H),S("ChangePrimaryPlayer",O),Object.values(x.skillStates).forEach(e=>{e.rafId&&cancelAnimationFrame(e.rafId)})}),(s,i)=>{const a=P,l=e;return o(),t(l,null,{readme:n(()=>[...i[3]||(i[3]=[m("span",{class:"demo-text"},[g(" 当前为演示数据，锁定后将显示真实数据。"),m("br"),g(" 请尽量拉宽窗口，点击技能可模拟触发。 ")],-1)])]),default:n(()=>[p(F)?c("",!0):(o(),r("div",I,[m("div",D,[(o(!0),r(u,null,d(p(x).usedSkills,e=>(o(),r("div",{key:e.instanceKey,class:k(["buff-container",`line${e.line}`]),style:f({zIndex:p(N)||p($)?99:void 0}),onClick:()=>p(N)||p($)?function(e,s){($||N)&&x.triggerSkill([e.id],e.owner.id,s)}(e,!0):null},[m("div",L,[m("span",{class:k(["duration",[p(x).skillStates[e.instanceKey]?.isRecast?"cooldown":"active"]])},y(p(x).skillStates[e.instanceKey]?.text||""),3),m("img",{src:e.src},null,8,T),p(x).skillStates[e.instanceKey]?.active?(o(),r("div",{key:p(x).skillStates[e.instanceKey]?.startTime||0,class:"cooldown-layer",style:f({clipPath:`inset(${p(x).skillStates[e.instanceKey]?.clipPercent??0}% 0 0 0)`})},null,4)):c("",!0)]),e.owner.hasDuplicate.skill||e.owner.hasDuplicate.job?(o(),r("span",{key:0,class:k(`job has-duplicate ${e.owner.hasDuplicate.job?"duplicate-show-name":"duplicate-show-job-name"} ${e.owner.jobIcon.toLowerCase()}`)},y(e.owner.hasDuplicate.job?e.owner.name:e.owner.jobName),3)):c("",!0)],14,K))),128))])])),p($)||p(N)?(o(),r("div",z,[j(a,{onClick:p(x).demoFullParty},{default:n(()=>[...i[4]||(i[4]=[g(" 模拟全部职业 ",-1)])]),_:1},8,["onClick"]),j(a,{onClick:i[0]||(i[0]=()=>p(x).shuffle())},{default:n(()=>[...i[5]||(i[5]=[g(" 模拟8人小队 ",-1)])]),_:1}),p($)?(o(),t(a,{key:0,onClick:i[1]||(i[1]=()=>Q(1))},{default:n(()=>[...i[6]||(i[6]=[g(" 测试触发(1X) ",-1)])]),_:1})):c("",!0),p($)?(o(),t(a,{key:1,onClick:i[2]||(i[2]=()=>Q(5))},{default:n(()=>[...i[7]||(i[7]=[g(" 测试触发(5X) ",-1)])]),_:1})):c("",!0),j(a,{onClick:p(x).wipe},{default:n(()=>[...i[8]||(i[8]=[g(" 模拟团灭 ",-1)])]),_:1},8,["onClick"]),j(a,{type:"primary",onClick:X},{default:n(()=>[...i[9]||(i[9]=[g(" 设置 ",-1)])]),_:1})])):c("",!0)]),_:1})}}}),[["__scopeId","data-v-8749a7d6"]]);export{E as default};
