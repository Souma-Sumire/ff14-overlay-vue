import{_ as e}from"./ActWrapper-DaFNRmFa.js";import{u as i}from"./useDemo-jag-4PEG.js";import{u as s}from"./useDev-DGZDSPYU.js";import{u as t}from"./useZone-2nbTGwUO.js";import{u as l,c as a}from"./keySkills-BxIxET7e.js";import{a as o,r as n}from"./overlay_plugin_api-DHbPkDtN.js";import{E as r}from"./index-CuxKtTH2.js";import{d as c,h as m,i as p,aG as k,k as u,w as d,o as y,c as f,G as j,u as S,a as _,F as g,m as w,q as v,s as b,t as h,b as C,e as x}from"./index-BGR0j1iG.js";import{_ as T}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./index-Dsbym7CN.js";import"./zoneInfo-Kvs06RCG.js";import"./zone_info-C8YMEhdS.js";import"./content_type-uhloenTS.js";import"./demoParty-CZo6PSkD.js";import"./util-BSI8OlRX.js";import"./actionChinese-DM96CSZ4.js";import"./chineseToIcon-xFdmTerz.js";import"./status-DO8_dJa3.js";import"./tts-BkZGqxam.js";import"./index-CLc0n6fm.js";import"./use-form-common-props-CmIdZSlE.js";const $={class:"demo-text"},I={key:0,class:"key-skills-timer-container"},P={class:"skills-grid"},D=["onClick"],K={class:"buff-filter"},L=["src"],z={key:1,class:"test"},E=T(c({__name:"keySkillTimer",setup(c){const T=l(),{zoneType:E}=t(),F=m(()=>"Pvp"===E.value),q=s(),A=i(),G=e=>{T.party=e.party.filter(e=>e.inParty)},N=e=>{if(!F.value)if("21"===e.line[0]||"22"===e.line[0]&&"0"===e.line[45]){const i=Number.parseInt(e.line[4],16),s=a(i),t=e.line[2];T.triggerSkill([i,s],t,!0)}else"33"===e.line[0]&&["40000010","4000000F"].includes(e.line[3])&&T.wipe()};function R(e){T.speed=e,T.usedSkills.forEach(e=>{T.triggerSkill([e.id],e.owner.id,!1)})}function W(){window.open("/ff14-overlay-vue/#/keySkillTimerSettings","_blank")}return p(()=>{o("PartyChanged",G),o("LogLine",N)}),k(()=>{n("PartyChanged",G),n("LogLine",N),Object.values(T.skillStates).forEach(e=>{e.rafId&&cancelAnimationFrame(e.rafId)})}),(i,s)=>{const t=r,l=e;return y(),u(l,null,{readme:d(()=>[_("span",$,[x(h(i.$t("keySkillTimer.demo-text1")),1),s[3]||(s[3]=_("br",null,null,-1)),x(" "+h(i.$t("keySkillTimer.demo-text2")),1)])]),default:d(()=>[S(F)?j("",!0):(y(),f("div",I,[_("div",P,[(y(!0),f(g,null,w(S(T).usedSkills,e=>(y(),f("div",{key:e.instanceKey,class:b(["buff-container",`line${e.line}`]),style:v({zIndex:S(A)||S(q)?99:void 0}),onClick:()=>S(A)||S(q)?function(e,i){(q||A)&&T.triggerSkill([e.id],e.owner.id,i)}(e,!0):null},[_("div",K,[_("span",{class:b(["duration",[S(T).skillStates[e.instanceKey]?.isRecast?"cooldown":"active"]])},h(S(T).skillStates[e.instanceKey]?.text||""),3),_("img",{src:e.src},null,8,L),S(T).skillStates[e.instanceKey]?.active?(y(),f("div",{key:S(T).skillStates[e.instanceKey]?.startTime||0,class:"cooldown-layer",style:v({clipPath:`inset(${S(T).skillStates[e.instanceKey]?.clipPercent??0}% 0 0 0)`})},null,4)):j("",!0)]),e.owner.hasDuplicate.skill||e.owner.hasDuplicate.job?(y(),f("span",{key:0,class:b(`job has-duplicate ${e.owner.hasDuplicate.job?"duplicate-show-name":"duplicate-show-job-name"} ${e.owner.jobIcon.toLowerCase()}`)},h(e.owner.hasDuplicate.job?e.owner.name:e.owner.jobName),3)):j("",!0)],14,D))),128))])])),S(q)||S(A)?(y(),f("div",z,[C(t,{onClick:S(T).demoFullParty},{default:d(()=>[x(h(i.$t("keySkillTimer.test-all-jobs")),1)]),_:1},8,["onClick"]),C(t,{onClick:s[0]||(s[0]=()=>S(T).shuffle())},{default:d(()=>[x(h(i.$t("keySkillTimer.test-8-party")),1)]),_:1}),S(q)?(y(),u(t,{key:0,onClick:s[1]||(s[1]=()=>R(1))},{default:d(()=>[x(h(i.$t("keySkillTimer.test-trigger-1x")),1)]),_:1})):j("",!0),S(q)?(y(),u(t,{key:1,onClick:s[2]||(s[2]=()=>R(5))},{default:d(()=>[x(h(i.$t("keySkillTimer.test-trigger-5x")),1)]),_:1})):j("",!0),C(t,{onClick:S(T).wipe},{default:d(()=>[x(h(i.$t("keySkillTimer.test-wipe")),1)]),_:1},8,["onClick"]),C(t,{type:"primary",onClick:W},{default:d(()=>[x(h(i.$t("keySkillTimer.settings")),1)]),_:1})])):j("",!0)]),_:1})}}}),[["__scopeId","data-v-fc7b96db"]]);export{E as default};
