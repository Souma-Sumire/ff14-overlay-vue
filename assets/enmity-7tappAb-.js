import{_ as e}from"./ActWrapper-B0yyZLOA.js";import{d as t,f as s,h as a,i as r,bk as o,k as n,w as i,o as p,l as f,v as m,u,a as c,t as l}from"./index-DqE2UpAZ.js";import{U as d}from"./util-BSI8OlRX.js";import{N as g}from"./netregexes-vajTpmRp.js";import{a as y,r as h}from"./overlay_plugin_api-DHbPkDtN.js";import{_}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./el-card-CAM8a8bA.js";import"./useDev-CM43sSgt.js";import"./useDemo-1N4E07cA.js";import"./regexes-CQgF4nC9.js";const j=_(t({__name:"enmity",setup(t){const _=["4F","5B","2E7","729"],j={gainsEffect:g.gainsEffect({effectId:_}),losesEffect:g.losesEffect({effectId:_})},v=s({party:[],povCharID:"0",status:new Set}),I=a(()=>{const e=v.party.filter(e=>d.isTankJob(d.jobEnumToJob(e.job))),t=e.some(e=>e.id===v.povCharID);return!(0===e.length||1===v.party.length||!t)&&!e.some(e=>v.status.has(e.id))}),E=e=>{v.party=e.party.slice(),v.status.forEach(e=>{v.party.some(t=>t.id===e)||v.status.delete(e)})},C=e=>{v.povCharID=e.charID.toString(16).toUpperCase()},x=e=>{const t=j.gainsEffect.exec(e.rawLine);if(t){const e=t.groups?.targetId;return void(e&&v.status.add(e))}const s=j.losesEffect.exec(e.rawLine);if(s){const e=s.groups?.targetId;return void(e&&v.status.delete(e))}};return r(()=>{y("LogLine",x),y("PartyChanged",E),y("ChangePrimaryPlayer",C)}),o(()=>{h("LogLine",x),h("PartyChanged",E),h("ChangePrimaryPlayer",C)}),(t,s)=>{const a=e;return p(),n(a,null,{default:i(()=>[f(c("strong",null,l(t.$t("enmity.no_enmity_active")),513),[[m,u(I)]])]),_:1})}}}),[["__scopeId","data-v-502a64a4"]]);export{j as default};
