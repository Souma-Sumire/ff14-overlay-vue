import{_ as e}from"./ActWrapper-5069e8c1.js";import{I as a,D as t,k as n,m as l,c as o,W as d,d as c}from"./element-plus-901ad096.js";import{c as s}from"./postNamazu-85d59aec.js";import{N as i,a as r,c as m}from"./cactbot-49e370f3.js";import{k as u,aP as h,J as p,x as g,y as v,o as b,q as D,G as f,u as w}from"./vue-49c48d91.js";import"./useDev-861d544b.js";import"./useDemo-86956ef5.js";import"./_plugin-vue_export-helper-6a8c15be.js";import"./vendor-979eac9e.js";import"./res-macro-d468e41b.js";const C={"bg-white":"","p-l-3":""},V=u({__name:"okDncDance",setup(u){let V=-1,x="",j=0;const z={cn:["瀑泻","喷泉","逆瀑泻","坠喷泉"],en:["Cascade","Fountain","Reverse Cascade","Fountainfall"],ja:["カスケード","ファウンテン","リバースカスケー","ファウンテンフォール"]},_={cn:{standard:"标准舞步",technical:"技巧舞步"},en:{standard:"Standard Step",technical:"Technical Step"},ja:{standard:"スタンダードステップ",technical:"テクニカルステップ"}},y={inACTCombat:!1,inGameCombat:!1},E=h("okDncDanceSettings",{lang:"cn",hotbar:{standard:[2,1],technical:[2,2]},cdDancingStart:!0,cdDancingEnd:!0,autoDance:!1}),S=e=>m({call:"PostNamazu",c:"DoTextCommand",p:e});function k(e,a){"DNC"===x&&(e&&S(`/hotbar set ${_[E.value.lang].standard} ${E.value.hotbar.standard.join(" ")}`),a&&S(`/hotbar set ${_[E.value.lang].technical} ${E.value.hotbar.technical.join(" ")}`),V=-1)}const M={countdown:i.countdown(),countdownCancel:i.countdownCancel(),losesEffect:i.losesEffect(),changeZone:i.changeZone(),wipe:i.network6d({command:["40000010","4000000F"]})},T=e=>{"DNC"===x&&(E.value.cdDancingStart&&s([{c:"stop",p:"okDncDance-start"},{c:"qid",p:"okDncDance-start"},{c:"DoTextCommand",p:`/ac ${_[E.value.lang].standard}`,d:Math.max(0,1e3*(e-15))}]),E.value.cdDancingEnd&&s([{c:"stop",p:"okDncDance-end"},{c:"qid",p:"okDncDance-end"},{c:"DoTextCommand",p:`/ac ${_[E.value.lang].standard}`,d:1e3*e-300}]))},$=()=>{"DNC"===x&&s([{c:"stop",p:"okDncDance-(?:start|end|auto)"}])},U=()=>{k(!0,!0)},N=()=>{k(!0,!0)},A=()=>{k(!0,!0)},L=()=>{k(!0,!0)};return p(()=>{r("onPlayerChangedEvent",e=>{if(x=e.detail.job,j!==e.detail.id&&(j=e.detail.id,M.losesEffect=i.losesEffect({targetId:j.toString(16).toUpperCase(),effectId:"71[AB]"})),"DNC"!==e.detail.job)return;const a=e.detail.jobDetail?.currentStep,t=e.detail.jobDetail?.steps;if(void 0!==a&&void 0!==t&&a!==V){if(t.length&&a<t.length){const n=z[E.value.lang][["Emboite","Entrechat","Jete","Pirouette"].indexOf(t[a])];S(`/hotbar set ${n} ${E.value.hotbar[2===t.length?"standard":"technical"].join(" ")}`);const l=e.detail.jobDetail?.currentStep;if(!1===y.inGameCombat&&y&&void 0!==l&&E.value.autoDance){const e=[{c:"DoTextCommand",p:`/ac ${n}`,d:0===l?1460:960},...Array.from({length:4}).map(()=>({c:"DoTextCommand",p:`/ac ${n}`,d:20}))];s(e)}}else a===t.length&&k(2===t.length,4===t.length);t.length&&(V=a)}}),r("onPlayerDied",()=>{A()}),r("LogLine",e=>{const a=M.countdown.exec(e.rawLine)?.groups?.countdownTime;void 0!==a?T(Number.parseInt(a)):M.countdownCancel.test(e.rawLine)?$():M.losesEffect.test(e.rawLine)?U():M.changeZone.test(e.rawLine)?N():M.wipe.test(e.rawLine)&&L()}),r("onInCombatChangedEvent",e=>{y.inACTCombat=e.detail.inACTCombat,y.inGameCombat=e.detail.inGameCombat})}),(s,i)=>{const r=l,m=n,u=t,h=o,p=d,V=c,x=a,j=e;return b(),g(j,null,{default:v(()=>[D("div",C,[f(x,{"label-width":"9rem",style:{"max-width":"300px"}},{default:v(()=>[f(u,{label:"Action语言",style:{width:"14em"}},{default:v(()=>[f(m,{modelValue:w(E).lang,"onUpdate:modelValue":i[0]||(i[0]=e=>w(E).lang=e),size:"small"},{default:v(()=>[f(r,{value:"cn",label:"中文"}),f(r,{value:"en",label:"English"}),f(r,{value:"ja",label:"日本語"})]),_:1},8,["modelValue"])]),_:1}),f(u,{label:"标准舞步热键栏"},{default:v(()=>[f(h,{modelValue:w(E).hotbar.standard[0],"onUpdate:modelValue":i[1]||(i[1]=e=>w(E).hotbar.standard[0]=e),type:"number",style:{width:"2.5rem"},min:"1",max:"10",size:"small"},null,8,["modelValue"]),f(h,{modelValue:w(E).hotbar.standard[1],"onUpdate:modelValue":i[2]||(i[2]=e=>w(E).hotbar.standard[1]=e),type:"number",style:{width:"2.5rem"},min:"1",max:"12",size:"small"},null,8,["modelValue"]),f(p,{trigger:"hover",content:"标准舞步的热键栏位置，例如2-1，代表热键栏2的编号1位置。"},{reference:v(()=>i[8]||(i[8]=[D("svg",{t:"1717309838763",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1460",width:"16",height:"16",flex:""},[D("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z","p-id":"1461"}),D("path",{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7c0-19.7 12.4-37.7 30.9-44.8 59-22.7 97.1-74.7 97.1-132.5 0.1-39.3-17.1-76-48.3-103.3z","p-id":"1462"}),D("path",{d:"M512 732m-40 0a40 40 0 1 0 80 0 40 40 0 1 0-80 0Z","p-id":"1463"})],-1)])),_:1})]),_:1}),f(u,{label:"技巧舞步热键栏"},{default:v(()=>[f(h,{modelValue:w(E).hotbar.technical[0],"onUpdate:modelValue":i[3]||(i[3]=e=>w(E).hotbar.technical[0]=e),type:"number",style:{width:"2.5rem"},min:"1",max:"10",size:"small"},null,8,["modelValue"]),f(h,{modelValue:w(E).hotbar.technical[1],"onUpdate:modelValue":i[4]||(i[4]=e=>w(E).hotbar.technical[1]=e),type:"number",style:{width:"2.5rem"},min:"1",max:"12",size:"small"},null,8,["modelValue"]),f(p,{trigger:"hover",content:"技巧舞步的热键栏位置，例如2-2，代表热键栏2的编号2位置。"},{reference:v(()=>i[9]||(i[9]=[D("svg",{t:"1717309838763",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1460",width:"16",height:"16",flex:""},[D("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z","p-id":"1461"}),D("path",{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7c0-19.7 12.4-37.7 30.9-44.8 59-22.7 97.1-74.7 97.1-132.5 0.1-39.3-17.1-76-48.3-103.3z","p-id":"1462"}),D("path",{d:"M512 732m-40 0a40 40 0 1 0 80 0 40 40 0 1 0-80 0Z","p-id":"1463"})],-1)])),_:1})]),_:1}),f(u,{label:"倒计时15秒小舞"},{default:v(()=>[f(V,{modelValue:w(E).cdDancingStart,"onUpdate:modelValue":i[5]||(i[5]=e=>w(E).cdDancingStart=e),size:"small"},null,8,["modelValue"])]),_:1}),f(u,{label:"倒计时0秒小舞"},{default:v(()=>[f(V,{modelValue:w(E).cdDancingEnd,"onUpdate:modelValue":i[6]||(i[6]=e=>w(E).cdDancingEnd=e),size:"small"},null,8,["modelValue"])]),_:1}),f(u,{label:"自动舞步(仅脱战时)"},{default:v(()=>[f(V,{modelValue:w(E).autoDance,"onUpdate:modelValue":i[7]||(i[7]=e=>w(E).autoDance=e),size:"small"},null,8,["modelValue"]),f(p,{trigger:"hover",content:"仅在非战斗状态下生效，只跳颜色，不自动终结"},{reference:v(()=>i[10]||(i[10]=[D("svg",{t:"1717309838763",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1460",width:"16",height:"16",flex:""},[D("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z","p-id":"1461"}),D("path",{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7c0-19.7 12.4-37.7 30.9-44.8 59-22.7 97.1-74.7 97.1-132.5 0.1-39.3-17.1-76-48.3-103.3z","p-id":"1462"}),D("path",{d:"M512 732m-40 0a40 40 0 1 0 80 0 40 40 0 1 0-80 0Z","p-id":"1463"})],-1)])),_:1})]),_:1})]),_:1})])]),_:1})}}});export{V as default};
