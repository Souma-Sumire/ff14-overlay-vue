import"./index-30ffa0a0.js";/* empty css                      *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                  *//* empty css                 *//* empty css                        */import{t as l,av as e,r as a,V as t,c as o,f as u,U as n,v as s,x as r,A as m,D as i,F as d,O as p,u as f,J as c,M as V,E as v,L as b,a9 as g,K as y,I as z,S as h,G as w}from"./vue-vendor-db4de8ea.js";import{a as C,r as U}from"./overlay_plugin_api-974cdd44.js";import{u as x}from"./index-de57c9c1.js";import{d as j,e as A,f as _,h as S,i as $}from"./element-plus-ad97716d.js";import{_ as D}from"./_plugin-vue_export-helper-6a8c15be.js";const E={class:"dnc-overlay"},I={class:"settings"},B=D(l({__name:"dnc",setup(l){e(l=>({"5739ceee":f(k),"7472b602":f(G),f2ee9fb0:f(P),"657310fb":f(W),"466eb29c":f(q),"5204523c":f(X),"23a2c181":f(Y)}));const D=a(0),B=t({playerId:"",lastCombo:0,status:new Map([["A85",0],["A86",0],["BC9",0],["BCA",0]])}),F=x("jobs-dnc",{combo:{left:10,top:-30},tr3:{left:46,top:-22},tr4:{left:82,top:-22},fl:{left:0,top:-15},color:"rgb(255,255,255)",shadow:"rgb(0,0,0)",size:14,warncolor:"rgb(255,255,255)",warnshadow:"rgb(255,0,0)",zeroStr:"",fontFamily:"微软雅黑",fontWeight:!1,warn:5,userCss:""},localStorage,{mergeDefaults:!0}),L=a("flex"===document.getElementById("unlocked")?.style?.display),M=t([{id:"combo",cd:o(()=>30-Math.floor((D.value-B.lastCombo)/1e3)),style:{top:o(()=>`${F.value.combo.top}px`),left:o(()=>`${F.value.combo.left}px`)}},{id:"tr3",cd:o(()=>30-Math.floor((D.value-(B.status.get("A85")??0))/1e3)),style:{top:o(()=>`${F.value.tr3.top}px`),left:o(()=>`${F.value.tr3.left}px`)}},{id:"tr4",cd:o(()=>30-Math.floor((D.value-(B.status.get("A86")??0))/1e3)),style:{top:o(()=>`${F.value.tr4.top}px`),left:o(()=>`${F.value.tr4.left}px`)}},{id:"fl3",cd:o(()=>30-Math.floor((D.value-(B.status.get("BC9")??0))/1e3)),style:{top:o(()=>`${F.value.tr3.top+F.value.fl.top}px`),left:o(()=>`${F.value.tr3.left+F.value.fl.left}px`)}},{id:"fl4",cd:o(()=>30-Math.floor((D.value-(B.status.get("BCA")??0))/1e3)),style:{top:o(()=>`${F.value.tr4.top+F.value.fl.top}px`),left:o(()=>`${F.value.tr4.left+F.value.fl.left}px`)}}]),P=o(()=>F.value.color),W=o(()=>F.value.shadow),X=o(()=>F.value.warncolor),Y=o(()=>F.value.warnshadow),k=o(()=>F.value.fontFamily),q=o(()=>`${F.value.size}px`),G=o(()=>F.value.fontWeight?"bold":"none"),O=o(()=>F.value.userCss),J=l=>{l.line[5]!==B.playerId||"26"!==l.line[0]&&"30"!==l.line[0]||!B.status.has(l.line[2])?l.line[2]!==B.playerId||"21"!==l.line[0]&&"22"!==l.line[0]||("3E79"===l.line[4]&&"22"===l.line[0]||"3E75"===l.line[4]&&"21"===l.line[0]?B.lastCombo=Date.now():("3E76"===l.line[4]||"3E7A"===l.line[4]||"21"===l.line[0]&&"3E79"===l.line[4])&&(B.lastCombo=0)):B.status.set(l.line[2],"26"===l.line[0]?Date.now():0)};function K(){B.status.set("A85",0),B.status.set("A86",0),B.status.set("BC9",0),B.status.set("BCA",0),B.lastCombo=0}const N=l=>{B.playerId=Number(l.charID).toString(16).toUpperCase()};function H(){localStorage.removeItem("jobs-dnc"),location.reload()}return u(()=>{C("onPlayerDied",K),C("LogLine",J),C("ChangePrimaryPlayer",N),document.addEventListener("onOverlayStateUpdate",l=>{L.value=!1===l?.detail?.isLocked})}),n(()=>{U("onPlayerDied",K),U("LogLine",J),U("ChangePrimaryPlayer",N)}),requestAnimationFrame(function l(){D.value=Date.now(),requestAnimationFrame(l)}),(l,e)=>{const a=j,t=A,o=_,u=S,n=$;return r(),s(b,null,[m("div",E,[d(m("header",I,[m("form",null,[e[18]||(e[18]=c(" 连击X: ")),V(a,{modelValue:f(F).combo.left,"onUpdate:modelValue":e[0]||(e[0]=l=>f(F).combo.left=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),m("form",null,[e[19]||(e[19]=c(" 连击Y: ")),V(a,{modelValue:f(F).combo.top,"onUpdate:modelValue":e[1]||(e[1]=l=>f(F).combo.top=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),m("form",null,[e[20]||(e[20]=c(" 触发3X: ")),V(a,{modelValue:f(F).tr3.left,"onUpdate:modelValue":e[2]||(e[2]=l=>f(F).tr3.left=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),m("form",null,[e[21]||(e[21]=c(" 触发3Y: ")),V(a,{modelValue:f(F).tr3.top,"onUpdate:modelValue":e[3]||(e[3]=l=>f(F).tr3.top=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),m("form",null,[e[22]||(e[22]=c(" 触发4X: ")),V(a,{modelValue:f(F).tr4.left,"onUpdate:modelValue":e[4]||(e[4]=l=>f(F).tr4.left=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),m("form",null,[e[23]||(e[23]=c(" 触发4Y: ")),V(a,{modelValue:f(F).tr4.top,"onUpdate:modelValue":e[5]||(e[5]=l=>f(F).tr4.top=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),m("form",null,[e[24]||(e[24]=c(" 百花X: ")),V(a,{modelValue:f(F).fl.left,"onUpdate:modelValue":e[6]||(e[6]=l=>f(F).fl.left=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),m("form",null,[e[25]||(e[25]=c(" 百花Y: ")),V(a,{modelValue:f(F).fl.top,"onUpdate:modelValue":e[7]||(e[7]=l=>f(F).fl.top=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),m("form",null,[e[26]||(e[26]=c(" 剩余警告: ")),V(a,{modelValue:f(F).warn,"onUpdate:modelValue":e[8]||(e[8]=l=>f(F).warn=l),class:"input input-number",min:-1,max:30,size:"small"},null,8,["modelValue"])]),m("form",null,[e[27]||(e[27]=c(" 常规颜色: ")),V(t,{modelValue:f(F).color,"onUpdate:modelValue":e[9]||(e[9]=l=>f(F).color=l),class:"input input-string",size:"small"},null,8,["modelValue"])]),m("form",null,[e[28]||(e[28]=c(" 常规阴影: ")),V(t,{modelValue:f(F).shadow,"onUpdate:modelValue":e[10]||(e[10]=l=>f(F).shadow=l),class:"input input-string",size:"small"},null,8,["modelValue"])]),m("form",null,[e[29]||(e[29]=c(" 警告颜色: ")),V(t,{modelValue:f(F).warncolor,"onUpdate:modelValue":e[11]||(e[11]=l=>f(F).warncolor=l),class:"input input-string",size:"small"},null,8,["modelValue"])]),m("form",null,[e[30]||(e[30]=c(" 警告阴影: ")),V(t,{modelValue:f(F).warnshadow,"onUpdate:modelValue":e[12]||(e[12]=l=>f(F).warnshadow=l),class:"input input-string",size:"small"},null,8,["modelValue"])]),m("form",null,[e[31]||(e[31]=c(" 零值文本: ")),V(t,{modelValue:f(F).zeroStr,"onUpdate:modelValue":e[13]||(e[13]=l=>f(F).zeroStr=l),class:"input input-string",size:"small"},null,8,["modelValue"])]),m("form",null,[e[32]||(e[32]=c(" 字号: ")),V(a,{modelValue:f(F).size,"onUpdate:modelValue":e[14]||(e[14]=l=>f(F).size=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),m("form",null,[e[33]||(e[33]=c(" 字体: ")),V(t,{modelValue:f(F).fontFamily,"onUpdate:modelValue":e[15]||(e[15]=l=>f(F).fontFamily=l),class:"input input-string",size:"small"},null,8,["modelValue"])]),m("form",null,[e[34]||(e[34]=c(" 粗体：")),V(o,{modelValue:f(F).fontWeight,"onUpdate:modelValue":e[16]||(e[16]=l=>f(F).fontWeight=l),size:"small"},null,8,["modelValue"])]),m("form",null,[e[35]||(e[35]=c(" 自定义CSS： ")),e[36]||(e[36]=m("br",null,null,-1)),V(t,{modelValue:f(F).userCss,"onUpdate:modelValue":e[17]||(e[17]=l=>f(F).userCss=l),autosize:"",type:"textarea",placeholder:""},null,8,["modelValue"])]),e[38]||(e[38]=m("br",null,null,-1)),m("form",null,[V(n,{teleported:!1,title:"确定要重置？",onConfirm:H},{reference:v(()=>[V(u,null,{default:v(()=>e[37]||(e[37]=[c("重置全部用户设置")])),_:1,__:[37]})]),_:1})])],512),[[p,f(L)]]),m("main",null,[(r(!0),s(b,null,g(f(M),l=>(r(),s("div",{key:l.id},[m("span",{class:w(l.cd<=f(F).warn&&!f(L)?"warning":""),style:h(l.style)},y(l.cd>=0?l.cd:f(L)?"30":f(F).zeroStr),7)]))),128))])]),(r(),i(z("style"),null,{default:v(()=>[c(y(f(O)),1)]),_:1}))],64)}}}),[["__scopeId","data-v-8be95815"]]);export{B as default};
