import"./index-Ysr6A6L8.js";/* empty css                *//* empty css                      *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css               *//* empty css                  *//* empty css                 *//* empty css                  *//* empty css                        */import{t as e,av as o,V as l,r as t,c as a,v as n,x as s,F as i,O as m,u as r,M as u,E as d,A as f,J as c,L as p,a9 as h,S as g,K as V}from"./vue-vendor-Bp7_Yb1I.js";import{g as w}from"./actionChinese-BSDFMVcH.js";import{a as C}from"./overlay_plugin_api-DHbPkDtN.js";import{u as v}from"./index-DPl59_9W.js";import{d as x,f as A,e as I,m as z,n as D,i as S,h as y,k as U,_ as b,q as Y}from"./element-plus-CIPkFfIK.js";import{_ as X}from"./_plugin-vue_export-helper-BCo6x5W8.js";const T={};const j={class:"container"},_={style:{width:"10rem"}},P={class:"noCSS"},F={class:"noCSS"},k={class:"actionID"},N=X(e({__name:"castingToChinese",setup(e){o(e=>({"73cc04e7":r(q),"1e99ffbb":r(G),"1e99ffbc":r(J),"415664b7":r(B),"576b4d8d":r(H),"65ae06d5":r(Q),"65ae06d6":r(R),"1a4a745b":r(O),"3501ca9a":r(W),"3501ca98":r(Z),a0413ed6:r(M),c01d9452:r(ee),c01d9450:r(oe)}));const X=new URLSearchParams(window.location.href.split("?")[1]);function N(e){const o=Number.parseInt(e[4],16),l=e[2],t=e[5],a=T[o];if(a)return a;const n=w(o);return n||(l.startsWith("4")&&t.includes("unknown"),t)}class ${name;startTime;castTime;overTime;actionId;constructor(e){this.name=N(e),this.startTime=Date.now(),this.castTime=1e3*Number(e[8]),this.overTime=this.startTime+this.castTime,this.actionId=Number.parseInt(e[4],16)}}const L=l({targetCast:void 0}),E=[{value:"Target",label:"当前目标"},{value:"Focus",label:"焦点目标"}],K=t({width:265,showCountdown:!1,showProgress:!1,showActionChinese:!0,showActionID:!1,offsetProgressX:0,offsetProgressY:-22,offsetCountdownX:240,offsetCountdownY:-5,offsetActionChineseX:275,offsetActionChineseY:-45,offsetActionIDX:10,offsetActionIDY:-5,ping:80,keep:100,fontSizeCountDown:17,fontSizeActionName:20,fontFamily:"SmartisanHei",targetKey:"Target"});v("castingToChineseFix",K,localStorage,{mergeDefaults:!0});const M=a(()=>`${K.value.width}px`),q=a(()=>K.value.showCountdown?1:0),B=a(()=>K.value.showProgress?1:0),H=a(()=>K.value.showActionChinese?1:0),O=a(()=>K.value.showActionID?1:0),G=a(()=>`${K.value.offsetCountdownX}px`),J=a(()=>-1*K.value.offsetCountdownY+"px"),Q=a(()=>`${K.value.offsetActionChineseX}px`),R=a(()=>-1*K.value.offsetActionChineseY+"px"),W=a(()=>`${K.value.offsetActionIDX}px`),Z=a(()=>-1*K.value.offsetActionIDY+"px"),ee=a(()=>`${K.value.offsetProgressX}px`),oe=a(()=>-1*K.value.offsetProgressY+"px"),le=new Map,te=t(0),ae=K.value.ping,ne=t(/^(?:1|true|on)$/i.test(X.get("showSettings")||"")||"flex"===document.getElementById("unlocked")?.style?.display);function se(){localStorage.removeItem("castingToChinese"),location.reload()}return C("EnmityTargetData",e=>{L.targetCast=le.get(e[K.value.targetKey]?.ID)}),C("LogLine",e=>{"20"===e.line[0]?le.set(Number.parseInt(e.line[2],16),new $(e.line)):"23"===e.line[0]&&le.delete(Number.parseInt(e.line[2],16))}),C("ChangeZone",()=>le.clear()),requestAnimationFrame(function e(){te.value=Date.now(),requestAnimationFrame(e)}),document.addEventListener("onOverlayStateUpdate",e=>{ne.value=!1===e?.detail?.isLocked}),(e,o)=>{const l=x,t=A,a=I,w=D,C=z,v=y,X=S,T=U,N=b,$=Y;return s(),n("div",j,[i(u(T,{class:"settings"},{default:d(()=>[f("form",null,[o[20]||(o[20]=c(" 宽度: ")),u(l,{modelValue:r(K).width,"onUpdate:modelValue":o[0]||(o[0]=e=>r(K).width=e),min:20,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),f("form",null,[o[21]||(o[21]=c("显示倒计时: ")),u(t,{modelValue:r(K).showCountdown,"onUpdate:modelValue":o[1]||(o[1]=e=>r(K).showCountdown=e)},null,8,["modelValue"])]),f("form",null,[o[22]||(o[22]=c("显示进度条: ")),u(t,{modelValue:r(K).showProgress,"onUpdate:modelValue":o[2]||(o[2]=e=>r(K).showProgress=e)},null,8,["modelValue"])]),f("form",null,[o[23]||(o[23]=c("显示中文: ")),u(t,{modelValue:r(K).showActionChinese,"onUpdate:modelValue":o[3]||(o[3]=e=>r(K).showActionChinese=e)},null,8,["modelValue"])]),f("form",null,[o[24]||(o[24]=c("显示ID: ")),u(t,{modelValue:r(K).showActionID,"onUpdate:modelValue":o[4]||(o[4]=e=>r(K).showActionID=e)},null,8,["modelValue"])]),f("form",null,[o[25]||(o[25]=c(" 延迟(ms): ")),u(l,{modelValue:r(K).ping,"onUpdate:modelValue":o[5]||(o[5]=e=>r(K).ping=e),min:0,max:1e4,size:"small","controls-position":"right"},null,8,["modelValue"])]),f("form",null,[o[26]||(o[26]=c(" 保留(ms): ")),u(l,{modelValue:r(K).keep,"onUpdate:modelValue":o[6]||(o[6]=e=>r(K).keep=e),min:0,max:1e5,size:"small","controls-position":"right"},null,8,["modelValue"])]),f("form",null,[o[27]||(o[27]=c(" 进度条偏移X: ")),u(l,{modelValue:r(K).offsetProgressX,"onUpdate:modelValue":o[7]||(o[7]=e=>r(K).offsetProgressX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),f("form",null,[o[28]||(o[28]=c(" 进度条偏移Y: ")),u(l,{modelValue:r(K).offsetProgressY,"onUpdate:modelValue":o[8]||(o[8]=e=>r(K).offsetProgressY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),f("form",null,[o[29]||(o[29]=c(" 倒计时偏移X: ")),u(l,{modelValue:r(K).offsetCountdownX,"onUpdate:modelValue":o[9]||(o[9]=e=>r(K).offsetCountdownX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),f("form",null,[o[30]||(o[30]=c(" 倒计时偏移Y: ")),u(l,{modelValue:r(K).offsetCountdownY,"onUpdate:modelValue":o[10]||(o[10]=e=>r(K).offsetCountdownY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),f("form",null,[o[31]||(o[31]=c(" 中文偏移X: ")),u(l,{modelValue:r(K).offsetActionChineseX,"onUpdate:modelValue":o[11]||(o[11]=e=>r(K).offsetActionChineseX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),f("form",null,[o[32]||(o[32]=c(" 中文偏移Y: ")),u(l,{modelValue:r(K).offsetActionChineseY,"onUpdate:modelValue":o[12]||(o[12]=e=>r(K).offsetActionChineseY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),f("form",null,[o[33]||(o[33]=c(" ID偏移X: ")),u(l,{modelValue:r(K).offsetActionIDX,"onUpdate:modelValue":o[13]||(o[13]=e=>r(K).offsetActionIDX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),f("form",null,[o[34]||(o[34]=c(" ID偏移Y: ")),u(l,{modelValue:r(K).offsetActionIDY,"onUpdate:modelValue":o[14]||(o[14]=e=>r(K).offsetActionIDY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),f("form",null,[o[35]||(o[35]=c(" 倒计时字号(px): ")),u(l,{modelValue:r(K).fontSizeCountDown,"onUpdate:modelValue":o[15]||(o[15]=e=>r(K).fontSizeCountDown=e),min:1,max:100,size:"small","controls-position":"right"},null,8,["modelValue"])]),f("form",null,[o[36]||(o[36]=c(" 中文字号(px): ")),u(l,{modelValue:r(K).fontSizeActionName,"onUpdate:modelValue":o[16]||(o[16]=e=>r(K).fontSizeActionName=e),min:1,max:100,size:"small","controls-position":"right"},null,8,["modelValue"])]),f("form",_,[o[37]||(o[37]=c(" 字体: ")),u(a,{modelValue:r(K).fontFamily,"onUpdate:modelValue":o[17]||(o[17]=e=>r(K).fontFamily=e),size:"small",clearable:"",onClear:o[18]||(o[18]=e=>r(K).fontFamily="SmartisanHei")},null,8,["modelValue"])]),f("form",P,[u(C,{modelValue:r(K).targetKey,"onUpdate:modelValue":o[19]||(o[19]=e=>r(K).targetKey=e),placeholder:"Select",size:"small",teleported:!1},{default:d(()=>[(s(),n(p,null,h(E,e=>u(w,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),f("form",F,[u(X,{teleported:!1,title:"确定要重置？",onConfirm:se},{reference:d(()=>[u(v,null,{default:d(()=>o[38]||(o[38]=[c("重置全部用户设置")])),_:1,__:[38]})]),_:1})])]),_:1},512),[[m,r(ne)]]),i(u($,{style:g({fontFamily:r(K).fontFamily})},{default:d(()=>[f("div",{style:g({fontSize:`${r(K).fontSizeCountDown}px`}),class:"countdown"},V(Math.max(((r(L).targetCast?.overTime??1)-r(te)-r(ae))/1e3,0).toFixed(2)),5),u(N,{percentage:Math.min((r(te)-(r(L).targetCast?.startTime??1)+r(ae))/(r(L).targetCast?.castTime??1)*100,100),"stroke-width":8,indeterminate:!1,"show-text":!1,color:"#fbfff9",class:"progress"},null,8,["percentage"]),f("div",k,V(r(L).targetCast?.actionId)+"("+V(r(L).targetCast?.actionId.toString(16).toUpperCase())+") ",1),f("div",{style:g({fontSize:`${r(K).fontSizeActionName}px`}),class:"actionChinese"},V(r(L).targetCast?.name),5)]),_:1},8,["style"]),[[m,r(L).targetCast&&r(te)-r(L).targetCast.overTime+r(ae)<r(K).keep]])])}}}),[["__scopeId","data-v-8fcb4200"]]);export{N as default};
