import{b6 as e,bg as t,ae as a,af as o,bh as n,as as l,ar as s,at as i,b5 as r,d as u,au as d,ah as p,h as c,a0 as f,aK as m,r as v,bi as y,O as b,bj as g,bc as h,ax as x,B as w,ak as S,i as C,C as k,c as z,o as I,G as E,F as P,a as M,s as N,u as F,a7 as $,k as B,w as j,n as V,Q as _,b8 as O,P as R,ag as L,t as T,q as H,al as K,bk as W,a4 as A,ao as U,bl as q}from"./index-DtMP2P0p.js";import{u as G,U as Q,d as Y,I as D,C as J}from"./index-Csak4wz6.js";import{u as X}from"./index-Y1mqhP2V.js";import{c as Z,b as ee,a as te,d as ae}from"./use-form-common-props-4y2T3T2O.js";import{a as oe,u as ne}from"./index-BSn2NnyF.js";let le;const se={height:"0",visibility:"hidden",overflow:t()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},ie=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],re=e=>{const t=Number.parseFloat(e);return Number.isNaN(t)?e:t};function ue(t,a=1,o){var n,l;le||(le=document.createElement("textarea"),(null!=(n=t.parentNode)?n:document.body).appendChild(le));const{paddingSize:s,borderSize:i,boxSizing:r,contextStyle:u}=function(e){const t=window.getComputedStyle(e),a=t.getPropertyValue("box-sizing"),o=Number.parseFloat(t.getPropertyValue("padding-bottom"))+Number.parseFloat(t.getPropertyValue("padding-top")),n=Number.parseFloat(t.getPropertyValue("border-bottom-width"))+Number.parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:ie.map(e=>[e,t.getPropertyValue(e)]),paddingSize:o,borderSize:n,boxSizing:a}}(t);u.forEach(([e,t])=>null==le?void 0:le.style.setProperty(e,t)),Object.entries(se).forEach(([e,t])=>null==le?void 0:le.style.setProperty(e,t,"important")),le.value=t.value||t.placeholder||"";let d=le.scrollHeight;const p={};"border-box"===r?d+=i:"content-box"===r&&(d-=s),le.value="";const c=le.scrollHeight-s;if(e(a)){let e=c*a;"border-box"===r&&(e=e+s+i),d=Math.max(e,d),p.minHeight=`${e}px`}if(e(o)){let e=c*o;"border-box"===r&&(e=e+s+i),d=Math.min(e,d)}return p.height=`${d}px`,null==(l=le.parentNode)||l.removeChild(le),le=void 0,p}const de=a({id:{type:String,default:void 0},size:i,disabled:Boolean,modelValue:{type:o([String,Number,Object]),default:""},modelModifiers:{type:o(Object),default:()=>({})},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:o([Boolean,Object]),default:!1},autocomplete:{type:o(String),default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,clearIcon:{type:l,default:s},showPassword:Boolean,showWordLimit:Boolean,wordLimitPosition:{type:String,values:["inside","outside"],default:"inside"},suffixIcon:{type:l},prefixIcon:{type:l},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:o([Object,Array,String]),default:()=>n({})},autofocus:Boolean,rows:{type:Number,default:2},...G(["ariaLabel"]),inputmode:{type:o(String),default:void 0},name:String}),pe={[Q]:e=>r(e),input:e=>r(e),change:e=>r(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent};function ce(e){let t;return[function(){if(null==e.value)return;const{selectionStart:a,selectionEnd:o,value:n}=e.value;if(null==a||null==o)return;const l=n.slice(0,Math.max(0,a)),s=n.slice(Math.max(0,o));t={selectionStart:a,selectionEnd:o,value:n,beforeTxt:l,afterTxt:s}},function(){if(null==e.value||null==t)return;const{value:a}=e.value,{beforeTxt:o,afterTxt:n,selectionStart:l}=t;if(null==o||null==n||null==l)return;let s=a.length;if(a.endsWith(n))s=a.length-n.length;else if(a.startsWith(o))s=o.length;else{const e=o[l-1],t=a.indexOf(e,l-1);-1!==t&&(s=t+1)}e.value.setSelectionRange(s,s)}]}const fe=u({name:"ElInput",inheritAttrs:!1});const me=U(A(u({...fe,props:de,emits:pe,setup(e,{expose:t,emit:a}){const o=e,n=d(),l=X(),s=p(),i=c(()=>["textarea"===o.type?se.b():le.b(),le.m(q.value),le.is("disabled",G.value),le.is("exceed",$e.value),{[le.b("group")]:s.prepend||s.append,[le.m("prefix")]:s.prefix||o.prefixIcon,[le.m("suffix")]:s.suffix||o.suffixIcon||o.clearable||o.showPassword,[le.bm("suffix","password-clear")]:Pe.value&&Me.value,[le.b("hidden")]:"hidden"===o.type},n.class]),r=c(()=>[le.e("wrapper"),le.is("focus",ge.value)]),{form:u,formItem:A}=te(),{inputId:U}=ae(o,{formItemContext:A}),q=Z(),G=ee(),le=f("input"),se=f("textarea"),ie=m(),de=m(),pe=v(!1),fe=v(!1),me=v(),ve=m(o.inputStyle),ye=c(()=>ie.value||de.value),{wrapperRef:be,isFocused:ge,handleFocus:he,handleBlur:xe}=oe(ye,{disabled:G,afterBlur(){var e;o.validateEvent&&(null==(e=null==A?void 0:A.validate)||e.call(A,"blur").catch(e=>Y()))}}),we=c(()=>{var e;return null!=(e=null==u?void 0:u.statusIcon)&&e}),Se=c(()=>(null==A?void 0:A.validateState)||""),Ce=c(()=>Se.value&&y[Se.value]),ke=c(()=>fe.value?b:g),ze=c(()=>[n.style]),Ie=c(()=>[o.inputStyle,ve.value,{resize:o.resize}]),Ee=c(()=>h(o.modelValue)?"":String(o.modelValue)),Pe=c(()=>o.clearable&&!G.value&&!o.readonly&&!!Ee.value&&(ge.value||pe.value)),Me=c(()=>o.showPassword&&!G.value&&!!Ee.value),Ne=c(()=>o.showWordLimit&&!!o.maxlength&&("text"===o.type||"textarea"===o.type)&&!G.value&&!o.readonly&&!o.showPassword),Fe=c(()=>Ee.value.length),$e=c(()=>!!Ne.value&&Fe.value>Number(o.maxlength)),Be=c(()=>!!s.suffix||!!o.suffixIcon||Pe.value||o.showPassword||Ne.value||!!Se.value&&we.value),je=c(()=>!!Object.keys(o.modelModifiers).length),[Ve,_e]=ce(ie);x(de,e=>{if(Re(),!Ne.value||"both"!==o.resize)return;const t=e[0],{width:a}=t.contentRect;me.value={right:`calc(100% - ${a+15+6}px)`}});const Oe=()=>{const{type:e,autosize:t}=o;if(K&&"textarea"===e&&de.value)if(t){const e=W(t)?t.minRows:void 0,a=W(t)?t.maxRows:void 0,o=ue(de.value,e,a);ve.value={overflowY:"hidden",...o},S(()=>{de.value.offsetHeight,ve.value=o})}else ve.value={minHeight:ue(de.value).minHeight}},Re=(e=>{let t=!1;return()=>{var a;if(t||!o.autosize)return;null===(null==(a=de.value)?void 0:a.offsetParent)||(setTimeout(e),t=!0)}})(Oe),Le=()=>{const e=ye.value,t=o.formatter?o.formatter(Ee.value):Ee.value;e&&e.value!==t&&(e.value=t)},Te=e=>{const{trim:t,number:a}=o.modelModifiers;return t&&(e=e.trim()),a&&(e=`${re(e)}`),o.formatter&&o.parser&&(e=o.parser(e)),e},He=async e=>{if(We.value)return;const{lazy:t}=o.modelModifiers;let{value:n}=e.target;t?a(D,n):(n=Te(n),String(n)!==Ee.value?(Ve(),a(Q,n),a(D,n),await S(),(o.formatter&&o.parser||!je.value)&&Le(),_e()):o.formatter&&Le())},Ke=async e=>{let{value:t}=e.target;t=Te(t),o.modelModifiers.lazy&&a(Q,t),a(J,t),await S(),Le()},{isComposing:We,handleCompositionStart:Ae,handleCompositionUpdate:Ue,handleCompositionEnd:qe}=ne({emit:a,afterComposition:He}),Ge=()=>{Ve(),fe.value=!fe.value,setTimeout(_e)},Qe=e=>{pe.value=!1,a("mouseleave",e)},Ye=e=>{pe.value=!0,a("mouseenter",e)},De=e=>{a("keydown",e)},Je=()=>{a(Q,""),a(J,""),a("clear"),a(D,"")};return w(()=>o.modelValue,()=>{var e;S(()=>Oe()),o.validateEvent&&(null==(e=null==A?void 0:A.validate)||e.call(A,"change").catch(e=>Y()))}),w(Ee,e=>{if(!ye.value)return;const{trim:t,number:a}=o.modelModifiers,n=ye.value.value,l=!a&&"number"!==o.type||/^0\d/.test(n)?n:`${re(n)}`;l!==e&&(document.activeElement===ye.value&&"range"!==ye.value.type&&t&&l.trim()===e||Le())}),w(()=>o.type,async()=>{await S(),Le(),Oe()}),C(()=>{!o.formatter&&o.parser,Le(),S(Oe)}),t({input:ie,textarea:de,ref:ye,textareaStyle:Ie,autosize:k(o,"autosize"),isComposing:We,focus:()=>{var e;return null==(e=ye.value)?void 0:e.focus()},blur:()=>{var e;return null==(e=ye.value)?void 0:e.blur()},select:()=>{var e;null==(e=ye.value)||e.select()},clear:Je,resizeTextarea:Oe}),(e,t)=>(I(),z("div",{class:N([F(i),{[F(le).bm("group","append")]:e.$slots.append,[F(le).bm("group","prepend")]:e.$slots.prepend}]),style:H(F(ze)),onMouseenter:Ye,onMouseleave:Qe},[E(" input "),"textarea"!==e.type?(I(),z(P,{key:0},[E(" prepend slot "),e.$slots.prepend?(I(),z("div",{key:0,class:N(F(le).be("group","prepend"))},[$(e.$slots,"prepend")],2)):E("v-if",!0),M("div",{ref_key:"wrapperRef",ref:be,class:N(F(r))},[E(" prefix slot "),e.$slots.prefix||e.prefixIcon?(I(),z("span",{key:0,class:N(F(le).e("prefix"))},[M("span",{class:N(F(le).e("prefix-inner"))},[$(e.$slots,"prefix"),e.prefixIcon?(I(),B(F(_),{key:0,class:N(F(le).e("icon"))},{default:j(()=>[(I(),B(V(e.prefixIcon)))]),_:1},8,["class"])):E("v-if",!0)],2)],2)):E("v-if",!0),M("input",O({id:F(U),ref_key:"input",ref:ie,class:F(le).e("inner")},F(l),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?fe.value?"text":"password":e.type,disabled:F(G),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,inputmode:e.inputmode,onCompositionstart:F(Ae),onCompositionupdate:F(Ue),onCompositionend:F(qe),onInput:He,onChange:Ke,onKeydown:De}),null,16,["id","name","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","inputmode","onCompositionstart","onCompositionupdate","onCompositionend"]),E(" suffix slot "),F(Be)?(I(),z("span",{key:1,class:N(F(le).e("suffix"))},[M("span",{class:N(F(le).e("suffix-inner"))},[F(Pe)&&F(Me)&&F(Ne)?E("v-if",!0):(I(),z(P,{key:0},[$(e.$slots,"suffix"),e.suffixIcon?(I(),B(F(_),{key:0,class:N(F(le).e("icon"))},{default:j(()=>[(I(),B(V(e.suffixIcon)))]),_:1},8,["class"])):E("v-if",!0)],64)),F(Pe)?(I(),B(F(_),{key:1,class:N([F(le).e("icon"),F(le).e("clear")]),onMousedown:R(F(L),["prevent"]),onClick:Je},{default:j(()=>[(I(),B(V(e.clearIcon)))]),_:1},8,["class","onMousedown"])):E("v-if",!0),F(Me)?(I(),B(F(_),{key:2,class:N([F(le).e("icon"),F(le).e("password")]),onClick:Ge},{default:j(()=>[(I(),B(V(F(ke))))]),_:1},8,["class"])):E("v-if",!0),F(Ne)?(I(),z("span",{key:3,class:N([F(le).e("count"),F(le).is("outside","outside"===e.wordLimitPosition)])},[M("span",{class:N(F(le).e("count-inner"))},T(F(Fe))+" / "+T(e.maxlength),3)],2)):E("v-if",!0),F(Se)&&F(Ce)&&F(we)?(I(),B(F(_),{key:4,class:N([F(le).e("icon"),F(le).e("validateIcon"),F(le).is("loading","validating"===F(Se))])},{default:j(()=>[(I(),B(V(F(Ce))))]),_:1},8,["class"])):E("v-if",!0)],2)],2)):E("v-if",!0)],2),E(" append slot "),e.$slots.append?(I(),z("div",{key:1,class:N(F(le).be("group","append"))},[$(e.$slots,"append")],2)):E("v-if",!0)],64)):(I(),z(P,{key:1},[E(" textarea "),M("textarea",O({id:F(U),ref_key:"textarea",ref:de,class:[F(se).e("inner"),F(le).is("focus",F(ge))]},F(l),{minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:F(G),readonly:e.readonly,autocomplete:e.autocomplete,style:F(Ie),"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:F(Ae),onCompositionupdate:F(Ue),onCompositionend:F(qe),onInput:He,onFocus:F(he),onBlur:F(xe),onChange:Ke,onKeydown:De}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),F(Ne)?(I(),z("span",{key:0,style:H(me.value),class:N([F(le).e("count"),F(le).is("outside","outside"===e.wordLimitPosition)])},T(F(Fe))+" / "+T(e.maxlength),7)):E("v-if",!0)],64))],38))}}),[["__file","input.vue"]])),ve=e=>["",...q].includes(e);export{me as E,de as a,pe as b,ve as i,ce as u};
