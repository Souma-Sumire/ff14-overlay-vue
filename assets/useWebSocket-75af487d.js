import{K as e,d as t,M as s,c as a,g as o,n,j as l,N as r,p as i,q as c,u,l as d,_ as w,P as f,V as m,r as g,o as p,y}from"./index-8dd62bb3.js";import{c as h}from"./overlay_plugin_api-974cdd44.js";import{E as v}from"./index-ef5b709c.js";const C=Symbol("rowContextKey"),S=e({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:["start","center","end","space-around","space-between","space-evenly"],default:"start"},align:{type:String,values:["top","middle","bottom"]}}),E=t({name:"ElRow"});const _=m(w(t({...E,props:S,setup(e){const t=e,w=s("row"),m=a(()=>t.gutter);f(C,{gutter:m});const g=a(()=>{const e={};return t.gutter?(e.marginRight=e.marginLeft=`-${t.gutter/2}px`,e):e}),p=a(()=>[w.b(),w.is(`justify-${t.justify}`,"start"!==t.justify),w.is(`align-${t.align}`,!!t.align)]);return(e,t)=>(n(),o(d(e.tag),{class:c(u(p)),style:i(u(g))},{default:l(()=>[r(e.$slots,"default")]),_:3},8,["class","style"]))}}),[["__file","row.vue"]]));function b(e={allowClose:!1,addWsParam:!0}){const t=g(void 0),s=g(!1),a=g("overlay");let o=null;function n(){Promise.race([h({call:"cactbotRequestState"}),new Promise((e,t)=>{setTimeout(()=>{t(new Error("Timeout"))},1e3)})]).then(()=>{o&&clearTimeout(o),window.location.href.includes("OVERLAY_WS")&&(t.value=!0,a.value="websocket")}).catch(()=>{t.value=!1,a.value="overlay"})}return window.location.href.includes("OVERLAY_WS")&&(o=window.setInterval(()=>{n()},3e3)),p(()=>{!function(){const e=window.navigator.userAgent,t=e.includes("MSIE "),s=e.includes("Trident/");return t||s}()?(y(t,t=>{t?v.close():s.value||v.alert("请按照下图设置<img src='/ff14-overlay-vue/assets/actWS-f1a7bc14.webp' style='width:100%'>",e.allowClose?"未连接到 ACT":"未连接到 ACT，无法使用",{dangerouslyUseHTMLString:!0,closeOnClickModal:!1,showClose:!1,closeOnPressEscape:!1,closeOnHashChange:!1,showCancelButton:e.allowClose,showConfirmButton:!1,cancelButtonText:"用不了也要看",buttonSize:"small"}).catch(()=>{s.value=!0,o&&clearInterval(o)})}),!window.location.href.includes("OVERLAY_WS")&&e.addWsParam&&function(){const e=window.location.href,[t,s=""]=e.split("#"),[a,o=""]=s.split("?"),n=new URLSearchParams(o);let l="";n.forEach((e,t)=>{"OVERLAY_WS"!==t&&(l+=`${t}=${encodeURIComponent(e)}&`)}),l+="OVERLAY_WS=ws://127.0.0.1:10501/ws";let r=t;a&&(r+=`#${a}`,l&&(r+=`?${l}`)),window.location.href=r,location.reload()}(),n()):v.alert("不支持 IE 浏览器，请使用 Chrome、Firefox、Edge 等现代浏览器访问。","提示",{type:"error",showConfirmButton:!1,showClose:!1})}),{wsConnected:t,useType:a}}export{_ as E,C as r,b as u};
