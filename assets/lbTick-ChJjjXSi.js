import{_ as e}from"./ActWrapper-WqRhh8Ww.js";import{d as n,r as i,f as a,y as t,h as s,aX as o,j as r,w as c,o as l,B as u,a as p,u as T,e as m,t as h,c as d,F as f,l as L}from"./index-DNtpBNvd.js";/* empty css                  */import{u as C}from"./useDemo-D6x4KTl5.js";import{u as v}from"./useDev-Cq6uexSk.js";import{a as g,r as _}from"./overlay_plugin_api-DHbPkDtN.js";import{E as j}from"./index-BLzmBUpS.js";import{_ as y}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./el-card-DPY7LNZ7.js";import"./index-BPE9AcEo.js";import"./index-WFtbePEM.js";import"./use-form-common-props-qaRfWY7z.js";const x={class:"lb-container"},b={id:"percent"},D={id:"bonusTotal"},E={id:"extra"},F=3e4,w=y(n({__name:"lbTick",setup(n){const y=v(),w=C(),k=i(),A=a({prev:0,ratio:0,bonusTotal:0,chain:0,chainList:[]});function B(){A.prev=0,A.ratio=0,A.chain=0,A.chainList=[],A.bonusTotal=0}const I=e=>{if("36"===e.line[0]){const n=parseInt(e.line[2],16),i=n-A.prev;if(A.prev=n,A.ratio=n/F,0===n||i<-.1)A.chain=0,A.chainList=[];else{if(!(i>220))return void(A.chain=0);{A.chain+=i,A.bonusTotal+=i;const e=A.chainList[A.chainList.length-1];!e||e.num!==A.chain-300&&e.num!==A.chain-60?A.chainList.push({key:crypto.randomUUID(),num:A.chain}):A.chainList[A.chainList.length-1].num=A.chain}}}else"33"===e.line[0]&&["40000010","4000000F"].includes(e.line[3])&&B()};function U(){k.value?.(),k.value=function(e,n=2){const i=[];return function(a){let t=0;e({line:a[0],type:"LogLine",rawLine:""});for(let s=1;s<a.length;s++){const o=new Date(a[s][1]),r=new Date(a[s-1][1]);t+=o.getTime()-r.getTime();const c=window.setTimeout(()=>{e({line:a[s],type:"LogLine",rawLine:""})},t/n);i.push(c)}}([["36","2021-12-28T21:38:30.3580000+08:00","0000"],["36","2021-12-28T21:38:33.3580000+08:00","00DC"],["36","2021-12-28T21:38:34.8290000+08:00","0208"],["36","2021-12-28T21:38:36.3460000+08:00","02E4"],["36","2021-12-28T21:38:37.8630000+08:00","0410"],["36","2021-12-28T21:38:39.3360000+08:00","04EC"],["36","2021-12-28T21:38:42.3720000+08:00","05C8"],["36","2021-12-28T21:38:45.3620000+08:00","06A4"],["36","2021-12-28T21:38:47.8140000+08:00","07D0"],["36","2021-12-28T21:38:47.8140000+08:00","08FC"],["36","2021-12-28T21:38:47.8140000+08:00","0A28"],["36","2021-12-28T21:38:47.8140000+08:00","0B54"],["36","2021-12-28T21:38:47.8140000+08:00","0C80"],["36","2021-12-28T21:38:48.3510000+08:00","0D5C"],["36","2021-12-28T21:38:50.6220000+08:00","0E88"],["36","2021-12-28T21:38:50.8900000+08:00","0FB4"],["36","2021-12-28T21:38:51.0230000+08:00","10E0"],["36","2021-12-28T21:38:51.1570000+08:00","120C"],["36","2021-12-28T21:38:51.3360000+08:00","12E8"],["36","2021-12-28T21:38:54.3690000+08:00","13C4"],["36","2021-12-28T21:38:57.3570000+08:00","14A0"],["36","2021-12-28T21:38:58.3360000+08:00","15CC"],["36","2021-12-28T21:38:58.3360000+08:00","16F8"],["36","2021-12-28T21:38:58.3360000+08:00","1824"],["36","2021-12-28T21:38:58.3360000+08:00","1950"],["36","2021-12-28T21:38:58.3360000+08:00","1A7C"],["36","2021-12-28T21:39:00.3410000+08:00","1B58"],["36","2021-12-28T21:39:03.3690000+08:00","1C34"],["36","2021-12-28T21:39:04.2630000+08:00","1D60"],["36","2021-12-28T21:39:06.3600000+08:00","1E3C"]]),()=>{i.forEach(clearTimeout),i.length=0}}(I,1)}return t(()=>[w.value,y.value],()=>{k.value?.(),B()}),s(()=>{g("ChangeZone",B),g("LogLine",I)}),o(()=>{_("ChangeZone",B),_("LogLine",I)}),(n,i)=>{const a=j,t=e;return l(),r(t,null,{default:c(()=>[T(y)||T(w)?(l(),r(a,{key:0,type:"primary",class:"test-btn",onClick:U},{default:c(()=>i[0]||(i[0]=[m(" 测试 ",-1)])),_:1,__:[0]})):u("",!0),p("div",x,[p("p",b,h((100*T(A).ratio).toFixed(2))+"%",1),p("p",D,h((T(A).bonusTotal/F*100).toFixed(0))+"% ",1),p("div",E,[(l(!0),d(f,null,L(T(A).chainList,e=>(l(),d("p",{key:e.key,class:"anime"}," +"+h((e.num/F*100).toFixed(0))+"% ",1))),128))])])]),_:1})}}}),[["__scopeId","data-v-8448d1c4"]]);export{w as default};
