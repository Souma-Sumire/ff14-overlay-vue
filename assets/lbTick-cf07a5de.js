import{_ as e}from"./ActWrapper-5069e8c1.js";import{f as t}from"./element-plus-901ad096.js";import{u as a}from"./useDemo-86956ef5.js";import{u as l}from"./useDev-861d544b.js";import{a as n,r as s}from"./cactbot-49e370f3.js";import{k as o,r as i,K as r,W as u,J as T,L as m,x as c,y as d,o as f,B as p,q as b,u as v,D as g,E as C,l as A,F as h,ae as x}from"./vue-49c48d91.js";import{_ as E}from"./_plugin-vue_export-helper-6a8c15be.js";import"./vendor-979eac9e.js";const w={id:"show"},_={id:"extra"},D=["data-time"],L={id:"extraAll"},F=E(o({__name:"lbTick",setup(o){const E=l(),F=Math.ceil(220/3e4*1e3)/1e3,j=i(),B=a();r(B,()=>{j.value?.(),N()});const y=u({lbNow:0,lbBefore:0,lbAddUp:0,lbExtraAll:0,extraEntries:[]}),k=i([]);function N(){y.lbExtraAll=0,y.lbNow=0,y.extraEntries=[],y.lbAddUp=0,y.lbBefore=0}const U=e=>{const t=e.line;if("36"===t[0]){const e=Number.parseInt(t[2],16)/3e4,a=e-y.lbBefore;if(y.lbNow=e,a>F){y.lbAddUp+=a,y.lbExtraAll+=a;!function(e){if(function(e,t){return!!e&&(e.value===t-1||e.value===t-5)}(k.value.at(-1),e)&&k.value.length)k.value[k.value.length-1].value=e;else{const t={value:e,time:new Intl.DateTimeFormat("default",{hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date)};k.value.push(t),setTimeout(()=>{const e=k.value.indexOf(t);-1!==e&&k.value.splice(e,1)},5e3)}}(Math.round(100*y.lbAddUp))}else y.lbAddUp=0;y.lbBefore=e,a<-.1&&N()}else"33"===t[0]&&["40000010","4000000F"].includes(t[3])&&N()};function I(){j.value=function(e,t=2){const a=[];return function(l){let n=0;e({line:l[0],type:"LogLine",rawLine:""});for(let s=1;s<l.length;s++){const o=new Date(l[s][1]),i=new Date(l[s-1][1]);n+=o.getTime()-i.getTime();const r=window.setTimeout(()=>{e({line:l[s],type:"LogLine",rawLine:""})},n/t);a.push(r)}}([["36","2021-12-28T21:38:30.3580000+08:00","0000"],["36","2021-12-28T21:38:33.3580000+08:00","00DC"],["36","2021-12-28T21:38:34.8290000+08:00","0208"],["36","2021-12-28T21:38:36.3460000+08:00","02E4"],["36","2021-12-28T21:38:37.8630000+08:00","0410"],["36","2021-12-28T21:38:39.3360000+08:00","04EC"],["36","2021-12-28T21:38:42.3720000+08:00","05C8"],["36","2021-12-28T21:38:45.3620000+08:00","06A4"],["36","2021-12-28T21:38:47.8140000+08:00","07D0"],["36","2021-12-28T21:38:47.8140000+08:00","08FC"],["36","2021-12-28T21:38:47.8140000+08:00","0A28"],["36","2021-12-28T21:38:47.8140000+08:00","0B54"],["36","2021-12-28T21:38:47.8140000+08:00","0C80"],["36","2021-12-28T21:38:48.3510000+08:00","0D5C"],["36","2021-12-28T21:38:50.6220000+08:00","0E88"],["36","2021-12-28T21:38:50.8900000+08:00","0FB4"],["36","2021-12-28T21:38:51.0230000+08:00","10E0"],["36","2021-12-28T21:38:51.1570000+08:00","120C"],["36","2021-12-28T21:38:51.3360000+08:00","12E8"],["36","2021-12-28T21:38:54.3690000+08:00","13C4"],["36","2021-12-28T21:38:57.3570000+08:00","14A0"],["36","2021-12-28T21:38:58.3360000+08:00","15CC"],["36","2021-12-28T21:38:58.3360000+08:00","16F8"],["36","2021-12-28T21:38:58.3360000+08:00","1824"],["36","2021-12-28T21:38:58.3360000+08:00","1950"],["36","2021-12-28T21:38:58.3360000+08:00","1A7C"],["36","2021-12-28T21:39:00.3410000+08:00","1B58"],["36","2021-12-28T21:39:03.3690000+08:00","1C34"],["36","2021-12-28T21:39:04.2630000+08:00","1D60"],["36","2021-12-28T21:39:06.3600000+08:00","1E3C"]]),()=>{a.forEach(clearTimeout),a.length=0}}(U,4)}return T(()=>{n("ChangeZone",N),n("LogLine",U)}),m(()=>{s("ChangeZone",N),s("LogLine",U)}),(a,l)=>{const n=t,s=e;return f(),c(s,null,{default:d(()=>[v(E)||v(B)?(f(),c(n,{key:0,type:"primary",class:"test-btn",onClick:I},{default:d(()=>l[0]||(l[0]=[g(" 测试 ",-1)])),_:1,__:[0]})):p("",!0),b("main",null,[b("article",w,C((100*v(y).lbNow).toFixed(2))+"% ",1),b("article",_,[(f(!0),A(h,null,x(v(k),(e,t)=>(f(),A("p",{key:t,class:"anime","data-time":e.time}," +"+C(e.value)+"% ",9,D))),128))]),b("aside",L,C((100*v(y).lbExtraAll).toFixed(0))+"% ",1)])]),_:1})}}}),[["__scopeId","data-v-39e1f6f6"]]);export{F as default};
