import"./index-1d343eb4.js";/* empty css                  */import{u as e}from"./useDevMode-55881ae6.js";import{a as t,r as a}from"./overlay_plugin_api-974cdd44.js";import{i as l}from"./element-plus-3b00acc6.js";import{t as n,r as i,V as o,e as s,P as r,v as u,D as d,H as c,A as m,u as T,E as p,K as f,L as v,aa as b,x as g,J as x}from"./vue-vendor-37eb8ba2.js";import{_ as C}from"./_plugin-vue_export-helper-6a8c15be.js";import"./index-9c6472dd.js";const E={id:"show"},A={id:"extra"},h=["data-time"],L={id:"extraAll"},w=C(n({__name:"lbTick",setup(n){const C=e(),w=Math.ceil(220/3e4*1e3)/1e3,y=i("flex"===document.getElementById("unlocked")?.style?.display),_=i(),D=o({lbNow:0,lbBefore:0,lbAddUp:0,lbExtraAll:0,extraEntries:[]}),j=i([]);function B(){D.lbExtraAll=0,D.lbNow=0,D.extraEntries=[],D.lbAddUp=0,D.lbBefore=0}const F=e=>{const t=e.line;if("36"===t[0]){const e=Number.parseInt(t[2],16)/3e4,a=e-D.lbBefore;if(D.lbNow=e,a>w){D.lbAddUp+=a,D.lbExtraAll+=a;!function(e){if(function(e,t){return!!e&&(e.value===t-1||e.value===t-5)}(j.value.at(-1),e)&&j.value.length)j.value[j.value.length-1].value=e;else{const t={value:e,time:new Intl.DateTimeFormat("default",{hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date)};j.value.push(t),setTimeout(()=>{const e=j.value.indexOf(t);-1!==e&&j.value.splice(e,1)},5e3)}}(Math.round(100*D.lbAddUp))}else D.lbAddUp=0;D.lbBefore=e,a<-.1&&B()}else"33"===t[0]&&["40000010","4000000F"].includes(t[3])&&B()};function U(e){y.value=!1===e?.detail?.isLocked,_.value?.(),B()}function k(){_.value=function(e,t=2){const a=[];return function(l){let n=0;e({line:l[0],type:"LogLine",rawLine:""});for(let i=1;i<l.length;i++){const o=new Date(l[i][1]),s=new Date(l[i-1][1]);n+=o.getTime()-s.getTime();const r=window.setTimeout(()=>{e({line:l[i],type:"LogLine",rawLine:""})},n/t);a.push(r)}}([["36","2021-12-28T21:38:30.3580000+08:00","0000"],["36","2021-12-28T21:38:33.3580000+08:00","00DC"],["36","2021-12-28T21:38:34.8290000+08:00","0208"],["36","2021-12-28T21:38:36.3460000+08:00","02E4"],["36","2021-12-28T21:38:37.8630000+08:00","0410"],["36","2021-12-28T21:38:39.3360000+08:00","04EC"],["36","2021-12-28T21:38:42.3720000+08:00","05C8"],["36","2021-12-28T21:38:45.3620000+08:00","06A4"],["36","2021-12-28T21:38:47.8140000+08:00","07D0"],["36","2021-12-28T21:38:47.8140000+08:00","08FC"],["36","2021-12-28T21:38:47.8140000+08:00","0A28"],["36","2021-12-28T21:38:47.8140000+08:00","0B54"],["36","2021-12-28T21:38:47.8140000+08:00","0C80"],["36","2021-12-28T21:38:48.3510000+08:00","0D5C"],["36","2021-12-28T21:38:50.6220000+08:00","0E88"],["36","2021-12-28T21:38:50.8900000+08:00","0FB4"],["36","2021-12-28T21:38:51.0230000+08:00","10E0"],["36","2021-12-28T21:38:51.1570000+08:00","120C"],["36","2021-12-28T21:38:51.3360000+08:00","12E8"],["36","2021-12-28T21:38:54.3690000+08:00","13C4"],["36","2021-12-28T21:38:57.3570000+08:00","14A0"],["36","2021-12-28T21:38:58.3360000+08:00","15CC"],["36","2021-12-28T21:38:58.3360000+08:00","16F8"],["36","2021-12-28T21:38:58.3360000+08:00","1824"],["36","2021-12-28T21:38:58.3360000+08:00","1950"],["36","2021-12-28T21:38:58.3360000+08:00","1A7C"],["36","2021-12-28T21:39:00.3410000+08:00","1B58"],["36","2021-12-28T21:39:03.3690000+08:00","1C34"],["36","2021-12-28T21:39:04.2630000+08:00","1D60"],["36","2021-12-28T21:39:06.3600000+08:00","1E3C"]]),()=>{a.forEach(clearTimeout),a.length=0}}(F,4)}return s(()=>{t("ChangeZone",B),t("LogLine",F),document.addEventListener("onOverlayStateUpdate",U)}),r(()=>{a("ChangeZone",B),a("LogLine",F),document.removeEventListener("onOverlayStateUpdate",U)}),(e,t)=>{const a=l;return g(),u(v,null,[T(C)||T(y)?(g(),d(a,{key:0,type:"primary",class:"test-btn",onClick:k},{default:p(()=>t[0]||(t[0]=[x(" 测试 ",-1)])),_:1,__:[0]})):c("",!0),m("main",null,[m("article",E,f((100*T(D).lbNow).toFixed(2))+"% ",1),m("article",A,[(g(!0),u(v,null,b(T(j),(e,t)=>(g(),u("p",{key:t,class:"anime","data-time":e.time}," +"+f(e.value)+"% ",9,h))),128))]),m("aside",L,f((100*T(D).lbExtraAll).toFixed(0))+"% ",1)])],64)}}}),[["__scopeId","data-v-bb1e52c6"]]);export{w as default};
