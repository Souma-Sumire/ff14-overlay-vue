import{ae as e,cn as t,as as s,af as o,a4 as n,d as a,cv as l,r as i,h as r,cw as c,i as u,bN as p,k as f,o as d,w as m,l as v,a as g,q as y,u as b,s as h,G as C,Q as x,n as k,t as I,a7 as S,c as T,F as L,v as _,P as w,aY as E,cj as H,am as M,an as N,al as B,be as j,bZ as z,bP as F,b as $,aa as q,ab as A,ca as O,cT as Z}from"./index-BlHK43-k.js";const P=["primary","success","info","warning","error"],U=e({customClass:{type:String,default:""},dangerouslyUseHTMLString:Boolean,duration:{type:Number,default:4500},icon:{type:s},id:{type:String,default:""},message:{type:o([String,Object,Function]),default:""},offset:{type:Number,default:0},onClick:{type:o(Function),default:()=>{}},onClose:{type:o(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...P,""],default:""},zIndex:Number,closeIcon:{type:s,default:t}}),W={destroy:()=>!0},D=a({name:"ElNotification"});var G=n(a({...D,props:U,emits:W,setup(e,{expose:t}){const s=e,{ns:o,zIndex:n}=l("notification"),{nextZIndex:a,currentZIndex:B}=n,j=i(!1);let z;const F=r(()=>{const e=s.type;return e&&c[s.type]?o.m(e):""}),$=r(()=>s.type&&c[s.type]||s.icon),q=r(()=>s.position.endsWith("right")?"right":"left"),A=r(()=>s.position.startsWith("top")?"top":"bottom"),O=r(()=>{var e;return{[A.value]:`${s.offset}px`,zIndex:null!=(e=s.zIndex)?e:B.value}});function Z(){s.duration>0&&({stop:z}=H(()=>{j.value&&U()},s.duration))}function P(){null==z||z()}function U(){j.value=!1}return u(()=>{Z(),a(),j.value=!0}),p(document,"keydown",function(e){switch(M(e)){case N.delete:case N.backspace:P();break;case N.esc:j.value&&U();break;default:Z()}}),t({visible:j,close:U}),(e,t)=>(d(),f(E,{name:b(o).b("fade"),onBeforeLeave:e.onClose,onAfterLeave:t=>e.$emit("destroy"),persisted:""},{default:m(()=>[v(g("div",{id:e.id,class:h([b(o).b(),e.customClass,b(q)]),style:y(b(O)),role:"alert",onMouseenter:P,onMouseleave:Z,onClick:e.onClick},[b($)?(d(),f(b(x),{key:0,class:h([b(o).e("icon"),b(F)])},{default:m(()=>[(d(),f(k(b($))))]),_:1},8,["class"])):C("v-if",!0),g("div",{class:h(b(o).e("group"))},[g("h2",{class:h(b(o).e("title")),textContent:I(e.title)},null,10,["textContent"]),v(g("div",{class:h(b(o).e("content")),style:y(e.title?void 0:{margin:0})},[S(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(d(),T(L,{key:1},[C(" Caution here, message could've been compromised, never use user's input as message "),g("p",{innerHTML:e.message},null,8,["innerHTML"])],2112)):(d(),T("p",{key:0},I(e.message),1))])],6),[[_,e.message]]),e.showClose?(d(),f(b(x),{key:0,class:h(b(o).e("closeBtn")),onClick:w(U,["stop"])},{default:m(()=>[(d(),f(k(e.closeIcon)))]),_:1},8,["class","onClick"])):C("v-if",!0)],2)],46,["id","onClick"]),[[_,j.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}}),[["__file","notification.vue"]]);const Q={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]};let Y=1;const J=function(e={},t){if(!B)return{close:()=>{}};(j(e)||z(e))&&(e={message:e});const s=e.position||"top-right";let o=e.offset||0;Q[s].forEach(({vm:e})=>{var t;o+=((null==(t=e.el)?void 0:t.offsetHeight)||0)+16}),o+=16;const n="notification_"+Y++,a=e.onClose,l={...e,offset:o,id:n,onClose:()=>{!function(e,t,s){const o=Q[t],n=o.findIndex(({vm:t})=>{var s;return(null==(s=t.component)?void 0:s.props.id)===e});if(-1===n)return;const{vm:a}=o[n];if(!a)return;null==s||s(a);const l=a.el.offsetHeight,i=t.split("-")[0];o.splice(n,1);const r=o.length;if(r<1)return;for(let c=n;c<r;c++){const{el:e,component:t}=o[c].vm,s=Number.parseInt(e.style[i],10)-l-16;t.props.offset=s}}(n,s,a)}};let i=document.body;F(e.appendTo)?i=e.appendTo:j(e.appendTo)&&(i=document.querySelector(e.appendTo)),F(i)||(i=document.body);const r=document.createElement("div"),c=$(G,l,q(l.message)?l.message:z(l.message)?()=>l.message:null);return c.appContext=A(t)?J._context:t,c.props.onDestroy=()=>{O(null,r)},O(c,r),Q[s].push({vm:c}),i.appendChild(r.firstElementChild),{close:()=>{c.component.exposed.visible.value=!1}}};P.forEach(e=>{J[e]=(t={},s)=>((j(t)||z(t))&&(t={message:t}),J({...t,type:e},s))}),J.closeAll=function(){for(const e of Object.values(Q))e.forEach(({vm:e})=>{e.component.exposed.visible.value=!1})},J.updateOffsets=function(e="top-right"){var t,s,o,n;let a=(null==(o=null==(s=null==(t=Q[e][0])?void 0:t.vm.component)?void 0:s.props)?void 0:o.offset)||0;for(const{vm:l}of Q[e])l.component.props.offset=a,a+=((null==(n=l.el)?void 0:n.offsetHeight)||0)+16},J._context=null;const K=Z(J,"$notify");export{K as E,U as a,P as b,W as n};
