import{_ as e}from"./ActWrapper-CKOYKGjK.js";import{d as t,f as s,h as a,i as r,bk as o,k as n,w as i,o as p,l as u,v as m,u as f,a as l,t as c}from"./index-NJNCsS38.js";import{U as d}from"./util-BSI8OlRX.js";import{N as g}from"./netregexes-DsAXea56.js";import{a as y,r as h}from"./overlay_plugin_api-DHbPkDtN.js";import{u as j}from"./useZone-C_JHo3J4.js";import{_}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./el-card-DFsC6cl8.js";import"./useDev-Dh6MKSuz.js";import"./useDemo-XMy1G9QA.js";import"./regexes-Blkj7yOl.js";import"./zoneInfo-Kvs06RCG.js";import"./zone_info-C8YMEhdS.js";import"./content_type-uhloenTS.js";const v=_(t({__name:"enmity",setup(t){const{zoneType:_}=j(),v=["4F","5B","2E7","729"],D={gainsEffect:g.gainsEffect({effectId:v}),losesEffect:g.losesEffect({effectId:v})},I=s({party:[],povCharID:"0",status:new Set}),C=["Savage","Extreme","Chaotic","Ultimate","DeepDungeonExtras","Dungeons","Raids","Trials","VCDungeonFinder","DeepDungeons","Guildhests","TreasureHunt"],E=a(()=>{if(!C.includes(_.value))return!1;const e=I.party.filter(e=>d.isTankJob(d.jobEnumToJob(e.job))),t=e.some(e=>e.id===I.povCharID);return!(0===e.length||1===I.party.length||!t)&&!e.some(e=>I.status.has(e.id))}),x=e=>{I.party=e.party.slice(),I.status.forEach(e=>{I.party.some(t=>t.id===e)||I.status.delete(e)})},b=e=>{I.povCharID=e.charID.toString(16).toUpperCase()},L=e=>{const t=D.gainsEffect.exec(e.rawLine);if(t){const e=t.groups?.targetId;return void(e&&I.status.add(e))}const s=D.losesEffect.exec(e.rawLine);if(s){const e=s.groups?.targetId;return void(e&&I.status.delete(e))}};return r(()=>{y("LogLine",L),y("PartyChanged",x),y("ChangePrimaryPlayer",b)}),o(()=>{h("LogLine",L),h("PartyChanged",x),h("ChangePrimaryPlayer",b)}),(t,s)=>{const a=e;return p(),n(a,null,{default:i(()=>[u(l("strong",null,c(t.$t("enmity.no_enmity_active")),513),[[m,f(E)]])]),_:1})}}}),[["__scopeId","data-v-d65949be"]]);export{v as default};
