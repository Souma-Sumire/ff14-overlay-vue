import{d as e,u as a,w as l,o,c as t,a as s,b as r,e as n,f as d,i as c,g as u,F as i,r as p,h as v,j as g,k as m,l as f,m as b,n as h,p as y,v as _,q as k,s as j,t as x,x as w,y as L,z as E,A as J,B as V}from"./vendor-vue-MSvGQJWD.js";import{u as z,a as T,b as O,c as U,U as $}from"./shared-core-BIIy0jrA.js";import{E as D,a as H,b as I,m as B,s as C,c as K,d as M,e as S}from"./vendor-element-plus-CsMNiL2J.js";const A=(e,a)=>{const l=e.__vccOpts||e;for(const[o,t]of a)l[o]=t;return l},F={class:"language-switcher"},W={class:"select-wrapper"},q=A(e({__name:"LanguageSwitcher",props:{teleported:{type:Boolean,default:!0}},setup(e){const g=e,{locale:m,availableLocales:f}=z(),b={zhCn:"简体中文",en:"English",ja:"日本語",zhTw:"繁體中文"},h=a("user-locale",m.value);return l(h,e=>{m.value=e}),o(()=>{m.value=h.value}),(e,a)=>{const l=H,o=D;return s(),t("div",F,[r("div",W,[a[1]||(a[1]=r("svg",{class:"globe-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("circle",{cx:"12",cy:"12",r:"10"}),r("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),r("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})],-1)),n(o,{modelValue:d(h),"onUpdate:modelValue":a[0]||(a[0]=e=>c(h)?h.value=e:null),size:"small",class:"language-select",teleported:g.teleported},{default:u(()=>[(s(!0),t(i,null,p(d(f),e=>(s(),v(l,{key:e,value:e,label:b[e]},null,8,["value","label"]))),128))]),_:1},8,["modelValue","teleported"])])])}}}),[["__scopeId","data-v-78419141"]]),G=A(e({__name:"ThemeToggle",props:{storageKey:{}},setup(e){const a=g({storageKey:e.storageKey}),l=f(a);return(e,o)=>{const r=I;return s(),t("button",{"aria-label":"Toggle Dark Mode",class:"theme-toggle",onClick:o[0]||(o[0]=e=>d(l)()),onKeyup:o[1]||(o[1]=m(e=>d(l)(),["enter"]))},[n(r,null,{default:u(()=>[d(a)?(s(),v(d(B),{key:0,class:"el-icon moon"})):(s(),v(d(C),{key:1,class:"el-icon sunny"}))]),_:1})],32)}}}),[["__scopeId","data-v-3c45c8c0"]]),N=A(e({__name:"ActWrapper",setup(e){const a=b("hash"),l=T(),o=O();return(e,n)=>{const c=K;return s(),t(i,null,[d(l)?h("",!0):(s(),v(c,{key:0,class:"act-not-ready"},{default:u(()=>[r("h1",null,x(e.$t("actWrapper.notReady")),1)]),_:1})),y(r("div",{style:j({zoom:d(a).scale?.toString(),opacity:d(a).opacity?.toString(),overflow:"hidden"})},[k(e.$slots,"default",{},void 0,!0),d(o)?k(e.$slots,"readme",{key:0},void 0,!0):h("",!0)],4),[[_,d(l)]])],64)}}}),[["__scopeId","data-v-2e855a48"]]),R={flex:"~ col",style:{position:"relative"}},P=A(e({__name:"DragJob",props:{party:{}},emits:["update"],setup(e,{emit:a}){const l=e,o=a,r=w(!1),v=U(),g=[{role:"tank",color:"blue"},{role:"healer",color:"green"},{role:"dps",color:"red"},{role:"crafter",color:"yellow"},{role:"gatherer",color:"purple"},{role:"none",color:"gray"}];const m=function(){const e={tank:$.isTankJob,healer:$.isHealerJob,dps:$.isDpsJob,crafter:$.isCraftingJob,gatherer:$.isGatheringJob};return Object.fromEntries(g.map(({role:a})=>[a,"none"===a?[]:$.getBattleJobs3().filter(e[a]).map($.jobToJobEnum).sort($.enumSortMethod)]))}(),f=Object.values(m).flat().map(e=>({name:$.jobToFullName($.jobEnumToJob(e)).simple1,job:e})),b=w((()=>{const e={};for(const a of g.map(e=>e.role))e[a]=f.filter(e=>m[a].includes(e.job)).sort((e,a)=>v.arr.indexOf(e.job)-v.arr.indexOf(a.job));return e})());function h(){v.arr=Object.values(b.value).flat().map(e=>e.job),o("update")}return(e,a)=>{const o=M;return s(),t("div",R,[n(o,{modelValue:d(r),"onUpdate:modelValue":a[0]||(a[0]=e=>c(r)?r.value=e:null),size:"small",style:{position:"absolute",top:"0.25rem",right:"0.25rem",background:"rgba(30, 30, 30, 0.33)",color:"white",padding:"0 3px",margin:"0","font-size":"12px",height:"1.5em","box-shadow":"0 0 2px black","z-index":"0"}},{default:u(()=>[L(x(e.$t("dragJob.freeMode")),1)]),_:1},8,["modelValue"]),(s(),t(i,null,p(g,(e,a)=>n(d(J),{key:a,modelValue:d(b)[e.role],"onUpdate:modelValue":a=>d(b)[e.role]=a,animation:150,"ghost-class":"ghost",class:"m-b-0.25 m-t-0.25 flex flex-row gap-0.25 rounded p-0",filter:".no-draggable","force-fallback":!0,onUpdate:h},{default:u(()=>[(s(!0),t(i,null,p(d(b)[e.role],a=>{return y((s(),t("div",{key:a.job,class:E((d(r)||(o=a.job,l.party.find(e=>e.job===o))?`draggable bg-${e.color} cursor-move`:"no-draggable bg-gray-700/50 opacity-75")+" rounded p-l-0.6 p-r-0.6 p-t-0 p-b-0.3 m-0 color-white")},x(a.name),3)),[[_,!!l.party.find(e=>36===e.job)||36!==a.job]]);var o}),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])),64))])}}}),[["__scopeId","data-v-092bd7a1"]]),Q={class:"upload select"},X={class:"upload text"},Y=A(e({__name:"TestLog",emits:["handleLine","beforeHandle","afterHandle"],setup(e,{emit:a}){const{t:l}=z(),n=a,d=w(null),c=w(null);async function u(e){c.value?.classList.remove("drag");const a=e.target.files;if(!a||0===a.length)return;n("beforeHandle");const o=S.service({fullscreen:!0,text:l("testLog.loading"),lock:!0,spinner:'<div style="width:0;height:0"></div>'});for(let l=0;l<a.length;l++){const e=a[l],o=await e.text();for(const a of o.split("\n"))n("handleLine",a)}o.close(),n("afterHandle"),c.value?.classList.remove("drag")}function i(e){e.preventDefault(),c.value?.classList.add("drag")}function p(e){e.preventDefault(),c.value?.classList.remove("drag")}return o(()=>{d.value?.addEventListener("change",u),c.value?.addEventListener("dragover",i),c.value?.addEventListener("dragleave",p)}),V(()=>{d.value?.removeEventListener("change",u),c.value?.removeEventListener("dragover",i),c.value?.removeEventListener("dragleave",p)}),(e,a)=>(s(),t("div",Q,[r("div",{ref_key:"select",ref:c,class:"upload-select"},[r("div",X,[a[0]||(a[0]=r("span",null,"+",-1)),r("p",null,x(e.$t("testLog.upload")),1)]),r("input",{ref_key:"input",ref:d,type:"file"},null,512)],512)]))}}),[["__scopeId","data-v-36beaa21"]]);export{A as _,G as a,q as b,N as c,P as d,Y as e};
