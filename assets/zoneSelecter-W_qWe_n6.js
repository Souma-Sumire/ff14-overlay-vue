import{d as e,a0 as a,a1 as l,b as t,a2 as s,a3 as o,a4 as n,h as i,c as d,o as r,G as c,k as u,u as p,P as v,w as h,a as f,K as m,s as g,Q as y,F as b,W as k,a5 as C,a6 as x,r as S,m as N,e as w,t as T,a7 as z,a8 as $,a9 as _,aa as E,ab as L,ac as V,ad as D,ae as j,af as B,ag as R,ah as F,ai as A,f as M,B as P,aj as O,i as q,ak as I,al as H,am as U,an as Z,ao as K,ap as W,aq as Q,ar as G,as as X,at as J,au as Y,av as ee,aw as ae,l as le,N as te,v as se,q as oe,ax as ne,n as ie,ay as de,az as re,aA as ce,aB as ue,aC as pe,aD as ve}from"./index-z92eqeNR.js";/* empty css                 */import{u as he,c as fe,a as me,b as ge,E as ye}from"./el-popper-DEczlFmQ.js";import{E as be,C as ke}from"./el-tag-CeYnNB8q.js";import{E as Ce}from"./el-checkbox-555tiTPv.js";import{E as xe}from"./el-radio-CRyXU9mr.js";import{u as Se,a as Ne}from"./useLang-oGJDzMTf.js";import{d as we}from"./content_type-uhloenTS.js";import{Z as Te}from"./zoneInfo-Kvs06RCG.js";import{u as ze,a as $e,b as _e,c as Ee}from"./use-form-common-props-BiXdWGU6.js";import{b as Le,C as Ve,U as De,d as je}from"./index-BoSjELe5.js";import{i as Be,f as Re,g as Fe}from"./focus-trap-CNe0MnD4.js";import{s as Ae}from"./vnode-DyT3iRJr.js";import{c as Me}from"./cloneDeep-BryD0pLE.js";import{E as Pe}from"./validator-CXajW8wL.js";import{t as Oe,E as qe}from"./el-select-6dM5WnUE.js";import{u as Ie,a as He}from"./index-CWC7qMe6.js";import{_ as Ue}from"./_plugin-vue_export-helper-BCo6x5W8.js";var Ze=1/0;const Ke=Symbol();var We=e({name:"NodeContent",props:{node:{type:Object,required:!0}},setup(e){const n=a("cascader-node"),{renderLabelFn:i}=l(Ke),{node:d}=e,{data:r,label:c}=d,u=()=>{const e=null==i?void 0:i({node:d,data:r});return(s(a=e)?a.every(({type:e})=>e===o):(null==a?void 0:a.type)===o)?c:null!=e?e:c;var a};return()=>t("span",{class:n.e("label")},[u()])}});const Qe=e({name:"ElCascaderNode"});var Ge=n(e({...Qe,props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:s}){const o=e,n=l(Ke),x=a("cascader-node"),S=i(()=>n.isHoverMenu),N=i(()=>n.config.multiple),w=i(()=>n.config.checkStrictly),T=i(()=>n.config.showPrefix),z=i(()=>{var e;return null==(e=n.checkedNodes[0])?void 0:e.uid}),$=i(()=>o.node.isDisabled),_=i(()=>o.node.isLeaf),E=i(()=>w.value&&!_.value||!$.value),L=i(()=>D(n.expandingNode)),V=i(()=>w.value&&n.checkedNodes.some(D)),D=e=>{var a;const{level:l,uid:t}=o.node;return(null==(a=null==e?void 0:e.pathNodes[l-1])?void 0:a.uid)===t},j=()=>{L.value||n.expandNode(o.node)},B=e=>{const{node:a}=o;e!==a.checked&&n.handleCheckChange(a,e)},R=()=>{n.lazyLoad(o.node,()=>{_.value||j()})},F=e=>{S.value&&(A(),!_.value&&s("expand",e))},A=()=>{const{node:e}=o;E.value&&!e.loading&&(e.loaded?j():R())},M=()=>{!_.value||$.value||w.value||N.value?(n.config.checkOnClickNode&&(N.value||w.value)||_.value&&n.config.checkOnClickLeaf)&&!$.value?P(!o.node.checked):S.value||A():O(!0)},P=e=>{w.value?(B(e),o.node.loaded&&j()):O(e)},O=e=>{o.node.loaded?(B(e),!w.value&&j()):R()};return(a,l)=>(r(),d("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!p(_),"aria-owns":p(_)?void 0:e.menuId,"aria-expanded":p(L),tabindex:p(E)?-1:void 0,class:g([p(x).b(),p(x).is("selectable",p(w)),p(x).is("active",e.node.checked),p(x).is("disabled",!p(E)),p(L)&&"in-active-path",p(V)&&"in-checked-path"]),onMouseenter:F,onFocus:F,onClick:M},[c(" prefix "),p(N)&&p(T)?(r(),u(p(Ce),{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:p($),onClick:v(()=>{},["stop"]),"onUpdate:modelValue":P},null,8,["model-value","indeterminate","disabled","onClick"])):p(w)&&p(T)?(r(),u(p(xe),{key:1,"model-value":p(z),label:e.node.uid,disabled:p($),"onUpdate:modelValue":P,onClick:v(()=>{},["stop"])},{default:h(()=>[c("\n        Add an empty element to avoid render label,\n        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485\n      "),f("span")]),_:1},8,["model-value","label","disabled","onClick"])):p(_)&&e.node.checked?(r(),u(p(y),{key:2,class:g(p(x).e("prefix"))},{default:h(()=>[t(p(m))]),_:1},8,["class"])):c("v-if",!0),c(" content "),t(p(We),{node:e.node},null,8,["node"]),c(" postfix "),p(_)?c("v-if",!0):(r(),d(b,{key:3},[e.node.loading?(r(),u(p(y),{key:0,class:g([p(x).is("loading"),p(x).e("postfix")])},{default:h(()=>[t(p(k))]),_:1},8,["class"])):(r(),u(p(y),{key:1,class:g(["arrow-right",p(x).e("postfix")])},{default:h(()=>[t(p(C))]),_:1},8,["class"]))],64))],42,["id","aria-haspopup","aria-owns","aria-expanded","tabindex"]))}}),[["__file","node.vue"]]);const Xe=e({name:"ElCascaderMenu"});var Je=n(e({...Xe,props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const s=e,o=$(),n=a("cascader-menu"),{t:v}=x(),f=ze();let m,C;const _=l(Ke),E=S(),L=i(()=>!s.nodes.length),V=i(()=>!_.initialLoaded),D=i(()=>`${f.value}-${s.index}`),j=e=>{m=e.target},B=e=>{if(_.isHoverMenu&&m&&E.value)if(m.contains(e.target)){R();const a=o.vnode.el,{left:l}=a.getBoundingClientRect(),{offsetWidth:t,offsetHeight:s}=a,n=e.clientX-l,i=m.offsetTop,d=i+m.offsetHeight;E.value.innerHTML=`\n          <path style="pointer-events: auto;" fill="transparent" d="M${n} ${i} L${t} 0 V${i} Z" />\n          <path style="pointer-events: auto;" fill="transparent" d="M${n} ${d} L${t} ${s} V${d} Z" />\n        `}else C||(C=window.setTimeout(F,_.config.hoverThreshold))},R=()=>{C&&(clearTimeout(C),C=void 0)},F=()=>{E.value&&(E.value.innerHTML="",R())};return(a,l)=>(r(),u(p(be),{key:p(D),tag:"ul",role:"menu",class:g(p(n).b()),"wrap-class":p(n).e("wrap"),"view-class":[p(n).e("list"),p(n).is("empty",p(L))],onMousemove:B,onMouseleave:F},{default:h(()=>{var l;return[(r(!0),d(b,null,N(e.nodes,e=>(r(),u(Ge,{key:e.uid,node:e,"menu-id":p(D),onExpand:j},null,8,["node","menu-id"]))),128)),p(V)?(r(),d("div",{key:0,class:g(p(n).e("empty-text"))},[t(p(y),{size:"14",class:g(p(n).is("loading"))},{default:h(()=>[t(p(k))]),_:1},8,["class"]),w(" "+T(p(v)("el.cascader.loading")),1)],2)):p(L)?(r(),d("div",{key:1,class:g(p(n).e("empty-text"))},[z(a.$slots,"empty",{},()=>[w(T(p(v)("el.cascader.noData")),1)])],2)):(null==(l=p(_))?void 0:l.isHoverMenu)?(r(),d(b,{key:2},[c(" eslint-disable-next-line vue/html-self-closing "),(r(),d("svg",{ref_key:"hoverZone",ref:E,class:g(p(n).e("hover-zone"))},null,2))],2112)):c("v-if",!0)]}),_:3},8,["class","wrap-class","view-class"]))}}),[["__file","menu.vue"]]);let Ye=0;class ea{constructor(e,a,l,t=!1){this.data=e,this.config=a,this.parent=l,this.root=t,this.uid=Ye++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:s,label:o,children:n}=a,i=e[n],d=(e=>{const a=[e];let{parent:l}=e;for(;l;)a.unshift(l),l=l.parent;return a})(this);this.level=t?0:l?l.level+1:1,this.value=e[s],this.label=e[o],this.pathNodes=d,this.pathValues=d.map(e=>e.value),this.pathLabels=d.map(e=>e.label),this.childrenData=i,this.children=(i||[]).map(e=>new ea(e,a,this)),this.loaded=!a.lazy||this.isLeaf||!_(i),this.text=""}get isDisabled(){const{data:e,parent:a,config:l}=this,{disabled:t,checkStrictly:s}=l;return(E(t)?t(e,this):!!e[t])||!s&&!!(null==a?void 0:a.isDisabled)}get isLeaf(){const{data:e,config:a,childrenData:l,loaded:t}=this,{lazy:o,leaf:n}=a,i=E(n)?n(e,this):e[n];return L(i)?!(o&&!t)&&!(s(l)&&l.length):!!i}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(e){const{childrenData:a,children:l}=this,t=new ea(e,this.config,this);return s(a)?a.push(e):this.childrenData=[e],l.push(t),t}calcText(e,a){const l=e?this.pathLabels.join(a):this.label;return this.text=l,l}broadcast(e){this.children.forEach(a=>{var l;a&&(a.broadcast(e),null==(l=a.onParentCheck)||l.call(a,e))})}emit(){var e;const{parent:a}=this;a&&(null==(e=a.onChildCheck)||e.call(a),a.emit())}onParentCheck(e){this.isDisabled||this.setCheckState(e)}onChildCheck(){const{children:e}=this,a=e.filter(e=>!e.isDisabled),l=!!a.length&&a.every(e=>e.checked);this.setCheckState(l)}setCheckState(e){const a=this.children.length,l=this.children.reduce((e,a)=>e+(a.checked?1:a.indeterminate?.5:0),0);this.checked=this.loaded&&this.children.filter(e=>!e.isDisabled).every(e=>e.loaded&&e.checked)&&e,this.indeterminate=this.loaded&&l!==a&&l>0}doCheck(e){if(this.checked===e)return;const{checkStrictly:a,multiple:l}=this.config;a||!l?this.checked=e:(this.broadcast(e),this.setCheckState(e),this.emit())}}const aa=(e,a)=>e.reduce((e,l)=>(l.isLeaf?e.push(l):(!a&&e.push(l),e=e.concat(aa(l.children,a))),e),[]);class la{constructor(e,a){this.config=a;const l=(e||[]).map(e=>new ea(e,this.config));this.nodes=l,this.allNodes=aa(l,!1),this.leafNodes=aa(l,!0)}getNodes(){return this.nodes}getFlattedNodes(e){return e?this.leafNodes:this.allNodes}appendNode(e,a){const l=a?a.appendChild(e):new ea(e,this.config);a||this.nodes.push(l),this.appendAllNodesAndLeafNodes(l)}appendNodes(e,a){e.length>0?e.forEach(e=>this.appendNode(e,a)):a&&a.isLeaf&&this.leafNodes.push(a)}appendAllNodesAndLeafNodes(e){this.allNodes.push(e),e.isLeaf&&this.leafNodes.push(e),e.children&&e.children.forEach(e=>{this.appendAllNodesAndLeafNodes(e)})}getNodeByValue(e,a=!1){if(V(e))return null;return this.getFlattedNodes(a).find(a=>D(a.value,e)||D(a.pathValues,e))||null}getSameNode(e){if(!e)return null;return this.getFlattedNodes(!1).find(({value:a,level:l})=>D(e.value,a)&&e.level===l)||null}}const ta=j({modelValue:{type:B([Number,String,Array,Object])},options:{type:B(Array),default:()=>[]},props:{type:B(Object),default:()=>({})}}),sa={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:R,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500,checkOnClickNode:!1,checkOnClickLeaf:!0,showPrefix:!0},oa=j({...ta,border:{type:Boolean,default:!0},renderLabel:{type:Function}}),na=e=>!0,ia={[De]:na,[Ve]:na,close:()=>!0,"expand-change":e=>e},da=e=>i(()=>({...sa,...e.props})),ra=e=>{if(!e)return 0;const a=e.id.split("-");return Number(a[a.length-2])},ca=e({name:"ElCascaderPanel",inheritAttrs:!1});const ua=K(n(e({...ca,props:oa,emits:ia,setup(e,{expose:l,emit:t}){const s=e;let o=!1;const n=a("cascader"),c=da(s),v=F();let f;const m=S(!0),y=S(!1),k=S([]),C=S(),x=S([]),w=S(),T=S([]),$=i(()=>"hover"===c.value.expandTrigger),E=i(()=>s.renderLabel||v.default),L=()=>{const{options:e}=s,a=c.value;o=!1,f=new la(e,a),x.value=[f.getNodes()],a.lazy&&_(s.options)?(m.value=!1,V(void 0,e=>{e&&(f=new la(e,a),x.value=[f.getNodes()]),m.value=!0,G(!1,!0)})):G(!1,!0)},V=(e,a)=>{const l=c.value;(e=e||new ea({},l,void 0,!0)).loading=!0;l.lazyLoad(e,l=>{const t=e,s=t.root?null:t;t.loading=!1,t.loaded=!0,t.childrenData=t.childrenData||[],l&&(null==f||f.appendNodes(l,s)),l&&(null==a||a(l)),0===e.level&&(y.value=!0)},()=>{e.loading=!1,e.loaded=!1,0===e.level&&(m.value=!0)})},j=(e,a)=>{var l;const{level:s}=e,o=x.value.slice(0,s);let n;e.isLeaf?n=e.pathNodes[s-2]:(n=e,o.push(e.children)),(null==(l=w.value)?void 0:l.uid)!==(null==n?void 0:n.uid)&&(w.value=e,x.value=o,!a&&t("expand-change",(null==e?void 0:e.pathValues)||[]))},B=(e,a,l=!0)=>{const{checkStrictly:s,multiple:n}=c.value,i=T.value[0];o=!0,!n&&(null==i||i.doCheck(!1)),e.doCheck(a),Q(),l&&!n&&!s&&t("close"),!l&&!n&&R(e)},R=e=>{e&&(e=e.parent,R(e),e&&j(e))},K=e=>null==f?void 0:f.getFlattedNodes(e),W=e=>{var a;return null==(a=K(e))?void 0:a.filter(({checked:e})=>!1!==e)},Q=()=>{var e;const{checkStrictly:a,multiple:l}=c.value,t=((e,a)=>{const l=a.slice(0),t=l.map(e=>e.uid),s=e.reduce((e,a)=>{const s=t.indexOf(a.uid);return s>-1&&(e.push(a),l.splice(s,1),t.splice(s,1)),e},[]);return s.push(...l),s})(T.value,W(!a)),s=t.map(e=>e.valueByOption);T.value=t,C.value=l?s:null!=(e=s[0])?e:null},G=(e=!1,a=!1)=>{const{modelValue:l}=s,{lazy:t,multiple:n,checkStrictly:i}=c.value,d=!i;var r;if(m.value&&!o&&(a||!D(l,C.value)))if(t&&!e){const e=he(null!=(r=fe(l))&&r.length?Le(r,Ze):[]).map(e=>null==f?void 0:f.getNodeByValue(e)).filter(e=>!!e&&!e.loaded&&!e.loading);e.length?e.forEach(e=>{V(e,()=>G(!1,a))}):G(!0,a)}else{const e=n?fe(l):[l],t=he(e.map(e=>null==f?void 0:f.getNodeByValue(e,d)));X(t,a),C.value=Me(null!=l?l:void 0)}},X=(e,a=!0)=>{const{checkStrictly:l}=c.value,t=T.value,s=e.filter(e=>!!e&&(l||e.isLeaf)),o=null==f?void 0:f.getSameNode(w.value),n=a&&o||s[0];n?n.pathNodes.forEach(e=>j(e,!0)):w.value=void 0,t.forEach(e=>e.doCheck(!1)),M(s).forEach(e=>e.doCheck(!0)),T.value=s,I(J)},J=()=>{H&&k.value.forEach(e=>{const a=null==e?void 0:e.$el;if(a){const e=a.querySelector(`.${n.namespace.value}-scrollbar__wrap`),l=a.querySelector(`.${n.b("node")}.${n.is("active")}:last-child`)||a.querySelector(`.${n.b("node")}.in-active-path`);Ae(e,l)}})},Y=e=>{const a=e.target,l=U(e);switch(l){case Z.up:case Z.down:{e.preventDefault();const t=l===Z.up?-1:1;Re(Fe(a,t,`.${n.b("node")}[tabindex="-1"]`));break}case Z.left:{e.preventDefault();const l=k.value[ra(a)-1],t=null==l?void 0:l.$el.querySelector(`.${n.b("node")}[aria-expanded="true"]`);Re(t);break}case Z.right:{e.preventDefault();const l=k.value[ra(a)+1],t=null==l?void 0:l.$el.querySelector(`.${n.b("node")}[tabindex="-1"]`);Re(t);break}case Z.enter:case Z.numpadEnter:(e=>{if(!e)return;const a=e.querySelector("input");a?a.click():Be(e)&&e.click()})(a)}};A(Ke,M({config:c,expandingNode:w,checkedNodes:T,isHoverMenu:$,initialLoaded:m,renderLabelFn:E,lazyLoad:V,expandNode:j,handleCheckChange:B})),P(c,(e,a)=>{D(e,a)||L()},{immediate:!0}),P(()=>s.options,L,{deep:!0}),P(()=>s.modelValue,()=>{o=!1,G()},{deep:!0}),P(()=>C.value,e=>{D(e,s.modelValue)||(t(De,e),t(Ve,e))});return O(()=>k.value=[]),q(()=>!_(s.modelValue)&&G()),l({menuList:k,menus:x,checkedNodes:T,handleKeyDown:Y,handleCheckChange:B,getFlattedNodes:K,getCheckedNodes:W,clearCheckedNodes:()=>{T.value.forEach(e=>e.doCheck(!1)),Q(),x.value=x.value.slice(0,1),w.value=void 0,t("expand-change",[])},calculateCheckedValue:Q,scrollToExpandingNode:J,loadLazyRootNodes:()=>{y.value||L()}}),(e,a)=>(r(),d("div",{class:g([p(n).b("panel"),p(n).is("bordered",e.border)]),onKeydown:Y},[(r(!0),d(b,null,N(x.value,(a,l)=>(r(),u(Je,{key:l,ref_for:!0,ref:e=>k.value[l]=e,index:l,nodes:[...a]},{empty:h(()=>[z(e.$slots,"empty")]),_:2},1032,["index","nodes"]))),128))],34))}}),[["__file","index.vue"]])),pa=j({...ta,size:J,placeholder:String,disabled:Boolean,clearable:Boolean,clearIcon:{type:X,default:G},filterable:Boolean,filterMethod:{type:B(Function),default:(e,a)=>e.text.includes(a)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:Boolean,maxCollapseTagsTooltipHeight:{type:[String,Number]},debounce:{type:Number,default:300},beforeFilter:{type:B(Function),default:()=>!0},placement:{type:B(String),values:ge,default:"bottom-start"},fallbackPlacements:{type:B(Array),default:["bottom-start","bottom","top-start","top","right","left"]},popperClass:me.popperClass,popperStyle:me.popperStyle,teleported:me.teleported,effect:{type:B(String),default:"light"},tagType:{...Oe.type,default:"info"},tagEffect:{...Oe.effect,default:"light"},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},showCheckedStrategy:{type:String,values:["parent","child"],default:"child"},checkOnClickNode:Boolean,showPrefix:{type:Boolean,default:!0},...Q}),va=e=>!0,ha={[De]:va,[Ve]:va,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,visibleChange:e=>W(e),expandChange:e=>!!e,removeTag:e=>!!e},fa=e({name:"ElCascader"});const ma=K(n(e({...fa,props:pa,emits:ha,setup(e,{expose:l,emit:s}){const o=e,n={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:e})=>{const{modifiersData:a,placement:l}=e;["right","left","bottom","top"].includes(l)||a.arrow&&(a.arrow.x=35)},requires:["arrow"]}]},k=Y();let C=0,w=0;const $=a("cascader"),_=a("input"),{t:E}=x(),{formItem:L}=$e(),V=_e(),{valueOnClear:D}=ee(o),{isComposing:j,handleComposition:B}=Ie({afterComposition(e){var a;const l=null==(a=e.target)?void 0:a.value;ya(l)}}),R=S(),F=S(),A=S(),M=S(),O=S(),K=S(),W=S(!1),Q=S(!1),G=S(!1),X=S(""),J=S(""),he=S([]),fe=S([]),me=i(()=>o.props.multiple?o.collapseTags?he.value.slice(0,o.maxCollapseTags):he.value:[]),ge=i(()=>o.props.multiple&&o.collapseTags?he.value.slice(o.maxCollapseTags):[]),Ce=i(()=>k.style),xe=i(()=>{var e;return null!=(e=o.placeholder)?e:E("el.cascader.placeholder")}),Se=i(()=>J.value||he.value.length>0||j.value?"":xe.value),Ne=Ee(),we=i(()=>"small"===Ne.value?"small":"default"),Te=i(()=>!!o.props.multiple),ze=i(()=>!o.filterable||Te.value),Le=i(()=>Te.value?J.value:X.value),Be=i(()=>{var e;return(null==(e=O.value)?void 0:e.checkedNodes)||[]}),{wrapperRef:Ae,isFocused:Oe,handleBlur:Ue}=He(A,{disabled:V,beforeBlur(e){var a,l;return(null==(a=R.value)?void 0:a.isFocusInsideContent(e))||(null==(l=F.value)?void 0:l.isFocusInsideContent(e))},afterBlur(){var e;o.validateEvent&&(null==(e=null==L?void 0:L.validate)||e.call(L,"blur").catch(e=>je()))}}),Ze=i(()=>!(!o.clearable||V.value||G.value||!Q.value&&!Oe.value)&&!!Be.value.length),Ke=i(()=>{const{showAllLevels:e,separator:a}=o,l=Be.value;return l.length?Te.value?"":l[0].calcText(e,a):""}),We=i(()=>(null==L?void 0:L.validateState)||""),Qe=i({get:()=>Me(o.modelValue),set(e){const a=null!=e?e:D.value;s(De,a),s(Ve,a),o.validateEvent&&(null==L||L.validate("change").catch(e=>je()))}}),Ge=i(()=>[$.b(),$.m(Ne.value),$.is("disabled",V.value),k.class]),Xe=i(()=>[_.e("icon"),"icon-arrow-down",$.is("reverse",W.value)]),Je=i(()=>$.is("focus",Oe.value)),Ye=i(()=>{var e,a;return null==(a=null==(e=R.value)?void 0:e.popperRef)?void 0:a.contentRef}),ea=e=>{if(Oe.value){const a=new FocusEvent("blur",e);Ue(a)}aa(!1)},aa=e=>{var a,l,t;V.value||(e=null!=e?e:!W.value)!==W.value&&(W.value=e,null==(l=null==(a=A.value)?void 0:a.input)||l.setAttribute("aria-expanded",`${e}`),e?(la(),I(null==(t=O.value)?void 0:t.scrollToExpandingNode)):o.filterable&&va(),s("visibleChange",e))},la=()=>{I(()=>{var e;null==(e=R.value)||e.updatePopper()})},ta=()=>{G.value=!1},sa=e=>{var a;const l=e.node;l.doCheck(!1),null==(a=O.value)||a.calculateCheckedValue(),s("removeTag",l.valueByOption)},oa=()=>{var e,a;const{filterMethod:l,showAllLevels:t,separator:s}=o,n=null==(a=null==(e=O.value)?void 0:e.getFlattedNodes(!o.props.checkStrictly))?void 0:a.filter(e=>!e.isDisabled&&(e.calcText(t,s),l(e,Le.value)));Te.value&&he.value.forEach(e=>{e.hitState=!1}),G.value=!0,fe.value=n,la()},na=()=>{var e;let a;a=G.value&&K.value?K.value.$el.querySelector(`.${$.e("suggestion-item")}`):null==(e=O.value)?void 0:e.$el.querySelector(`.${$.b("node")}[tabindex="-1"]`),a&&(a.focus(),!G.value&&a.click())},ia=()=>{var e,a;const l=null==(e=A.value)?void 0:e.input,t=M.value,s=null==(a=K.value)?void 0:a.$el;if(H&&l){if(s){s.querySelector(`.${$.e("suggestion-list")}`).style.minWidth=`${l.offsetWidth}px`}if(t){const{offsetHeight:e}=t,a=he.value.length>0?Math.max(e,C)-2+"px":`${C}px`;l.style.height=a,la()}}},da=e=>{var a;return null==(a=O.value)?void 0:a.getCheckedNodes(e)},ra=e=>{la(),s("expandChange",e)},ca=e=>{if(j.value)return;switch(U(e)){case Z.enter:case Z.numpadEnter:aa();break;case Z.down:aa(!0),I(na),e.preventDefault();break;case Z.esc:!0===W.value&&(e.preventDefault(),e.stopPropagation(),aa(!1));break;case Z.tab:aa(!1)}},pa=()=>{var e;null==(e=O.value)||e.clearCheckedNodes(),!W.value&&o.filterable&&va(),aa(!1),s("clear")},va=()=>{const{value:e}=Ke;X.value=e,J.value=e},ha=e=>{const a=e.target,l=U(e);switch(l){case Z.up:case Z.down:{e.preventDefault();const t=l===Z.up?-1:1;Re(Fe(a,t,`.${$.e("suggestion-item")}[tabindex="-1"]`));break}case Z.enter:case Z.numpadEnter:a.click()}},fa=()=>{const e=he.value[he.value.length-1];w=J.value?0:w+1,!e||!w||o.collapseTags&&he.value.length>1||(e.hitState?sa(e):e.hitState=!0)},ma=i(()=>o.debounce),ga=ue(()=>{const{value:e}=Le;if(!e)return;const a=o.beforeFilter(e);ve(a)?a.then(oa).catch(()=>{}):!1!==a?oa():ta()},ma),ya=(e,a)=>{!W.value&&aa(!0),(null==a?void 0:a.isComposing)||(e?ga():ta())},ba=e=>Number.parseFloat(pe(_.cssVarName("input-height"),e).value)-2;return P(G,la),P([Be,V,()=>o.collapseTags,()=>o.maxCollapseTags],()=>{if(!Te.value)return;const e=(()=>{switch(o.showCheckedStrategy){case"child":return Be.value;case"parent":{const e=da(!1),a=e.map(e=>e.value);return e.filter(e=>!e.parent||!a.includes(e.parent.value))}default:return[]}})(),a=[];e.forEach(e=>a.push((e=>{const{showAllLevels:a,separator:l}=o;return{node:e,key:e.uid,text:e.calcText(a,l),hitState:!1,closable:!V.value&&!e.isDisabled}})(e))),he.value=a}),P(he,()=>{I(()=>ia())}),P(Ne,async()=>{await I();const e=A.value.input;C=ba(e)||C,ia()}),P(Ke,va,{immediate:!0}),P(()=>W.value,e=>{var a;e&&o.props.lazy&&o.props.lazyLoad&&(null==(a=O.value)||a.loadLazyRootNodes())}),q(()=>{const e=A.value.input,a=ba(e);C=e.offsetHeight||a,ae(e,ia)}),l({getCheckedNodes:da,cascaderPanelRef:O,togglePopperVisible:aa,contentRef:Ye,presentText:Ke}),(e,a)=>(r(),u(p(ye),{ref_key:"tooltipRef",ref:R,visible:W.value,teleported:e.teleported,"popper-class":[p($).e("dropdown"),e.popperClass],"popper-style":e.popperStyle,"popper-options":n,"fallback-placements":e.fallbackPlacements,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:e.placement,transition:`${p($).namespace.value}-zoom-in-top`,effect:e.effect,pure:"",persistent:e.persistent,onHide:ta},{default:h(()=>[le((r(),d("div",{ref_key:"wrapperRef",ref:Ae,class:g(p(Ge)),style:oe(p(Ce)),onClick:()=>aa(!p(ze)||void 0),onKeydown:ca,onMouseenter:e=>Q.value=!0,onMouseleave:e=>Q.value=!1},[t(p(Pe),{ref_key:"inputRef",ref:A,modelValue:X.value,"onUpdate:modelValue":e=>X.value=e,placeholder:p(Se),readonly:p(ze),disabled:p(V),"validate-event":!1,size:p(Ne),class:g(p(Je)),tabindex:p(Te)&&e.filterable&&!p(V)?-1:void 0,onCompositionstart:p(B),onCompositionupdate:p(B),onCompositionend:p(B),onInput:ya},ne({suffix:h(()=>[p(Ze)?(r(),u(p(y),{key:"clear",class:g([p(_).e("icon"),"icon-circle-close"]),onClick:v(pa,["stop"])},{default:h(()=>[(r(),u(ie(e.clearIcon)))]),_:1},8,["class","onClick"])):(r(),u(p(y),{key:"arrow-down",class:g(p(Xe)),onClick:v(e=>aa(),["stop"])},{default:h(()=>[t(p(de))]),_:1},8,["class","onClick"]))]),_:2},[e.$slots.prefix?{name:"prefix",fn:h(()=>[z(e.$slots,"prefix")])}:void 0]),1032,["modelValue","onUpdate:modelValue","placeholder","readonly","disabled","size","class","tabindex","onCompositionstart","onCompositionupdate","onCompositionend"]),p(Te)?(r(),d("div",{key:0,ref_key:"tagWrapper",ref:M,class:g([p($).e("tags"),p($).is("validate",Boolean(p(We)))])},[z(e.$slots,"tag",{data:he.value,deleteTag:sa},()=>[(r(!0),d(b,null,N(p(me),a=>(r(),u(p(qe),{key:a.key,type:e.tagType,size:p(we),effect:e.tagEffect,hit:a.hitState,closable:a.closable,"disable-transitions":"",onClose:e=>sa(a)},{default:h(()=>[f("span",null,T(a.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))),128))]),e.collapseTags&&he.value.length>e.maxCollapseTags?(r(),u(p(ye),{key:0,ref_key:"tagTooltipRef",ref:F,disabled:W.value||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom","popper-class":e.popperClass,"popper-style":e.popperStyle,effect:e.effect,persistent:e.persistent},{default:h(()=>[t(p(qe),{closable:!1,size:p(we),type:e.tagType,effect:e.tagEffect,"disable-transitions":""},{default:h(()=>[f("span",{class:g(p($).e("tags-text"))}," + "+T(he.value.length-e.maxCollapseTags),3)]),_:1},8,["size","type","effect"])]),content:h(()=>[t(p(be),{"max-height":e.maxCollapseTagsTooltipHeight},{default:h(()=>[f("div",{class:g(p($).e("collapse-tags"))},[(r(!0),d(b,null,N(p(ge),(a,l)=>(r(),d("div",{key:l,class:g(p($).e("collapse-tag"))},[(r(),u(p(qe),{key:a.key,class:"in-tooltip",type:e.tagType,size:p(we),effect:e.tagEffect,hit:a.hitState,closable:a.closable,"disable-transitions":"",onClose:e=>sa(a)},{default:h(()=>[f("span",null,T(a.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))],2))),128))],2)]),_:1},8,["max-height"])]),_:1},8,["disabled","popper-class","popper-style","effect","persistent"])):c("v-if",!0),e.filterable&&!p(V)?le((r(),d("input",{key:1,"onUpdate:modelValue":e=>J.value=e,type:"text",class:g(p($).e("search-input")),placeholder:p(Ke)?"":p(xe),onInput:e=>ya(J.value,e),onClick:v(e=>aa(!0),["stop"]),onKeydown:re(fa,["delete"]),onCompositionstart:p(B),onCompositionupdate:p(B),onCompositionend:p(B)},null,42,["onUpdate:modelValue","placeholder","onInput","onClick","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend"])),[[ce,J.value]]):c("v-if",!0)],2)):c("v-if",!0)],46,["onClick","onMouseenter","onMouseleave"])),[[p(ke),ea,p(Ye)]])]),content:h(()=>[e.$slots.header?(r(),d("div",{key:0,class:g(p($).e("header")),onClick:v(()=>{},["stop"])},[z(e.$slots,"header")],10,["onClick"])):c("v-if",!0),le(t(p(ua),{ref_key:"cascaderPanelRef",ref:O,modelValue:p(Qe),"onUpdate:modelValue":e=>te(Qe)?Qe.value=e:null,options:e.options,props:o.props,border:!1,"render-label":e.$slots.default,onExpandChange:ra,onClose:a=>e.$nextTick(()=>aa(!1))},{empty:h(()=>[z(e.$slots,"empty")]),_:3},8,["modelValue","onUpdate:modelValue","options","props","render-label","onClose"]),[[se,!G.value]]),e.filterable?le((r(),u(p(be),{key:1,ref_key:"suggestionPanel",ref:K,tag:"ul",class:g(p($).e("suggestion-panel")),"view-class":p($).e("suggestion-list"),onKeydown:ha},{default:h(()=>[fe.value.length?(r(!0),d(b,{key:0},N(fe.value,a=>(r(),d("li",{key:a.uid,class:g([p($).e("suggestion-item"),p($).is("checked",a.checked)]),tabindex:-1,onClick:e=>(e=>{var a,l;const{checked:t}=e;Te.value?null==(a=O.value)||a.handleCheckChange(e,!t,!1):(!t&&(null==(l=O.value)||l.handleCheckChange(e,!0,!1)),aa(!1))})(a)},[z(e.$slots,"suggestion-item",{item:a},()=>[f("span",null,T(a.text),1),a.checked?(r(),u(p(y),{key:0},{default:h(()=>[t(p(m))]),_:1})):c("v-if",!0)])],10,["onClick"]))),128)):z(e.$slots,"empty",{key:1},()=>[f("li",{class:g(p($).e("empty-text"))},T(p(E)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[se,G.value]]):c("v-if",!0),e.$slots.footer?(r(),d("div",{key:2,class:g(p($).e("footer")),onClick:v(()=>{},["stop"])},[z(e.$slots,"footer")],10,["onClick"])):c("v-if",!0)]),_:3},8,["visible","teleported","popper-class","popper-style","fallback-placements","placement","transition","effect","persistent"]))}}),[["__file","cascader.vue"]])),ga=Ue(e({__name:"zoneSelecter",props:{selectZone:{type:String,default:"",required:!0},width:{type:String,default:"30em"},size:{type:String,default:"small"},clearable:{type:Boolean,default:!1},placeholder:{type:String,default:"选择区域"},showAllLevels:{type:Boolean,default:!0},border:{type:Boolean,default:!0}},emits:["update:selectZone"],setup(e,{emit:a}){let l=null,t=null;const{t:s,locale:o,setLang:n}=Se(),d=i(()=>function(e,a){if(l&&t===a)return l;t=a;const s=[{type:we.Dungeons,label:e("zoneSelect.dungeons")},{type:we.Trials,label:e("zoneSelect.trials")},{type:we.Raids,label:e("zoneSelect.raids")},{type:we.ChaoticAllianceRaid,label:e("zoneSelect.chaoticAllianceRaid")},{type:we.UltimateRaids,label:e("zoneSelect.ultimateRaids")},{type:we.VCDungeonFinder,label:e("zoneSelect.vcDungeonFinder")},{type:we.DeepDungeonExtras,label:e("zoneSelect.deepDungeonExtras")},{type:we.DeepDungeons,label:e("zoneSelect.deepDungeons")},{type:we.DisciplesOfTheLand,label:e("zoneSelect.disciplesOfTheLand")},{type:we.Eureka,label:e("zoneSelect.eureka")},{type:we.SaveTheQueen,label:e("zoneSelect.saveTheQueen")},{type:we.OccultCrescent,label:e("zoneSelect.occultCrescent")}],o=[];return s.forEach(a=>{a.type===we.Trials?o.push({label:a.label,value:we.Trials,children:[{label:e("zoneSelect.trialExtreme"),value:"歼殛战",children:[]},{label:e("zoneSelect.trialUnreal"),value:"幻巧战",children:[]},{label:e("zoneSelect.trialNormal"),value:"歼灭战",children:[]}]}):a.type===we.Raids?o.push({label:a.label,value:we.Raids,children:[{label:e("zoneSelect.raidSavage"),value:"零式",children:[]},{label:e("zoneSelect.raidNormal"),value:"普通",children:[]}]}):o.push({label:a.label,value:a.type,children:[]})}),Object.entries(Te).map(([e,a])=>({id:e,...a})).sort((e,a)=>e.exVersion!==a.exVersion?a.exVersion-e.exVersion:e.contentType===we.Raids&&a.contentType===we.Raids&&a.name.ja&&e.name.ja?e.name.ja.localeCompare(a.name.ja):Number(e.id)-Number(a.id)).filter(e=>!e.name.en.startsWith("(")&&e.contentType&&s.some(a=>a.type===e.contentType)).forEach(e=>{const a=e.id,l=`[${+e.exVersion+2}.0] `+Ne(e.name);if(e.contentType===we.Trials){const t=o.find(e=>e.value===we.Trials);if(!t)return;let s="歼灭战";e.name.en.includes("(Extreme)")||e.name.ja?.startsWith("極")||e.name.fr?.includes("(extrême)")?s="歼殛战":e.name.en.includes("(Unreal)")&&(s="幻巧战");const n=t.children.find(e=>e.value===s);n&&n.children.push({value:a,label:l})}else if(e.contentType===we.Raids){const t=o.find(e=>e.value===we.Raids);if(!t)return;const s=e.name.en.includes("(Savage)")?"零式":"普通",n=t.children.find(e=>e.value===s);n&&n.children.push({value:a,label:l})}else{const t=o.find(a=>a.value===e.contentType);t&&t.children.push({value:a,label:l})}}),o.push({label:e("zoneSelect.uncategorized"),value:"0"}),l=o.sort((e,a)=>{const l=s.findIndex(a=>a.label===e.label),t=s.findIndex(e=>e.label===a.label);return(-1===l?999:l)-(-1===t?999:t)}),l}(s,o.value)),c=e,v=a,h=S(c.selectZone);return P(h,e=>v("update:selectZone",e)),P(()=>c.selectZone,e=>h.value=e),q(()=>{n("zhCn"),l=null,t=null}),(e,a)=>{const l=ma;return r(),u(l,{placeholder:c.placeholder,modelValue:p(h),"onUpdate:modelValue":a[0]||(a[0]=e=>te(h)?h.value=e:null),options:p(d),"show-all-levels":c.showAllLevels,props:{emitPath:!1,expandTrigger:"click"},style:oe({width:c.width}),size:c.size,filterable:"",clearable:c.clearable,class:g({"no-border":!c.border})},null,8,["placeholder","modelValue","options","show-all-levels","style","size","clearable","class"])}}}),[["__scopeId","data-v-6d49aacb"]]);export{Ke as C,sa as D,ma as E,ga as _,pa as a,ta as b,ha as c,ia as d,oa as e,ua as f,da as u};
