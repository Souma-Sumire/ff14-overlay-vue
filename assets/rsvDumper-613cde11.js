import"./index-1013f9d7.js";/* empty css                   *//* empty css                        *//* empty css                   *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css               *//* empty css                    */import{_ as e}from"./ThemeToggle-739a1f1f.js";import{d as t}from"./index-bc46afe1.js";import{V as o,z as s,h as l,K as a,y as r,P as n}from"./element-plus-31eb5454.js";import{t as i,r as p,v as u,x as c,A as d,M as m,D as f,E as h,J as v,K as x}from"./vue-vendor-e9f6d682.js";import{_}from"./_plugin-vue_export-helper-6a8c15be.js";const g={class:"p-6 min-h-screen"},b={style:{position:"absolute",top:"2em",right:"2em"}},j={class:"bg-black text-green-400 p-3 rounded text-xs overflow-auto"},w=_(i({__name:"rsvDumper",setup(i){t();const _=p([]),w=p(!1),y=p("");async function D(e){const t=e.raw,o=(await t.text()).split(/\r?\n/);_.value=[];for(const s of o){const e=s.split("|");if("252"===e[0]){const t=V(e.slice(3,-2));k(t,(new TextEncoder).encode("_rsv_"))&&_.value.push(C(t.slice(30)))}}}function V(e){const t=[];for(const o of e){const e=Number.parseInt(o,16)>>>0;t.push(255&e,e>>8&255,e>>16&255,e>>24&255)}return new Uint8Array(t)}function k(e,t){const o=e.length-t.length;for(let s=0;s<=o;s++){let o=!0;for(let l=0;l<t.length;l++)if(e[s+l]!==t[l]){o=!1;break}if(o)return!0}return!1}function C(e){return{str1:S(e.slice(2)),str2:S(e.slice(50)),hexDump:R(e)}}function S(e){const t=e.indexOf(0),o=-1!==t?e.slice(0,t):e;return new TextDecoder("utf-8").decode(o)}function R(e,t=16){const o="0123456789ABCDEF",s=[];for(let l=0;l<e.length;l+=t){let a="",r="";for(let s=0;s<t;s++)if(l+s<e.length){const t=e[l+s];a+=`${o[t>>4]+o[15&t]} `,r+=t>=32&&t<127?String.fromCharCode(t):"."}else a+="   ",r+=" ";s.push(`${a} ${r}`)}return s.join("\n")}return(t,i)=>{const p=e,V=o,k=n,C=s,S=l,R=r,T=a;return c(),u("div",g,[i[3]||(i[3]=d("h1",{class:"text-2xl font-bold mb-4"}," FFXIV RSV Dumper ",-1)),d("span",b,[m(p)]),m(V,{drag:"",action:"","auto-upload":!1,"show-file-list":!1,accept:".log,.txt",class:"upload-box",onChange:D},{default:h(()=>i[1]||(i[1]=[d("i",{class:"el-icon-upload"},null,-1),d("div",{class:"el-upload__text"},[v(" 拖拽日志文件到此处或 "),d("em",null,"点击上传")],-1)])),_:1,__:[1]}),_.value.length?(c(),f(R,{key:1,data:_.value,stripe:"",style:{width:"100%","margin-top":"20px"},border:""},{default:h(()=>[m(C,{prop:"str1",label:"RSV Data 1",width:"400"}),m(C,{prop:"str2",label:"RSV Data 2"}),m(C,{label:"操作",width:"150"},{default:h(e=>[m(S,{size:"small",type:"primary",onClick:t=>{return o=e.row,y.value=o.hexDump,void(w.value=!0);var o}},{default:h(()=>i[2]||(i[2]=[v(" 查看 HexDump ")])),_:2,__:[2]},1032,["onClick"])]),_:1})]),_:1},8,["data"])):(c(),f(k,{key:0,description:"请上传 act.log 文件",class:"mt-6"})),m(T,{modelValue:w.value,"onUpdate:modelValue":i[0]||(i[0]=e=>w.value=e),title:"HexDump 原始数据",width:"50%","append-to-body":!0},{default:h(()=>[d("pre",j,x(y.value)+"\n      ",1)]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-40f6faae"]]);export{w as default};
