import{X as e,an as t,aw as a,O as o,P as n,az as l,ao as s,a1 as i,d as r,a2 as u,S as p,g as d,s as c,aF as f,r as m,b$ as v,c0 as x,c1 as g,aV as h,a5 as y,U as b,W as w,h as S,ag as C,c as z,o as k,z as E,F as I,a as P,q as F,u as $,I as B,j as N,w as V,m as _,E as j,aP as M,b as R,a8 as H,A as L,Q as O,t as T,p as W,b4 as A,_ as U,Z as K,ar as Q}from"./index-B-PvB7wX.js";import{U as q,u as X,d as Y,I as Z,C as D}from"./index-Di3T34ib.js";import{u as G}from"./index-CCT2n7Dr.js";import{b as J,c as ee,a as te,d as ae}from"./use-form-common-props-CD3HJO6U.js";import{a as oe,u as ne}from"./index-EFS40U7F.js";let le;const se={height:"0",visibility:"hidden",overflow:e&&/firefox/i.test(window.navigator.userAgent)?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},ie=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function re(e,a=1,o){var n;le||(le=document.createElement("textarea"),document.body.appendChild(le));const{paddingSize:l,borderSize:s,boxSizing:i,contextStyle:r}=function(e){const t=window.getComputedStyle(e),a=t.getPropertyValue("box-sizing"),o=Number.parseFloat(t.getPropertyValue("padding-bottom"))+Number.parseFloat(t.getPropertyValue("padding-top")),n=Number.parseFloat(t.getPropertyValue("border-bottom-width"))+Number.parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:ie.map(e=>[e,t.getPropertyValue(e)]),paddingSize:o,borderSize:n,boxSizing:a}}(e);r.forEach(([e,t])=>null==le?void 0:le.style.setProperty(e,t)),Object.entries(se).forEach(([e,t])=>null==le?void 0:le.style.setProperty(e,t,"important")),le.value=e.value||e.placeholder||"";let u=le.scrollHeight;const p={};"border-box"===i?u+=s:"content-box"===i&&(u-=l),le.value="";const d=le.scrollHeight-l;if(t(a)){let e=d*a;"border-box"===i&&(e=e+l+s),u=Math.max(e,u),p.minHeight=`${e}px`}if(t(o)){let e=d*o;"border-box"===i&&(e=e+l+s),u=Math.min(e,u)}return p.height=`${u}px`,null==(n=le.parentNode)||n.removeChild(le),le=void 0,p}const ue=o({id:{type:String,default:void 0},size:i,disabled:Boolean,modelValue:{type:n([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:n([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:s},prefixIcon:{type:s},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:n([Object,Array,String]),default:()=>l({})},autofocus:Boolean,rows:{type:Number,default:2},...X(["ariaLabel"]),inputmode:{type:n(String),default:void 0},name:String}),pe={[q]:e=>a(e),input:e=>a(e),change:e=>a(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent};const de=r({name:"ElInput",inheritAttrs:!1});const ce=K(U(r({...de,props:ue,emits:pe,setup(t,{expose:a,emit:o}){const n=t,l=u(),s=G(),i=p(),r=d(()=>["textarea"===n.type?ue.b():ie.b(),ie.m(le.value),ie.is("disabled",se.value),ie.is("exceed",Ne.value),{[ie.b("group")]:i.prepend||i.append,[ie.m("prefix")]:i.prefix||n.prefixIcon,[ie.m("suffix")]:i.suffix||n.suffixIcon||n.clearable||n.showPassword,[ie.bm("suffix","password-clear")]:Pe.value&&Fe.value,[ie.b("hidden")]:"hidden"===n.type},l.class]),U=d(()=>[ie.e("wrapper"),ie.is("focus",he.value)]),{form:K,formItem:Q}=te(),{inputId:X}=ae(n,{formItemContext:Q}),le=J(),se=ee(),ie=c("input"),ue=c("textarea"),pe=f(),de=f(),ce=m(!1),fe=m(!1),me=m(),ve=f(n.inputStyle),xe=d(()=>pe.value||de.value),{wrapperRef:ge,isFocused:he,handleFocus:ye,handleBlur:be}=oe(xe,{disabled:se,afterBlur(){var e;n.validateEvent&&(null==(e=null==Q?void 0:Q.validate)||e.call(Q,"blur").catch(e=>Y()))}}),we=d(()=>{var e;return null!=(e=null==K?void 0:K.statusIcon)&&e}),Se=d(()=>(null==Q?void 0:Q.validateState)||""),Ce=d(()=>Se.value&&v[Se.value]),ze=d(()=>fe.value?x:g),ke=d(()=>[l.style]),Ee=d(()=>[n.inputStyle,ve.value,{resize:n.resize}]),Ie=d(()=>h(n.modelValue)?"":String(n.modelValue)),Pe=d(()=>n.clearable&&!se.value&&!n.readonly&&!!Ie.value&&(he.value||ce.value)),Fe=d(()=>n.showPassword&&!se.value&&!!Ie.value),$e=d(()=>n.showWordLimit&&!!n.maxlength&&("text"===n.type||"textarea"===n.type)&&!se.value&&!n.readonly&&!n.showPassword),Be=d(()=>Ie.value.length),Ne=d(()=>!!$e.value&&Be.value>Number(n.maxlength)),Ve=d(()=>!!i.suffix||!!n.suffixIcon||Pe.value||n.showPassword||$e.value||!!Se.value&&we.value),[_e,je]=function(e){let t;return[function(){if(null==e.value)return;const{selectionStart:a,selectionEnd:o,value:n}=e.value;if(null==a||null==o)return;const l=n.slice(0,Math.max(0,a)),s=n.slice(Math.max(0,o));t={selectionStart:a,selectionEnd:o,value:n,beforeTxt:l,afterTxt:s}},function(){if(null==e.value||null==t)return;const{value:a}=e.value,{beforeTxt:o,afterTxt:n,selectionStart:l}=t;if(null==o||null==n||null==l)return;let s=a.length;if(a.endsWith(n))s=a.length-n.length;else if(a.startsWith(o))s=o.length;else{const e=o[l-1],t=a.indexOf(e,l-1);-1!==t&&(s=t+1)}e.value.setSelectionRange(s,s)}]}(pe);y(de,e=>{if(Re(),!$e.value||"both"!==n.resize)return;const t=e[0],{width:a}=t.contentRect;me.value={right:`calc(100% - ${a+15+6}px)`}});const Me=()=>{const{type:t,autosize:a}=n;if(e&&"textarea"===t&&de.value)if(a){const e=A(a)?a.minRows:void 0,t=A(a)?a.maxRows:void 0,o=re(de.value,e,t);ve.value={overflowY:"hidden",...o},w(()=>{de.value.offsetHeight,ve.value=o})}else ve.value={minHeight:re(de.value).minHeight}},Re=(e=>{let t=!1;return()=>{var a;if(t||!n.autosize)return;null===(null==(a=de.value)?void 0:a.offsetParent)||(e(),t=!0)}})(Me),He=()=>{const e=xe.value,t=n.formatter?n.formatter(Ie.value):Ie.value;e&&e.value!==t&&(e.value=t)},Le=async e=>{_e();let{value:t}=e.target;n.formatter&&n.parser&&(t=n.parser(t)),Te.value||(t!==Ie.value?(o(q,t),o(Z,t),await w(),He(),je()):He())},Oe=e=>{let{value:t}=e.target;n.formatter&&n.parser&&(t=n.parser(t)),o(D,t)},{isComposing:Te,handleCompositionStart:We,handleCompositionUpdate:Ae,handleCompositionEnd:Ue}=ne({emit:o,afterComposition:Le}),Ke=()=>{_e(),fe.value=!fe.value,setTimeout(je)},Qe=e=>{ce.value=!1,o("mouseleave",e)},qe=e=>{ce.value=!0,o("mouseenter",e)},Xe=e=>{o("keydown",e)},Ye=()=>{o(q,""),o(D,""),o("clear"),o(Z,"")};return b(()=>n.modelValue,()=>{var e;w(()=>Me()),n.validateEvent&&(null==(e=null==Q?void 0:Q.validate)||e.call(Q,"change").catch(e=>Y()))}),b(Ie,()=>He()),b(()=>n.type,async()=>{await w(),He(),Me()}),S(()=>{!n.formatter&&n.parser,He(),w(Me)}),a({input:pe,textarea:de,ref:xe,textareaStyle:Ee,autosize:C(n,"autosize"),isComposing:Te,focus:()=>{var e;return null==(e=xe.value)?void 0:e.focus()},blur:()=>{var e;return null==(e=xe.value)?void 0:e.blur()},select:()=>{var e;null==(e=xe.value)||e.select()},clear:Ye,resizeTextarea:Me}),(e,t)=>(k(),z("div",{class:F([$(r),{[$(ie).bm("group","append")]:e.$slots.append,[$(ie).bm("group","prepend")]:e.$slots.prepend}]),style:W($(ke)),onMouseenter:qe,onMouseleave:Qe},[E(" input "),"textarea"!==e.type?(k(),z(I,{key:0},[E(" prepend slot "),e.$slots.prepend?(k(),z("div",{key:0,class:F($(ie).be("group","prepend"))},[B(e.$slots,"prepend")],2)):E("v-if",!0),P("div",{ref_key:"wrapperRef",ref:ge,class:F($(U))},[E(" prefix slot "),e.$slots.prefix||e.prefixIcon?(k(),z("span",{key:0,class:F($(ie).e("prefix"))},[P("span",{class:F($(ie).e("prefix-inner"))},[B(e.$slots,"prefix"),e.prefixIcon?(k(),N($(j),{key:0,class:F($(ie).e("icon"))},{default:V(()=>[(k(),N(_(e.prefixIcon)))]),_:1},8,["class"])):E("v-if",!0)],2)],2)):E("v-if",!0),P("input",M({id:$(X),ref_key:"input",ref:pe,class:$(ie).e("inner")},$(s),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?fe.value?"text":"password":e.type,disabled:$(se),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,inputmode:e.inputmode,onCompositionstart:$(We),onCompositionupdate:$(Ae),onCompositionend:$(Ue),onInput:Le,onChange:Oe,onKeydown:Xe}),null,16,["id","name","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","inputmode","onCompositionstart","onCompositionupdate","onCompositionend"]),E(" suffix slot "),$(Ve)?(k(),z("span",{key:1,class:F($(ie).e("suffix"))},[P("span",{class:F($(ie).e("suffix-inner"))},[$(Pe)&&$(Fe)&&$($e)?E("v-if",!0):(k(),z(I,{key:0},[B(e.$slots,"suffix"),e.suffixIcon?(k(),N($(j),{key:0,class:F($(ie).e("icon"))},{default:V(()=>[(k(),N(_(e.suffixIcon)))]),_:1},8,["class"])):E("v-if",!0)],64)),$(Pe)?(k(),N($(j),{key:1,class:F([$(ie).e("icon"),$(ie).e("clear")]),onMousedown:L($(O),["prevent"]),onClick:Ye},{default:V(()=>[R($(H))]),_:1},8,["class","onMousedown"])):E("v-if",!0),$(Fe)?(k(),N($(j),{key:2,class:F([$(ie).e("icon"),$(ie).e("password")]),onClick:Ke},{default:V(()=>[(k(),N(_($(ze))))]),_:1},8,["class"])):E("v-if",!0),$($e)?(k(),z("span",{key:3,class:F($(ie).e("count"))},[P("span",{class:F($(ie).e("count-inner"))},T($(Be))+" / "+T(e.maxlength),3)],2)):E("v-if",!0),$(Se)&&$(Ce)&&$(we)?(k(),N($(j),{key:4,class:F([$(ie).e("icon"),$(ie).e("validateIcon"),$(ie).is("loading","validating"===$(Se))])},{default:V(()=>[(k(),N(_($(Ce))))]),_:1},8,["class"])):E("v-if",!0)],2)],2)):E("v-if",!0)],2),E(" append slot "),e.$slots.append?(k(),z("div",{key:1,class:F($(ie).be("group","append"))},[B(e.$slots,"append")],2)):E("v-if",!0)],64)):(k(),z(I,{key:1},[E(" textarea "),P("textarea",M({id:$(X),ref_key:"textarea",ref:de,class:[$(ue).e("inner"),$(ie).is("focus",$(he))]},$(s),{minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:$(se),readonly:e.readonly,autocomplete:e.autocomplete,style:$(Ee),"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:$(We),onCompositionupdate:$(Ae),onCompositionend:$(Ue),onInput:Le,onFocus:$(ye),onBlur:$(be),onChange:Oe,onKeydown:Xe}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),$($e)?(k(),z("span",{key:0,style:W(me.value),class:F($(ie).e("count"))},T($(Be))+" / "+T(e.maxlength),7)):E("v-if",!0)],64))],38))}}),[["__file","input.vue"]])),fe=e=>["",...Q].includes(e);export{ce as E,fe as i};
