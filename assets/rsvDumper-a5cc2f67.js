import"./index-19983525.js";/* empty css                   *//* empty css                        *//* empty css                    */import"./el-tooltip-1f970b29.js";/* empty css                  *//* empty css                     *//* empty css                  *//* empty css               *//* empty css                 *//* empty css                    */import{_ as e}from"./ThemeToggle-9eba2170.js";import{d as t}from"./index-236a8eff.js";import{V as o,z as s,K as l,P as r,A as a,i as n}from"./element-plus-e8d3f599.js";import{t as i,r as p,v as u,A as c,M as m,D as d,E as f,x as h,J as x,K as v}from"./vue-vendor-d1e06839.js";import{_}from"./_plugin-vue_export-helper-6a8c15be.js";const g={class:"p-6 min-h-screen"},b={style:{position:"absolute",top:"2em",right:"2em"}},j={class:"bg-black text-green-400 p-3 rounded text-xs overflow-auto"},w=_(i({__name:"rsvDumper",setup(i){t();const _=p([]),w=p(!1),y=p("");async function D(e){const t=e.raw,o=(await t.text()).split(/\r?\n/);_.value=[];for(const s of o){const e=s.split("|");if("252"===e[0]){const t=V(e.slice(3,-2));k(t,(new TextEncoder).encode("_rsv_"))&&_.value.push(C(t.slice(30)))}}}function V(e){const t=[];for(const o of e){const e=Number.parseInt(o,16)>>>0;t.push(255&e,e>>8&255,e>>16&255,e>>24&255)}return new Uint8Array(t)}function k(e,t){const o=e.length-t.length;for(let s=0;s<=o;s++){let o=!0;for(let l=0;l<t.length;l++)if(e[s+l]!==t[l]){o=!1;break}if(o)return!0}return!1}function C(e){return{str1:A(e.slice(2)),str2:A(e.slice(50)),hexDump:S(e)}}function A(e){const t=e.indexOf(0),o=-1!==t?e.slice(0,t):e;return new TextDecoder("utf-8").decode(o)}function S(e,t=16){const o="0123456789ABCDEF",s=[];for(let l=0;l<e.length;l+=t){let r="",a="";for(let s=0;s<t;s++)if(l+s<e.length){const t=e[l+s];r+=`${o[t>>4]+o[15&t]} `,a+=t>=32&&t<127?String.fromCharCode(t):"."}else r+="   ",a+=" ";s.push(`${r} ${a}`)}return s.join("\n")}return(t,i)=>{const p=e,V=o,k=r,C=a,A=n,S=s,F=l;return h(),u("div",g,[i[3]||(i[3]=c("h1",{class:"text-2xl font-bold mb-4"}," FFXIV RSV Dumper ",-1)),c("span",b,[m(p)]),m(V,{drag:"",action:"","auto-upload":!1,"show-file-list":!1,accept:".log,.txt",class:"upload-box",onChange:D},{default:f(()=>i[1]||(i[1]=[c("i",{class:"el-icon-upload"},null,-1),c("div",{class:"el-upload__text"},[x(" 拖拽日志文件到此处或 "),c("em",null,"点击上传")],-1)])),_:1,__:[1]}),_.value.length?(h(),d(S,{key:1,data:_.value,stripe:"",style:{width:"100%","margin-top":"20px"},border:""},{default:f(()=>[m(C,{prop:"str1",label:"RSV Data 1",width:"400"}),m(C,{prop:"str2",label:"RSV Data 2"}),m(C,{label:"操作",width:"150"},{default:f(e=>[m(A,{size:"small",type:"primary",onClick:t=>{return o=e.row,y.value=o.hexDump,void(w.value=!0);var o}},{default:f(()=>i[2]||(i[2]=[x(" 查看 HexDump ")])),_:2,__:[2]},1032,["onClick"])]),_:1})]),_:1},8,["data"])):(h(),d(k,{key:0,description:"请上传 act.log 文件",class:"mt-6"})),m(F,{modelValue:w.value,"onUpdate:modelValue":i[0]||(i[0]=e=>w.value=e),title:"HexDump 原始数据",width:"50%","append-to-body":!0},{default:f(()=>[c("pre",j,v(y.value)+"\n      ",1)]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-40f6faae"]]);export{w as default};
