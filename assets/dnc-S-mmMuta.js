import{o as l,bC as e,B as a,aa as o,H as t,K as s,V as u,_ as n,u as r,Y as m,I as d,J as i,R as p,am as f,v as c,W as V,r as v,ac as b,c as g,ds as z,t as h,L as w,M as y,Z as C}from"./vendor-vue-GqahCgpc.js";import{b as U}from"./shared-core-fba2-cgd.js";import{a as x,r as A}from"./cactbot-CmNinDrW.js";import{b as $,j as S,k as _,l as j,n as I}from"./vendor-element-plus-DIlhOlLn.js";import{_ as B}from"./shared-common-CRNvULZF.js";const D={class:"dnc-overlay"},M={class:"settings"},F=B(l({__name:"dnc",setup(l){z(l=>({v0633bb12:r(q),v1a1f098b:r(J),v68568aff:r(W),v853eddf8:r(Y),v2ac2be36:r(H),v16246e39:r(X),v6d61d5ec:r(k)}));const B=v(0),F=b({playerId:"",lastCombo:0,status:new Map([["A85",0],["A86",0],["BC9",0],["BCA",0]])}),P=e("jobs-dnc",{combo:{left:10,top:-30},tr3:{left:46,top:-22},tr4:{left:82,top:-22},fl:{left:0,top:-15},color:"rgb(255,255,255)",shadow:"rgb(0,0,0)",size:14,warncolor:"rgb(255,255,255)",warnshadow:"rgb(255,0,0)",zeroStr:"",fontFamily:"微软雅黑",fontWeight:!1,warn:5,userCss:""},localStorage,{mergeDefaults:!0}),E=U(),L=b([{id:"combo",cd:g(()=>30-Math.floor((B.value-F.lastCombo)/1e3)),style:{top:g(()=>`${P.value.combo.top}px`),left:g(()=>`${P.value.combo.left}px`)}},{id:"tr3",cd:g(()=>30-Math.floor((B.value-(F.status.get("A85")??0))/1e3)),style:{top:g(()=>`${P.value.tr3.top}px`),left:g(()=>`${P.value.tr3.left}px`)}},{id:"tr4",cd:g(()=>30-Math.floor((B.value-(F.status.get("A86")??0))/1e3)),style:{top:g(()=>`${P.value.tr4.top}px`),left:g(()=>`${P.value.tr4.left}px`)}},{id:"fl3",cd:g(()=>30-Math.floor((B.value-(F.status.get("BC9")??0))/1e3)),style:{top:g(()=>`${P.value.tr3.top+P.value.fl.top}px`),left:g(()=>`${P.value.tr3.left+P.value.fl.left}px`)}},{id:"fl4",cd:g(()=>30-Math.floor((B.value-(F.status.get("BCA")??0))/1e3)),style:{top:g(()=>`${P.value.tr4.top+P.value.fl.top}px`),left:g(()=>`${P.value.tr4.left+P.value.fl.left}px`)}}]),W=g(()=>P.value.color),Y=g(()=>P.value.shadow),X=g(()=>P.value.warncolor),k=g(()=>P.value.warnshadow),q=g(()=>P.value.fontFamily),H=g(()=>`${P.value.size}px`),J=g(()=>P.value.fontWeight?"bold":"none"),K=g(()=>P.value.userCss),N=l=>{l.line[5]!==F.playerId||"26"!==l.line[0]&&"30"!==l.line[0]||!F.status.has(l.line[2])?l.line[2]!==F.playerId||"21"!==l.line[0]&&"22"!==l.line[0]||("3E79"===l.line[4]&&"22"===l.line[0]||"3E75"===l.line[4]&&"21"===l.line[0]?F.lastCombo=Date.now():("3E76"===l.line[4]||"3E7A"===l.line[4]||"21"===l.line[0]&&"3E79"===l.line[4])&&(F.lastCombo=0)):F.status.set(l.line[2],"26"===l.line[0]?Date.now():0)};function R(){F.status.set("A85",0),F.status.set("A86",0),F.status.set("BC9",0),F.status.set("BCA",0),F.lastCombo=0}const Z=l=>{F.playerId=Number(l.charID).toString(16).toUpperCase()};function G(){localStorage.removeItem("jobs-dnc"),location.reload()}return a(()=>{x("onPlayerDied",R),x("LogLine",N),x("ChangePrimaryPlayer",Z)}),o(()=>{A("onPlayerDied",R),A("LogLine",N),A("ChangePrimaryPlayer",Z)}),requestAnimationFrame(function l(){B.value=Date.now(),requestAnimationFrame(l)}),(l,e)=>{const a=$,o=S,v=_,b=I,g=j;return h(),t(p,null,[s("div",D,[u(s("header",M,[s("form",null,[e[18]||(e[18]=m(" 连击X: ",-1)),d(a,{modelValue:r(P).combo.left,"onUpdate:modelValue":e[0]||(e[0]=l=>r(P).combo.left=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),s("form",null,[e[19]||(e[19]=m(" 连击Y: ",-1)),d(a,{modelValue:r(P).combo.top,"onUpdate:modelValue":e[1]||(e[1]=l=>r(P).combo.top=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),s("form",null,[e[20]||(e[20]=m(" 触发3X: ",-1)),d(a,{modelValue:r(P).tr3.left,"onUpdate:modelValue":e[2]||(e[2]=l=>r(P).tr3.left=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),s("form",null,[e[21]||(e[21]=m(" 触发3Y: ",-1)),d(a,{modelValue:r(P).tr3.top,"onUpdate:modelValue":e[3]||(e[3]=l=>r(P).tr3.top=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),s("form",null,[e[22]||(e[22]=m(" 触发4X: ",-1)),d(a,{modelValue:r(P).tr4.left,"onUpdate:modelValue":e[4]||(e[4]=l=>r(P).tr4.left=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),s("form",null,[e[23]||(e[23]=m(" 触发4Y: ",-1)),d(a,{modelValue:r(P).tr4.top,"onUpdate:modelValue":e[5]||(e[5]=l=>r(P).tr4.top=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),s("form",null,[e[24]||(e[24]=m(" 百花X: ",-1)),d(a,{modelValue:r(P).fl.left,"onUpdate:modelValue":e[6]||(e[6]=l=>r(P).fl.left=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),s("form",null,[e[25]||(e[25]=m(" 百花Y: ",-1)),d(a,{modelValue:r(P).fl.top,"onUpdate:modelValue":e[7]||(e[7]=l=>r(P).fl.top=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),s("form",null,[e[26]||(e[26]=m(" 剩余警告: ",-1)),d(a,{modelValue:r(P).warn,"onUpdate:modelValue":e[8]||(e[8]=l=>r(P).warn=l),class:"input input-number",min:-1,max:30,size:"small"},null,8,["modelValue"])]),s("form",null,[e[27]||(e[27]=m(" 常规颜色: ",-1)),d(o,{modelValue:r(P).color,"onUpdate:modelValue":e[9]||(e[9]=l=>r(P).color=l),class:"input input-string",size:"small"},null,8,["modelValue"])]),s("form",null,[e[28]||(e[28]=m(" 常规阴影: ",-1)),d(o,{modelValue:r(P).shadow,"onUpdate:modelValue":e[10]||(e[10]=l=>r(P).shadow=l),class:"input input-string",size:"small"},null,8,["modelValue"])]),s("form",null,[e[29]||(e[29]=m(" 警告颜色: ",-1)),d(o,{modelValue:r(P).warncolor,"onUpdate:modelValue":e[11]||(e[11]=l=>r(P).warncolor=l),class:"input input-string",size:"small"},null,8,["modelValue"])]),s("form",null,[e[30]||(e[30]=m(" 警告阴影: ",-1)),d(o,{modelValue:r(P).warnshadow,"onUpdate:modelValue":e[12]||(e[12]=l=>r(P).warnshadow=l),class:"input input-string",size:"small"},null,8,["modelValue"])]),s("form",null,[e[31]||(e[31]=m(" 零值文本: ",-1)),d(o,{modelValue:r(P).zeroStr,"onUpdate:modelValue":e[13]||(e[13]=l=>r(P).zeroStr=l),class:"input input-string",size:"small"},null,8,["modelValue"])]),s("form",null,[e[32]||(e[32]=m(" 字号: ",-1)),d(a,{modelValue:r(P).size,"onUpdate:modelValue":e[14]||(e[14]=l=>r(P).size=l),class:"input input-number",size:"small"},null,8,["modelValue"])]),s("form",null,[e[33]||(e[33]=m(" 字体: ",-1)),d(o,{modelValue:r(P).fontFamily,"onUpdate:modelValue":e[15]||(e[15]=l=>r(P).fontFamily=l),class:"input input-string",size:"small"},null,8,["modelValue"])]),s("form",null,[e[34]||(e[34]=m(" 粗体：",-1)),d(v,{modelValue:r(P).fontWeight,"onUpdate:modelValue":e[16]||(e[16]=l=>r(P).fontWeight=l),size:"small"},null,8,["modelValue"])]),s("form",null,[e[35]||(e[35]=m(" 自定义CSS： ",-1)),e[36]||(e[36]=s("br",null,null,-1)),d(o,{modelValue:r(P).userCss,"onUpdate:modelValue":e[17]||(e[17]=l=>r(P).userCss=l),autosize:"",type:"textarea",placeholder:""},null,8,["modelValue"])]),e[38]||(e[38]=s("br",null,null,-1)),s("form",null,[d(g,{teleported:!1,title:"确定要重置？",onConfirm:G},{reference:i(()=>[d(b,null,{default:i(()=>[...e[37]||(e[37]=[m("重置全部用户设置",-1)])]),_:1})]),_:1})])],512),[[n,r(E)]]),s("main",null,[(h(!0),t(p,null,f(r(L),l=>(h(),t("div",{key:l.id},[s("span",{class:y(l.cd<=r(P).warn&&!r(E)?"warning":""),style:w(l.style)},C(l.cd>=0?l.cd:r(E)?"30":r(P).zeroStr),7)]))),128))])]),(h(),c(V("style"),null,{default:i(()=>[m(C(r(K)),1)]),_:1}))],64)}}}),[["__scopeId","data-v-c3aa2110"]]);export{F as default};
