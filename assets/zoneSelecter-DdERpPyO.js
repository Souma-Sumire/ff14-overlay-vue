import{u as e,a}from"./useLang-bNkybWrz.js";import{d as l}from"./content_type-uhloenTS.js";import{Z as t}from"./zoneInfo-Kvs06RCG.js";import{d as s,a0 as o,a1 as n,b as i,a2 as d,a3 as r,a4 as c,h as u,c as p,o as v,G as h,k as f,u as m,P as g,w as y,a as b,K as k,s as C,Q as x,F as N,W as S,a5 as w,a6 as T,r as z,m as $,e as _,t as E,a7 as L,a8 as V,a9 as D,aa as j,ab as B,ac as F,ad as R,ae as A,af as M,ag as P,ah as O,ai as q,f as I,B as U,aj as H,i as Z,ak as K,al as W,am as Q,an as G,ao as X,ap as J,aq as Y,ar as ee,as as ae,at as le,au as te,av as se,aw as oe,ax as ne,l as ie,N as de,v as re,q as ce,ay as ue,n as pe,az as ve,aA as he,aB as fe,aC as me,aD as ge}from"./index-Bs3XIB3F.js";import{E as ye,C as be}from"./index-BlYvX-Xe.js";import{E as ke}from"./index-DMsLiMTj.js";import{E as Ce}from"./index-vcr-4ezE.js";import{u as xe,a as Ne,b as Se,c as we}from"./use-form-common-props-BYsbxE8U.js";import{b as Te,C as ze,U as $e,d as _e}from"./index-B9-ZbzyL.js";import{i as Ee,f as Le,g as Ve}from"./focus-trap-8Wmz_1SC.js";import{u as De,c as je,a as Be,b as Fe,E as Re}from"./index-BW_gcwg_.js";import{s as Ae}from"./vnode-wg55JEEe.js";import{c as Me}from"./cloneDeep-D7LVzg2F.js";import{E as Pe}from"./validator-DYioAUWj.js";import{t as Oe,E as qe}from"./index-DHehZtk9.js";import{u as Ie,a as Ue}from"./index-BRg-LbDb.js";import{_ as He}from"./_plugin-vue_export-helper-BCo6x5W8.js";var Ze=1/0;const Ke=Symbol();var We=s({name:"NodeContent",props:{node:{type:Object,required:!0}},setup(e){const a=o("cascader-node"),{renderLabelFn:l}=n(Ke),{node:t}=e,{data:s,label:c}=t,u=()=>{const e=null==l?void 0:l({node:t,data:s});return(d(a=e)?a.every(({type:e})=>e===r):(null==a?void 0:a.type)===r)?c:null!=e?e:c;var a};return()=>i("span",{class:a.e("label")},[u()])}});const Qe=s({name:"ElCascaderNode"});var Ge=c(s({...Qe,props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:a}){const l=e,t=n(Ke),s=o("cascader-node"),d=u(()=>t.isHoverMenu),r=u(()=>t.config.multiple),c=u(()=>t.config.checkStrictly),T=u(()=>t.config.showPrefix),z=u(()=>{var e;return null==(e=t.checkedNodes[0])?void 0:e.uid}),$=u(()=>l.node.isDisabled),_=u(()=>l.node.isLeaf),E=u(()=>c.value&&!_.value||!$.value),L=u(()=>D(t.expandingNode)),V=u(()=>c.value&&t.checkedNodes.some(D)),D=e=>{var a;const{level:t,uid:s}=l.node;return(null==(a=null==e?void 0:e.pathNodes[t-1])?void 0:a.uid)===s},j=()=>{L.value||t.expandNode(l.node)},B=e=>{const{node:a}=l;e!==a.checked&&t.handleCheckChange(a,e)},F=()=>{t.lazyLoad(l.node,()=>{_.value||j()})},R=e=>{d.value&&(A(),!_.value&&a("expand",e))},A=()=>{const{node:e}=l;E.value&&!e.loading&&(e.loaded?j():F())},M=()=>{!_.value||$.value||c.value||r.value?(t.config.checkOnClickNode&&(r.value||c.value)||_.value&&t.config.checkOnClickLeaf)&&!$.value?P(!l.node.checked):d.value||A():O(!0)},P=e=>{c.value?(B(e),l.node.loaded&&j()):O(e)},O=e=>{l.node.loaded?(B(e),!c.value&&j()):F()};return(a,l)=>(v(),p("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!m(_),"aria-owns":m(_)?void 0:e.menuId,"aria-expanded":m(L),tabindex:m(E)?-1:void 0,class:C([m(s).b(),m(s).is("selectable",m(c)),m(s).is("active",e.node.checked),m(s).is("disabled",!m(E)),m(L)&&"in-active-path",m(V)&&"in-checked-path"]),onMouseenter:R,onFocus:R,onClick:M},[h(" prefix "),m(r)&&m(T)?(v(),f(m(ke),{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:m($),onClick:g(()=>{},["stop"]),"onUpdate:modelValue":P},null,8,["model-value","indeterminate","disabled","onClick"])):m(c)&&m(T)?(v(),f(m(Ce),{key:1,"model-value":m(z),label:e.node.uid,disabled:m($),"onUpdate:modelValue":P,onClick:g(()=>{},["stop"])},{default:y(()=>[h("\n        Add an empty element to avoid render label,\n        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485\n      "),b("span")]),_:1},8,["model-value","label","disabled","onClick"])):m(_)&&e.node.checked?(v(),f(m(x),{key:2,class:C(m(s).e("prefix"))},{default:y(()=>[i(m(k))]),_:1},8,["class"])):h("v-if",!0),h(" content "),i(m(We),{node:e.node},null,8,["node"]),h(" postfix "),m(_)?h("v-if",!0):(v(),p(N,{key:3},[e.node.loading?(v(),f(m(x),{key:0,class:C([m(s).is("loading"),m(s).e("postfix")])},{default:y(()=>[i(m(S))]),_:1},8,["class"])):(v(),f(m(x),{key:1,class:C(["arrow-right",m(s).e("postfix")])},{default:y(()=>[i(m(w))]),_:1},8,["class"]))],64))],42,["id","aria-haspopup","aria-owns","aria-expanded","tabindex"]))}}),[["__file","node.vue"]]);const Xe=s({name:"ElCascaderMenu"});var Je=c(s({...Xe,props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const a=e,l=V(),t=o("cascader-menu"),{t:s}=T(),d=xe();let r,c;const g=n(Ke),b=z(),k=u(()=>!a.nodes.length),w=u(()=>!g.initialLoaded),D=u(()=>`${d.value}-${a.index}`),j=e=>{r=e.target},B=e=>{if(g.isHoverMenu&&r&&b.value)if(r.contains(e.target)){F();const a=l.vnode.el,{left:t}=a.getBoundingClientRect(),{offsetWidth:s,offsetHeight:o}=a,n=e.clientX-t,i=r.offsetTop,d=i+r.offsetHeight;b.value.innerHTML=`\n          <path style="pointer-events: auto;" fill="transparent" d="M${n} ${i} L${s} 0 V${i} Z" />\n          <path style="pointer-events: auto;" fill="transparent" d="M${n} ${d} L${s} ${o} V${d} Z" />\n        `}else c||(c=window.setTimeout(R,g.config.hoverThreshold))},F=()=>{c&&(clearTimeout(c),c=void 0)},R=()=>{b.value&&(b.value.innerHTML="",F())};return(a,l)=>(v(),f(m(ye),{key:m(D),tag:"ul",role:"menu",class:C(m(t).b()),"wrap-class":m(t).e("wrap"),"view-class":[m(t).e("list"),m(t).is("empty",m(k))],onMousemove:B,onMouseleave:R},{default:y(()=>{var l;return[(v(!0),p(N,null,$(e.nodes,e=>(v(),f(Ge,{key:e.uid,node:e,"menu-id":m(D),onExpand:j},null,8,["node","menu-id"]))),128)),m(w)?(v(),p("div",{key:0,class:C(m(t).e("empty-text"))},[i(m(x),{size:"14",class:C(m(t).is("loading"))},{default:y(()=>[i(m(S))]),_:1},8,["class"]),_(" "+E(m(s)("el.cascader.loading")),1)],2)):m(k)?(v(),p("div",{key:1,class:C(m(t).e("empty-text"))},[L(a.$slots,"empty",{},()=>[_(E(m(s)("el.cascader.noData")),1)])],2)):(null==(l=m(g))?void 0:l.isHoverMenu)?(v(),p(N,{key:2},[h(" eslint-disable-next-line vue/html-self-closing "),(v(),p("svg",{ref_key:"hoverZone",ref:b,class:C(m(t).e("hover-zone"))},null,2))],2112)):h("v-if",!0)]}),_:3},8,["class","wrap-class","view-class"]))}}),[["__file","menu.vue"]]);let Ye=0;class ea{constructor(e,a,l,t=!1){this.data=e,this.config=a,this.parent=l,this.root=t,this.uid=Ye++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:s,label:o,children:n}=a,i=e[n],d=(e=>{const a=[e];let{parent:l}=e;for(;l;)a.unshift(l),l=l.parent;return a})(this);this.level=t?0:l?l.level+1:1,this.value=e[s],this.label=e[o],this.pathNodes=d,this.pathValues=d.map(e=>e.value),this.pathLabels=d.map(e=>e.label),this.childrenData=i,this.children=(i||[]).map(e=>new ea(e,a,this)),this.loaded=!a.lazy||this.isLeaf||!D(i),this.text=""}get isDisabled(){const{data:e,parent:a,config:l}=this,{disabled:t,checkStrictly:s}=l;return(j(t)?t(e,this):!!e[t])||!s&&!!(null==a?void 0:a.isDisabled)}get isLeaf(){const{data:e,config:a,childrenData:l,loaded:t}=this,{lazy:s,leaf:o}=a,n=j(o)?o(e,this):e[o];return B(n)?!(s&&!t)&&!(d(l)&&l.length):!!n}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(e){const{childrenData:a,children:l}=this,t=new ea(e,this.config,this);return d(a)?a.push(e):this.childrenData=[e],l.push(t),t}calcText(e,a){const l=e?this.pathLabels.join(a):this.label;return this.text=l,l}broadcast(e){this.children.forEach(a=>{var l;a&&(a.broadcast(e),null==(l=a.onParentCheck)||l.call(a,e))})}emit(){var e;const{parent:a}=this;a&&(null==(e=a.onChildCheck)||e.call(a),a.emit())}onParentCheck(e){this.isDisabled||this.setCheckState(e)}onChildCheck(){const{children:e}=this,a=e.filter(e=>!e.isDisabled),l=!!a.length&&a.every(e=>e.checked);this.setCheckState(l)}setCheckState(e){const a=this.children.length,l=this.children.reduce((e,a)=>e+(a.checked?1:a.indeterminate?.5:0),0);this.checked=this.loaded&&this.children.filter(e=>!e.isDisabled).every(e=>e.loaded&&e.checked)&&e,this.indeterminate=this.loaded&&l!==a&&l>0}doCheck(e){if(this.checked===e)return;const{checkStrictly:a,multiple:l}=this.config;a||!l?this.checked=e:(this.broadcast(e),this.setCheckState(e),this.emit())}}const aa=(e,a)=>e.reduce((e,l)=>(l.isLeaf?e.push(l):(!a&&e.push(l),e=e.concat(aa(l.children,a))),e),[]);class la{constructor(e,a){this.config=a;const l=(e||[]).map(e=>new ea(e,this.config));this.nodes=l,this.allNodes=aa(l,!1),this.leafNodes=aa(l,!0)}getNodes(){return this.nodes}getFlattedNodes(e){return e?this.leafNodes:this.allNodes}appendNode(e,a){const l=a?a.appendChild(e):new ea(e,this.config);a||this.nodes.push(l),this.appendAllNodesAndLeafNodes(l)}appendNodes(e,a){e.length>0?e.forEach(e=>this.appendNode(e,a)):a&&a.isLeaf&&this.leafNodes.push(a)}appendAllNodesAndLeafNodes(e){this.allNodes.push(e),e.isLeaf&&this.leafNodes.push(e),e.children&&e.children.forEach(e=>{this.appendAllNodesAndLeafNodes(e)})}getNodeByValue(e,a=!1){if(F(e))return null;return this.getFlattedNodes(a).find(a=>R(a.value,e)||R(a.pathValues,e))||null}getSameNode(e){if(!e)return null;return this.getFlattedNodes(!1).find(({value:a,level:l})=>R(e.value,a)&&e.level===l)||null}}const ta=A({modelValue:{type:M([Number,String,Array,Object])},options:{type:M(Array),default:()=>[]},props:{type:M(Object),default:()=>({})}}),sa={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:P,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500,checkOnClickNode:!1,checkOnClickLeaf:!0,showPrefix:!0},oa=A({...ta,border:{type:Boolean,default:!0},renderLabel:{type:Function}}),na=e=>!0,ia={[$e]:na,[ze]:na,close:()=>!0,"expand-change":e=>e},da=e=>u(()=>({...sa,...e.props})),ra=e=>{if(!e)return 0;const a=e.id.split("-");return Number(a[a.length-2])},ca=s({name:"ElCascaderPanel",inheritAttrs:!1});const ua=X(c(s({...ca,props:oa,emits:ia,setup(e,{expose:a,emit:l}){const t=e;let s=!1;const n=o("cascader"),i=da(t),d=O();let r;const c=z(!0),h=z(!1),g=z([]),b=z(),k=z([]),x=z(),S=z([]),w=u(()=>"hover"===i.value.expandTrigger),T=u(()=>t.renderLabel||d.default),_=()=>{const{options:e}=t,a=i.value;s=!1,r=new la(e,a),k.value=[r.getNodes()],a.lazy&&D(t.options)?(c.value=!1,E(void 0,e=>{e&&(r=new la(e,a),k.value=[r.getNodes()]),c.value=!0,P(!1,!0)})):P(!1,!0)},E=(e,a)=>{const l=i.value;(e=e||new ea({},l,void 0,!0)).loading=!0;l.lazyLoad(e,l=>{const t=e,s=t.root?null:t;t.loading=!1,t.loaded=!0,t.childrenData=t.childrenData||[],l&&(null==r||r.appendNodes(l,s)),l&&(null==a||a(l)),0===e.level&&(h.value=!0)},()=>{e.loading=!1,e.loaded=!1,0===e.level&&(c.value=!0)})},V=(e,a)=>{var t;const{level:s}=e,o=k.value.slice(0,s);let n;e.isLeaf?n=e.pathNodes[s-2]:(n=e,o.push(e.children)),(null==(t=x.value)?void 0:t.uid)!==(null==n?void 0:n.uid)&&(x.value=e,k.value=o,!a&&l("expand-change",(null==e?void 0:e.pathValues)||[]))},j=(e,a,t=!0)=>{const{checkStrictly:o,multiple:n}=i.value,d=S.value[0];s=!0,!n&&(null==d||d.doCheck(!1)),e.doCheck(a),M(),t&&!n&&!o&&l("close"),!t&&!n&&B(e)},B=e=>{e&&(e=e.parent,B(e),e&&V(e))},F=e=>null==r?void 0:r.getFlattedNodes(e),A=e=>{var a;return null==(a=F(e))?void 0:a.filter(({checked:e})=>!1!==e)},M=()=>{var e;const{checkStrictly:a,multiple:l}=i.value,t=((e,a)=>{const l=a.slice(0),t=l.map(e=>e.uid),s=e.reduce((e,a)=>{const s=t.indexOf(a.uid);return s>-1&&(e.push(a),l.splice(s,1),t.splice(s,1)),e},[]);return s.push(...l),s})(S.value,A(!a)),s=t.map(e=>e.valueByOption);S.value=t,b.value=l?s:null!=(e=s[0])?e:null},P=(e=!1,a=!1)=>{const{modelValue:l}=t,{lazy:o,multiple:n,checkStrictly:d}=i.value,u=!d;var p;if(c.value&&!s&&(a||!R(l,b.value)))if(o&&!e){const e=De(null!=(p=je(l))&&p.length?Te(p,Ze):[]).map(e=>null==r?void 0:r.getNodeByValue(e)).filter(e=>!!e&&!e.loaded&&!e.loading);e.length?e.forEach(e=>{E(e,()=>P(!1,a))}):P(!0,a)}else{const e=n?je(l):[l],t=De(e.map(e=>null==r?void 0:r.getNodeByValue(e,u)));X(t,a),b.value=Me(null!=l?l:void 0)}},X=(e,a=!0)=>{const{checkStrictly:l}=i.value,t=S.value,s=e.filter(e=>!!e&&(l||e.isLeaf)),o=null==r?void 0:r.getSameNode(x.value),n=a&&o||s[0];n?n.pathNodes.forEach(e=>V(e,!0)):x.value=void 0,t.forEach(e=>e.doCheck(!1)),I(s).forEach(e=>e.doCheck(!0)),S.value=s,K(J)},J=()=>{W&&g.value.forEach(e=>{const a=null==e?void 0:e.$el;if(a){const e=a.querySelector(`.${n.namespace.value}-scrollbar__wrap`),l=a.querySelector(`.${n.b("node")}.${n.is("active")}:last-child`)||a.querySelector(`.${n.b("node")}.in-active-path`);Ae(e,l)}})},Y=e=>{const a=e.target,l=Q(e);switch(l){case G.up:case G.down:{e.preventDefault();const t=l===G.up?-1:1;Le(Ve(a,t,`.${n.b("node")}[tabindex="-1"]`));break}case G.left:{e.preventDefault();const l=g.value[ra(a)-1],t=null==l?void 0:l.$el.querySelector(`.${n.b("node")}[aria-expanded="true"]`);Le(t);break}case G.right:{e.preventDefault();const l=g.value[ra(a)+1],t=null==l?void 0:l.$el.querySelector(`.${n.b("node")}[tabindex="-1"]`);Le(t);break}case G.enter:case G.numpadEnter:(e=>{if(!e)return;const a=e.querySelector("input");a?a.click():Ee(e)&&e.click()})(a)}};q(Ke,I({config:i,expandingNode:x,checkedNodes:S,isHoverMenu:w,initialLoaded:c,renderLabelFn:T,lazyLoad:E,expandNode:V,handleCheckChange:j})),U(i,(e,a)=>{R(e,a)||_()},{immediate:!0}),U(()=>t.options,_,{deep:!0}),U(()=>t.modelValue,()=>{s=!1,P()},{deep:!0}),U(()=>b.value,e=>{R(e,t.modelValue)||(l($e,e),l(ze,e))});return H(()=>g.value=[]),Z(()=>!D(t.modelValue)&&P()),a({menuList:g,menus:k,checkedNodes:S,handleKeyDown:Y,handleCheckChange:j,getFlattedNodes:F,getCheckedNodes:A,clearCheckedNodes:()=>{S.value.forEach(e=>e.doCheck(!1)),M(),k.value=k.value.slice(0,1),x.value=void 0,l("expand-change",[])},calculateCheckedValue:M,scrollToExpandingNode:J,loadLazyRootNodes:()=>{h.value||_()}}),(e,a)=>(v(),p("div",{class:C([m(n).b("panel"),m(n).is("bordered",e.border)]),onKeydown:Y},[(v(!0),p(N,null,$(k.value,(a,l)=>(v(),f(Je,{key:l,ref_for:!0,ref:e=>g.value[l]=e,index:l,nodes:[...a]},{empty:y(()=>[L(e.$slots,"empty")]),_:2},1032,["index","nodes"]))),128))],34))}}),[["__file","index.vue"]])),pa=A({...ta,size:le,placeholder:String,disabled:Boolean,clearable:Boolean,clearIcon:{type:ae,default:ee},filterable:Boolean,filterMethod:{type:M(Function),default:(e,a)=>e.text.includes(a)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:Boolean,maxCollapseTagsTooltipHeight:{type:[String,Number]},debounce:{type:Number,default:300},beforeFilter:{type:M(Function),default:()=>!0},placement:{type:M(String),values:Fe,default:"bottom-start"},fallbackPlacements:{type:M(Array),default:["bottom-start","bottom","top-start","top","right","left"]},popperClass:Be.popperClass,popperStyle:Be.popperStyle,teleported:Be.teleported,effect:{type:M(String),default:"light"},tagType:{...Oe.type,default:"info"},tagEffect:{...Oe.effect,default:"light"},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},showCheckedStrategy:{type:String,values:["parent","child"],default:"child"},checkOnClickNode:Boolean,showPrefix:{type:Boolean,default:!0},...Y}),va=e=>!0,ha={[$e]:va,[ze]:va,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,visibleChange:e=>J(e),expandChange:e=>!!e,removeTag:e=>!!e},fa=s({name:"ElCascader"});const ma=X(c(s({...fa,props:pa,emits:ha,setup(e,{expose:a,emit:l}){const t=e,s={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:e})=>{const{modifiersData:a,placement:l}=e;["right","left","bottom","top"].includes(l)||a.arrow&&(a.arrow.x=35)},requires:["arrow"]}]},n=te();let d=0,r=0;const c=o("cascader"),S=o("input"),{t:w}=T(),{formItem:_}=Ne(),V=Se(),{valueOnClear:D}=se(t),{isComposing:j,handleComposition:B}=Ie({afterComposition(e){var a;const l=null==(a=e.target)?void 0:a.value;ya(l)}}),F=z(),R=z(),A=z(),M=z(),P=z(),O=z(),q=z(!1),I=z(!1),H=z(!1),X=z(""),J=z(""),Y=z([]),ee=z([]),ae=u(()=>t.props.multiple?t.collapseTags?Y.value.slice(0,t.maxCollapseTags):Y.value:[]),le=u(()=>t.props.multiple&&t.collapseTags?Y.value.slice(t.maxCollapseTags):[]),ke=u(()=>n.style),Ce=u(()=>{var e;return null!=(e=t.placeholder)?e:w("el.cascader.placeholder")}),xe=u(()=>J.value||Y.value.length>0||j.value?"":Ce.value),Te=we(),Ee=u(()=>"small"===Te.value?"small":"default"),De=u(()=>!!t.props.multiple),je=u(()=>!t.filterable||De.value),Be=u(()=>De.value?J.value:X.value),Fe=u(()=>{var e;return(null==(e=P.value)?void 0:e.checkedNodes)||[]}),{wrapperRef:Ae,isFocused:Oe,handleBlur:He}=Ue(A,{disabled:V,beforeBlur(e){var a,l;return(null==(a=F.value)?void 0:a.isFocusInsideContent(e))||(null==(l=R.value)?void 0:l.isFocusInsideContent(e))},afterBlur(){var e;t.validateEvent&&(null==(e=null==_?void 0:_.validate)||e.call(_,"blur").catch(e=>_e()))}}),Ze=u(()=>!(!t.clearable||V.value||H.value||!I.value&&!Oe.value)&&!!Fe.value.length),Ke=u(()=>{const{showAllLevels:e,separator:a}=t,l=Fe.value;return l.length?De.value?"":l[0].calcText(e,a):""}),We=u(()=>(null==_?void 0:_.validateState)||""),Qe=u({get:()=>Me(t.modelValue),set(e){const a=null!=e?e:D.value;l($e,a),l(ze,a),t.validateEvent&&(null==_||_.validate("change").catch(e=>_e()))}}),Ge=u(()=>[c.b(),c.m(Te.value),c.is("disabled",V.value),n.class]),Xe=u(()=>[S.e("icon"),"icon-arrow-down",c.is("reverse",q.value)]),Je=u(()=>c.is("focus",Oe.value)),Ye=u(()=>{var e,a;return null==(a=null==(e=F.value)?void 0:e.popperRef)?void 0:a.contentRef}),ea=e=>{if(Oe.value){const a=new FocusEvent("blur",e);He(a)}aa(!1)},aa=e=>{var a,s,o;V.value||(e=null!=e?e:!q.value)!==q.value&&(q.value=e,null==(s=null==(a=A.value)?void 0:a.input)||s.setAttribute("aria-expanded",`${e}`),e?(la(),K(null==(o=P.value)?void 0:o.scrollToExpandingNode)):t.filterable&&va(),l("visibleChange",e))},la=()=>{K(()=>{var e;null==(e=F.value)||e.updatePopper()})},ta=()=>{H.value=!1},sa=e=>{var a;const t=e.node;t.doCheck(!1),null==(a=P.value)||a.calculateCheckedValue(),l("removeTag",t.valueByOption)},oa=()=>{var e,a;const{filterMethod:l,showAllLevels:s,separator:o}=t,n=null==(a=null==(e=P.value)?void 0:e.getFlattedNodes(!t.props.checkStrictly))?void 0:a.filter(e=>!e.isDisabled&&(e.calcText(s,o),l(e,Be.value)));De.value&&Y.value.forEach(e=>{e.hitState=!1}),H.value=!0,ee.value=n,la()},na=()=>{var e;let a;a=H.value&&O.value?O.value.$el.querySelector(`.${c.e("suggestion-item")}`):null==(e=P.value)?void 0:e.$el.querySelector(`.${c.b("node")}[tabindex="-1"]`),a&&(a.focus(),!H.value&&a.click())},ia=()=>{var e,a;const l=null==(e=A.value)?void 0:e.input,t=M.value,s=null==(a=O.value)?void 0:a.$el;if(W&&l){if(s){s.querySelector(`.${c.e("suggestion-list")}`).style.minWidth=`${l.offsetWidth}px`}if(t){const{offsetHeight:e}=t,a=Y.value.length>0?Math.max(e,d)-2+"px":`${d}px`;l.style.height=a,la()}}},da=e=>{var a;return null==(a=P.value)?void 0:a.getCheckedNodes(e)},ra=e=>{la(),l("expandChange",e)},ca=e=>{if(j.value)return;switch(Q(e)){case G.enter:case G.numpadEnter:aa();break;case G.down:aa(!0),K(na),e.preventDefault();break;case G.esc:!0===q.value&&(e.preventDefault(),e.stopPropagation(),aa(!1));break;case G.tab:aa(!1)}},pa=()=>{var e;null==(e=P.value)||e.clearCheckedNodes(),!q.value&&t.filterable&&va(),aa(!1),l("clear")},va=()=>{const{value:e}=Ke;X.value=e,J.value=e},ha=e=>{const a=e.target,l=Q(e);switch(l){case G.up:case G.down:{e.preventDefault();const t=l===G.up?-1:1;Le(Ve(a,t,`.${c.e("suggestion-item")}[tabindex="-1"]`));break}case G.enter:case G.numpadEnter:a.click()}},fa=()=>{const e=Y.value[Y.value.length-1];r=J.value?0:r+1,!e||!r||t.collapseTags&&Y.value.length>1||(e.hitState?sa(e):e.hitState=!0)},ma=u(()=>t.debounce),ga=oe(()=>{const{value:e}=Be;if(!e)return;const a=t.beforeFilter(e);ge(a)?a.then(oa).catch(()=>{}):!1!==a?oa():ta()},ma),ya=(e,a)=>{!q.value&&aa(!0),(null==a?void 0:a.isComposing)||(e?ga():ta())},ba=e=>Number.parseFloat(me(S.cssVarName("input-height"),e).value)-2;return U(H,la),U([Fe,V,()=>t.collapseTags,()=>t.maxCollapseTags],()=>{if(!De.value)return;const e=(()=>{switch(t.showCheckedStrategy){case"child":return Fe.value;case"parent":{const e=da(!1),a=e.map(e=>e.value);return e.filter(e=>!e.parent||!a.includes(e.parent.value))}default:return[]}})(),a=[];e.forEach(e=>a.push((e=>{const{showAllLevels:a,separator:l}=t;return{node:e,key:e.uid,text:e.calcText(a,l),hitState:!1,closable:!V.value&&!e.isDisabled}})(e))),Y.value=a}),U(Y,()=>{K(()=>ia())}),U(Te,async()=>{await K();const e=A.value.input;d=ba(e)||d,ia()}),U(Ke,va,{immediate:!0}),U(()=>q.value,e=>{var a;e&&t.props.lazy&&t.props.lazyLoad&&(null==(a=P.value)||a.loadLazyRootNodes())}),Z(()=>{const e=A.value.input,a=ba(e);d=e.offsetHeight||a,ne(e,ia)}),a({getCheckedNodes:da,cascaderPanelRef:P,togglePopperVisible:aa,contentRef:Ye,presentText:Ke}),(e,a)=>(v(),f(m(Re),{ref_key:"tooltipRef",ref:F,visible:q.value,teleported:e.teleported,"popper-class":[m(c).e("dropdown"),e.popperClass],"popper-style":e.popperStyle,"popper-options":s,"fallback-placements":e.fallbackPlacements,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:e.placement,transition:`${m(c).namespace.value}-zoom-in-top`,effect:e.effect,pure:"",persistent:e.persistent,onHide:ta},{default:y(()=>[ie((v(),p("div",{ref_key:"wrapperRef",ref:Ae,class:C(m(Ge)),style:ce(m(ke)),onClick:()=>aa(!m(je)||void 0),onKeydown:ca,onMouseenter:e=>I.value=!0,onMouseleave:e=>I.value=!1},[i(m(Pe),{ref_key:"inputRef",ref:A,modelValue:X.value,"onUpdate:modelValue":e=>X.value=e,placeholder:m(xe),readonly:m(je),disabled:m(V),"validate-event":!1,size:m(Te),class:C(m(Je)),tabindex:m(De)&&e.filterable&&!m(V)?-1:void 0,onCompositionstart:m(B),onCompositionupdate:m(B),onCompositionend:m(B),onInput:ya},ue({suffix:y(()=>[m(Ze)?(v(),f(m(x),{key:"clear",class:C([m(S).e("icon"),"icon-circle-close"]),onClick:g(pa,["stop"])},{default:y(()=>[(v(),f(pe(e.clearIcon)))]),_:1},8,["class","onClick"])):(v(),f(m(x),{key:"arrow-down",class:C(m(Xe)),onClick:g(e=>aa(),["stop"])},{default:y(()=>[i(m(ve))]),_:1},8,["class","onClick"]))]),_:2},[e.$slots.prefix?{name:"prefix",fn:y(()=>[L(e.$slots,"prefix")])}:void 0]),1032,["modelValue","onUpdate:modelValue","placeholder","readonly","disabled","size","class","tabindex","onCompositionstart","onCompositionupdate","onCompositionend"]),m(De)?(v(),p("div",{key:0,ref_key:"tagWrapper",ref:M,class:C([m(c).e("tags"),m(c).is("validate",Boolean(m(We)))])},[L(e.$slots,"tag",{data:Y.value,deleteTag:sa},()=>[(v(!0),p(N,null,$(m(ae),a=>(v(),f(m(qe),{key:a.key,type:e.tagType,size:m(Ee),effect:e.tagEffect,hit:a.hitState,closable:a.closable,"disable-transitions":"",onClose:e=>sa(a)},{default:y(()=>[b("span",null,E(a.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))),128))]),e.collapseTags&&Y.value.length>e.maxCollapseTags?(v(),f(m(Re),{key:0,ref_key:"tagTooltipRef",ref:R,disabled:q.value||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom","popper-class":e.popperClass,"popper-style":e.popperStyle,effect:e.effect,persistent:e.persistent},{default:y(()=>[i(m(qe),{closable:!1,size:m(Ee),type:e.tagType,effect:e.tagEffect,"disable-transitions":""},{default:y(()=>[b("span",{class:C(m(c).e("tags-text"))}," + "+E(Y.value.length-e.maxCollapseTags),3)]),_:1},8,["size","type","effect"])]),content:y(()=>[i(m(ye),{"max-height":e.maxCollapseTagsTooltipHeight},{default:y(()=>[b("div",{class:C(m(c).e("collapse-tags"))},[(v(!0),p(N,null,$(m(le),(a,l)=>(v(),p("div",{key:l,class:C(m(c).e("collapse-tag"))},[(v(),f(m(qe),{key:a.key,class:"in-tooltip",type:e.tagType,size:m(Ee),effect:e.tagEffect,hit:a.hitState,closable:a.closable,"disable-transitions":"",onClose:e=>sa(a)},{default:y(()=>[b("span",null,E(a.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))],2))),128))],2)]),_:1},8,["max-height"])]),_:1},8,["disabled","popper-class","popper-style","effect","persistent"])):h("v-if",!0),e.filterable&&!m(V)?ie((v(),p("input",{key:1,"onUpdate:modelValue":e=>J.value=e,type:"text",class:C(m(c).e("search-input")),placeholder:m(Ke)?"":m(Ce),onInput:e=>ya(J.value,e),onClick:g(e=>aa(!0),["stop"]),onKeydown:he(fa,["delete"]),onCompositionstart:m(B),onCompositionupdate:m(B),onCompositionend:m(B)},null,42,["onUpdate:modelValue","placeholder","onInput","onClick","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend"])),[[fe,J.value]]):h("v-if",!0)],2)):h("v-if",!0)],46,["onClick","onMouseenter","onMouseleave"])),[[m(be),ea,m(Ye)]])]),content:y(()=>[e.$slots.header?(v(),p("div",{key:0,class:C(m(c).e("header")),onClick:g(()=>{},["stop"])},[L(e.$slots,"header")],10,["onClick"])):h("v-if",!0),ie(i(m(ua),{ref_key:"cascaderPanelRef",ref:P,modelValue:m(Qe),"onUpdate:modelValue":e=>de(Qe)?Qe.value=e:null,options:e.options,props:t.props,border:!1,"render-label":e.$slots.default,onExpandChange:ra,onClose:a=>e.$nextTick(()=>aa(!1))},{empty:y(()=>[L(e.$slots,"empty")]),_:3},8,["modelValue","onUpdate:modelValue","options","props","render-label","onClose"]),[[re,!H.value]]),e.filterable?ie((v(),f(m(ye),{key:1,ref_key:"suggestionPanel",ref:O,tag:"ul",class:C(m(c).e("suggestion-panel")),"view-class":m(c).e("suggestion-list"),onKeydown:ha},{default:y(()=>[ee.value.length?(v(!0),p(N,{key:0},$(ee.value,a=>(v(),p("li",{key:a.uid,class:C([m(c).e("suggestion-item"),m(c).is("checked",a.checked)]),tabindex:-1,onClick:e=>(e=>{var a,l;const{checked:t}=e;De.value?null==(a=P.value)||a.handleCheckChange(e,!t,!1):(!t&&(null==(l=P.value)||l.handleCheckChange(e,!0,!1)),aa(!1))})(a)},[L(e.$slots,"suggestion-item",{item:a},()=>[b("span",null,E(a.text),1),a.checked?(v(),f(m(x),{key:0},{default:y(()=>[i(m(k))]),_:1})):h("v-if",!0)])],10,["onClick"]))),128)):L(e.$slots,"empty",{key:1},()=>[b("li",{class:C(m(c).e("empty-text"))},E(m(w)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[re,H.value]]):h("v-if",!0),e.$slots.footer?(v(),p("div",{key:2,class:C(m(c).e("footer")),onClick:g(()=>{},["stop"])},[L(e.$slots,"footer")],10,["onClick"])):h("v-if",!0)]),_:3},8,["visible","teleported","popper-class","popper-style","fallback-placements","placement","transition","effect","persistent"]))}}),[["__file","cascader.vue"]])),ga=He(s({__name:"zoneSelecter",props:{selectZone:{type:String,default:"",required:!0},width:{type:String,default:"30em"},size:{type:String,default:"small"},clearable:{type:Boolean,default:!1},placeholder:{type:String,default:"选择区域"},showAllLevels:{type:Boolean,default:!0},border:{type:Boolean,default:!0}},emits:["update:selectZone"],setup(s,{emit:o}){let n=null,i=null;const{t:d,locale:r,setLang:c}=e(),p=u(()=>function(e,s){if(n&&i===s)return n;i=s;const o=[{type:l.Dungeons,label:e("zoneSelect.dungeons")},{type:l.Trials,label:e("zoneSelect.trials")},{type:l.Raids,label:e("zoneSelect.raids")},{type:l.ChaoticAllianceRaid,label:e("zoneSelect.chaoticAllianceRaid")},{type:l.UltimateRaids,label:e("zoneSelect.ultimateRaids")},{type:l.VCDungeonFinder,label:e("zoneSelect.vcDungeonFinder")},{type:l.DeepDungeonExtras,label:e("zoneSelect.deepDungeonExtras")},{type:l.DeepDungeons,label:e("zoneSelect.deepDungeons")},{type:l.DisciplesOfTheLand,label:e("zoneSelect.disciplesOfTheLand")},{type:l.Eureka,label:e("zoneSelect.eureka")},{type:l.SaveTheQueen,label:e("zoneSelect.saveTheQueen")},{type:l.OccultCrescent,label:e("zoneSelect.occultCrescent")}],d=[];return o.forEach(a=>{a.type===l.Trials?d.push({label:a.label,value:l.Trials,children:[{label:e("zoneSelect.trialExtreme"),value:"歼殛战",children:[]},{label:e("zoneSelect.trialUnreal"),value:"幻巧战",children:[]},{label:e("zoneSelect.trialNormal"),value:"歼灭战",children:[]}]}):a.type===l.Raids?d.push({label:a.label,value:l.Raids,children:[{label:e("zoneSelect.raidSavage"),value:"零式",children:[]},{label:e("zoneSelect.raidNormal"),value:"普通",children:[]}]}):d.push({label:a.label,value:a.type,children:[]})}),Object.entries(t).map(([e,a])=>({id:e,...a})).sort((e,a)=>e.exVersion!==a.exVersion?a.exVersion-e.exVersion:e.contentType===l.Raids&&a.contentType===l.Raids&&a.name.ja&&e.name.ja?e.name.ja.localeCompare(a.name.ja):Number(e.id)-Number(a.id)).filter(e=>!e.name.en.startsWith("(")&&e.contentType&&o.some(a=>a.type===e.contentType)).forEach(e=>{const t=e.id,s=`[${+e.exVersion+2}.0] `+a(e.name);if(e.contentType===l.Trials){const a=d.find(e=>e.value===l.Trials);if(!a)return;let o="歼灭战";e.name.en.includes("(Extreme)")||e.name.ja?.startsWith("極")||e.name.fr?.includes("(extrême)")?o="歼殛战":e.name.en.includes("(Unreal)")&&(o="幻巧战");const n=a.children.find(e=>e.value===o);n&&n.children.push({value:t,label:s})}else if(e.contentType===l.Raids){const a=d.find(e=>e.value===l.Raids);if(!a)return;const o=e.name.en.includes("(Savage)")?"零式":"普通",n=a.children.find(e=>e.value===o);n&&n.children.push({value:t,label:s})}else{const a=d.find(a=>a.value===e.contentType);a&&a.children.push({value:t,label:s})}}),d.push({label:e("zoneSelect.uncategorized"),value:"0"}),n=d.sort((e,a)=>{const l=o.findIndex(a=>a.label===e.label),t=o.findIndex(e=>e.label===a.label);return(-1===l?999:l)-(-1===t?999:t)}),n}(d,r.value)),h=s,g=o,y=z(h.selectZone);return U(y,e=>g("update:selectZone",e)),U(()=>h.selectZone,e=>y.value=e),Z(()=>{c("zhCn"),n=null,i=null}),(e,a)=>{const l=ma;return v(),f(l,{placeholder:h.placeholder,modelValue:m(y),"onUpdate:modelValue":a[0]||(a[0]=e=>de(y)?y.value=e:null),options:m(p),"show-all-levels":h.showAllLevels,props:{emitPath:!1,expandTrigger:"click"},style:ce({width:h.width}),size:h.size,filterable:"",clearable:h.clearable,class:C({"no-border":!h.border})},null,8,["placeholder","modelValue","options","show-all-levels","style","size","clearable","class"])}}}),[["__scopeId","data-v-6d49aacb"]]);export{Ke as C,sa as D,ma as E,ga as _,pa as a,ta as b,ha as c,ia as d,oa as e,ua as f,da as u};
