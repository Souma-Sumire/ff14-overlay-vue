import{P as e,Z as t,W as o,ak as s,_ as n,d as a,bU as l,r as i,h as r,bl as c,i as u,aQ as p,k as f,o as d,w as m,l as v,a as g,q as y,u as b,s as h,D as C,Y as x,n as k,t as I,T as S,c as T,F as _,v as L,ad as E,aR as H,bi as w,aq as B,ar as M,ap as F,aF as N,O as q,b0 as z,b as O,ah as $,a2 as j,bB as A,cR as U}from"./index-C_vJrq5H.js";const W=["primary","success","info","warning","error"],Z=e({customClass:{type:String,default:""},dangerouslyUseHTMLString:Boolean,duration:{type:Number,default:4500},icon:{type:o},id:{type:String,default:""},message:{type:s([String,Object,Function]),default:""},offset:{type:Number,default:0},onClick:{type:s(Function),default:()=>{}},onClose:{type:s(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...W,""],default:""},zIndex:Number,closeIcon:{type:o,default:t}}),D=a({name:"ElNotification"});var R=n(a({...D,props:Z,emits:{destroy:()=>!0},setup(e,{expose:t}){const o=e,{ns:s,zIndex:n}=l("notification"),{nextZIndex:a,currentZIndex:F}=n,N=i(!1);let q;const z=r(()=>{const e=o.type;return e&&c[o.type]?s.m(e):""}),O=r(()=>o.type&&c[o.type]||o.icon),$=r(()=>o.position.endsWith("right")?"right":"left"),j=r(()=>o.position.startsWith("top")?"top":"bottom"),A=r(()=>{var e;return{[j.value]:`${o.offset}px`,zIndex:null!=(e=o.zIndex)?e:F.value}});function U(){o.duration>0&&({stop:q}=w(()=>{N.value&&Z()},o.duration))}function W(){null==q||q()}function Z(){N.value=!1}return u(()=>{U(),a(),N.value=!0}),p(document,"keydown",function(e){switch(B(e)){case M.delete:case M.backspace:W();break;case M.esc:N.value&&Z();break;default:U()}}),t({visible:N,close:Z}),(e,t)=>(d(),f(H,{name:b(s).b("fade"),onBeforeLeave:e.onClose,onAfterLeave:t=>e.$emit("destroy"),persisted:""},{default:m(()=>[v(g("div",{id:e.id,class:h([b(s).b(),e.customClass,b($)]),style:y(b(A)),role:"alert",onMouseenter:W,onMouseleave:U,onClick:e.onClick},[b(O)?(d(),f(b(x),{key:0,class:h([b(s).e("icon"),b(z)])},{default:m(()=>[(d(),f(k(b(O))))]),_:1},8,["class"])):C("v-if",!0),g("div",{class:h(b(s).e("group"))},[g("h2",{class:h(b(s).e("title")),textContent:I(e.title)},null,10,["textContent"]),v(g("div",{class:h(b(s).e("content")),style:y(e.title?void 0:{margin:0})},[S(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(d(),T(_,{key:1},[C(" Caution here, message could've been compromised, never use user's input as message "),g("p",{innerHTML:e.message},null,8,["innerHTML"])],2112)):(d(),T("p",{key:0},I(e.message),1))])],6),[[L,e.message]]),e.showClose?(d(),f(b(x),{key:0,class:h(b(s).e("closeBtn")),onClick:E(Z,["stop"])},{default:m(()=>[(d(),f(k(e.closeIcon)))]),_:1},8,["class","onClick"])):C("v-if",!0)],2)],46,["id","onClick"]),[[L,N.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}}),[["__file","notification.vue"]]);const P={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]};let Q=1;const Y=function(e={},t){if(!F)return{close:()=>{}};(N(e)||q(e))&&(e={message:e});const o=e.position||"top-right";let s=e.offset||0;P[o].forEach(({vm:e})=>{var t;s+=((null==(t=e.el)?void 0:t.offsetHeight)||0)+16}),s+=16;const n="notification_"+Q++,a=e.onClose,l={...e,offset:s,id:n,onClose:()=>{!function(e,t,o){const s=P[t],n=s.findIndex(({vm:t})=>{var o;return(null==(o=t.component)?void 0:o.props.id)===e});if(-1===n)return;const{vm:a}=s[n];if(!a)return;null==o||o(a);const l=a.el.offsetHeight,i=t.split("-")[0];s.splice(n,1);const r=s.length;if(r<1)return;for(let c=n;c<r;c++){const{el:e,component:t}=s[c].vm,o=Number.parseInt(e.style[i],10)-l-16;t.props.offset=o}}(n,o,a)}};let i=document.body;z(e.appendTo)?i=e.appendTo:N(e.appendTo)&&(i=document.querySelector(e.appendTo)),z(i)||(i=document.body);const r=document.createElement("div"),c=O(R,l,$(l.message)?l.message:q(l.message)?()=>l.message:null);return c.appContext=j(t)?Y._context:t,c.props.onDestroy=()=>{A(null,r)},A(c,r),P[o].push({vm:c}),i.appendChild(r.firstElementChild),{close:()=>{c.component.exposed.visible.value=!1}}};W.forEach(e=>{Y[e]=(t={},o)=>((N(t)||q(t))&&(t={message:t}),Y({...t,type:e},o))}),Y.closeAll=function(){for(const e of Object.values(P))e.forEach(({vm:e})=>{e.component.exposed.visible.value=!1})},Y.updateOffsets=function(e="top-right"){var t,o,s,n;let a=(null==(s=null==(o=null==(t=P[e][0])?void 0:t.vm.component)?void 0:o.props)?void 0:s.offset)||0;for(const{vm:l}of P[e])l.component.props.offset=a,a+=((null==(n=l.el)?void 0:n.offsetHeight)||0)+16},Y._context=null;const G=U(Y,"$notify");export{G as E};
