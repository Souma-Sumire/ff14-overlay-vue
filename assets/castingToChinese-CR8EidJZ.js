import{c as e,_ as o}from"./shared-common-1fsdULpF.js";import{o as l,B as t,bC as a,v as n,J as s,r as i,t as m,K as u,V as r,_ as d,u as f,I as c,L as p,Z as h,Y as V,H as g,am as C,R as v,ac as w,ds as x,c as A}from"./vendor-vue-iK2zA9mI.js";import{q as I,v as b}from"./shared-core-DqyA8e41.js";import{a as z}from"./cactbot-Bq2Gp82n.js";import{aO as D,b as Y,k as S,j as U,c as X,d as T,l as y,n as P,p as _,v as F}from"./vendor-element-plus-Crd81rYT.js";const N={style:{width:"10rem"}},k={class:"noCSS"},$={class:"noCSS"},j={class:"container"},K={class:"actionID"},q=o(l({__name:"castingToChinese",setup(o){x(e=>({v0627a494:f(Z),b08baeec:f(O),b08baeea:f(R),v14366608:f(B),e0c71248:f(E),c4419fb8:f(W),c4419fb6:f(G),v25ab14a8:f(J),v8f41c7f8:f(Q),v8f41c7f6:f(ee),v514eb266:f(M),v72d13728:f(oe),v72d13729:f(le)})),t(()=>{I()});class l{name;startTime;castTime;overTime;actionId;constructor(e){this.name=function(e){const o=Number.parseInt(e[4],16),l=e[2],t=e[5];return b(o)||(l.startsWith("4")&&t.includes("unknown"),t)}(e),this.startTime=Date.now(),this.castTime=1e3*Number(e[8]),this.overTime=this.startTime+this.castTime,this.actionId=Number.parseInt(e[4],16)}}const q=w({targetCast:void 0}),H=[{value:"Target",label:"当前目标"},{value:"Focus",label:"焦点目标"}],L=i({width:265,showCountdown:!1,showProgress:!1,showActionChinese:!0,showActionID:!1,offsetProgressX:0,offsetProgressY:-22,offsetCountdownX:240,offsetCountdownY:-5,offsetActionChineseX:275,offsetActionChineseY:-45,offsetActionIDX:10,offsetActionIDY:-5,ping:80,keep:100,fontSizeCountDown:17,fontSizeActionName:20,fontFamily:"SmartisanHei",targetKey:"Target"});a("castingToChineseFix",L,localStorage,{mergeDefaults:!0});const M=A(()=>`${L.value.width}px`),Z=A(()=>L.value.showCountdown?1:0),B=A(()=>L.value.showProgress?1:0),E=A(()=>L.value.showActionChinese?1:0),J=A(()=>L.value.showActionID?1:0),O=A(()=>`${L.value.offsetCountdownX}px`),R=A(()=>-1*L.value.offsetCountdownY+"px"),W=A(()=>`${L.value.offsetActionChineseX}px`),G=A(()=>-1*L.value.offsetActionChineseY+"px"),Q=A(()=>`${L.value.offsetActionIDX}px`),ee=A(()=>-1*L.value.offsetActionIDY+"px"),oe=A(()=>`${L.value.offsetProgressX}px`),le=A(()=>-1*L.value.offsetProgressY+"px"),te=new Map,ae=i(0),ne=L.value.ping;function se(){localStorage.removeItem("castingToChinese"),location.reload()}return z("EnmityTargetData",e=>{q.targetCast=te.get(e[L.value.targetKey]?.ID)}),z("LogLine",e=>{"20"===e.line[0]?te.set(Number.parseInt(e.line[2],16),new l(e.line)):"23"===e.line[0]&&te.delete(Number.parseInt(e.line[2],16))}),z("ChangeZone",()=>te.clear()),requestAnimationFrame(function e(){ae.value=Date.now(),requestAnimationFrame(e)}),(o,l)=>{const t=Y,a=S,i=U,w=T,x=X,A=P,I=y,b=_,z=D,M=F,Z=e;return m(),n(Z,null,{readme:s(()=>[c(b,{class:"settings"},{default:s(()=>[u("form",null,[l[20]||(l[20]=V(" 宽度: ",-1)),c(t,{modelValue:f(L).width,"onUpdate:modelValue":l[0]||(l[0]=e=>f(L).width=e),min:20,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),u("form",null,[l[21]||(l[21]=V("显示倒计时: ",-1)),c(a,{modelValue:f(L).showCountdown,"onUpdate:modelValue":l[1]||(l[1]=e=>f(L).showCountdown=e)},null,8,["modelValue"])]),u("form",null,[l[22]||(l[22]=V("显示进度条: ",-1)),c(a,{modelValue:f(L).showProgress,"onUpdate:modelValue":l[2]||(l[2]=e=>f(L).showProgress=e)},null,8,["modelValue"])]),u("form",null,[l[23]||(l[23]=V(" 显示中文: ",-1)),c(a,{modelValue:f(L).showActionChinese,"onUpdate:modelValue":l[3]||(l[3]=e=>f(L).showActionChinese=e)},null,8,["modelValue"])]),u("form",null,[l[24]||(l[24]=V("显示ID: ",-1)),c(a,{modelValue:f(L).showActionID,"onUpdate:modelValue":l[4]||(l[4]=e=>f(L).showActionID=e)},null,8,["modelValue"])]),u("form",null,[l[25]||(l[25]=V(" 延迟(ms): ",-1)),c(t,{modelValue:f(L).ping,"onUpdate:modelValue":l[5]||(l[5]=e=>f(L).ping=e),min:0,max:1e4,size:"small","controls-position":"right"},null,8,["modelValue"])]),u("form",null,[l[26]||(l[26]=V(" 保留(ms): ",-1)),c(t,{modelValue:f(L).keep,"onUpdate:modelValue":l[6]||(l[6]=e=>f(L).keep=e),min:0,max:1e5,size:"small","controls-position":"right"},null,8,["modelValue"])]),u("form",null,[l[27]||(l[27]=V(" 进度条偏移X: ",-1)),c(t,{modelValue:f(L).offsetProgressX,"onUpdate:modelValue":l[7]||(l[7]=e=>f(L).offsetProgressX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),u("form",null,[l[28]||(l[28]=V(" 进度条偏移Y: ",-1)),c(t,{modelValue:f(L).offsetProgressY,"onUpdate:modelValue":l[8]||(l[8]=e=>f(L).offsetProgressY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),u("form",null,[l[29]||(l[29]=V(" 倒计时偏移X: ",-1)),c(t,{modelValue:f(L).offsetCountdownX,"onUpdate:modelValue":l[9]||(l[9]=e=>f(L).offsetCountdownX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),u("form",null,[l[30]||(l[30]=V(" 倒计时偏移Y: ",-1)),c(t,{modelValue:f(L).offsetCountdownY,"onUpdate:modelValue":l[10]||(l[10]=e=>f(L).offsetCountdownY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),u("form",null,[l[31]||(l[31]=V(" 中文偏移X: ",-1)),c(t,{modelValue:f(L).offsetActionChineseX,"onUpdate:modelValue":l[11]||(l[11]=e=>f(L).offsetActionChineseX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),u("form",null,[l[32]||(l[32]=V(" 中文偏移Y: ",-1)),c(t,{modelValue:f(L).offsetActionChineseY,"onUpdate:modelValue":l[12]||(l[12]=e=>f(L).offsetActionChineseY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),u("form",null,[l[33]||(l[33]=V(" ID偏移X: ",-1)),c(t,{modelValue:f(L).offsetActionIDX,"onUpdate:modelValue":l[13]||(l[13]=e=>f(L).offsetActionIDX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),u("form",null,[l[34]||(l[34]=V(" ID偏移Y: ",-1)),c(t,{modelValue:f(L).offsetActionIDY,"onUpdate:modelValue":l[14]||(l[14]=e=>f(L).offsetActionIDY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),u("form",null,[l[35]||(l[35]=V(" 倒计时字号(px): ",-1)),c(t,{modelValue:f(L).fontSizeCountDown,"onUpdate:modelValue":l[15]||(l[15]=e=>f(L).fontSizeCountDown=e),min:1,max:100,size:"small","controls-position":"right"},null,8,["modelValue"])]),u("form",null,[l[36]||(l[36]=V(" 中文字号(px): ",-1)),c(t,{modelValue:f(L).fontSizeActionName,"onUpdate:modelValue":l[16]||(l[16]=e=>f(L).fontSizeActionName=e),min:1,max:100,size:"small","controls-position":"right"},null,8,["modelValue"])]),u("form",N,[l[37]||(l[37]=V(" 字体: ",-1)),c(i,{modelValue:f(L).fontFamily,"onUpdate:modelValue":l[17]||(l[17]=e=>f(L).fontFamily=e),size:"small",clearable:"",onClear:l[18]||(l[18]=e=>f(L).fontFamily="SmartisanHei")},null,8,["modelValue"])]),u("form",k,[c(x,{modelValue:f(L).targetKey,"onUpdate:modelValue":l[19]||(l[19]=e=>f(L).targetKey=e),placeholder:"Select",size:"small",teleported:!1},{default:s(()=>[(m(),g(v,null,C(H,e=>c(w,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),u("form",$,[c(I,{teleported:!1,title:"确定要重置？",onConfirm:se},{reference:s(()=>[c(A,null,{default:s(()=>[...l[38]||(l[38]=[V("重置全部用户设置",-1)])]),_:1})]),_:1})])]),_:1})]),default:s(()=>[u("div",j,[r(c(M,{style:p({fontFamily:f(L).fontFamily})},{default:s(()=>[u("div",{style:p({fontSize:`${f(L).fontSizeCountDown}px`}),class:"countdown"},h(Math.max(((f(q).targetCast?.overTime??1)-f(ae)-f(ne))/1e3,0).toFixed(2)),5),c(z,{percentage:Math.min((f(ae)-(f(q).targetCast?.startTime??1)+f(ne))/(f(q).targetCast?.castTime??1)*100,100),"stroke-width":8,indeterminate:!1,"show-text":!1,color:"#fbfff9",class:"progress"},null,8,["percentage"]),u("div",K,h(f(q).targetCast?.actionId)+"("+h(f(q).targetCast?.actionId.toString(16).toUpperCase())+") ",1),u("div",{style:p({fontSize:`${f(L).fontSizeActionName}px`}),class:"actionChinese"},h(f(q).targetCast?.name),5)]),_:1},8,["style"]),[[d,f(q).targetCast&&f(ae)-f(q).targetCast.overTime+f(ne)<f(L).keep]])])]),_:1})}}}),[["__scopeId","data-v-b5e57b5a"]]);export{q as default};
