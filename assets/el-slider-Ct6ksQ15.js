import{Q as e,ab as a,P as t,ak as l,av as i,X as o,r as n,h as r,A as s,aQ as u,ao as d,aq as m,ar as v,_ as p,d as c,S as g,f,bE as b,c as h,o as V,b as w,w as y,a as x,s as S,u as k,t as B,q as M,aF as C,z as E,M as P,i as L,af as z,V as D,k as N,D as T,F,m as I,ad as X,a0 as Y}from"./index-C_vJrq5H.js";import{E as _}from"./el-input-number-C2KhqdY8.js";import{b as j,E as U}from"./el-popper-VrKIWMTN.js";import{C as K,I as W,U as R,u as $,t as A,d as O}from"./index-BQUC8YF5.js";import{t as q,d as Q}from"./el-tag-CL4elYdq.js";import{b as H,d as G,u as J}from"./use-form-common-props-gFrq1vXC.js";const Z=Symbol("sliderContextKey"),ee=t({modelValue:{type:l([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:i,inputSize:i,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:l(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:l(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:j,default:"top"},marks:{type:l(Object)},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...$(["ariaLabel"])}),ae=t=>e(t)||a(t)&&t.every(e),te={[R]:ae,[W]:ae,[K]:ae},le=t({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:j,default:"top"}}),ie={[R]:a=>e(a)},oe=(e,a,t)=>{const{disabled:l,min:i,max:p,step:c,showTooltip:g,persistent:f,precision:b,sliderSize:h,formatTooltip:V,emitChange:w,resetSize:y,updateDragging:x}=o(Z),{tooltip:S,tooltipVisible:k,formatValue:B,displayTooltip:M,hideTooltip:C}=((e,a,t)=>{const l=n(),i=n(!1),o=r(()=>a.value instanceof Function),s=r(()=>o.value&&a.value(e.modelValue)||e.modelValue),u=Q(()=>{t.value&&(i.value=!0)},50),d=Q(()=>{t.value&&(i.value=!1)},50);return{tooltip:l,tooltipVisible:i,formatValue:s,displayTooltip:u,hideTooltip:d}})(e,V,g),E=n(),P=r(()=>(e.modelValue-i.value)/(p.value-i.value)*100+"%"),L=r(()=>e.vertical?{bottom:P.value}:{left:P.value}),z=e=>{l.value||(e.preventDefault(),T(e),window.addEventListener("mousemove",F),window.addEventListener("touchmove",F),window.addEventListener("mouseup",I),window.addEventListener("touchend",I),window.addEventListener("contextmenu",I),E.value.focus())},D=e=>{l.value||(a.newPosition=Number.parseFloat(P.value)+e/(p.value-i.value)*100,X(a.newPosition),w())},N=e=>{let a,t;return e.type.startsWith("touch")?(t=e.touches[0].clientY,a=e.touches[0].clientX):(t=e.clientY,a=e.clientX),{clientX:a,clientY:t}},T=t=>{a.dragging=!0,a.isClick=!0;const{clientX:l,clientY:i}=N(t);e.vertical?a.startY=i:a.startX=l,a.startPosition=Number.parseFloat(P.value),a.newPosition=a.startPosition},F=t=>{if(a.dragging){let l;a.isClick=!1,M(),y();const{clientX:i,clientY:o}=N(t);e.vertical?(a.currentY=o,l=(a.startY-a.currentY)/h.value*100):(a.currentX=i,l=(a.currentX-a.startX)/h.value*100),a.newPosition=a.startPosition+l,X(a.newPosition)}},I=()=>{a.dragging&&(setTimeout(()=>{a.dragging=!1,a.hovering||C(),a.isClick||X(a.newPosition),w()},0),window.removeEventListener("mousemove",F),window.removeEventListener("touchmove",F),window.removeEventListener("mouseup",I),window.removeEventListener("touchend",I),window.removeEventListener("contextmenu",I))},X=async l=>{if(null===l||Number.isNaN(+l))return;var o,n,r;o=l,n=0,void 0===(r=100)&&(r=n,n=void 0),void 0!==r&&(r=(r=q(r))==r?r:0),void 0!==n&&(n=(n=q(n))==n?n:0),l=function(e,a,t){return e==e&&(void 0!==t&&(e=e<=t?e:t),void 0!==a&&(e=e>=a?e:a)),e}(q(o),n,r);const s=Math.floor((p.value-i.value)/c.value),u=s*c.value/(p.value-i.value)*100,m=u+(100-u)/2;let v;if(l<u){const e=u/s,a=Math.round(l/e);v=i.value+a*c.value}else v=l<m?i.value+s*c.value:p.value;v=Number.parseFloat(v.toFixed(b.value)),v!==e.modelValue&&t(R,v),a.dragging||e.modelValue===a.oldValue||(a.oldValue=e.modelValue),await d(),a.dragging&&M(),S.value.updatePopper()};return s(()=>a.dragging,e=>{x(e)}),u(E,"touchstart",z,{passive:!1}),{disabled:l,button:E,tooltip:S,tooltipVisible:k,showTooltip:g,persistent:f,wrapperStyle:L,formatValue:B,handleMouseEnter:()=>{a.hovering=!0,M()},handleMouseLeave:()=>{a.hovering=!1,a.dragging||C()},onButtonDown:z,onKeyDown:e=>{let a=!0;switch(m(e)){case v.left:case v.down:D(-c.value);break;case v.right:case v.up:D(c.value);break;case v.home:l.value||(X(0),w());break;case v.end:l.value||(X(100),w());break;case v.pageDown:D(4*-c.value);break;case v.pageUp:D(4*c.value);break;default:a=!1}a&&e.preventDefault()},setPosition:X}},ne=c({name:"ElSliderButton"});var re=p(c({...ne,props:le,emits:ie,setup(e,{expose:a,emit:t}){const l=e,i=g("slider"),o=f({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:l.modelValue}),n=r(()=>!!m.value&&v.value),{disabled:s,button:u,tooltip:d,showTooltip:m,persistent:v,tooltipVisible:p,wrapperStyle:c,formatValue:C,handleMouseEnter:E,handleMouseLeave:P,onButtonDown:L,onKeyDown:z,setPosition:D}=oe(l,o,t),{hovering:N,dragging:T}=b(o);return a({onButtonDown:L,onKeyDown:z,setPosition:D,hovering:N,dragging:T}),(e,a)=>(V(),h("div",{ref_key:"button",ref:u,class:S([k(i).e("button-wrapper"),{hover:k(N),dragging:k(T)}]),style:M(k(c)),tabindex:k(s)?-1:0,onMouseenter:k(E),onMouseleave:k(P),onMousedown:k(L),onFocus:k(E),onBlur:k(P),onKeydown:k(z)},[w(k(U),{ref_key:"tooltip",ref:d,visible:k(p),placement:e.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":e.tooltipClass,disabled:!k(m),persistent:k(n)},{content:y(()=>[x("span",null,B(k(C)),1)]),default:y(()=>[x("div",{class:S([k(i).e("button"),{hover:k(N),dragging:k(T)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled","persistent"])],46,["tabindex","onMouseenter","onMouseleave","onMousedown","onFocus","onBlur","onKeydown"]))}}),[["__file","button.vue"]]);var se=c({name:"ElSliderMarker",props:t({mark:{type:l([String,Object]),default:void 0}}),setup(e){const a=g("slider"),t=r(()=>C(e.mark)?e.mark:e.mark.label),l=r(()=>C(e.mark)?void 0:e.mark.style);return()=>E("div",{class:a.e("marks-text"),style:l.value},t.value)}});const ue=(e,a,t)=>{const{form:l,formItem:i}=H(),o=P(),s=n(),u=n(),m={firstButton:s,secondButton:u},v=r(()=>e.disabled||(null==l?void 0:l.disabled)||!1),p=r(()=>Math.min(a.firstValue,a.secondValue)),c=r(()=>Math.max(a.firstValue,a.secondValue)),g=r(()=>e.range?100*(c.value-p.value)/(e.max-e.min)+"%":100*(a.firstValue-e.min)/(e.max-e.min)+"%"),f=r(()=>e.range?100*(p.value-e.min)/(e.max-e.min)+"%":"0%"),b=r(()=>e.vertical?{height:e.height}:{}),h=r(()=>e.vertical?{height:g.value,bottom:f.value}:{width:g.value,left:f.value}),V=()=>{if(o.value){const t=o.value.getBoundingClientRect();a.sliderSize=t[e.vertical?"height":"width"]}},w=t=>{const l=(t=>{const l=e.min+t*(e.max-e.min)/100;if(!e.range)return s;let i;return i=Math.abs(p.value-l)<Math.abs(c.value-l)?a.firstValue<a.secondValue?"firstButton":"secondButton":a.firstValue>a.secondValue?"firstButton":"secondButton",m[i]})(t);return l.value.setPosition(t),l},y=e=>{t(R,e),t(W,e)},x=async()=>{await d(),t(K,e.range?[p.value,c.value]:e.modelValue)},S=t=>{var l,i,n,r,s,u;if(v.value||a.dragging)return;V();let d=0;if(e.vertical){const e=null!=(n=null==(i=null==(l=t.touches)?void 0:l.item(0))?void 0:i.clientY)?n:t.clientY;d=(o.value.getBoundingClientRect().bottom-e)/a.sliderSize*100}else{d=((null!=(u=null==(s=null==(r=t.touches)?void 0:r.item(0))?void 0:s.clientX)?u:t.clientX)-o.value.getBoundingClientRect().left)/a.sliderSize*100}return d<0||d>100?void 0:w(d)};return{elFormItem:i,slider:o,firstButton:s,secondButton:u,sliderDisabled:v,minValue:p,maxValue:c,runwayStyle:b,barStyle:h,resetSize:V,setPosition:w,emitChange:x,onSliderWrapperPrevent:e=>{var a,t;((null==(a=m.firstButton.value)?void 0:a.dragging)||(null==(t=m.secondButton.value)?void 0:t.dragging))&&e.preventDefault()},onSliderClick:e=>{S(e)&&x()},onSliderDown:async e=>{const a=S(e);a&&(await d(),a.value.onButtonDown(e))},onSliderMarkerDown:e=>{if(v.value||a.dragging)return;w(e)&&x()},setFirstValue:t=>{a.firstValue=null!=t?t:e.min,y(e.range?[p.value,c.value]:null!=t?t:e.min)},setSecondValue:t=>{a.secondValue=t,e.range&&y([p.value,c.value])}}},de=c({name:"ElSlider"});const me=Y(p(c({...de,props:ee,emits:te,setup(t,{expose:l,emit:i}){const o=t,m=g("slider"),{t:v}=z(),p=f({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:c,slider:y,firstButton:B,secondButton:C,sliderDisabled:E,minValue:P,maxValue:Y,runwayStyle:j,barStyle:U,resetSize:K,emitChange:$,onSliderWrapperPrevent:q,onSliderClick:Q,onSliderDown:H,onSliderMarkerDown:ee,setFirstValue:ae,setSecondValue:te}=ue(o,p,i),{stops:le,getStopStyle:ie}=((e,a,t,l)=>({stops:r(()=>{if(!e.showStops||e.min>e.max)return[];if(0===e.step)return[];const i=Math.ceil((e.max-e.min)/e.step),o=100*e.step/(e.max-e.min),n=Array.from({length:i-1}).map((e,a)=>(a+1)*o);return e.range?n.filter(a=>a<100*(t.value-e.min)/(e.max-e.min)||a>100*(l.value-e.min)/(e.max-e.min)):n.filter(t=>t>100*(a.firstValue-e.min)/(e.max-e.min))}),getStopStyle:a=>e.vertical?{bottom:`${a}%`}:{left:`${a}%`}}))(o,p,P,Y),{inputId:oe,isLabeledByFormItem:ne}=G(o,{formItemContext:c}),de=J(),me=r(()=>o.inputSize||de.value),ve=r(()=>o.ariaLabel||v("el.slider.defaultLabel",{min:o.min,max:o.max})),pe=r(()=>o.range?o.rangeStartLabel||v("el.slider.defaultRangeStartLabel"):ve.value),ce=r(()=>o.formatValueText?o.formatValueText(ye.value):`${ye.value}`),ge=r(()=>o.rangeEndLabel||v("el.slider.defaultRangeEndLabel")),fe=r(()=>o.formatValueText?o.formatValueText(xe.value):`${xe.value}`),be=r(()=>[m.b(),m.m(de.value),m.is("vertical",o.vertical),{[m.m("with-input")]:o.showInput}]),he=(e=>r(()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort((e,a)=>e-a).filter(a=>a<=e.max&&a>=e.min).map(a=>({point:a,position:100*(a-e.min)/(e.max-e.min),mark:e.marks[a]})):[]))(o);((t,l,i,o,n,r)=>{const u=e=>{n(R,e),n(W,e)},d=()=>t.range?![i.value,o.value].every((e,a)=>e===l.oldValue[a]):t.modelValue!==l.oldValue,m=()=>{var i,o;t.min>t.max&&A("Slider","min should not be greater than max.");const n=t.modelValue;t.range&&a(n)?n[1]<t.min?u([t.min,t.min]):n[0]>t.max?u([t.max,t.max]):n[0]<t.min?u([t.min,n[1]]):n[1]>t.max?u([n[0],t.max]):(l.firstValue=n[0],l.secondValue=n[1],d()&&(t.validateEvent&&(null==(i=null==r?void 0:r.validate)||i.call(r,"change").catch(e=>O())),l.oldValue=n.slice())):t.range||!e(n)||Number.isNaN(n)||(n<t.min?u(t.min):n>t.max?u(t.max):(l.firstValue=n,d()&&(t.validateEvent&&(null==(o=null==r?void 0:r.validate)||o.call(r,"change").catch(e=>O())),l.oldValue=n)))};m(),s(()=>l.dragging,e=>{e||m()}),s(()=>t.modelValue,(e,t)=>{l.dragging||a(e)&&a(t)&&e.every((e,a)=>e===t[a])&&l.firstValue===e[0]&&l.secondValue===e[1]||m()},{deep:!0}),s(()=>[t.min,t.max],()=>{m()})})(o,p,P,Y,i,c);const Ve=r(()=>{const e=[o.min,o.max,o.step].map(e=>{const a=`${e}`.split(".")[1];return a?a.length:0});return Math.max.apply(null,e)}),{sliderWrapper:we}=((t,l,i)=>{const o=n();return L(async()=>{t.range?(a(t.modelValue)?(l.firstValue=Math.max(t.min,t.modelValue[0]),l.secondValue=Math.min(t.max,t.modelValue[1])):(l.firstValue=t.min,l.secondValue=t.max),l.oldValue=[l.firstValue,l.secondValue]):(!e(t.modelValue)||Number.isNaN(t.modelValue)?l.firstValue=t.min:l.firstValue=Math.min(t.max,Math.max(t.min,t.modelValue)),l.oldValue=l.firstValue),u(window,"resize",i),await d(),i()}),{sliderWrapper:o}})(o,p,K),{firstValue:ye,secondValue:xe,sliderSize:Se}=b(p);return u(we,"touchstart",q,{passive:!1}),u(we,"touchmove",q,{passive:!1}),D(Z,{...b(o),sliderSize:Se,disabled:E,precision:Ve,emitChange:$,resetSize:K,updateDragging:e=>{p.dragging=e}}),l({onSliderClick:Q}),(e,a)=>{var t,l;return V(),h("div",{id:e.range?k(oe):void 0,ref_key:"sliderWrapper",ref:we,class:S(k(be)),role:e.range?"group":void 0,"aria-label":e.range&&!k(ne)?k(ve):void 0,"aria-labelledby":e.range&&k(ne)?null==(t=k(c))?void 0:t.labelId:void 0},[x("div",{ref_key:"slider",ref:y,class:S([k(m).e("runway"),{"show-input":e.showInput&&!e.range},k(m).is("disabled",k(E))]),style:M(k(j)),onMousedown:k(H),onTouchstartPassive:k(H)},[x("div",{class:S(k(m).e("bar")),style:M(k(U))},null,6),w(re,{id:e.range?void 0:k(oe),ref_key:"firstButton",ref:B,"model-value":k(ye),vertical:e.vertical,"tooltip-class":e.tooltipClass,placement:e.placement,role:"slider","aria-label":e.range||!k(ne)?k(pe):void 0,"aria-labelledby":!e.range&&k(ne)?null==(l=k(c))?void 0:l.labelId:void 0,"aria-valuemin":e.min,"aria-valuemax":e.range?k(xe):e.max,"aria-valuenow":k(ye),"aria-valuetext":k(ce),"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":k(E),"onUpdate:modelValue":k(ae)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),e.range?(V(),N(re,{key:0,ref_key:"secondButton",ref:C,"model-value":k(xe),vertical:e.vertical,"tooltip-class":e.tooltipClass,placement:e.placement,role:"slider","aria-label":k(ge),"aria-valuemin":k(ye),"aria-valuemax":e.max,"aria-valuenow":k(xe),"aria-valuetext":k(fe),"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":k(E),"onUpdate:modelValue":k(te)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):T("v-if",!0),e.showStops?(V(),h("div",{key:1},[(V(!0),h(F,null,I(k(le),(e,a)=>(V(),h("div",{key:a,class:S(k(m).e("stop")),style:M(k(ie)(e))},null,6))),128))])):T("v-if",!0),k(he).length>0?(V(),h(F,{key:2},[x("div",null,[(V(!0),h(F,null,I(k(he),(e,a)=>(V(),h("div",{key:a,style:M(k(ie)(e.position)),class:S([k(m).e("stop"),k(m).e("marks-stop")])},null,6))),128))]),x("div",{class:S(k(m).e("marks"))},[(V(!0),h(F,null,I(k(he),(e,a)=>(V(),N(k(se),{key:a,mark:e.mark,style:M(k(ie)(e.position)),onMousedown:X(a=>k(ee)(e.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):T("v-if",!0)],46,["onMousedown","onTouchstartPassive"]),e.showInput&&!e.range?(V(),N(k(_),{key:0,ref:"input","model-value":k(ye),class:S(k(m).e("input")),step:e.step,disabled:k(E),controls:e.showInputControls,min:e.min,max:e.max,precision:k(Ve),size:k(me),"onUpdate:modelValue":k(ae),onChange:k($)},null,8,["model-value","class","step","disabled","controls","min","max","precision","size","onUpdate:modelValue","onChange"])):T("v-if",!0)],10,["id","role","aria-label","aria-labelledby"])}}}),[["__file","slider.vue"]]));export{me as E};
