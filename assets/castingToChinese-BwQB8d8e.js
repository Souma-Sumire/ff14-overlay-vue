import{_ as e}from"./ActWrapper-CkoTEZYB.js";import{d as o,f as l,r as t,g as a,h as s,k as n,w as i,o as m,a as r,l as u,v as f,u as d,b as p,q as c,t as h,e as g,c as V,m as v,F as C,p as w}from"./index-C_vJrq5H.js";/* empty css                */import{E as x}from"./el-progress-B7bvuT-w.js";/* empty css                  */import{E as A}from"./el-popconfirm-CPUOOBtM.js";import"./el-popper-VrKIWMTN.js";/* empty css                   *//* empty css                  */import"./el-tag-CL4elYdq.js";import{a as j,E as D}from"./el-select-nw4Uy7Vr.js";/* empty css                 */import{E as I}from"./el-switch-CBjkiNNt.js";import{E as z}from"./el-input-number-C2KhqdY8.js";import{g as b}from"./actionChinese-DM96CSZ4.js";import{a as S}from"./overlay_plugin_api-DHbPkDtN.js";import{b as U,a as X}from"./index-DYYxig3l.js";import{E as Y}from"./validator-B4JQ65dM.js";import{E as y}from"./index-BiQCIIgT.js";import{_ as T}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./el-card-Cy19VjyD.js";import"./useDev-Cul7tw2w.js";import"./useDemo-KSUu11yU.js";import"./index-BQUC8YF5.js";import"./index-D0Ykw6Qx.js";import"./focus-trap-cRSfNoTL.js";import"./use-form-common-props-gFrq1vXC.js";import"./index-D9P7iDwm.js";import"./vnode-DCFdyNXF.js";import"./index-B1JHDqqb.js";import"./index-qmBAyEMl.js";const _={style:{width:"10rem"}},F={class:"noCSS"},P={class:"noCSS"},N={class:"container"},k={class:"actionID"},E=T(o({__name:"castingToChinese",setup(o){w(e=>({d8578c00:d(M),v3ea234d4:d(B),v3ea234d5:d(G),v2156a87e:d(q),v1fb14e26:d(H),v2df4076e:d(J),v2df4076f:d(O),v0b6a8fbc:d(W),v7501430c:d(Q),v7501430a:d(R),d8a2c048:d(L),v7ff1799e:d(Z),v7ff1799f:d(ee)}));class T{name;startTime;castTime;overTime;actionId;constructor(e){this.name=function(e){const o=Number.parseInt(e[4],16),l=e[2],t=e[5];return b(o)||(l.startsWith("4")&&t.includes("unknown"),t)}(e),this.startTime=Date.now(),this.castTime=1e3*Number(e[8]),this.overTime=this.startTime+this.castTime,this.actionId=Number.parseInt(e[4],16)}}const E=l({targetCast:void 0}),$=[{value:"Target",label:"当前目标"},{value:"Focus",label:"焦点目标"}],K=t({width:265,showCountdown:!1,showProgress:!1,showActionChinese:!0,showActionID:!1,offsetProgressX:0,offsetProgressY:-22,offsetCountdownX:240,offsetCountdownY:-5,offsetActionChineseX:275,offsetActionChineseY:-45,offsetActionIDX:10,offsetActionIDY:-5,ping:80,keep:100,fontSizeCountDown:17,fontSizeActionName:20,fontFamily:"SmartisanHei",targetKey:"Target"});a("castingToChineseFix",K,localStorage,{mergeDefaults:!0});const L=s(()=>`${K.value.width}px`),M=s(()=>K.value.showCountdown?1:0),q=s(()=>K.value.showProgress?1:0),H=s(()=>K.value.showActionChinese?1:0),W=s(()=>K.value.showActionID?1:0),B=s(()=>`${K.value.offsetCountdownX}px`),G=s(()=>-1*K.value.offsetCountdownY+"px"),J=s(()=>`${K.value.offsetActionChineseX}px`),O=s(()=>-1*K.value.offsetActionChineseY+"px"),Q=s(()=>`${K.value.offsetActionIDX}px`),R=s(()=>-1*K.value.offsetActionIDY+"px"),Z=s(()=>`${K.value.offsetProgressX}px`),ee=s(()=>-1*K.value.offsetProgressY+"px"),oe=new Map,le=t(0),te=K.value.ping;function ae(){localStorage.removeItem("castingToChinese"),location.reload()}return S("EnmityTargetData",e=>{E.targetCast=oe.get(e[K.value.targetKey]?.ID)}),S("LogLine",e=>{"20"===e.line[0]?oe.set(Number.parseInt(e.line[2],16),new T(e.line)):"23"===e.line[0]&&oe.delete(Number.parseInt(e.line[2],16))}),S("ChangeZone",()=>oe.clear()),requestAnimationFrame(function e(){le.value=Date.now(),requestAnimationFrame(e)}),(o,l)=>{const t=z,a=I,s=Y,w=D,b=j,S=y,T=A,L=X,M=x,q=U,H=e;return m(),n(H,null,{readme:i(()=>[p(L,{class:"settings"},{default:i(()=>[r("form",null,[l[20]||(l[20]=g(" 宽度: ",-1)),p(t,{modelValue:d(K).width,"onUpdate:modelValue":l[0]||(l[0]=e=>d(K).width=e),min:20,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",null,[l[21]||(l[21]=g("显示倒计时: ",-1)),p(a,{modelValue:d(K).showCountdown,"onUpdate:modelValue":l[1]||(l[1]=e=>d(K).showCountdown=e)},null,8,["modelValue"])]),r("form",null,[l[22]||(l[22]=g("显示进度条: ",-1)),p(a,{modelValue:d(K).showProgress,"onUpdate:modelValue":l[2]||(l[2]=e=>d(K).showProgress=e)},null,8,["modelValue"])]),r("form",null,[l[23]||(l[23]=g(" 显示中文: ",-1)),p(a,{modelValue:d(K).showActionChinese,"onUpdate:modelValue":l[3]||(l[3]=e=>d(K).showActionChinese=e)},null,8,["modelValue"])]),r("form",null,[l[24]||(l[24]=g("显示ID: ",-1)),p(a,{modelValue:d(K).showActionID,"onUpdate:modelValue":l[4]||(l[4]=e=>d(K).showActionID=e)},null,8,["modelValue"])]),r("form",null,[l[25]||(l[25]=g(" 延迟(ms): ",-1)),p(t,{modelValue:d(K).ping,"onUpdate:modelValue":l[5]||(l[5]=e=>d(K).ping=e),min:0,max:1e4,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",null,[l[26]||(l[26]=g(" 保留(ms): ",-1)),p(t,{modelValue:d(K).keep,"onUpdate:modelValue":l[6]||(l[6]=e=>d(K).keep=e),min:0,max:1e5,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",null,[l[27]||(l[27]=g(" 进度条偏移X: ",-1)),p(t,{modelValue:d(K).offsetProgressX,"onUpdate:modelValue":l[7]||(l[7]=e=>d(K).offsetProgressX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),r("form",null,[l[28]||(l[28]=g(" 进度条偏移Y: ",-1)),p(t,{modelValue:d(K).offsetProgressY,"onUpdate:modelValue":l[8]||(l[8]=e=>d(K).offsetProgressY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",null,[l[29]||(l[29]=g(" 倒计时偏移X: ",-1)),p(t,{modelValue:d(K).offsetCountdownX,"onUpdate:modelValue":l[9]||(l[9]=e=>d(K).offsetCountdownX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),r("form",null,[l[30]||(l[30]=g(" 倒计时偏移Y: ",-1)),p(t,{modelValue:d(K).offsetCountdownY,"onUpdate:modelValue":l[10]||(l[10]=e=>d(K).offsetCountdownY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",null,[l[31]||(l[31]=g(" 中文偏移X: ",-1)),p(t,{modelValue:d(K).offsetActionChineseX,"onUpdate:modelValue":l[11]||(l[11]=e=>d(K).offsetActionChineseX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),r("form",null,[l[32]||(l[32]=g(" 中文偏移Y: ",-1)),p(t,{modelValue:d(K).offsetActionChineseY,"onUpdate:modelValue":l[12]||(l[12]=e=>d(K).offsetActionChineseY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",null,[l[33]||(l[33]=g(" ID偏移X: ",-1)),p(t,{modelValue:d(K).offsetActionIDX,"onUpdate:modelValue":l[13]||(l[13]=e=>d(K).offsetActionIDX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),r("form",null,[l[34]||(l[34]=g(" ID偏移Y: ",-1)),p(t,{modelValue:d(K).offsetActionIDY,"onUpdate:modelValue":l[14]||(l[14]=e=>d(K).offsetActionIDY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",null,[l[35]||(l[35]=g(" 倒计时字号(px): ",-1)),p(t,{modelValue:d(K).fontSizeCountDown,"onUpdate:modelValue":l[15]||(l[15]=e=>d(K).fontSizeCountDown=e),min:1,max:100,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",null,[l[36]||(l[36]=g(" 中文字号(px): ",-1)),p(t,{modelValue:d(K).fontSizeActionName,"onUpdate:modelValue":l[16]||(l[16]=e=>d(K).fontSizeActionName=e),min:1,max:100,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",_,[l[37]||(l[37]=g(" 字体: ",-1)),p(s,{modelValue:d(K).fontFamily,"onUpdate:modelValue":l[17]||(l[17]=e=>d(K).fontFamily=e),size:"small",clearable:"",onClear:l[18]||(l[18]=e=>d(K).fontFamily="SmartisanHei")},null,8,["modelValue"])]),r("form",F,[p(b,{modelValue:d(K).targetKey,"onUpdate:modelValue":l[19]||(l[19]=e=>d(K).targetKey=e),placeholder:"Select",size:"small",teleported:!1},{default:i(()=>[(m(),V(C,null,v($,e=>p(w,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),r("form",P,[p(T,{teleported:!1,title:"确定要重置？",onConfirm:ae},{reference:i(()=>[p(S,null,{default:i(()=>[...l[38]||(l[38]=[g("重置全部用户设置",-1)])]),_:1})]),_:1})])]),_:1})]),default:i(()=>[r("div",N,[u(p(q,{style:c({fontFamily:d(K).fontFamily})},{default:i(()=>[r("div",{style:c({fontSize:`${d(K).fontSizeCountDown}px`}),class:"countdown"},h(Math.max(((d(E).targetCast?.overTime??1)-d(le)-d(te))/1e3,0).toFixed(2)),5),p(M,{percentage:Math.min((d(le)-(d(E).targetCast?.startTime??1)+d(te))/(d(E).targetCast?.castTime??1)*100,100),"stroke-width":8,indeterminate:!1,"show-text":!1,color:"#fbfff9",class:"progress"},null,8,["percentage"]),r("div",k,h(d(E).targetCast?.actionId)+"("+h(d(E).targetCast?.actionId.toString(16).toUpperCase())+") ",1),r("div",{style:c({fontSize:`${d(K).fontSizeActionName}px`}),class:"actionChinese"},h(d(E).targetCast?.name),5)]),_:1},8,["style"]),[[f,d(E).targetCast&&d(le)-d(E).targetCast.overTime+d(te)<d(K).keep]])])]),_:1})}}}),[["__scopeId","data-v-bd14ab31"]]);export{E as default};
