import{c as e,_ as o}from"./shared-common-CL93ODao.js";import{d as l,o as a,K as t,x as n,u as s,G as i,h as m,g as u,a as r,b as d,p as f,v as c,f as p,e as h,s as g,t as V,y as C,c as v,r as w,F as x,dr as A}from"./vendor-vue-MSvGQJWD.js";import{q as I,v as z}from"./shared-core-Ccgh2bTR.js";import{a as D}from"./cactbot-DtpbXwrG.js";import{aM as b,u as S,h as U,k as X,j as Y,E as y,a as T,l as F,n as P,p as _}from"./vendor-element-plus-CsMNiL2J.js";const N={style:{width:"10rem"}},k={class:"noCSS"},$={class:"noCSS"},j={class:"container"},K={class:"actionID"},M=o(l({__name:"castingToChinese",setup(o){A(e=>({v3dce34d0:p(L),e8323f28:p(B),e8323f26:p(J),v4cfbac34:p(G),c5f32484:p(W),a96db1f4:p(O),a96db1f2:p(Q),v9b138cec:p(Z),v7daadfe2:p(R),v7daadfe3:p(ee),v6139d578:p(H),v381cfb06:p(oe),v381cfb07:p(le)})),a(()=>{I()});class l{name;startTime;castTime;overTime;actionId;constructor(e){this.name=function(e){const o=Number.parseInt(e[4],16),l=e[2],a=e[5];return z(o)||(l.startsWith("4")&&a.includes("unknown"),a)}(e),this.startTime=Date.now(),this.castTime=1e3*Number(e[8]),this.overTime=this.startTime+this.castTime,this.actionId=Number.parseInt(e[4],16)}}const M=t({targetCast:void 0}),q=[{value:"Target",label:"当前目标"},{value:"Focus",label:"焦点目标"}],E=n({width:265,showCountdown:!1,showProgress:!1,showActionChinese:!0,showActionID:!1,offsetProgressX:0,offsetProgressY:-22,offsetCountdownX:240,offsetCountdownY:-5,offsetActionChineseX:275,offsetActionChineseY:-45,offsetActionIDX:10,offsetActionIDY:-5,ping:80,keep:100,fontSizeCountDown:17,fontSizeActionName:20,fontFamily:"SmartisanHei",targetKey:"Target"});s("castingToChineseFix",E,localStorage,{mergeDefaults:!0});const H=i(()=>`${E.value.width}px`),L=i(()=>E.value.showCountdown?1:0),G=i(()=>E.value.showProgress?1:0),W=i(()=>E.value.showActionChinese?1:0),Z=i(()=>E.value.showActionID?1:0),B=i(()=>`${E.value.offsetCountdownX}px`),J=i(()=>-1*E.value.offsetCountdownY+"px"),O=i(()=>`${E.value.offsetActionChineseX}px`),Q=i(()=>-1*E.value.offsetActionChineseY+"px"),R=i(()=>`${E.value.offsetActionIDX}px`),ee=i(()=>-1*E.value.offsetActionIDY+"px"),oe=i(()=>`${E.value.offsetProgressX}px`),le=i(()=>-1*E.value.offsetProgressY+"px"),ae=new Map,te=n(0),ne=E.value.ping;function se(){localStorage.removeItem("castingToChinese"),location.reload()}return D("EnmityTargetData",e=>{M.targetCast=ae.get(e[E.value.targetKey]?.ID)}),D("LogLine",e=>{"20"===e.line[0]?ae.set(Number.parseInt(e.line[2],16),new l(e.line)):"23"===e.line[0]&&ae.delete(Number.parseInt(e.line[2],16))}),D("ChangeZone",()=>ae.clear()),requestAnimationFrame(function e(){te.value=Date.now(),requestAnimationFrame(e)}),(o,l)=>{const a=U,t=X,n=Y,s=T,i=y,A=P,I=F,z=_,D=b,H=S,L=e;return r(),m(L,null,{readme:u(()=>[h(z,{class:"settings"},{default:u(()=>[d("form",null,[l[20]||(l[20]=C(" 宽度: ",-1)),h(a,{modelValue:p(E).width,"onUpdate:modelValue":l[0]||(l[0]=e=>p(E).width=e),min:20,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),d("form",null,[l[21]||(l[21]=C("显示倒计时: ",-1)),h(t,{modelValue:p(E).showCountdown,"onUpdate:modelValue":l[1]||(l[1]=e=>p(E).showCountdown=e)},null,8,["modelValue"])]),d("form",null,[l[22]||(l[22]=C("显示进度条: ",-1)),h(t,{modelValue:p(E).showProgress,"onUpdate:modelValue":l[2]||(l[2]=e=>p(E).showProgress=e)},null,8,["modelValue"])]),d("form",null,[l[23]||(l[23]=C(" 显示中文: ",-1)),h(t,{modelValue:p(E).showActionChinese,"onUpdate:modelValue":l[3]||(l[3]=e=>p(E).showActionChinese=e)},null,8,["modelValue"])]),d("form",null,[l[24]||(l[24]=C("显示ID: ",-1)),h(t,{modelValue:p(E).showActionID,"onUpdate:modelValue":l[4]||(l[4]=e=>p(E).showActionID=e)},null,8,["modelValue"])]),d("form",null,[l[25]||(l[25]=C(" 延迟(ms): ",-1)),h(a,{modelValue:p(E).ping,"onUpdate:modelValue":l[5]||(l[5]=e=>p(E).ping=e),min:0,max:1e4,size:"small","controls-position":"right"},null,8,["modelValue"])]),d("form",null,[l[26]||(l[26]=C(" 保留(ms): ",-1)),h(a,{modelValue:p(E).keep,"onUpdate:modelValue":l[6]||(l[6]=e=>p(E).keep=e),min:0,max:1e5,size:"small","controls-position":"right"},null,8,["modelValue"])]),d("form",null,[l[27]||(l[27]=C(" 进度条偏移X: ",-1)),h(a,{modelValue:p(E).offsetProgressX,"onUpdate:modelValue":l[7]||(l[7]=e=>p(E).offsetProgressX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),d("form",null,[l[28]||(l[28]=C(" 进度条偏移Y: ",-1)),h(a,{modelValue:p(E).offsetProgressY,"onUpdate:modelValue":l[8]||(l[8]=e=>p(E).offsetProgressY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),d("form",null,[l[29]||(l[29]=C(" 倒计时偏移X: ",-1)),h(a,{modelValue:p(E).offsetCountdownX,"onUpdate:modelValue":l[9]||(l[9]=e=>p(E).offsetCountdownX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),d("form",null,[l[30]||(l[30]=C(" 倒计时偏移Y: ",-1)),h(a,{modelValue:p(E).offsetCountdownY,"onUpdate:modelValue":l[10]||(l[10]=e=>p(E).offsetCountdownY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),d("form",null,[l[31]||(l[31]=C(" 中文偏移X: ",-1)),h(a,{modelValue:p(E).offsetActionChineseX,"onUpdate:modelValue":l[11]||(l[11]=e=>p(E).offsetActionChineseX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),d("form",null,[l[32]||(l[32]=C(" 中文偏移Y: ",-1)),h(a,{modelValue:p(E).offsetActionChineseY,"onUpdate:modelValue":l[12]||(l[12]=e=>p(E).offsetActionChineseY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),d("form",null,[l[33]||(l[33]=C(" ID偏移X: ",-1)),h(a,{modelValue:p(E).offsetActionIDX,"onUpdate:modelValue":l[13]||(l[13]=e=>p(E).offsetActionIDX=e),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),d("form",null,[l[34]||(l[34]=C(" ID偏移Y: ",-1)),h(a,{modelValue:p(E).offsetActionIDY,"onUpdate:modelValue":l[14]||(l[14]=e=>p(E).offsetActionIDY=e),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),d("form",null,[l[35]||(l[35]=C(" 倒计时字号(px): ",-1)),h(a,{modelValue:p(E).fontSizeCountDown,"onUpdate:modelValue":l[15]||(l[15]=e=>p(E).fontSizeCountDown=e),min:1,max:100,size:"small","controls-position":"right"},null,8,["modelValue"])]),d("form",null,[l[36]||(l[36]=C(" 中文字号(px): ",-1)),h(a,{modelValue:p(E).fontSizeActionName,"onUpdate:modelValue":l[16]||(l[16]=e=>p(E).fontSizeActionName=e),min:1,max:100,size:"small","controls-position":"right"},null,8,["modelValue"])]),d("form",N,[l[37]||(l[37]=C(" 字体: ",-1)),h(n,{modelValue:p(E).fontFamily,"onUpdate:modelValue":l[17]||(l[17]=e=>p(E).fontFamily=e),size:"small",clearable:"",onClear:l[18]||(l[18]=e=>p(E).fontFamily="SmartisanHei")},null,8,["modelValue"])]),d("form",k,[h(i,{modelValue:p(E).targetKey,"onUpdate:modelValue":l[19]||(l[19]=e=>p(E).targetKey=e),placeholder:"Select",size:"small",teleported:!1},{default:u(()=>[(r(),v(x,null,w(q,e=>h(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),d("form",$,[h(I,{teleported:!1,title:"确定要重置？",onConfirm:se},{reference:u(()=>[h(A,null,{default:u(()=>[...l[38]||(l[38]=[C("重置全部用户设置",-1)])]),_:1})]),_:1})])]),_:1})]),default:u(()=>[d("div",j,[f(h(H,{style:g({fontFamily:p(E).fontFamily})},{default:u(()=>[d("div",{style:g({fontSize:`${p(E).fontSizeCountDown}px`}),class:"countdown"},V(Math.max(((p(M).targetCast?.overTime??1)-p(te)-p(ne))/1e3,0).toFixed(2)),5),h(D,{percentage:Math.min((p(te)-(p(M).targetCast?.startTime??1)+p(ne))/(p(M).targetCast?.castTime??1)*100,100),"stroke-width":8,indeterminate:!1,"show-text":!1,color:"#fbfff9",class:"progress"},null,8,["percentage"]),d("div",K,V(p(M).targetCast?.actionId)+"("+V(p(M).targetCast?.actionId.toString(16).toUpperCase())+") ",1),d("div",{style:g({fontSize:`${p(E).fontSizeActionName}px`}),class:"actionChinese"},V(p(M).targetCast?.name),5)]),_:1},8,["style"]),[[c,p(M).targetCast&&p(te)-p(M).targetCast.overTime+p(ne)<p(E).keep]])])]),_:1})}}}),[["__scopeId","data-v-ca770284"]]);export{M as default};
