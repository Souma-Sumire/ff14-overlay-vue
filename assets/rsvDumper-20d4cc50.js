import"./index-62ebc3b8.js";/* empty css                   *//* empty css                        *//* empty css                   *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css               *//* empty css                    */import{d as e}from"./index-79cf91f5.js";import{T as t,z as o,h as l,K as s,y as a,P as r}from"./element-plus-e8032da7.js";import{t as n,r as i,v as u,x as p,A as c,M as d,D as m,E as f,J as x,K as h}from"./vue-vendor-f82d765d.js";import{_ as v}from"./_plugin-vue_export-helper-6a8c15be.js";const g={class:"p-6 bg-gray-900 min-h-screen text-gray-200"},_={class:"bg-black text-green-400 p-3 rounded text-xs overflow-auto"},b=v(n({__name:"rsvDumper",setup(n){e();const v=i([]),b=i(!1),j=i("");async function w(e){const t=e.raw,o=(await t.text()).split(/\r?\n/);v.value=[];for(const l of o){const e=l.split("|");if("252"===e[0]){const t=y(e.slice(3,-2));D(t,(new TextEncoder).encode("_rsv_"))&&v.value.push(V(t.slice(30)))}}}function y(e){const t=[];for(const o of e){const e=Number.parseInt(o,16)>>>0;t.push(255&e,e>>8&255,e>>16&255,e>>24&255)}return new Uint8Array(t)}function D(e,t){const o=e.length-t.length;for(let l=0;l<=o;l++){let o=!0;for(let s=0;s<t.length;s++)if(e[l+s]!==t[s]){o=!1;break}if(o)return!0}return!1}function V(e){return{str1:k(e.slice(2)),str2:k(e.slice(50)),hexDump:C(e)}}function k(e){const t=e.indexOf(0),o=-1!==t?e.slice(0,t):e;return new TextDecoder("utf-8").decode(o)}function C(e,t=16){const o="0123456789ABCDEF",l=[];for(let s=0;s<e.length;s+=t){let a="",r="";for(let l=0;l<t;l++)if(s+l<e.length){const t=e[s+l];a+=`${o[t>>4]+o[15&t]} `,r+=t>=32&&t<127?String.fromCharCode(t):"."}else a+="   ",r+=" ";l.push(`${a} ${r}`)}return l.join("\n")}return(e,n)=>{const i=t,y=r,D=o,V=l,k=a,C=s;return p(),u("div",g,[n[3]||(n[3]=c("h1",{class:"text-2xl font-bold mb-4 text-white"}," FFXIV RSV Dumper ",-1)),d(i,{drag:"",action:"","auto-upload":!1,"show-file-list":!1,accept:".log,.txt",class:"upload-box",onChange:w},{default:f(()=>n[1]||(n[1]=[c("i",{class:"el-icon-upload"},null,-1),c("div",{class:"el-upload__text"},[x(" 拖拽日志文件到此处或 "),c("em",null,"点击上传")],-1)])),_:1,__:[1]}),v.value.length?(p(),m(k,{key:1,data:v.value,stripe:"",style:{width:"100%","margin-top":"20px"},border:""},{default:f(()=>[d(D,{prop:"str1",label:"RSV Data 1",width:"400"}),d(D,{prop:"str2",label:"RSV Data 2"}),d(D,{label:"操作",width:"150"},{default:f(e=>[d(V,{size:"small",type:"primary",onClick:t=>{return o=e.row,j.value=o.hexDump,void(b.value=!0);var o}},{default:f(()=>n[2]||(n[2]=[x(" 查看 HexDump ")])),_:2,__:[2]},1032,["onClick"])]),_:1})]),_:1},8,["data"])):(p(),m(y,{key:0,description:"请上传 act.log 文件",class:"mt-6"})),d(C,{modelValue:b.value,"onUpdate:modelValue":n[0]||(n[0]=e=>b.value=e),title:"HexDump 原始数据",width:"50%","append-to-body":!0},{default:f(()=>[c("pre",_,h(j.value)+"\n      ",1)]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-2c28463a"]]);export{b as default};
