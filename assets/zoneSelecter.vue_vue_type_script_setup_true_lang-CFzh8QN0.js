import{d as e,M as l,S as a,b as t,a4 as s,a5 as n,_ as o,g as i,c as r,o as d,B as c,j as u,u as p,a6 as v,w as h,a as f,H as m,q as y,T as g,F as b,a1 as k,a7 as C,a8 as x,r as S,l as N,e as w,t as T,N as $,O as E,a9 as _,aa as L,Y as V,ab as z,ac as j,K as D,ad as B,ae as R,af as P,P as F,f as A,y as O,ag as M,h as q,ah as I,ai as H,aj as U,ak as K,W,al as Z,am as Y,an as G,Q,ao as X,$ as J,ap as ee,aq as le,k as ae,a0 as te,v as se,p as ne,ar as oe,m as ie,as as re,at as de,au as ce,av as ue,aw as pe,ax as ve,x as he,a2 as fe,L as me,ay as ye,X as ge,az as be}from"./index-DKU4lcjT.js";import{P as ke,i as Ce,a as xe}from"./vnode-C37NQbeo.js";/* empty css                 */import{u as Se,c as Ne,a as we,b as Te,E as $e}from"./el-popper-DAr2nR-X.js";/* empty css               */import{E as Ee}from"./el-checkbox-8rGWtH30.js";import{E as _e}from"./el-radio-DnF3S6mA.js";import{E as Le,C as Ve}from"./el-scrollbar-CrI6zECZ.js";import{d as ze}from"./content_type-uhloenTS.js";import{Z as je}from"./zoneInfo-oVHkj6su.js";import{a as De,b as Be,c as Re,u as Pe}from"./use-form-common-props-D-e9A799.js";import{b as Fe,C as Ae,U as Oe,d as Me}from"./index-DCew35YD.js";import{i as qe,f as Ie,g as He}from"./focus-trap-CjjML8Tw.js";import{s as Ue}from"./scroll-BI9vvW0w.js";import{c as Ke}from"./cloneDeep-phF6pT9w.js";import{E as We}from"./validator-BBlRdJED.js";import{t as Ze,E as Ye}from"./index-BgEKzaPS.js";import{u as Ge,a as Qe}from"./index-DKE7GIqU.js";var Xe=1/0;const Je=Symbol();var el=e({name:"NodeContent",props:{node:{type:Object,required:!0}},setup(e){const o=l("cascader-node"),{renderLabelFn:i}=a(Je),{node:r}=e,{data:d,label:c}=r,u=()=>{const e=null==i?void 0:i({node:r,data:d});return(s(l=e)?l.every(({type:e})=>e===n):(null==l?void 0:l.type)===n)?c:null!=e?e:c;var l};return()=>t("span",{class:o.e("label")},[u()])}});const ll=e({name:"ElCascaderNode"});var al=o(e({...ll,props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:s}){const n=e,o=a(Je),x=l("cascader-node"),S=i(()=>o.isHoverMenu),N=i(()=>o.config.multiple),w=i(()=>o.config.checkStrictly),T=i(()=>o.config.showPrefix),$=i(()=>{var e;return null==(e=o.checkedNodes[0])?void 0:e.uid}),E=i(()=>n.node.isDisabled),_=i(()=>n.node.isLeaf),L=i(()=>w.value&&!_.value||!E.value),V=i(()=>j(o.expandingNode)),z=i(()=>w.value&&o.checkedNodes.some(j)),j=e=>{var l;const{level:a,uid:t}=n.node;return(null==(l=null==e?void 0:e.pathNodes[a-1])?void 0:l.uid)===t},D=()=>{V.value||o.expandNode(n.node)},B=e=>{const{node:l}=n;e!==l.checked&&o.handleCheckChange(l,e)},R=()=>{o.lazyLoad(n.node,()=>{_.value||D()})},P=e=>{S.value&&(F(),!_.value&&s("expand",e))},F=()=>{const{node:e}=n;L.value&&!e.loading&&(e.loaded?D():R())},A=()=>{!_.value||E.value||w.value||N.value?(o.config.checkOnClickNode&&(N.value||w.value)||_.value&&o.config.checkOnClickLeaf)&&!E.value?O(!n.node.checked):S.value||F():M(!0)},O=e=>{w.value?(B(e),n.node.loaded&&D()):M(e)},M=e=>{n.node.loaded?(B(e),!w.value&&D()):R()};return(l,a)=>(d(),r("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!p(_),"aria-owns":p(_)?void 0:e.menuId,"aria-expanded":p(V),tabindex:p(L)?-1:void 0,class:y([p(x).b(),p(x).is("selectable",p(w)),p(x).is("active",e.node.checked),p(x).is("disabled",!p(L)),p(V)&&"in-active-path",p(z)&&"in-checked-path"]),onMouseenter:P,onFocus:P,onClick:A},[c(" prefix "),p(N)&&p(T)?(d(),u(p(Ee),{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:p(E),onClick:v(()=>{},["stop"]),"onUpdate:modelValue":O},null,8,["model-value","indeterminate","disabled","onClick"])):p(w)&&p(T)?(d(),u(p(_e),{key:1,"model-value":p($),label:e.node.uid,disabled:p(E),"onUpdate:modelValue":O,onClick:v(()=>{},["stop"])},{default:h(()=>[c("\n        Add an empty element to avoid render label,\n        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485\n      "),f("span")]),_:1},8,["model-value","label","disabled","onClick"])):p(_)&&e.node.checked?(d(),u(p(g),{key:2,class:y(p(x).e("prefix"))},{default:h(()=>[t(p(m))]),_:1},8,["class"])):c("v-if",!0),c(" content "),t(p(el),{node:e.node},null,8,["node"]),c(" postfix "),p(_)?c("v-if",!0):(d(),r(b,{key:3},[e.node.loading?(d(),u(p(g),{key:0,class:y([p(x).is("loading"),p(x).e("postfix")])},{default:h(()=>[t(p(k))]),_:1},8,["class"])):(d(),u(p(g),{key:1,class:y(["arrow-right",p(x).e("postfix")])},{default:h(()=>[t(p(C))]),_:1},8,["class"]))],64))],42,["id","aria-haspopup","aria-owns","aria-expanded","tabindex"]))}}),[["__file","node.vue"]]);const tl=e({name:"ElCascaderMenu"});var sl=o(e({...tl,props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const s=e,n=E(),o=l("cascader-menu"),{t:v}=x(),f=De();let m,C;const _=a(Je),L=S(),V=i(()=>!s.nodes.length),z=i(()=>!_.initialLoaded),j=i(()=>`${f.value}-${s.index}`),D=e=>{m=e.target},B=e=>{if(_.isHoverMenu&&m&&L.value)if(m.contains(e.target)){R();const l=n.vnode.el,{left:a}=l.getBoundingClientRect(),{offsetWidth:t,offsetHeight:s}=l,o=e.clientX-a,i=m.offsetTop,r=i+m.offsetHeight;L.value.innerHTML=`\n          <path style="pointer-events: auto;" fill="transparent" d="M${o} ${i} L${t} 0 V${i} Z" />\n          <path style="pointer-events: auto;" fill="transparent" d="M${o} ${r} L${t} ${s} V${r} Z" />\n        `}else C||(C=window.setTimeout(P,_.config.hoverThreshold))},R=()=>{C&&(clearTimeout(C),C=void 0)},P=()=>{L.value&&(L.value.innerHTML="",R())};return(l,a)=>(d(),u(p(Le),{key:p(j),tag:"ul",role:"menu",class:y(p(o).b()),"wrap-class":p(o).e("wrap"),"view-class":[p(o).e("list"),p(o).is("empty",p(V))],onMousemove:B,onMouseleave:P},{default:h(()=>{var a;return[(d(!0),r(b,null,N(e.nodes,e=>(d(),u(al,{key:e.uid,node:e,"menu-id":p(j),onExpand:D},null,8,["node","menu-id"]))),128)),p(z)?(d(),r("div",{key:0,class:y(p(o).e("empty-text"))},[t(p(g),{size:"14",class:y(p(o).is("loading"))},{default:h(()=>[t(p(k))]),_:1},8,["class"]),w(" "+T(p(v)("el.cascader.loading")),1)],2)):p(V)?(d(),r("div",{key:1,class:y(p(o).e("empty-text"))},[$(l.$slots,"empty",{},()=>[w(T(p(v)("el.cascader.noData")),1)])],2)):(null==(a=p(_))?void 0:a.isHoverMenu)?(d(),r(b,{key:2},[c(" eslint-disable-next-line vue/html-self-closing "),(d(),r("svg",{ref_key:"hoverZone",ref:L,class:y(p(o).e("hover-zone"))},null,2))],2112)):c("v-if",!0)]}),_:3},8,["class","wrap-class","view-class"]))}}),[["__file","menu.vue"]]);let nl=0;class ol{constructor(e,l,a,t=!1){this.data=e,this.config=l,this.parent=a,this.root=t,this.uid=nl++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:s,label:n,children:o}=l,i=e[o],r=(e=>{const l=[e];let{parent:a}=e;for(;a;)l.unshift(a),a=a.parent;return l})(this);this.level=t?0:a?a.level+1:1,this.value=e[s],this.label=e[n],this.pathNodes=r,this.pathValues=r.map(e=>e.value),this.pathLabels=r.map(e=>e.label),this.childrenData=i,this.children=(i||[]).map(e=>new ol(e,l,this)),this.loaded=!l.lazy||this.isLeaf||!_(i),this.text=""}get isDisabled(){const{data:e,parent:l,config:a}=this,{disabled:t,checkStrictly:s}=a;return(L(t)?t(e,this):!!e[t])||!s&&!!(null==l?void 0:l.isDisabled)}get isLeaf(){const{data:e,config:l,childrenData:a,loaded:t}=this,{lazy:n,leaf:o}=l,i=L(o)?o(e,this):e[o];return V(i)?!(n&&!t)&&!(s(a)&&a.length):!!i}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(e){const{childrenData:l,children:a}=this,t=new ol(e,this.config,this);return s(l)?l.push(e):this.childrenData=[e],a.push(t),t}calcText(e,l){const a=e?this.pathLabels.join(l):this.label;return this.text=a,a}broadcast(e){this.children.forEach(l=>{var a;l&&(l.broadcast(e),null==(a=l.onParentCheck)||a.call(l,e))})}emit(){var e;const{parent:l}=this;l&&(null==(e=l.onChildCheck)||e.call(l),l.emit())}onParentCheck(e){this.isDisabled||this.setCheckState(e)}onChildCheck(){const{children:e}=this,l=e.filter(e=>!e.isDisabled),a=!!l.length&&l.every(e=>e.checked);this.setCheckState(a)}setCheckState(e){const l=this.children.length,a=this.children.reduce((e,l)=>e+(l.checked?1:l.indeterminate?.5:0),0);this.checked=this.loaded&&this.children.filter(e=>!e.isDisabled).every(e=>e.loaded&&e.checked)&&e,this.indeterminate=this.loaded&&a!==l&&a>0}doCheck(e){if(this.checked===e)return;const{checkStrictly:l,multiple:a}=this.config;l||!a?this.checked=e:(this.broadcast(e),this.setCheckState(e),this.emit())}}const il=(e,l)=>e.reduce((e,a)=>(a.isLeaf?e.push(a):(!l&&e.push(a),e=e.concat(il(a.children,l))),e),[]);class rl{constructor(e,l){this.config=l;const a=(e||[]).map(e=>new ol(e,this.config));this.nodes=a,this.allNodes=il(a,!1),this.leafNodes=il(a,!0)}getNodes(){return this.nodes}getFlattedNodes(e){return e?this.leafNodes:this.allNodes}appendNode(e,l){const a=l?l.appendChild(e):new ol(e,this.config);l||this.nodes.push(a),this.appendAllNodesAndLeafNodes(a)}appendNodes(e,l){e.length>0?e.forEach(e=>this.appendNode(e,l)):l&&l.isLeaf&&this.leafNodes.push(l)}appendAllNodesAndLeafNodes(e){this.allNodes.push(e),e.isLeaf&&this.leafNodes.push(e),e.children&&e.children.forEach(e=>{this.appendAllNodesAndLeafNodes(e)})}getNodeByValue(e,l=!1){if(z(e))return null;return this.getFlattedNodes(l).find(l=>j(l.value,e)||j(l.pathValues,e))||null}getSameNode(e){if(!e)return null;return this.getFlattedNodes(!1).find(({value:l,level:a})=>j(e.value,l)&&e.level===a)||null}}const dl=D({modelValue:{type:B([Number,String,Array,Object])},options:{type:B(Array),default:()=>[]},props:{type:B(Object),default:()=>({})}}),cl={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:R,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500,checkOnClickNode:!1,checkOnClickLeaf:!0,showPrefix:!0},ul=D({...dl,border:{type:Boolean,default:!0},renderLabel:{type:Function}}),pl=e=>!0,vl={[Oe]:pl,[Ae]:pl,close:()=>!0,"expand-change":e=>e},hl=e=>{if(!e)return 0;const l=e.id.split("-");return Number(l[l.length-2])},fl=e({name:"ElCascaderPanel",inheritAttrs:!1});const ml=W(o(e({...fl,props:ul,emits:vl,setup(e,{expose:a,emit:t}){const s=e;let n=!1;const o=l("cascader"),c=(e=>i(()=>({...cl,...e.props})))(s),v=P();let f;const m=S(!0),g=S(!1),k=S([]),C=S(),x=S([]),w=S(),T=S([]),E=i(()=>"hover"===c.value.expandTrigger),L=i(()=>s.renderLabel||v.default),V=()=>{const{options:e}=s,l=c.value;n=!1,f=new rl(e,l),x.value=[f.getNodes()],l.lazy&&_(s.options)?(m.value=!1,z(void 0,e=>{e&&(f=new rl(e,l),x.value=[f.getNodes()]),m.value=!0,G(!1,!0)})):G(!1,!0)},z=(e,l)=>{const a=c.value;(e=e||new ol({},a,void 0,!0)).loading=!0;a.lazyLoad(e,a=>{const t=e,s=t.root?null:t;t.loading=!1,t.loaded=!0,t.childrenData=t.childrenData||[],a&&(null==f||f.appendNodes(a,s)),a&&(null==l||l(a)),0===e.level&&(g.value=!0)},()=>{e.loading=!1,e.loaded=!1,0===e.level&&(m.value=!0)})},D=(e,l)=>{var a;const{level:s}=e,n=x.value.slice(0,s);let o;e.isLeaf?o=e.pathNodes[s-2]:(o=e,n.push(e.children)),(null==(a=w.value)?void 0:a.uid)!==(null==o?void 0:o.uid)&&(w.value=e,x.value=n,!l&&t("expand-change",(null==e?void 0:e.pathValues)||[]))},B=(e,l,a=!0)=>{const{checkStrictly:s,multiple:o}=c.value,i=T.value[0];n=!0,!o&&(null==i||i.doCheck(!1)),e.doCheck(l),Y(),a&&!o&&!s&&t("close"),!a&&!o&&R(e)},R=e=>{e&&(e=e.parent,R(e),e&&D(e))},W=e=>null==f?void 0:f.getFlattedNodes(e),Z=e=>{var l;return null==(l=W(e))?void 0:l.filter(({checked:e})=>!1!==e)},Y=()=>{var e;const{checkStrictly:l,multiple:a}=c.value,t=((e,l)=>{const a=l.slice(0),t=a.map(e=>e.uid),s=e.reduce((e,l)=>{const s=t.indexOf(l.uid);return s>-1&&(e.push(l),a.splice(s,1),t.splice(s,1)),e},[]);return s.push(...a),s})(T.value,Z(!l)),s=t.map(e=>e.valueByOption);T.value=t,C.value=a?s:null!=(e=s[0])?e:null},G=(e=!1,l=!1)=>{const{modelValue:a}=s,{lazy:t,multiple:o,checkStrictly:i}=c.value,r=!i;var d;if(m.value&&!n&&(l||!j(a,C.value)))if(t&&!e){const e=Se(null!=(d=Ne(a))&&d.length?Fe(d,Xe):[]).map(e=>null==f?void 0:f.getNodeByValue(e)).filter(e=>!!e&&!e.loaded&&!e.loading);e.length?e.forEach(e=>{z(e,()=>G(!1,l))}):G(!0,l)}else{const e=o?Ne(a):[a],t=Se(e.map(e=>null==f?void 0:f.getNodeByValue(e,r)));Q(t,l),C.value=Ke(null!=a?a:void 0)}},Q=(e,l=!0)=>{const{checkStrictly:a}=c.value,t=T.value,s=e.filter(e=>!!e&&(a||e.isLeaf)),n=null==f?void 0:f.getSameNode(w.value),o=l&&n||s[0];o?o.pathNodes.forEach(e=>D(e,!0)):w.value=void 0,t.forEach(e=>e.doCheck(!1)),A(s).forEach(e=>e.doCheck(!0)),T.value=s,I(X)},X=()=>{H&&k.value.forEach(e=>{const l=null==e?void 0:e.$el;if(l){const e=l.querySelector(`.${o.namespace.value}-scrollbar__wrap`),a=l.querySelector(`.${o.b("node")}.${o.is("active")}:last-child`)||l.querySelector(`.${o.b("node")}.in-active-path`);Ue(e,a)}})},J=e=>{const l=e.target,a=U(e);switch(a){case K.up:case K.down:{e.preventDefault();const t=a===K.up?-1:1;Ie(He(l,t,`.${o.b("node")}[tabindex="-1"]`));break}case K.left:{e.preventDefault();const a=k.value[hl(l)-1],t=null==a?void 0:a.$el.querySelector(`.${o.b("node")}[aria-expanded="true"]`);Ie(t);break}case K.right:{e.preventDefault();const a=k.value[hl(l)+1],t=null==a?void 0:a.$el.querySelector(`.${o.b("node")}[tabindex="-1"]`);Ie(t);break}case K.enter:case K.numpadEnter:(e=>{if(!e)return;const l=e.querySelector("input");l?l.click():qe(e)&&e.click()})(l)}};F(Je,A({config:c,expandingNode:w,checkedNodes:T,isHoverMenu:E,initialLoaded:m,renderLabelFn:L,lazyLoad:z,expandNode:D,handleCheckChange:B})),O(c,(e,l)=>{j(e,l)||V()},{immediate:!0}),O(()=>s.options,V,{deep:!0}),O(()=>s.modelValue,()=>{n=!1,G()},{deep:!0}),O(()=>C.value,e=>{j(e,s.modelValue)||(t(Oe,e),t(Ae,e))});return M(()=>k.value=[]),q(()=>!_(s.modelValue)&&G()),a({menuList:k,menus:x,checkedNodes:T,handleKeyDown:J,handleCheckChange:B,getFlattedNodes:W,getCheckedNodes:Z,clearCheckedNodes:()=>{T.value.forEach(e=>e.doCheck(!1)),Y(),x.value=x.value.slice(0,1),w.value=void 0,t("expand-change",[])},calculateCheckedValue:Y,scrollToExpandingNode:X,loadLazyRootNodes:()=>{g.value||V()}}),(e,l)=>(d(),r("div",{class:y([p(o).b("panel"),p(o).is("bordered",e.border)]),onKeydown:J},[(d(!0),r(b,null,N(x.value,(l,a)=>(d(),u(sl,{key:a,ref_for:!0,ref:e=>k.value[a]=e,index:a,nodes:[...l]},{empty:h(()=>[$(e.$slots,"empty")]),_:2},1032,["index","nodes"]))),128))],34))}}),[["__file","index.vue"]])),yl=D({...dl,size:X,placeholder:String,disabled:Boolean,clearable:Boolean,clearIcon:{type:Q,default:G},filterable:Boolean,filterMethod:{type:B(Function),default:(e,l)=>e.text.includes(l)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:Boolean,maxCollapseTagsTooltipHeight:{type:[String,Number]},debounce:{type:Number,default:300},beforeFilter:{type:B(Function),default:()=>!0},placement:{type:B(String),values:Te,default:"bottom-start"},fallbackPlacements:{type:B(Array),default:["bottom-start","bottom","top-start","top","right","left"]},popperClass:we.popperClass,popperStyle:we.popperStyle,teleported:we.teleported,effect:{type:B(String),default:"light"},tagType:{...Ze.type,default:"info"},tagEffect:{...Ze.effect,default:"light"},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},showCheckedStrategy:{type:String,values:["parent","child"],default:"child"},checkOnClickNode:Boolean,showPrefix:{type:Boolean,default:!0},...Y}),gl=e=>!0,bl={[Oe]:gl,[Ae]:gl,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,visibleChange:e=>Z(e),expandChange:e=>!!e,removeTag:e=>!!e},kl=e({name:"ElCascader"});const Cl=W(o(e({...kl,props:yl,emits:bl,setup(e,{expose:a,emit:s}){const n=e,o={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:e})=>{const{modifiersData:l,placement:a}=e;["right","left","bottom","top"].includes(a)||l.arrow&&(l.arrow.x=35)},requires:["arrow"]}]},k=J();let C=0,w=0;const E=l("cascader"),_=l("input"),{t:L}=x(),{formItem:V}=Be(),z=Re(),{valueOnClear:j}=ee(n),{isComposing:D,handleComposition:B}=Ge({afterComposition(e){var l;const a=null==(l=e.target)?void 0:l.value;gl(a)}}),R=S(),P=S(),F=S(),A=S(),M=S(),W=S(),Z=S(!1),Y=S(!1),G=S(!1),Q=S(""),X=S(""),he=S([]),fe=S([]),me=i(()=>n.props.multiple?n.collapseTags?he.value.slice(0,n.maxCollapseTags):he.value:[]),ye=i(()=>n.props.multiple&&n.collapseTags?he.value.slice(n.maxCollapseTags):[]),ge=i(()=>k.style),be=i(()=>{var e;return null!=(e=n.placeholder)?e:L("el.cascader.placeholder")}),ke=i(()=>X.value||he.value.length>0||D.value?"":be.value),Ce=Pe(),xe=i(()=>"small"===Ce.value?"small":"default"),Se=i(()=>!!n.props.multiple),Ne=i(()=>!n.filterable||Se.value),we=i(()=>Se.value?X.value:Q.value),Te=i(()=>{var e;return(null==(e=M.value)?void 0:e.checkedNodes)||[]}),{wrapperRef:Ee,isFocused:_e,handleBlur:ze}=Qe(F,{disabled:z,beforeBlur(e){var l,a;return(null==(l=R.value)?void 0:l.isFocusInsideContent(e))||(null==(a=P.value)?void 0:a.isFocusInsideContent(e))},afterBlur(){var e;n.validateEvent&&(null==(e=null==V?void 0:V.validate)||e.call(V,"blur").catch(e=>Me()))}}),je=i(()=>!(!n.clearable||z.value||G.value||!Y.value&&!_e.value)&&!!Te.value.length),De=i(()=>{const{showAllLevels:e,separator:l}=n,a=Te.value;return a.length?Se.value?"":a[0].calcText(e,l):""}),Fe=i(()=>(null==V?void 0:V.validateState)||""),qe=i({get:()=>Ke(n.modelValue),set(e){const l=null!=e?e:j.value;s(Oe,l),s(Ae,l),n.validateEvent&&(null==V||V.validate("change").catch(e=>Me()))}}),Ue=i(()=>[E.b(),E.m(Ce.value),E.is("disabled",z.value),k.class]),Ze=i(()=>[_.e("icon"),"icon-arrow-down",E.is("reverse",Z.value)]),Xe=i(()=>E.is("focus",_e.value)),Je=i(()=>{var e,l;return null==(l=null==(e=R.value)?void 0:e.popperRef)?void 0:l.contentRef}),el=e=>{if(_e.value){const l=new FocusEvent("blur",e);ze(l)}ll(!1)},ll=e=>{var l,a,t;z.value||(e=null!=e?e:!Z.value)!==Z.value&&(Z.value=e,null==(a=null==(l=F.value)?void 0:l.input)||a.setAttribute("aria-expanded",`${e}`),e?(al(),I(null==(t=M.value)?void 0:t.scrollToExpandingNode)):n.filterable&&pl(),s("visibleChange",e))},al=()=>{I(()=>{var e;null==(e=R.value)||e.updatePopper()})},tl=()=>{G.value=!1},sl=e=>{var l;const a=e.node;a.doCheck(!1),null==(l=M.value)||l.calculateCheckedValue(),s("removeTag",a.valueByOption)},nl=()=>{var e,l;const{filterMethod:a,showAllLevels:t,separator:s}=n,o=null==(l=null==(e=M.value)?void 0:e.getFlattedNodes(!n.props.checkStrictly))?void 0:l.filter(e=>!e.isDisabled&&(e.calcText(t,s),a(e,we.value)));Se.value&&he.value.forEach(e=>{e.hitState=!1}),G.value=!0,fe.value=o,al()},ol=()=>{var e;let l;l=G.value&&W.value?W.value.$el.querySelector(`.${E.e("suggestion-item")}`):null==(e=M.value)?void 0:e.$el.querySelector(`.${E.b("node")}[tabindex="-1"]`),l&&(l.focus(),!G.value&&l.click())},il=()=>{var e,l;const a=null==(e=F.value)?void 0:e.input,t=A.value,s=null==(l=W.value)?void 0:l.$el;if(H&&a){if(s){s.querySelector(`.${E.e("suggestion-list")}`).style.minWidth=`${a.offsetWidth}px`}if(t){const{offsetHeight:e}=t,l=he.value.length>0?Math.max(e,C)-2+"px":`${C}px`;a.style.height=l,al()}}},rl=e=>{var l;return null==(l=M.value)?void 0:l.getCheckedNodes(e)},dl=e=>{al(),s("expandChange",e)},cl=e=>{if(D.value)return;switch(U(e)){case K.enter:case K.numpadEnter:ll();break;case K.down:ll(!0),I(ol),e.preventDefault();break;case K.esc:!0===Z.value&&(e.preventDefault(),e.stopPropagation(),ll(!1));break;case K.tab:ll(!1)}},ul=()=>{var e;null==(e=M.value)||e.clearCheckedNodes(),!Z.value&&n.filterable&&pl(),ll(!1),s("clear")},pl=()=>{const{value:e}=De;Q.value=e,X.value=e},vl=e=>{const l=e.target,a=U(e);switch(a){case K.up:case K.down:{e.preventDefault();const t=a===K.up?-1:1;Ie(He(l,t,`.${E.e("suggestion-item")}[tabindex="-1"]`));break}case K.enter:case K.numpadEnter:l.click()}},hl=()=>{const e=he.value[he.value.length-1];w=X.value?0:w+1,!e||!w||n.collapseTags&&he.value.length>1||(e.hitState?sl(e):e.hitState=!0)},fl=i(()=>n.debounce),yl=ue(()=>{const{value:e}=we;if(!e)return;const l=n.beforeFilter(e);ve(l)?l.then(nl).catch(()=>{}):!1!==l?nl():tl()},fl),gl=(e,l)=>{!Z.value&&ll(!0),(null==l?void 0:l.isComposing)||(e?yl():tl())},bl=e=>Number.parseFloat(pe(_.cssVarName("input-height"),e).value)-2;return O(G,al),O([Te,z,()=>n.collapseTags,()=>n.maxCollapseTags],()=>{if(!Se.value)return;const e=(()=>{switch(n.showCheckedStrategy){case"child":return Te.value;case"parent":{const e=rl(!1),l=e.map(e=>e.value);return e.filter(e=>!e.parent||!l.includes(e.parent.value))}default:return[]}})(),l=[];e.forEach(e=>l.push((e=>{const{showAllLevels:l,separator:a}=n;return{node:e,key:e.uid,text:e.calcText(l,a),hitState:!1,closable:!z.value&&!e.isDisabled}})(e))),he.value=l}),O(he,()=>{I(()=>il())}),O(Ce,async()=>{await I();const e=F.value.input;C=bl(e)||C,il()}),O(De,pl,{immediate:!0}),O(()=>Z.value,e=>{var l;e&&n.props.lazy&&n.props.lazyLoad&&(null==(l=M.value)||l.loadLazyRootNodes())}),q(()=>{const e=F.value.input,l=bl(e);C=e.offsetHeight||l,le(e,il)}),a({getCheckedNodes:rl,cascaderPanelRef:M,togglePopperVisible:ll,contentRef:Je,presentText:De}),(e,l)=>(d(),u(p($e),{ref_key:"tooltipRef",ref:R,visible:Z.value,teleported:e.teleported,"popper-class":[p(E).e("dropdown"),e.popperClass],"popper-style":e.popperStyle,"popper-options":o,"fallback-placements":e.fallbackPlacements,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:e.placement,transition:`${p(E).namespace.value}-zoom-in-top`,effect:e.effect,pure:"",persistent:e.persistent,onHide:tl},{default:h(()=>[ae((d(),r("div",{ref_key:"wrapperRef",ref:Ee,class:y(p(Ue)),style:ne(p(ge)),onClick:()=>ll(!p(Ne)||void 0),onKeydown:cl,onMouseenter:e=>Y.value=!0,onMouseleave:e=>Y.value=!1},[t(p(We),{ref_key:"inputRef",ref:F,modelValue:Q.value,"onUpdate:modelValue":e=>Q.value=e,placeholder:p(ke),readonly:p(Ne),disabled:p(z),"validate-event":!1,size:p(Ce),class:y(p(Xe)),tabindex:p(Se)&&e.filterable&&!p(z)?-1:void 0,onCompositionstart:p(B),onCompositionupdate:p(B),onCompositionend:p(B),onInput:gl},oe({suffix:h(()=>[p(je)?(d(),u(p(g),{key:"clear",class:y([p(_).e("icon"),"icon-circle-close"]),onClick:v(ul,["stop"])},{default:h(()=>[(d(),u(ie(e.clearIcon)))]),_:1},8,["class","onClick"])):(d(),u(p(g),{key:"arrow-down",class:y(p(Ze)),onClick:v(e=>ll(),["stop"])},{default:h(()=>[t(p(re))]),_:1},8,["class","onClick"]))]),_:2},[e.$slots.prefix?{name:"prefix",fn:h(()=>[$(e.$slots,"prefix")])}:void 0]),1032,["modelValue","onUpdate:modelValue","placeholder","readonly","disabled","size","class","tabindex","onCompositionstart","onCompositionupdate","onCompositionend"]),p(Se)?(d(),r("div",{key:0,ref_key:"tagWrapper",ref:A,class:y([p(E).e("tags"),p(E).is("validate",Boolean(p(Fe)))])},[$(e.$slots,"tag",{data:he.value,deleteTag:sl},()=>[(d(!0),r(b,null,N(p(me),l=>(d(),u(p(Ye),{key:l.key,type:e.tagType,size:p(xe),effect:e.tagEffect,hit:l.hitState,closable:l.closable,"disable-transitions":"",onClose:e=>sl(l)},{default:h(()=>[f("span",null,T(l.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))),128))]),e.collapseTags&&he.value.length>e.maxCollapseTags?(d(),u(p($e),{key:0,ref_key:"tagTooltipRef",ref:P,disabled:Z.value||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom","popper-class":e.popperClass,"popper-style":e.popperStyle,effect:e.effect,persistent:e.persistent},{default:h(()=>[t(p(Ye),{closable:!1,size:p(xe),type:e.tagType,effect:e.tagEffect,"disable-transitions":""},{default:h(()=>[f("span",{class:y(p(E).e("tags-text"))}," + "+T(he.value.length-e.maxCollapseTags),3)]),_:1},8,["size","type","effect"])]),content:h(()=>[t(p(Le),{"max-height":e.maxCollapseTagsTooltipHeight},{default:h(()=>[f("div",{class:y(p(E).e("collapse-tags"))},[(d(!0),r(b,null,N(p(ye),(l,a)=>(d(),r("div",{key:a,class:y(p(E).e("collapse-tag"))},[(d(),u(p(Ye),{key:l.key,class:"in-tooltip",type:e.tagType,size:p(xe),effect:e.tagEffect,hit:l.hitState,closable:l.closable,"disable-transitions":"",onClose:e=>sl(l)},{default:h(()=>[f("span",null,T(l.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))],2))),128))],2)]),_:1},8,["max-height"])]),_:1},8,["disabled","popper-class","popper-style","effect","persistent"])):c("v-if",!0),e.filterable&&!p(z)?ae((d(),r("input",{key:1,"onUpdate:modelValue":e=>X.value=e,type:"text",class:y(p(E).e("search-input")),placeholder:p(De)?"":p(be),onInput:e=>gl(X.value,e),onClick:v(e=>ll(!0),["stop"]),onKeydown:de(hl,["delete"]),onCompositionstart:p(B),onCompositionupdate:p(B),onCompositionend:p(B)},null,42,["onUpdate:modelValue","placeholder","onInput","onClick","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend"])),[[ce,X.value]]):c("v-if",!0)],2)):c("v-if",!0)],46,["onClick","onMouseenter","onMouseleave"])),[[p(Ve),el,p(Je)]])]),content:h(()=>[e.$slots.header?(d(),r("div",{key:0,class:y(p(E).e("header")),onClick:v(()=>{},["stop"])},[$(e.$slots,"header")],10,["onClick"])):c("v-if",!0),ae(t(p(ml),{ref_key:"cascaderPanelRef",ref:M,modelValue:p(qe),"onUpdate:modelValue":e=>te(qe)?qe.value=e:null,options:e.options,props:n.props,border:!1,"render-label":e.$slots.default,onExpandChange:dl,onClose:l=>e.$nextTick(()=>ll(!1))},{empty:h(()=>[$(e.$slots,"empty")]),_:3},8,["modelValue","onUpdate:modelValue","options","props","render-label","onClose"]),[[se,!G.value]]),e.filterable?ae((d(),u(p(Le),{key:1,ref_key:"suggestionPanel",ref:W,tag:"ul",class:y(p(E).e("suggestion-panel")),"view-class":p(E).e("suggestion-list"),onKeydown:vl},{default:h(()=>[fe.value.length?(d(!0),r(b,{key:0},N(fe.value,l=>(d(),r("li",{key:l.uid,class:y([p(E).e("suggestion-item"),p(E).is("checked",l.checked)]),tabindex:-1,onClick:e=>(e=>{var l,a;const{checked:t}=e;Se.value?null==(l=M.value)||l.handleCheckChange(e,!t,!1):(!t&&(null==(a=M.value)||a.handleCheckChange(e,!0,!1)),ll(!1))})(l)},[$(e.$slots,"suggestion-item",{item:l},()=>[f("span",null,T(l.text),1),l.checked?(d(),u(p(g),{key:0},{default:h(()=>[t(p(m))]),_:1})):c("v-if",!0)])],10,["onClick"]))),128)):$(e.$slots,"empty",{key:1},()=>[f("li",{class:y(p(E).e("empty-text"))},T(p(L)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[se,G.value]]):c("v-if",!0),e.$slots.footer?(d(),r("div",{key:2,class:y(p(E).e("footer")),onClick:v(()=>{},["stop"])},[$(e.$slots,"footer")],10,["onClick"])):c("v-if",!0)]),_:3},8,["visible","teleported","popper-class","popper-style","fallback-placements","placement","transition","effect","persistent"]))}}),[["__file","cascader.vue"]])),xl=e({name:"ElSpaceItem",props:D({prefixCls:{type:String}}),setup(e,{slots:a}){const t=l("space"),s=i(()=>`${e.prefixCls||t.b()}__item`);return()=>he("div",{class:s.value},$(a,"default"))}}),Sl={small:8,default:12,large:16};const Nl=W(e({name:"ElSpace",props:D({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:B([String,Object,Array]),default:""},style:{type:B([String,Array,Object]),default:""},alignment:{type:B(String),default:"center"},prefixCls:{type:String},spacer:{type:B([Object,String,Number,Array]),default:null,validator:e=>ye(e)||me(e)||be(e)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:ge,validator:e=>me(e)||s(e)&&2===e.length&&e.every(me)}}),setup(e,{slots:a}){const{classes:o,containerStyle:r,itemStyle:d}=function(e){const a=l("space"),t=i(()=>[a.b(),a.m(e.direction),e.class]),n=S(0),o=S(0),r=i(()=>[e.wrap||e.fill?{flexWrap:"wrap"}:{},{alignItems:e.alignment},{rowGap:`${o.value}px`,columnGap:`${n.value}px`},e.style]),d=i(()=>e.fill?{flexGrow:1,minWidth:`${e.fillRatio}%`}:{});return fe(()=>{const{size:l="small",wrap:a,direction:t,fill:i}=e;if(s(l)){const[e=0,a=0]=l;n.value=e,o.value=a}else{let e;e=me(l)?l:Sl[l||"small"]||Sl.small,(a||i)&&"horizontal"===t?n.value=o.value=e:"horizontal"===t?(n.value=e,o.value=0):(o.value=e,n.value=0)}}),{classes:t,containerStyle:r,itemStyle:d}}(e);function c(l,a="",o=[]){const{prefixCls:i}=e;return l.forEach((e,l)=>{Ce(e)?s(e.children)&&e.children.forEach((e,l)=>{Ce(e)&&s(e.children)?c(e.children,`${a+l}-`,o):ye(e)&&(null==e?void 0:e.type)===n?o.push(e):o.push(t(xl,{style:d.value,prefixCls:i,key:`nested-${a+l}`},{default:()=>[e]},ke.PROPS|ke.STYLE,["style","prefixCls"]))}):xe(e)&&o.push(t(xl,{style:d.value,prefixCls:i,key:`LoopKey${a+l}`},{default:()=>[e]},ke.PROPS|ke.STYLE,["style","prefixCls"]))}),o}return()=>{var l;const{spacer:n,direction:i}=e,u=$(a,"default",{key:0},()=>[]);if(0===(null!=(l=u.children)?l:[]).length)return null;if(s(u.children)){let e=c(u.children);if(n){const l=e.length-1;e=e.reduce((e,a,s)=>{const o=[...e,a];return s!==l&&o.push(t("span",{style:[d.value,"vertical"===i?"width: 100%":null],key:s},[ye(n)?n:w(n,ke.TEXT)],ke.STYLE)),o},[])}return t("div",{class:o.value,style:r.value},e,ke.STYLE|ke.CLASS)}return u.children}}})),wl=[{type:ze.Dungeons,label:"四人迷宫"},{type:ze.Trials,label:"讨伐歼灭战"},{type:ze.Raids,label:"大型任务"},{type:ze.ChaoticAllianceRaid,label:"诛灭战"},{type:ze.UltimateRaids,label:"绝境战"},{type:ze.VCDungeonFinder,label:"多变迷宫"},{type:ze.DeepDungeonExtras,label:"深宫诗想"},{type:ze.DeepDungeons,label:"深层迷宫"},{type:ze.DisciplesOfTheLand,label:"采集/垂钓"},{type:ze.Eureka,label:"尤雷卡"},{type:ze.SaveTheQueen,label:"博兹雅"},{type:ze.OccultCrescent,label:"新月岛"}],Tl=i(()=>{const e=[];return wl.forEach(l=>{l.type===ze.Trials?e.push({label:l.label,value:ze.Trials,children:[{label:"歼殛战",value:"歼殛战",children:[]},{label:"幻巧战",value:"幻巧战",children:[]},{label:"歼灭战",value:"歼灭战",children:[]}]}):l.type===ze.Raids?e.push({label:l.label,value:ze.Raids,children:[{label:"零式",value:"零式",children:[]},{label:"普通",value:"普通",children:[]}]}):e.push({label:l.label,value:l.type,children:[]})}),Object.entries(je).map(([e,l])=>({id:e,...l})).sort((e,l)=>e.exVersion!==l.exVersion?l.exVersion-e.exVersion:e.contentType===ze.Raids&&l.contentType===ze.Raids&&l.name.ja&&e.name.ja?e.name.ja.localeCompare(l.name.ja):Number(e.id)-Number(l.id)).filter(e=>!e.name.en.startsWith("(")&&e.contentType&&wl.some(l=>l.type===e.contentType)).forEach(l=>{const a=l.id,t=`[${+l.exVersion+2}.0] `+(l.name?.cn??`${l.name.en} / ${l.name.ja}`);if(l.contentType===ze.Trials){const s=e.find(e=>e.value===ze.Trials);if(!s)return;let n="歼灭战";l.name.en.includes("(Extreme)")||l.name.ja?.startsWith("極")||l.name.fr?.includes("(extrême)")?n="歼殛战":l.name.en.includes("(Unreal)")&&(n="幻巧战");const o=s.children.find(e=>e.value===n);o&&o.children.push({value:a,label:t})}else if(l.contentType===ze.Raids){const s=e.find(e=>e.value===ze.Raids);if(!s)return;const n=l.name.en.includes("(Savage)")?"零式":"普通",o=s.children.find(e=>e.value===n);o&&o.children.push({value:a,label:t})}else{const s=e.find(e=>e.value===l.contentType);s&&s.children.push({value:a,label:t})}}),e.push({label:"未分类区域",value:"0"}),e.sort((e,l)=>{const a=wl.findIndex(l=>l.label===e.label),t=wl.findIndex(e=>e.label===l.label);return(-1===a?999:a)-(-1===t?999:t)})}),$l=e({__name:"zoneSelecter",props:{selectZone:{type:String,default:"",required:!0},width:{type:String,default:"30em"},size:{type:String,default:"small"},clearable:{type:Boolean,default:!1},placeholder:{type:String,default:"选择区域"}},emits:["update:selectZone"],setup(e,{emit:l}){const a=e,t=l,s=S(a.selectZone);return O(s,e=>t("update:selectZone",e)),O(()=>a.selectZone,e=>s.value=e),(e,l)=>{const t=Cl;return d(),u(t,{placeholder:a.placeholder,modelValue:p(s),"onUpdate:modelValue":l[0]||(l[0]=e=>te(s)?s.value=e:null),options:p(Tl),"show-all-levels":!0,props:{emitPath:!1},style:ne({width:a.width}),size:a.size,filterable:"",clearable:a.clearable},null,8,["placeholder","modelValue","options","style","size","clearable"])}}});export{Nl as E,$l as _};
